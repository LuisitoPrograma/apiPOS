/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 4.1.2
*/

(function(_0x46bba3,_0x4e6f8e){var _0x57cda5=_0x2c8b,_0x2d8b07=_0x46bba3();while(!![]){try{var _0x11127e=parseInt(_0x57cda5(0x16f))/0x1*(-parseInt(_0x57cda5(0x17b))/0x2)+parseInt(_0x57cda5(0x15b))/0x3*(parseInt(_0x57cda5(0x126))/0x4)+-parseInt(_0x57cda5(0x15e))/0x5*(parseInt(_0x57cda5(0x158))/0x6)+parseInt(_0x57cda5(0x177))/0x7+parseInt(_0x57cda5(0x15a))/0x8+-parseInt(_0x57cda5(0x17c))/0x9*(parseInt(_0x57cda5(0x167))/0xa)+-parseInt(_0x57cda5(0x183))/0xb*(-parseInt(_0x57cda5(0x169))/0xc);if(_0x11127e===_0x4e6f8e)break;else _0x2d8b07['push'](_0x2d8b07['shift']());}catch(_0xba4edc){_0x2d8b07['push'](_0x2d8b07['shift']());}}}(_0x7a57,0xd4f83));var _0x19dce9=(function(){var _0x39ff15=!![];return function(_0x594492,_0x261ac3){var _0x16fea2=_0x39ff15?function(){var _0x38817f=_0x2c8b;if(_0x261ac3){var _0x5a07e7=_0x261ac3[_0x38817f(0x15c)](_0x594492,arguments);return _0x261ac3=null,_0x5a07e7;}}:function(){};return _0x39ff15=![],_0x16fea2;};}()),_0x5645ec=_0x19dce9(this,function(){var _0x1c35a7=_0x2c8b;return _0x5645ec['toString']()[_0x1c35a7(0x133)](_0x1c35a7(0x146))[_0x1c35a7(0x160)]()[_0x1c35a7(0x164)](_0x5645ec)['search'](_0x1c35a7(0x146));});_0x5645ec();var _0x44d726=(function(){var _0x2df81b=!![];return function(_0x5715aa,_0xb91186){var _0x47dfcf=_0x2df81b?function(){if(_0xb91186){var _0x57b850=_0xb91186['apply'](_0x5715aa,arguments);return _0xb91186=null,_0x57b850;}}:function(){};return _0x2df81b=![],_0x47dfcf;};}()),_0x35a5b3=_0x44d726(this,function(){var _0x285e57=_0x2c8b,_0x41aaa2=function(){var _0x4c9781=_0x2c8b,_0x562d98;try{_0x562d98=Function(_0x4c9781(0x175)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x4ef3c2){_0x562d98=window;}return _0x562d98;},_0x51fad4=_0x41aaa2(),_0x49a46d=_0x51fad4['console']=_0x51fad4[_0x285e57(0x11e)]||{},_0x19e6b2=[_0x285e57(0x127),'warn','info',_0x285e57(0x17a),'exception','table',_0x285e57(0x142)];for(var _0x293af0=0x0;_0x293af0<_0x19e6b2['length'];_0x293af0++){var _0x3063a1=_0x44d726[_0x285e57(0x164)]['prototype']['bind'](_0x44d726),_0xbd3c33=_0x19e6b2[_0x293af0],_0x13178c=_0x49a46d[_0xbd3c33]||_0x3063a1;_0x3063a1['__proto__']=_0x44d726[_0x285e57(0x16e)](_0x44d726),_0x3063a1['toString']=_0x13178c['toString'][_0x285e57(0x16e)](_0x13178c),_0x49a46d[_0xbd3c33]=_0x3063a1;}});_0x35a5b3();var BOOLEAN_PERMS=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0xa,0xb,0xd,0xe,0xf,0x10,0x11,0x13,0x14];async function apiERPupdateUsersOnline(_0x17bf7b,_0x3c6563){var _0x1e8c34=_0x2c8b;if(!isOnline())return console[_0x1e8c34(0x127)]('Error\x20Network.'),Promise['reject']('Error\x20Network.');const _0x20f3b6={'setAuthToken':_0x17bf7b,'setUsers':_0x3c6563};return fetch(_0x1e8c34(0x15f),{'method':'POST','headers':{'Content-Type':_0x1e8c34(0x179)},'body':JSON[_0x1e8c34(0x14c)](_0x20f3b6)})[_0x1e8c34(0x185)](_0x2095b9=>{var _0x2e9acb=_0x1e8c34;if(!_0x2095b9['ok'])throw new Error('Error\x20Sync:\x20'+_0x2095b9[_0x2e9acb(0x181)]);return _0x2095b9['json']();})['then'](_0x2578fe=>{var _0x5c4f56=_0x1e8c34;if(!_0x2578fe[_0x5c4f56(0x11f)])throw new Error(_0x2578fe[_0x5c4f56(0x173)]||_0x5c4f56(0x155));return console[_0x5c4f56(0x127)](_0x5c4f56(0x144)),_0x2578fe;})['catch'](_0x565573=>{var _0x135f28=_0x1e8c34;console['error'](_0x135f28(0x124),_0x565573);throw _0x565573;});}function _0x2c8b(_0x51dbd7,_0x362b5b){var _0x18a308=_0x7a57();return _0x2c8b=function(_0x35a5b3,_0x44d726){_0x35a5b3=_0x35a5b3-0x11c;var _0x42c8a6=_0x18a308[_0x35a5b3];return _0x42c8a6;},_0x2c8b(_0x51dbd7,_0x362b5b);}async function apiERPsyncUsers(){var _0x3385ae=_0x2c8b;isLoggedIn(company)&&(isOnline()&&await apiERPupdateUsersOnline(company[0x0][_0x3385ae(0x161)],company[0x0][_0x3385ae(0x172)]));}function generatePermissionsPanel(_0x4fde9f){var _0x33c9fc=_0x2c8b,_0xcfea39=document['getElementById'](_0x33c9fc(0x14e));_0xcfea39[_0x33c9fc(0x141)]='';var _0x16409d=_0x4fde9f[0x0]&&_0x4fde9f[0x0]['setUsers']||[],_0x4cc283=_0x4fde9f[0x0]&&_0x4fde9f[0x0][_0x33c9fc(0x132)]||[];for(var _0x21a9d2=0x0;_0x21a9d2<_0x16409d['length'];_0x21a9d2++){var _0xe2e463=_0x16409d[_0x21a9d2],_0x30d7bd=document['createElement'](_0x33c9fc(0x156));_0x30d7bd[_0x33c9fc(0x13e)]='userPerm_container\x20border_blue',_0x30d7bd['id']=_0x33c9fc(0x16a)+_0x21a9d2;var _0x1f8214=document['createElement']('h3');_0x1f8214[_0x33c9fc(0x13e)]='userPerm_header',_0x1f8214[_0x33c9fc(0x147)]=_0xe2e463[_0x33c9fc(0x188)]||'Usuario\x20'+(_0x21a9d2+0x1),_0x30d7bd[_0x33c9fc(0x125)](_0x1f8214);var _0x5893b2=document[_0x33c9fc(0x159)]('div');_0x5893b2[_0x33c9fc(0x13e)]=_0x33c9fc(0x17f);for(var _0x23c478=0x0;_0x23c478<_0xe2e463[_0x33c9fc(0x186)][_0x33c9fc(0x11d)];_0x23c478++){var _0x8fb6a4=_0xe2e463['setPermissions'][_0x23c478],_0x466ae3=document[_0x33c9fc(0x159)](_0x33c9fc(0x156));_0x466ae3[_0x33c9fc(0x13e)]=_0x33c9fc(0x176),_0x466ae3['dataset'][_0x33c9fc(0x13c)]=_0x21a9d2,_0x466ae3['dataset'][_0x33c9fc(0x189)]=_0x23c478;var _0x5d5bad=Number(_0x8fb6a4[_0x33c9fc(0x157)]),_0x5d8ef4=document['createElement'](_0x33c9fc(0x120));_0x5d8ef4[_0x33c9fc(0x13e)]='userPerm_select',_0x5d8ef4[_0x33c9fc(0x121)]=!![];if(BOOLEAN_PERMS[_0x33c9fc(0x170)](_0x8fb6a4['setPermissionId'])!==-0x1){var _0x5e1a8d=document[_0x33c9fc(0x159)](_0x33c9fc(0x165));_0x5e1a8d[_0x33c9fc(0x12c)]='0',_0x5e1a8d[_0x33c9fc(0x147)]=_0x8fb6a4[_0x33c9fc(0x18a)],_0x5d8ef4[_0x33c9fc(0x125)](_0x5e1a8d);var _0x49242b=document['createElement'](_0x33c9fc(0x165));_0x49242b['value']='1',_0x49242b[_0x33c9fc(0x147)]=_0x8fb6a4[_0x33c9fc(0x138)],_0x5d8ef4['appendChild'](_0x49242b),_0x5d8ef4[_0x33c9fc(0x12c)]=String(_0x5d5bad);}else{if(_0x8fb6a4[_0x33c9fc(0x12e)]===0x9||_0x8fb6a4[_0x33c9fc(0x12e)]===0xc||_0x8fb6a4[_0x33c9fc(0x12e)]===0x12){if(_0x8fb6a4[_0x33c9fc(0x12e)]===0x9){var _0x425dfd=document[_0x33c9fc(0x159)](_0x33c9fc(0x165));_0x425dfd['value']='0',_0x425dfd['textContent']=_0x8fb6a4[_0x33c9fc(0x18a)],_0x5d8ef4[_0x33c9fc(0x125)](_0x425dfd);for(var _0x48852f=0x0;_0x48852f<_0x4cc283[_0x33c9fc(0x11d)];_0x48852f++){var _0x15e9c9=_0x4cc283[_0x48852f],_0x2e2eb3=document['createElement'](_0x33c9fc(0x165));_0x2e2eb3[_0x33c9fc(0x12c)]=String(_0x15e9c9[_0x33c9fc(0x166)]),_0x2e2eb3['textContent']=_0x15e9c9[_0x33c9fc(0x13f)],_0x5d8ef4['appendChild'](_0x2e2eb3);}}if(_0x8fb6a4[_0x33c9fc(0x12e)]===0xc)for(var _0x48852f=0x1;_0x48852f<=0x4;_0x48852f++){var _0x15e9c9=_0x48852f,_0x2e2eb3=document[_0x33c9fc(0x159)](_0x33c9fc(0x165));_0x2e2eb3[_0x33c9fc(0x12c)]=String(_0x15e9c9),_0x2e2eb3['textContent']='NÃºmero\x20de\x20Decimales:\x20'+_0x15e9c9,_0x5d8ef4['appendChild'](_0x2e2eb3);}if(_0x8fb6a4[_0x33c9fc(0x12e)]===0x12){var _0x2eb549=myCompany&&myCompany['setEmailCredentials']||[],_0x425dfd=document[_0x33c9fc(0x159)]('option');_0x425dfd[_0x33c9fc(0x12c)]='0',_0x425dfd['textContent']=_0x8fb6a4['setPermissionNameFalse'],_0x5d8ef4[_0x33c9fc(0x125)](_0x425dfd);for(var _0x48852f=0x0;_0x48852f<_0x2eb549[_0x33c9fc(0x11d)];_0x48852f++){var _0x15e9c9=_0x2eb549[_0x48852f],_0x2e2eb3=document['createElement']('option');_0x2e2eb3[_0x33c9fc(0x12c)]=String(_0x15e9c9[_0x33c9fc(0x184)]),_0x2e2eb3[_0x33c9fc(0x147)]=_0x15e9c9[_0x33c9fc(0x178)],_0x5d8ef4[_0x33c9fc(0x125)](_0x2e2eb3);}}_0x5d8ef4[_0x33c9fc(0x12c)]=String(_0x5d5bad);}}_0x466ae3[_0x33c9fc(0x125)](_0x5d8ef4),_0x5893b2[_0x33c9fc(0x125)](_0x466ae3);}_0x30d7bd['appendChild'](_0x5893b2);var _0x32474e=document['createElement'](_0x33c9fc(0x14f));_0x32474e[_0x33c9fc(0x13e)]=_0x33c9fc(0x12f),_0x32474e['textContent']='Editar',_0x32474e['dataset'][_0x33c9fc(0x13c)]=_0x21a9d2;var _0x33a1f7=document[_0x33c9fc(0x159)](_0x33c9fc(0x14f));_0x33a1f7[_0x33c9fc(0x13e)]=_0x33c9fc(0x137),_0x33a1f7['textContent']=_0x33c9fc(0x17d),_0x33a1f7[_0x33c9fc(0x12a)][_0x33c9fc(0x13c)]=_0x21a9d2,_0x33a1f7[_0x33c9fc(0x149)]['display']='none',_0x30d7bd[_0x33c9fc(0x125)](_0x32474e),_0x30d7bd['appendChild'](_0x33a1f7),_0xcfea39[_0x33c9fc(0x125)](_0x30d7bd),_0x32474e[_0x33c9fc(0x18b)](_0x33c9fc(0x180),onEditClick),_0x33a1f7['addEventListener']('click',onSaveClick);}}function onEditClick(_0x3ba2d7){var _0x3f62d7=_0x2c8b,_0x5ed213=_0x3ba2d7[_0x3f62d7(0x123)]['dataset'][_0x3f62d7(0x13c)],_0xaa4701=document['getElementById']('userPerm_container_'+_0x5ed213),_0x4652f5=_0xaa4701['getElementsByClassName'](_0x3f62d7(0x17e));for(var _0x13b5f1=0x0;_0x13b5f1<_0x4652f5[_0x3f62d7(0x11d)];_0x13b5f1++){_0x4652f5[_0x13b5f1][_0x3f62d7(0x121)]=![];}_0xaa4701['querySelector']('.userPerm_editBtn')[_0x3f62d7(0x149)][_0x3f62d7(0x16c)]='none',_0xaa4701[_0x3f62d7(0x140)](_0x3f62d7(0x14a))[_0x3f62d7(0x149)]['display']=_0x3f62d7(0x151),_0xaa4701[_0x3f62d7(0x13e)]=_0x3f62d7(0x12d);}function _0x7a57(){var _0x1b60c7=['setUsers','message','tbody','return\x20(function()\x20','userPerm_item','4467855iEiJMM','setEmailCredentialsSenderEmail','application/json','error','2270bYyGbL','929277KYFVno','Guardar','userPerm_select','userPerm_list','click','statusText','setFloorId','30312238dgKTqN','setEmailCredentialsId','then','setPermissions','getElementsByClassName','setUserFullName','permIndex','setPermissionNameFalse','addEventListener','Correlativo','length','console','success','select','disabled','offline_operations','target','Error\x20al\x20actualizar\x20data\x20online:','appendChild','4vqGjKj','log','result','setBranchId','dataset','offlineOps_table','value','userPerm_container\x20border_orange','setPermissionId','userPerm_editBtn','forEach','dispatchEvent','setTipoOperaciones','search','userPerm_container\x20border_blue','Error\x20leyendo\x20operaciones:','change','userPerm_saveBtn','setPermissionNameTrue','catch','table','Error\x20cargando\x20operaciones.','userIndex','.userPerm_editBtn','className','setTipoOperacionName','querySelector','innerHTML','trace','getElementById','Data\x20actualizada\x20correctamente\x20en\x20la\x20base\x20de\x20datos.','onerror','(((.+)+)+)+$','textContent','inline-block','style','.userPerm_saveBtn','Tipo','stringify','thead','panel_users','button','.btn-logout','block','panel_operations','No\x20hay\x20operaciones\x20pendientes.','apiPOSsendOffline','Error\x20desconocido\x20al\x20actualizar\x20Data.','div','setPermissionValue','6ERTirE','createElement','527200WhEWWn','270537qynNpv','apply','setSerie','4565050yAcmtP','https://apierp.dev/api/users/update/','toString','setAuthToken','readonly','getAll','constructor','option','setTipoOperacionCodigo','80lYfouh','push','12rKHteq','userPerm_container_','objectStore','display','setTipoOperacion','bind','827NElFMj','indexOf','transaction'];_0x7a57=function(){return _0x1b60c7;};return _0x7a57();}async function onSaveClick(_0xe6f1c6){var _0x35fda6=_0x2c8b,_0x32ba5c=_0xe6f1c6['target'][_0x35fda6(0x12a)][_0x35fda6(0x13c)],_0x5a2767=document[_0x35fda6(0x143)]('userPerm_container_'+_0x32ba5c),_0x52abb3=_0x5a2767[_0x35fda6(0x187)]('userPerm_item');for(var _0x3a76e6=0x0;_0x3a76e6<_0x52abb3[_0x35fda6(0x11d)];_0x3a76e6++){var _0x5113f4=_0x52abb3[_0x3a76e6],_0x13fcc2=parseInt(_0x5113f4[_0x35fda6(0x12a)][_0x35fda6(0x13c)],0xa),_0x5bd7f6=parseInt(_0x5113f4['dataset'][_0x35fda6(0x189)],0xa),_0x19df02=company[0x0][_0x35fda6(0x172)][_0x13fcc2][_0x35fda6(0x186)][_0x5bd7f6],_0x421d41=_0x5113f4[_0x35fda6(0x187)](_0x35fda6(0x17e))[0x0],_0x4b79eb=_0x421d41[_0x35fda6(0x12c)];_0x19df02[_0x35fda6(0x157)]=_0x4b79eb,_0x421d41[_0x35fda6(0x121)]=!![],company[0x0][_0x35fda6(0x172)][_0x13fcc2]['setLastDateUpdate']=new Date();}const _0x5113c3=await createCartStore('');await saveCompanyToIndexedDB(company,_0x5113c3),_0x5a2767[_0x35fda6(0x140)](_0x35fda6(0x14a))[_0x35fda6(0x149)][_0x35fda6(0x16c)]='none',_0x5a2767[_0x35fda6(0x140)](_0x35fda6(0x13d))['style'][_0x35fda6(0x16c)]=_0x35fda6(0x148),_0x5a2767['className']=_0x35fda6(0x134),apiERPsyncUsers();}function generateOfflineOperationsTable(){var _0x20b3f3=_0x2c8b,_0x5a935e=document[_0x20b3f3(0x143)](_0x20b3f3(0x152));return _0x5a935e['innerHTML']='',createCartStore('')[_0x20b3f3(0x185)](function(_0x15af96){var _0x1af058=_0x20b3f3,_0x2abb09=_0x15af96[_0x1af058(0x171)](_0x1af058(0x122),_0x1af058(0x162)),_0x575ca3=_0x2abb09[_0x1af058(0x16b)](_0x1af058(0x122));return new Promise(function(_0x33c828,_0x2ce83b){var _0x46eb9d=_0x1af058,_0x1751af=_0x575ca3[_0x46eb9d(0x163)]();_0x1751af['onsuccess']=function(){var _0x2257fc=_0x46eb9d;_0x33c828(_0x1751af[_0x2257fc(0x128)]);},_0x1751af[_0x46eb9d(0x145)]=function(){var _0x43453e=_0x46eb9d;_0x2ce83b(_0x1751af[_0x43453e(0x17a)]);};});})[_0x20b3f3(0x185)](function(_0x4bcbe6){var _0x212ec2=_0x20b3f3,_0x35ce23=[];for(var _0x5fbea2=0x0;_0x5fbea2<_0x4bcbe6[_0x212ec2(0x11d)];_0x5fbea2++){_0x4bcbe6[_0x5fbea2][_0x212ec2(0x154)]==0x1&&_0x35ce23[_0x212ec2(0x168)](_0x4bcbe6[_0x5fbea2]);}if(_0x35ce23['length']===0x0){_0x5a935e['textContent']=_0x212ec2(0x153);return;}var _0xf5c87e=document[_0x212ec2(0x159)](_0x212ec2(0x13a));_0xf5c87e[_0x212ec2(0x13e)]=_0x212ec2(0x12b);var _0x5bc8d1=document['createElement'](_0x212ec2(0x14d)),_0x20339f=document[_0x212ec2(0x159)]('tr');[_0x212ec2(0x14b),'Serie',_0x212ec2(0x11c),'Fecha','Motivo'][_0x212ec2(0x130)](function(_0x437be1){var _0x31c421=_0x212ec2,_0x102e83=document[_0x31c421(0x159)]('th');_0x102e83[_0x31c421(0x147)]=_0x437be1,_0x20339f['appendChild'](_0x102e83);}),_0x5bc8d1[_0x212ec2(0x125)](_0x20339f),_0xf5c87e[_0x212ec2(0x125)](_0x5bc8d1);var _0x3439b9=document[_0x212ec2(0x159)](_0x212ec2(0x174));_0x35ce23['forEach'](function(_0x7863c7){var _0x4da7b9=_0x212ec2,_0xcae805=document[_0x4da7b9(0x159)]('tr'),_0x1856c9=[_0x7863c7[_0x4da7b9(0x16d)],_0x7863c7[_0x4da7b9(0x15d)],_0x7863c7['setCorrelativo'],_0x7863c7['setFechaHora'],_0x7863c7['setMessage']||''];_0x1856c9[_0x4da7b9(0x130)](function(_0x45095e){var _0x2496dc=_0x4da7b9,_0x4ff8ac=document[_0x2496dc(0x159)]('td');_0x4ff8ac[_0x2496dc(0x147)]=_0x45095e,_0xcae805['appendChild'](_0x4ff8ac);}),_0x3439b9[_0x4da7b9(0x125)](_0xcae805);}),_0xf5c87e['appendChild'](_0x3439b9),_0x5a935e['appendChild'](_0xf5c87e);})[_0x20b3f3(0x139)](function(_0x3dea7d){var _0x6dbf1d=_0x20b3f3;console[_0x6dbf1d(0x17a)](_0x6dbf1d(0x135),_0x3dea7d),_0x5a935e['textContent']=_0x6dbf1d(0x13b);});}window['onload']=function(){var _0x26ff9c=_0x2c8b;const _0xff3312=0x2;loadLoginContent('./img/apiPOS.png'),setUserNameGet(),setEventBtnAccess();const _0xbbc526=document['querySelector'](_0x26ff9c(0x150));_0xbbc526&&_0xbbc526['addEventListener'](_0x26ff9c(0x180),function(){logoutReload(0x0,_0xff3312);}),document['getElementById'](_0x26ff9c(0x129))['addEventListener'](_0x26ff9c(0x136),async function(){const _0xf1a7fc=parseInt(this['value']);company[0x0]['setBranchDefault']=_0xf1a7fc;const _0x23bd02=await createCartStore('');await saveCompanyToIndexedDB(company,_0x23bd02),cargarAlmacenes(_0xf1a7fc),setTimeout(()=>{var _0x5e7532=_0x2c8b;document['getElementById']('setWarehouseId')[_0x5e7532(0x131)](new Event('change'));},0x64),cargarPisos(_0xf1a7fc),setTimeout(()=>{var _0x2a4175=_0x2c8b;document[_0x2a4175(0x143)](_0x2a4175(0x182))[_0x2a4175(0x131)](new Event(_0x2a4175(0x136)));},0x64),ntf_initNotifications();}),loadCartAndSetTabCount(_0xff3312);};
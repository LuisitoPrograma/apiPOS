/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 4.4.7
*/

var _0x12931f=_0xb30d;function _0x216b(){var _0xaf2c37=['log','setPermissionId','setAuthToken','style','click','message','transaction','setPermissionValue','Acciones','objectStore','userPerm_header','40MrXxzf','bind','setPermissions','.userPerm_editBtn','2152xRzPfS','Usuario\x20','Data\x20actualizada\x20correctamente\x20en\x20la\x20base\x20de\x20datos.','¿Estás\x20seguro\x20de\x20que\x20deseas\x20eliminar\x20esta\x20operación?','createElement','userPerm_container_','setEmailCredentialsId','stringify','105154YbShAf','23pEVDcB','1457097dqLtEY','permIndex','delete','toString','setBranchDefault','Fecha','286668IxtIrd','userPerm_item','onload','Error\x20eliminando\x20operación:','json','select','POST','trace','target','getElementById','div','https://apierp.dev/api/users/update/','length','getElementsByClassName','exception','search','11206630paKJtk','42542MgbGna','return\x20(function()\x20','userPerm_saveBtn','querySelector','addEventListener','option','getAll','dataset','setFloorId','4149XWGMPP','{}.constructor(\x22return\x20this\x22)(\x20)','textContent','setMessage','block','setPermissionNameFalse','onsuccess','Guardar','userPerm_container\x20border_blue','indexOf','result','innerHTML','thead','constructor','warn','complete','change','Error\x20desconocido\x20al\x20actualizar\x20Data.','setUsers','userPerm_select','EnvironmentChangeComplete','offline_operations','dispatchEvent','appendChild','Error\x20al\x20actualizar\x20data\x20online:','.userPerm_saveBtn','WarehouseChangeComplete','Error\x20cargando\x20operaciones.','Error\x20leyendo\x20operaciones:','offlineOps_table','setTipoOperacionName','setTipoOperaciones','Motivo','table','Correlativo','Tipo','application/json','then','className','push','setFechaHora','No\x20hay\x20operaciones\x20pendientes.','setCorrelativo','setTipoOperacionCodigo','setBranchId','disabled','apply','./img/apiPOS.png','Error\x20Network.','setTipoOperacion','value','statusText','setSerie','none','prototype','setUserFullName','readwrite','setWarehouseId','console','display','1727388bGNwBy','error','forEach','(((.+)+)+)+$','userIndex','button'];_0x216b=function(){return _0xaf2c37;};return _0x216b();}(function(_0x27c668,_0x102100){var _0x262152=_0xb30d,_0x28140a=_0x27c668();while(!![]){try{var _0x4e6a90=-parseInt(_0x262152(0x134))/0x1*(parseInt(_0x262152(0x14c))/0x2)+-parseInt(_0x262152(0x135))/0x3+parseInt(_0x262152(0x116))/0x4+parseInt(_0x262152(0x127))/0x5*(-parseInt(_0x262152(0x13b))/0x6)+-parseInt(_0x262152(0x133))/0x7+parseInt(_0x262152(0x12b))/0x8*(parseInt(_0x262152(0x155))/0x9)+parseInt(_0x262152(0x14b))/0xa;if(_0x4e6a90===_0x102100)break;else _0x28140a['push'](_0x28140a['shift']());}catch(_0x5b9efa){_0x28140a['push'](_0x28140a['shift']());}}}(_0x216b,0x4a4d5));var _0x36650c=(function(){var _0x21e529=!![];return function(_0x44f567,_0x4a51ef){var _0x41840e=_0x21e529?function(){if(_0x4a51ef){var _0x5ad745=_0x4a51ef['apply'](_0x44f567,arguments);return _0x4a51ef=null,_0x5ad745;}}:function(){};return _0x21e529=![],_0x41840e;};}()),_0x10e545=_0x36650c(this,function(){var _0x17992b=_0xb30d;return _0x10e545[_0x17992b(0x138)]()[_0x17992b(0x14a)](_0x17992b(0x119))[_0x17992b(0x138)]()[_0x17992b(0x162)](_0x10e545)[_0x17992b(0x14a)](_0x17992b(0x119));});function _0xb30d(_0x56f456,_0x688f0f){var _0xfc0971=_0x216b();return _0xb30d=function(_0x15e13d,_0x317953){_0x15e13d=_0x15e13d-0x10f;var _0x2e922d=_0xfc0971[_0x15e13d];return _0x2e922d;},_0xb30d(_0x56f456,_0x688f0f);}_0x10e545();var _0x317953=(function(){var _0x4ec3f4=!![];return function(_0xaabc59,_0x1e554c){var _0x144b69=_0x4ec3f4?function(){var _0x3ecdc9=_0xb30d;if(_0x1e554c){var _0x1c2fd9=_0x1e554c[_0x3ecdc9(0x183)](_0xaabc59,arguments);return _0x1e554c=null,_0x1c2fd9;}}:function(){};return _0x4ec3f4=![],_0x144b69;};}()),_0x15e13d=_0x317953(this,function(){var _0x5ce096=_0xb30d,_0x26e72c;try{var _0x53f3fe=Function(_0x5ce096(0x14d)+_0x5ce096(0x156)+');');_0x26e72c=_0x53f3fe();}catch(_0x172588){_0x26e72c=window;}var _0x1372b3=_0x26e72c[_0x5ce096(0x114)]=_0x26e72c['console']||{},_0x31dcb1=[_0x5ce096(0x11c),_0x5ce096(0x163),'info','error',_0x5ce096(0x149),_0x5ce096(0x176),_0x5ce096(0x142)];for(var _0xf53fa0=0x0;_0xf53fa0<_0x31dcb1['length'];_0xf53fa0++){var _0x380def=_0x317953[_0x5ce096(0x162)][_0x5ce096(0x110)][_0x5ce096(0x128)](_0x317953),_0x376f2a=_0x31dcb1[_0xf53fa0],_0x16cadf=_0x1372b3[_0x376f2a]||_0x380def;_0x380def['__proto__']=_0x317953[_0x5ce096(0x128)](_0x317953),_0x380def[_0x5ce096(0x138)]=_0x16cadf[_0x5ce096(0x138)][_0x5ce096(0x128)](_0x16cadf),_0x1372b3[_0x376f2a]=_0x380def;}});_0x15e13d();var BOOLEAN_PERMS=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0xa,0xb,0xd,0xe,0xf,0x10,0x11,0x13,0x14,0x15,0x16,0x17,0x18];async function apiERPupdateUsersOnline(_0x5b06e8,_0x64db2b){var _0x22c281=_0xb30d;if(!isOnline())return console[_0x22c281(0x11c)](_0x22c281(0x185)),Promise['reject'](_0x22c281(0x185));const _0xa84651={'setAuthToken':_0x5b06e8,'setUsers':_0x64db2b};return fetch(_0x22c281(0x146),{'method':_0x22c281(0x141),'headers':{'Content-Type':_0x22c281(0x179)},'body':JSON[_0x22c281(0x132)](_0xa84651)})[_0x22c281(0x17a)](_0x2c075c=>{var _0x2c5269=_0x22c281;if(!_0x2c075c['ok'])throw new Error('Error\x20Sync:\x20'+_0x2c075c[_0x2c5269(0x188)]);return _0x2c075c[_0x2c5269(0x13f)]();})['then'](_0x4020de=>{var _0x5662e8=_0x22c281;if(!_0x4020de['success'])throw new Error(_0x4020de[_0x5662e8(0x121)]||_0x5662e8(0x166));return console[_0x5662e8(0x11c)](_0x5662e8(0x12d)),_0x4020de;})['catch'](_0x2f00a0=>{var _0x52234c=_0x22c281;console['error'](_0x52234c(0x16d),_0x2f00a0);throw _0x2f00a0;});}async function apiERPsyncUsers(){var _0x7a3138=_0xb30d;isLoggedIn(company)&&(isOnline()&&await apiERPupdateUsersOnline(company[0x0][_0x7a3138(0x11e)],company[0x0][_0x7a3138(0x167)]));}function generatePermissionsPanel(_0x1e7887){var _0x486ec9=_0xb30d,_0x66e7af=document['getElementById']('panel_users');_0x66e7af['innerHTML']='';var _0x205e6d=_0x1e7887[0x0]&&_0x1e7887[0x0][_0x486ec9(0x167)]||[],_0x4975a0=_0x1e7887[0x0]&&_0x1e7887[0x0][_0x486ec9(0x174)]||[];for(var _0x26dba8=0x0;_0x26dba8<_0x205e6d[_0x486ec9(0x147)];_0x26dba8++){var _0x272835=_0x205e6d[_0x26dba8],_0x5caf08=document['createElement'](_0x486ec9(0x145));_0x5caf08[_0x486ec9(0x17b)]=_0x486ec9(0x15d),_0x5caf08['id']='userPerm_container_'+_0x26dba8;var _0x239257=document[_0x486ec9(0x12f)]('h3');_0x239257[_0x486ec9(0x17b)]=_0x486ec9(0x126),_0x239257[_0x486ec9(0x157)]=_0x272835[_0x486ec9(0x111)]||_0x486ec9(0x12c)+(_0x26dba8+0x1),_0x5caf08[_0x486ec9(0x16c)](_0x239257);var _0x247cee=document['createElement'](_0x486ec9(0x145));_0x247cee['className']='userPerm_list';for(var _0x10c99c=0x0;_0x10c99c<_0x272835[_0x486ec9(0x129)][_0x486ec9(0x147)];_0x10c99c++){var _0x28e1d1=_0x272835[_0x486ec9(0x129)][_0x10c99c],_0x4882c3=document[_0x486ec9(0x12f)](_0x486ec9(0x145));_0x4882c3[_0x486ec9(0x17b)]=_0x486ec9(0x13c),_0x4882c3['dataset']['userIndex']=_0x26dba8,_0x4882c3[_0x486ec9(0x153)][_0x486ec9(0x136)]=_0x10c99c;var _0x3b3181=Number(_0x28e1d1['setPermissionValue']),_0x1b7036=document[_0x486ec9(0x12f)](_0x486ec9(0x140));_0x1b7036['className']=_0x486ec9(0x168),_0x1b7036['disabled']=!![];if(BOOLEAN_PERMS[_0x486ec9(0x15e)](_0x28e1d1[_0x486ec9(0x11d)])!==-0x1){var _0x1ef65a=document[_0x486ec9(0x12f)]('option');_0x1ef65a['value']='0',_0x1ef65a['textContent']=_0x28e1d1[_0x486ec9(0x15a)],_0x1b7036[_0x486ec9(0x16c)](_0x1ef65a);var _0x37cc95=document[_0x486ec9(0x12f)](_0x486ec9(0x151));_0x37cc95[_0x486ec9(0x187)]='1',_0x37cc95[_0x486ec9(0x157)]=_0x28e1d1['setPermissionNameTrue'],_0x1b7036[_0x486ec9(0x16c)](_0x37cc95),_0x1b7036[_0x486ec9(0x187)]=String(_0x3b3181);}else{if(_0x28e1d1[_0x486ec9(0x11d)]===0x9||_0x28e1d1[_0x486ec9(0x11d)]===0xc||_0x28e1d1[_0x486ec9(0x11d)]===0x12){if(_0x28e1d1[_0x486ec9(0x11d)]===0x9){var _0x3899f2=document[_0x486ec9(0x12f)](_0x486ec9(0x151));_0x3899f2[_0x486ec9(0x187)]='0',_0x3899f2[_0x486ec9(0x157)]=_0x28e1d1[_0x486ec9(0x15a)],_0x1b7036[_0x486ec9(0x16c)](_0x3899f2);for(var _0x2856d4=0x0;_0x2856d4<_0x4975a0[_0x486ec9(0x147)];_0x2856d4++){var _0x690b80=_0x4975a0[_0x2856d4],_0x3eee0c=document[_0x486ec9(0x12f)]('option');_0x3eee0c[_0x486ec9(0x187)]=String(_0x690b80[_0x486ec9(0x180)]),_0x3eee0c[_0x486ec9(0x157)]=_0x690b80[_0x486ec9(0x173)],_0x1b7036[_0x486ec9(0x16c)](_0x3eee0c);}}if(_0x28e1d1[_0x486ec9(0x11d)]===0xc)for(var _0x2856d4=0x1;_0x2856d4<=0x4;_0x2856d4++){var _0x690b80=_0x2856d4,_0x3eee0c=document[_0x486ec9(0x12f)](_0x486ec9(0x151));_0x3eee0c[_0x486ec9(0x187)]=String(_0x690b80),_0x3eee0c[_0x486ec9(0x157)]='Número\x20de\x20Decimales:\x20'+_0x690b80,_0x1b7036['appendChild'](_0x3eee0c);}if(_0x28e1d1['setPermissionId']===0x12){var _0x1538f9=myCompany&&myCompany['setEmailCredentials']||[],_0x3899f2=document[_0x486ec9(0x12f)](_0x486ec9(0x151));_0x3899f2[_0x486ec9(0x187)]='0',_0x3899f2['textContent']=_0x28e1d1[_0x486ec9(0x15a)],_0x1b7036[_0x486ec9(0x16c)](_0x3899f2);for(var _0x2856d4=0x0;_0x2856d4<_0x1538f9[_0x486ec9(0x147)];_0x2856d4++){var _0x690b80=_0x1538f9[_0x2856d4],_0x3eee0c=document[_0x486ec9(0x12f)]('option');_0x3eee0c[_0x486ec9(0x187)]=String(_0x690b80[_0x486ec9(0x131)]),_0x3eee0c['textContent']=_0x690b80['setEmailCredentialsSenderEmail'],_0x1b7036[_0x486ec9(0x16c)](_0x3eee0c);}}_0x1b7036[_0x486ec9(0x187)]=String(_0x3b3181);}}_0x4882c3['appendChild'](_0x1b7036),_0x247cee['appendChild'](_0x4882c3);}_0x5caf08[_0x486ec9(0x16c)](_0x247cee);var _0x53113c=document['createElement'](_0x486ec9(0x11b));_0x53113c['className']='userPerm_editBtn',_0x53113c[_0x486ec9(0x157)]='Editar',_0x53113c[_0x486ec9(0x153)][_0x486ec9(0x11a)]=_0x26dba8;var _0x4355b8=document['createElement']('button');_0x4355b8[_0x486ec9(0x17b)]=_0x486ec9(0x14e),_0x4355b8[_0x486ec9(0x157)]=_0x486ec9(0x15c),_0x4355b8[_0x486ec9(0x153)][_0x486ec9(0x11a)]=_0x26dba8,_0x4355b8[_0x486ec9(0x11f)][_0x486ec9(0x115)]=_0x486ec9(0x10f),_0x5caf08['appendChild'](_0x53113c),_0x5caf08['appendChild'](_0x4355b8),_0x66e7af[_0x486ec9(0x16c)](_0x5caf08),_0x53113c[_0x486ec9(0x150)](_0x486ec9(0x120),onEditClick),_0x4355b8['addEventListener'](_0x486ec9(0x120),onSaveClick);}}function onEditClick(_0x56b443){var _0x49cec9=_0xb30d,_0xb9b029=_0x56b443['target'][_0x49cec9(0x153)][_0x49cec9(0x11a)],_0x368412=document[_0x49cec9(0x144)](_0x49cec9(0x130)+_0xb9b029),_0x327497=_0x368412[_0x49cec9(0x148)](_0x49cec9(0x168));for(var _0x11ed0d=0x0;_0x11ed0d<_0x327497[_0x49cec9(0x147)];_0x11ed0d++){_0x327497[_0x11ed0d]['disabled']=![];}_0x368412[_0x49cec9(0x14f)](_0x49cec9(0x12a))['style'][_0x49cec9(0x115)]='none',_0x368412[_0x49cec9(0x14f)](_0x49cec9(0x16e))[_0x49cec9(0x11f)]['display']=_0x49cec9(0x159),_0x368412[_0x49cec9(0x17b)]='userPerm_container\x20border_orange';}async function onSaveClick(_0x3c6a6a){var _0x409f06=_0xb30d,_0x72d8b8=_0x3c6a6a[_0x409f06(0x143)]['dataset']['userIndex'],_0x293b2b=document[_0x409f06(0x144)]('userPerm_container_'+_0x72d8b8),_0x5b03fd=_0x293b2b[_0x409f06(0x148)](_0x409f06(0x13c));for(var _0x439889=0x0;_0x439889<_0x5b03fd[_0x409f06(0x147)];_0x439889++){var _0x885825=_0x5b03fd[_0x439889],_0xb83e36=parseInt(_0x885825[_0x409f06(0x153)][_0x409f06(0x11a)],0xa),_0x5066b8=parseInt(_0x885825[_0x409f06(0x153)][_0x409f06(0x136)],0xa),_0x36ad9b=company[0x0][_0x409f06(0x167)][_0xb83e36][_0x409f06(0x129)][_0x5066b8],_0x5e7785=_0x885825[_0x409f06(0x148)](_0x409f06(0x168))[0x0],_0x32c7b5=_0x5e7785[_0x409f06(0x187)];_0x36ad9b[_0x409f06(0x123)]=_0x32c7b5,_0x5e7785[_0x409f06(0x182)]=!![],company[0x0][_0x409f06(0x167)][_0xb83e36]['setLastDateUpdate']=new Date();}const _0x2e0d74=await createCartStore('');await saveCompanyToIndexedDB(company,_0x2e0d74),_0x293b2b['querySelector']('.userPerm_saveBtn')[_0x409f06(0x11f)][_0x409f06(0x115)]='none',_0x293b2b[_0x409f06(0x14f)](_0x409f06(0x12a))[_0x409f06(0x11f)][_0x409f06(0x115)]='inline-block',_0x293b2b[_0x409f06(0x17b)]=_0x409f06(0x15d),apiERPsyncUsers();}async function deleteOfflineOperation(_0x5a38e7){var _0x582c3d=_0xb30d;try{var _0x39c80b=await createCartStore(''),_0x82d77e=_0x39c80b[_0x582c3d(0x122)]('offline_operations',_0x582c3d(0x112)),_0x4e1b30=_0x82d77e[_0x582c3d(0x125)]('offline_operations');_0x4e1b30[_0x582c3d(0x137)](_0x5a38e7),await _0x82d77e[_0x582c3d(0x164)],await generateOfflineOperationsTable();}catch(_0x3eaecd){console[_0x582c3d(0x117)](_0x582c3d(0x13e),_0x3eaecd);}}async function generateOfflineOperationsTable(){var _0x869444=_0xb30d,_0xafe41b=document[_0x869444(0x144)]('panel_operations');_0xafe41b[_0x869444(0x160)]='';try{var _0x23227e=await createCartStore(''),_0x360fba=_0x23227e[_0x869444(0x122)](_0x869444(0x16a),'readonly'),_0x52fe52=_0x360fba[_0x869444(0x125)](_0x869444(0x16a)),_0x554c6a=await new Promise(function(_0x2e0739,_0x5407df){var _0x1946c3=_0x869444,_0x28e4cb=_0x52fe52[_0x1946c3(0x152)]();_0x28e4cb[_0x1946c3(0x15b)]=function(){var _0x742a69=_0x1946c3;_0x2e0739(_0x28e4cb[_0x742a69(0x15f)]);},_0x28e4cb['onerror']=function(){var _0x19dd13=_0x1946c3;_0x5407df(_0x28e4cb[_0x19dd13(0x117)]);};}),_0x4c620a=[];for(var _0x2dd928=0x0;_0x2dd928<_0x554c6a[_0x869444(0x147)];_0x2dd928++){_0x554c6a[_0x2dd928]['apiPOSsendOffline']==0x1&&_0x4c620a[_0x869444(0x17c)](_0x554c6a[_0x2dd928]);}if(_0x4c620a['length']===0x0){_0xafe41b[_0x869444(0x157)]=_0x869444(0x17e);return;}var _0x388f5c=document['createElement'](_0x869444(0x176));_0x388f5c['className']=_0x869444(0x172);var _0x1888ca=document[_0x869444(0x12f)](_0x869444(0x161)),_0x32215e=document[_0x869444(0x12f)]('tr');[_0x869444(0x178),'Serie',_0x869444(0x177),_0x869444(0x13a),_0x869444(0x175),_0x869444(0x124)][_0x869444(0x118)](function(_0x2c6d37){var _0x495bfd=_0x869444,_0x4c0bc4=document[_0x495bfd(0x12f)]('th');_0x4c0bc4[_0x495bfd(0x157)]=_0x2c6d37,_0x32215e[_0x495bfd(0x16c)](_0x4c0bc4);}),_0x1888ca[_0x869444(0x16c)](_0x32215e),_0x388f5c['appendChild'](_0x1888ca);var _0x353404=document[_0x869444(0x12f)]('tbody');_0x4c620a['forEach'](function(_0x2132e7){var _0x2f5a2a=_0x869444,_0x372476=document[_0x2f5a2a(0x12f)]('tr'),_0x4f6731=[_0x2132e7[_0x2f5a2a(0x186)],_0x2132e7[_0x2f5a2a(0x189)],_0x2132e7[_0x2f5a2a(0x17f)],_0x2132e7[_0x2f5a2a(0x17d)],_0x2132e7[_0x2f5a2a(0x158)]||''];_0x4f6731[_0x2f5a2a(0x118)](function(_0x54afb7){var _0x30c235=_0x2f5a2a,_0x34c403=document[_0x30c235(0x12f)]('td');_0x34c403['textContent']=_0x54afb7,_0x372476[_0x30c235(0x16c)](_0x34c403);});var _0xed3715=document['createElement']('td'),_0x59a66f=document['createElement']('button');_0x59a66f[_0x2f5a2a(0x157)]='Eliminar',_0x59a66f['addEventListener'](_0x2f5a2a(0x120),function(){var _0x2fb035=_0x2f5a2a;confirm(_0x2fb035(0x12e))&&deleteOfflineOperation(_0x2132e7['id']);}),_0xed3715[_0x2f5a2a(0x16c)](_0x59a66f),_0x372476[_0x2f5a2a(0x16c)](_0xed3715),_0x353404[_0x2f5a2a(0x16c)](_0x372476);}),_0x388f5c[_0x869444(0x16c)](_0x353404),_0xafe41b[_0x869444(0x16c)](_0x388f5c);}catch(_0x4a4e9b){console[_0x869444(0x117)](_0x869444(0x171),_0x4a4e9b),_0xafe41b[_0x869444(0x157)]=_0x869444(0x170);}}window[_0x12931f(0x13d)]=function(){var _0x3015b7=_0x12931f;const _0x3473f5=0x2;loadLoginContent(_0x3015b7(0x184)),setUserNameGet(),setEventBtnAccess();const _0x28c805=document[_0x3015b7(0x14f)]('.btn-logout');_0x28c805&&_0x28c805[_0x3015b7(0x150)](_0x3015b7(0x120),function(){logoutReload(0x0,_0x3473f5);}),document[_0x3015b7(0x144)](_0x3015b7(0x181))[_0x3015b7(0x150)](_0x3015b7(0x165),async function(){var _0x3d4e8e=_0x3015b7;const _0x40948f=parseInt(this[_0x3d4e8e(0x187)]);company[0x0][_0x3d4e8e(0x139)]=_0x40948f;const _0x310952=await createCartStore('');await saveCompanyToIndexedDB(company,_0x310952),await cargarPisos(_0x40948f),await waitForEvent('setFloorId',_0x3d4e8e(0x169)),await cargarAlmacenes(_0x40948f),await waitForEvent(_0x3d4e8e(0x113),_0x3d4e8e(0x16f)),document['dispatchEvent'](new Event('BranchChangeComplete')),ntf_initNotifications();}),document[_0x3015b7(0x144)](_0x3015b7(0x113))[_0x3015b7(0x150)]('change',async function(){var _0x28f8f8=_0x3015b7;document[_0x28f8f8(0x16b)](new Event(_0x28f8f8(0x16f)));}),document[_0x3015b7(0x144)](_0x3015b7(0x154))[_0x3015b7(0x150)](_0x3015b7(0x165),async function(_0x1fab1b){var _0x18f6fb=_0x3015b7;document[_0x18f6fb(0x16b)](new Event(_0x18f6fb(0x169)));}),loadCartAndSetTabCount(_0x3473f5);};
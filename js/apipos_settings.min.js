/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 4.1.4
*/

var _0x122e59=_0x1dc4;(function(_0xf19ed2,_0x579fe4){var _0x578503=_0x1dc4,_0x3fa74c=_0xf19ed2();while(!![]){try{var _0xf4055d=parseInt(_0x578503(0x12b))/0x1+parseInt(_0x578503(0x12a))/0x2+parseInt(_0x578503(0x16e))/0x3+parseInt(_0x578503(0x116))/0x4+parseInt(_0x578503(0x16c))/0x5+parseInt(_0x578503(0x13f))/0x6+-parseInt(_0x578503(0x122))/0x7;if(_0xf4055d===_0x579fe4)break;else _0x3fa74c['push'](_0x3fa74c['shift']());}catch(_0xd1bfb3){_0x3fa74c['push'](_0x3fa74c['shift']());}}}(_0x2cc1,0x568d3));function _0x2cc1(){var _0x31c7fe=['disabled','userPerm_select','panel_users','bind','setPermissions','Serie','Error\x20Network.','setPermissionId','catch','exception','2384130FlvnBi','statusText','userPerm_container\x20border_orange','none','permIndex','application/json','length','change','No\x20hay\x20operaciones\x20pendientes.','forEach','display','offlineOps_table','appendChild','target','block','click','userIndex','then','setEmailCredentialsId','.userPerm_saveBtn','indexOf','Editar','style','POST','setAuthToken','className','.userPerm_editBtn','stringify','offline_operations','userPerm_container_','Error\x20Sync:\x20','getElementById','search','apply','Correlativo','setTipoOperacion','table','setFloorId','info','Motivo','Error\x20desconocido\x20al\x20actualizar\x20Data.','NÃºmero\x20de\x20Decimales:\x20','dispatchEvent','setEmailCredentialsSenderEmail','constructor','2507390rCSfTg','error','1015035iQnrKi','toString','dataset','setTipoOperaciones','createElement','setUsers','value','(((.+)+)+)+$','setBranchId','setSerie','Error\x20al\x20actualizar\x20data\x20online:','Tipo','panel_operations','onload','reject','__proto__','return\x20(function()\x20','json','trace','div','setMessage','1740780gzWrhY','setEmailCredentials','addEventListener','Usuario\x20','result','setPermissionNameFalse','Error\x20leyendo\x20operaciones:','setCorrelativo','option','innerHTML','setBranchDefault','warn','17240685ormORT','userPerm_container\x20border_blue','success','tbody','setTipoOperacionCodigo','setTipoOperacionName','userPerm_saveBtn','Error\x20cargando\x20operaciones.','1220430QlziAb','534882OKaOYR','button','transaction','querySelector','getElementsByClassName','setLastDateUpdate','userPerm_item','console','textContent','apiPOSsendOffline'];_0x2cc1=function(){return _0x31c7fe;};return _0x2cc1();}function _0x1dc4(_0x18498c,_0x52b13e){var _0x1a07ed=_0x2cc1();return _0x1dc4=function(_0x52a60c,_0x5c5b1d){_0x52a60c=_0x52a60c-0x108;var _0x377b11=_0x1a07ed[_0x52a60c];return _0x377b11;},_0x1dc4(_0x18498c,_0x52b13e);}var _0x5a78d5=(function(){var _0xbc2ce3=!![];return function(_0x198aa4,_0x52a892){var _0x4721d0=_0xbc2ce3?function(){if(_0x52a892){var _0x17e950=_0x52a892['apply'](_0x198aa4,arguments);return _0x52a892=null,_0x17e950;}}:function(){};return _0xbc2ce3=![],_0x4721d0;};}()),_0x48dfd5=_0x5a78d5(this,function(){var _0xa3ecd6=_0x1dc4;return _0x48dfd5['toString']()[_0xa3ecd6(0x15f)](_0xa3ecd6(0x108))[_0xa3ecd6(0x16f)]()['constructor'](_0x48dfd5)[_0xa3ecd6(0x15f)](_0xa3ecd6(0x108));});_0x48dfd5();var _0x5c5b1d=(function(){var _0x5e0316=!![];return function(_0x1299e6,_0x5ccace){var _0x2f9ac5=_0x5e0316?function(){var _0x1e64a0=_0x1dc4;if(_0x5ccace){var _0x22c882=_0x5ccace[_0x1e64a0(0x160)](_0x1299e6,arguments);return _0x5ccace=null,_0x22c882;}}:function(){};return _0x5e0316=![],_0x2f9ac5;};}()),_0x52a60c=_0x5c5b1d(this,function(){var _0x318fb8=_0x1dc4,_0x50249c=function(){var _0x5d99d7=_0x1dc4,_0x584ebe;try{_0x584ebe=Function(_0x5d99d7(0x111)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x30b644){_0x584ebe=window;}return _0x584ebe;},_0x47c743=_0x50249c(),_0x5ab8ef=_0x47c743['console']=_0x47c743[_0x318fb8(0x132)]||{},_0x40da69=['log',_0x318fb8(0x121),_0x318fb8(0x165),_0x318fb8(0x16d),_0x318fb8(0x13e),'table',_0x318fb8(0x113)];for(var _0x507af5=0x0;_0x507af5<_0x40da69[_0x318fb8(0x145)];_0x507af5++){var _0x2fac94=_0x5c5b1d[_0x318fb8(0x16b)]['prototype'][_0x318fb8(0x138)](_0x5c5b1d),_0xd244de=_0x40da69[_0x507af5],_0x1f8e53=_0x5ab8ef[_0xd244de]||_0x2fac94;_0x2fac94[_0x318fb8(0x110)]=_0x5c5b1d[_0x318fb8(0x138)](_0x5c5b1d),_0x2fac94[_0x318fb8(0x16f)]=_0x1f8e53[_0x318fb8(0x16f)][_0x318fb8(0x138)](_0x1f8e53),_0x5ab8ef[_0xd244de]=_0x2fac94;}});_0x52a60c();var BOOLEAN_PERMS=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0xa,0xb,0xd,0xe,0xf,0x10,0x11,0x13,0x14];async function apiERPupdateUsersOnline(_0x1f61e9,_0x52b427){var _0x26bd38=_0x1dc4;if(!isOnline())return console['log'](_0x26bd38(0x13b)),Promise[_0x26bd38(0x10f)]('Error\x20Network.');const _0x122ed8={'setAuthToken':_0x1f61e9,'setUsers':_0x52b427};return fetch('https://apierp.dev/api/users/update/',{'method':_0x26bd38(0x156),'headers':{'Content-Type':_0x26bd38(0x144)},'body':JSON[_0x26bd38(0x15a)](_0x122ed8)})[_0x26bd38(0x150)](_0x21f85c=>{var _0x28c025=_0x26bd38;if(!_0x21f85c['ok'])throw new Error(_0x28c025(0x15d)+_0x21f85c[_0x28c025(0x140)]);return _0x21f85c[_0x28c025(0x112)]();})[_0x26bd38(0x150)](_0x35cbb5=>{var _0x1d6320=_0x26bd38;if(!_0x35cbb5[_0x1d6320(0x124)])throw new Error(_0x35cbb5['message']||_0x1d6320(0x167));return console['log']('Data\x20actualizada\x20correctamente\x20en\x20la\x20base\x20de\x20datos.'),_0x35cbb5;})[_0x26bd38(0x13d)](_0x4b933b=>{var _0x2f801c=_0x26bd38;console[_0x2f801c(0x16d)](_0x2f801c(0x10b),_0x4b933b);throw _0x4b933b;});}async function apiERPsyncUsers(){var _0x172dfa=_0x1dc4;isLoggedIn(company)&&(isOnline()&&await apiERPupdateUsersOnline(company[0x0][_0x172dfa(0x157)],company[0x0][_0x172dfa(0x173)]));}function generatePermissionsPanel(_0x78ae3){var _0x150eec=_0x1dc4,_0x39d9a5=document['getElementById'](_0x150eec(0x137));_0x39d9a5[_0x150eec(0x11f)]='';var _0x4184be=_0x78ae3[0x0]&&_0x78ae3[0x0][_0x150eec(0x173)]||[],_0x31a517=_0x78ae3[0x0]&&_0x78ae3[0x0][_0x150eec(0x171)]||[];for(var _0x4e593f=0x0;_0x4e593f<_0x4184be[_0x150eec(0x145)];_0x4e593f++){var _0x2712f2=_0x4184be[_0x4e593f],_0xe8fcbb=document['createElement'](_0x150eec(0x114));_0xe8fcbb[_0x150eec(0x158)]=_0x150eec(0x123),_0xe8fcbb['id']='userPerm_container_'+_0x4e593f;var _0x307bb3=document['createElement']('h3');_0x307bb3[_0x150eec(0x158)]='userPerm_header',_0x307bb3['textContent']=_0x2712f2['setUserFullName']||_0x150eec(0x119)+(_0x4e593f+0x1),_0xe8fcbb[_0x150eec(0x14b)](_0x307bb3);var _0x55cec7=document['createElement'](_0x150eec(0x114));_0x55cec7[_0x150eec(0x158)]='userPerm_list';for(var _0x4f2a5a=0x0;_0x4f2a5a<_0x2712f2['setPermissions'][_0x150eec(0x145)];_0x4f2a5a++){var _0x33d242=_0x2712f2[_0x150eec(0x139)][_0x4f2a5a],_0x1241ff=document['createElement'](_0x150eec(0x114));_0x1241ff['className']=_0x150eec(0x131),_0x1241ff['dataset'][_0x150eec(0x14f)]=_0x4e593f,_0x1241ff[_0x150eec(0x170)][_0x150eec(0x143)]=_0x4f2a5a;var _0xf4c163=Number(_0x33d242['setPermissionValue']),_0x5c631d=document['createElement']('select');_0x5c631d[_0x150eec(0x158)]=_0x150eec(0x136),_0x5c631d[_0x150eec(0x135)]=!![];if(BOOLEAN_PERMS[_0x150eec(0x153)](_0x33d242['setPermissionId'])!==-0x1){var _0x31b324=document[_0x150eec(0x172)](_0x150eec(0x11e));_0x31b324[_0x150eec(0x174)]='0',_0x31b324[_0x150eec(0x133)]=_0x33d242[_0x150eec(0x11b)],_0x5c631d[_0x150eec(0x14b)](_0x31b324);var _0x19b676=document[_0x150eec(0x172)](_0x150eec(0x11e));_0x19b676[_0x150eec(0x174)]='1',_0x19b676[_0x150eec(0x133)]=_0x33d242['setPermissionNameTrue'],_0x5c631d[_0x150eec(0x14b)](_0x19b676),_0x5c631d[_0x150eec(0x174)]=String(_0xf4c163);}else{if(_0x33d242['setPermissionId']===0x9||_0x33d242['setPermissionId']===0xc||_0x33d242[_0x150eec(0x13c)]===0x12){if(_0x33d242[_0x150eec(0x13c)]===0x9){var _0x1140e0=document['createElement'](_0x150eec(0x11e));_0x1140e0[_0x150eec(0x174)]='0',_0x1140e0[_0x150eec(0x133)]=_0x33d242['setPermissionNameFalse'],_0x5c631d[_0x150eec(0x14b)](_0x1140e0);for(var _0x51cf15=0x0;_0x51cf15<_0x31a517[_0x150eec(0x145)];_0x51cf15++){var _0xb66569=_0x31a517[_0x51cf15],_0x54797a=document[_0x150eec(0x172)]('option');_0x54797a[_0x150eec(0x174)]=String(_0xb66569[_0x150eec(0x126)]),_0x54797a[_0x150eec(0x133)]=_0xb66569[_0x150eec(0x127)],_0x5c631d[_0x150eec(0x14b)](_0x54797a);}}if(_0x33d242[_0x150eec(0x13c)]===0xc)for(var _0x51cf15=0x1;_0x51cf15<=0x4;_0x51cf15++){var _0xb66569=_0x51cf15,_0x54797a=document['createElement'](_0x150eec(0x11e));_0x54797a[_0x150eec(0x174)]=String(_0xb66569),_0x54797a[_0x150eec(0x133)]=_0x150eec(0x168)+_0xb66569,_0x5c631d[_0x150eec(0x14b)](_0x54797a);}if(_0x33d242[_0x150eec(0x13c)]===0x12){var _0x45a597=myCompany&&myCompany[_0x150eec(0x117)]||[],_0x1140e0=document[_0x150eec(0x172)](_0x150eec(0x11e));_0x1140e0[_0x150eec(0x174)]='0',_0x1140e0[_0x150eec(0x133)]=_0x33d242[_0x150eec(0x11b)],_0x5c631d[_0x150eec(0x14b)](_0x1140e0);for(var _0x51cf15=0x0;_0x51cf15<_0x45a597[_0x150eec(0x145)];_0x51cf15++){var _0xb66569=_0x45a597[_0x51cf15],_0x54797a=document[_0x150eec(0x172)](_0x150eec(0x11e));_0x54797a[_0x150eec(0x174)]=String(_0xb66569[_0x150eec(0x151)]),_0x54797a[_0x150eec(0x133)]=_0xb66569[_0x150eec(0x16a)],_0x5c631d[_0x150eec(0x14b)](_0x54797a);}}_0x5c631d['value']=String(_0xf4c163);}}_0x1241ff['appendChild'](_0x5c631d),_0x55cec7[_0x150eec(0x14b)](_0x1241ff);}_0xe8fcbb[_0x150eec(0x14b)](_0x55cec7);var _0x2a05b8=document[_0x150eec(0x172)](_0x150eec(0x12c));_0x2a05b8[_0x150eec(0x158)]='userPerm_editBtn',_0x2a05b8[_0x150eec(0x133)]=_0x150eec(0x154),_0x2a05b8[_0x150eec(0x170)][_0x150eec(0x14f)]=_0x4e593f;var _0x37e75d=document[_0x150eec(0x172)]('button');_0x37e75d[_0x150eec(0x158)]=_0x150eec(0x128),_0x37e75d[_0x150eec(0x133)]='Guardar',_0x37e75d[_0x150eec(0x170)]['userIndex']=_0x4e593f,_0x37e75d['style'][_0x150eec(0x149)]=_0x150eec(0x142),_0xe8fcbb[_0x150eec(0x14b)](_0x2a05b8),_0xe8fcbb[_0x150eec(0x14b)](_0x37e75d),_0x39d9a5[_0x150eec(0x14b)](_0xe8fcbb),_0x2a05b8[_0x150eec(0x118)](_0x150eec(0x14e),onEditClick),_0x37e75d[_0x150eec(0x118)]('click',onSaveClick);}}function onEditClick(_0x29af24){var _0x134fb0=_0x1dc4,_0x4746c8=_0x29af24[_0x134fb0(0x14c)][_0x134fb0(0x170)][_0x134fb0(0x14f)],_0x3f9bd7=document[_0x134fb0(0x15e)](_0x134fb0(0x15c)+_0x4746c8),_0x2cb2b6=_0x3f9bd7[_0x134fb0(0x12f)](_0x134fb0(0x136));for(var _0x453d87=0x0;_0x453d87<_0x2cb2b6['length'];_0x453d87++){_0x2cb2b6[_0x453d87][_0x134fb0(0x135)]=![];}_0x3f9bd7[_0x134fb0(0x12e)](_0x134fb0(0x159))['style']['display']=_0x134fb0(0x142),_0x3f9bd7[_0x134fb0(0x12e)](_0x134fb0(0x152))[_0x134fb0(0x155)]['display']=_0x134fb0(0x14d),_0x3f9bd7[_0x134fb0(0x158)]=_0x134fb0(0x141);}async function onSaveClick(_0x18c33e){var _0x5000c3=_0x1dc4,_0x1f2002=_0x18c33e[_0x5000c3(0x14c)][_0x5000c3(0x170)][_0x5000c3(0x14f)],_0x123557=document['getElementById']('userPerm_container_'+_0x1f2002),_0x40c4dc=_0x123557[_0x5000c3(0x12f)](_0x5000c3(0x131));for(var _0x30eae6=0x0;_0x30eae6<_0x40c4dc[_0x5000c3(0x145)];_0x30eae6++){var _0x1d0390=_0x40c4dc[_0x30eae6],_0x34f3fb=parseInt(_0x1d0390[_0x5000c3(0x170)][_0x5000c3(0x14f)],0xa),_0x15f955=parseInt(_0x1d0390[_0x5000c3(0x170)][_0x5000c3(0x143)],0xa),_0xf343ae=company[0x0][_0x5000c3(0x173)][_0x34f3fb]['setPermissions'][_0x15f955],_0x4eef7f=_0x1d0390[_0x5000c3(0x12f)](_0x5000c3(0x136))[0x0],_0x14f254=_0x4eef7f[_0x5000c3(0x174)];_0xf343ae['setPermissionValue']=_0x14f254,_0x4eef7f['disabled']=!![],company[0x0]['setUsers'][_0x34f3fb][_0x5000c3(0x130)]=new Date();}const _0x26253c=await createCartStore('');await saveCompanyToIndexedDB(company,_0x26253c),_0x123557['querySelector'](_0x5000c3(0x152))[_0x5000c3(0x155)]['display']=_0x5000c3(0x142),_0x123557[_0x5000c3(0x12e)]('.userPerm_editBtn')[_0x5000c3(0x155)][_0x5000c3(0x149)]='inline-block',_0x123557[_0x5000c3(0x158)]='userPerm_container\x20border_blue',apiERPsyncUsers();}function generateOfflineOperationsTable(){var _0x44416=_0x1dc4,_0x318189=document['getElementById'](_0x44416(0x10d));return _0x318189['innerHTML']='',createCartStore('')[_0x44416(0x150)](function(_0x4041c2){var _0x65d67=_0x44416,_0x4d9bfe=_0x4041c2[_0x65d67(0x12d)](_0x65d67(0x15b),'readonly'),_0x4573aa=_0x4d9bfe['objectStore'](_0x65d67(0x15b));return new Promise(function(_0x2400f0,_0x262af9){var _0x343c50=_0x4573aa['getAll']();_0x343c50['onsuccess']=function(){var _0x1b961e=_0x1dc4;_0x2400f0(_0x343c50[_0x1b961e(0x11a)]);},_0x343c50['onerror']=function(){var _0x4bdd84=_0x1dc4;_0x262af9(_0x343c50[_0x4bdd84(0x16d)]);};});})[_0x44416(0x150)](function(_0x4412bb){var _0x31c440=_0x44416,_0x384047=[];for(var _0x3e9ac5=0x0;_0x3e9ac5<_0x4412bb[_0x31c440(0x145)];_0x3e9ac5++){_0x4412bb[_0x3e9ac5][_0x31c440(0x134)]==0x1&&_0x384047['push'](_0x4412bb[_0x3e9ac5]);}if(_0x384047[_0x31c440(0x145)]===0x0){_0x318189['textContent']=_0x31c440(0x147);return;}var _0x2153b5=document[_0x31c440(0x172)](_0x31c440(0x163));_0x2153b5[_0x31c440(0x158)]=_0x31c440(0x14a);var _0x19e849=document['createElement']('thead'),_0x46d676=document[_0x31c440(0x172)]('tr');[_0x31c440(0x10c),_0x31c440(0x13a),_0x31c440(0x161),'Fecha',_0x31c440(0x166)][_0x31c440(0x148)](function(_0x536c27){var _0x12696c=_0x31c440,_0x9b9dc6=document[_0x12696c(0x172)]('th');_0x9b9dc6[_0x12696c(0x133)]=_0x536c27,_0x46d676[_0x12696c(0x14b)](_0x9b9dc6);}),_0x19e849[_0x31c440(0x14b)](_0x46d676),_0x2153b5[_0x31c440(0x14b)](_0x19e849);var _0x5810b1=document['createElement'](_0x31c440(0x125));_0x384047[_0x31c440(0x148)](function(_0x1bb3b4){var _0xf9e8ac=_0x31c440,_0x5e4aee=document[_0xf9e8ac(0x172)]('tr'),_0x745519=[_0x1bb3b4[_0xf9e8ac(0x162)],_0x1bb3b4[_0xf9e8ac(0x10a)],_0x1bb3b4[_0xf9e8ac(0x11d)],_0x1bb3b4['setFechaHora'],_0x1bb3b4[_0xf9e8ac(0x115)]||''];_0x745519[_0xf9e8ac(0x148)](function(_0x4da9d5){var _0x8eb58d=_0xf9e8ac,_0x469b94=document[_0x8eb58d(0x172)]('td');_0x469b94[_0x8eb58d(0x133)]=_0x4da9d5,_0x5e4aee[_0x8eb58d(0x14b)](_0x469b94);}),_0x5810b1[_0xf9e8ac(0x14b)](_0x5e4aee);}),_0x2153b5[_0x31c440(0x14b)](_0x5810b1),_0x318189[_0x31c440(0x14b)](_0x2153b5);})[_0x44416(0x13d)](function(_0x4ba77a){var _0x2e97b6=_0x44416;console[_0x2e97b6(0x16d)](_0x2e97b6(0x11c),_0x4ba77a),_0x318189[_0x2e97b6(0x133)]=_0x2e97b6(0x129);});}window[_0x122e59(0x10e)]=function(){var _0x524679=_0x122e59;const _0x279c16=0x2;loadLoginContent('./img/apiPOS.png'),setUserNameGet(),setEventBtnAccess();const _0x5303e0=document[_0x524679(0x12e)]('.btn-logout');_0x5303e0&&_0x5303e0[_0x524679(0x118)](_0x524679(0x14e),function(){logoutReload(0x0,_0x279c16);}),document[_0x524679(0x15e)](_0x524679(0x109))[_0x524679(0x118)](_0x524679(0x146),async function(){var _0x45bd35=_0x524679;const _0x3ca311=parseInt(this[_0x45bd35(0x174)]);company[0x0][_0x45bd35(0x120)]=_0x3ca311;const _0x4ed654=await createCartStore('');await saveCompanyToIndexedDB(company,_0x4ed654),cargarAlmacenes(_0x3ca311),setTimeout(()=>{var _0x24e987=_0x45bd35;document[_0x24e987(0x15e)]('setWarehouseId')[_0x24e987(0x169)](new Event('change'));},0x64),cargarPisos(_0x3ca311),setTimeout(()=>{var _0x397151=_0x45bd35;document['getElementById'](_0x397151(0x164))[_0x397151(0x169)](new Event(_0x397151(0x146)));},0x64),ntf_initNotifications();}),loadCartAndSetTabCount(_0x279c16);};
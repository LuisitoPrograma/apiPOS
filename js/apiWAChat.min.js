/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 4.3.4
*/

const _0x3cffda=_0x4c90;function _0x155f(){const _0x254dfd=['getElementById','return\x20(function()\x20','qr-overlay','{}.constructor(\x22return\x20this\x22)(\x20)','Error\x20al\x20validar\x20estado\x20despu√©s\x20de\x20expirar\x20QR:','display','__proto__','12027944fbuDGy','/qr','includes','style','setCredentialsApiWAChatStatus','exception','53406mipTAf','12672SXWABw','json','hidden','change','value','addEventListener','(((.+)+)+)+$','visible','then','click','visibility','setCredentialsApiWAChat','setBranchId','5357940oxPQSk','57StHwSB','qr-img','2FEcDyR','status','table','943669apcqHL','toString','https://','querySelector','2430KOEiEm','catch','chatPanel','14260wqNhjQ','constructor','3493fczHAu','.btn-logout','toLowerCase','error','ya\x20conectado','./img/apiPOS.png','Credenciales\x20no\x20encontradas','setCredentialsApiWAChatSubdomain','/wa/','dispatchEvent','warn','src','51900409zTcdHk','setFloorId','flex','search','apply','setBranchDefault','setCredentialsApiWAChatPort','loginPanel','console','bind','setAuthToken','onload','none'];_0x155f=function(){return _0x254dfd;};return _0x155f();}(function(_0x534bd4,_0x280279){const _0x172374=_0x4c90,_0x286e49=_0x534bd4();while(!![]){try{const _0x4353be=parseInt(_0x172374(0x21a))/0x1*(-parseInt(_0x172374(0x217))/0x2)+parseInt(_0x172374(0x215))/0x3*(parseInt(_0x172374(0x221))/0x4)+-parseInt(_0x172374(0x214))/0x5+-parseInt(_0x172374(0x207))/0x6*(-parseInt(_0x172374(0x223))/0x7)+-parseInt(_0x172374(0x200))/0x8+parseInt(_0x172374(0x206))/0x9*(-parseInt(_0x172374(0x21e))/0xa)+parseInt(_0x172374(0x1ec))/0xb;if(_0x4353be===_0x280279)break;else _0x286e49['push'](_0x286e49['shift']());}catch(_0x92ac7d){_0x286e49['push'](_0x286e49['shift']());}}}(_0x155f,0xd6a1a));const _0x237dae=(function(){let _0x54d132=!![];return function(_0x3209fe,_0x77ed4){const _0x2ba12d=_0x54d132?function(){const _0x235c48=_0x4c90;if(_0x77ed4){const _0x320370=_0x77ed4[_0x235c48(0x1f0)](_0x3209fe,arguments);return _0x77ed4=null,_0x320370;}}:function(){};return _0x54d132=![],_0x2ba12d;};}()),_0x2e9181=_0x237dae(this,function(){const _0x454f6d=_0x4c90;return _0x2e9181[_0x454f6d(0x21b)]()['search'](_0x454f6d(0x20d))[_0x454f6d(0x21b)]()[_0x454f6d(0x222)](_0x2e9181)[_0x454f6d(0x1ef)](_0x454f6d(0x20d));});_0x2e9181();const _0x114189=(function(){let _0x1aaf37=!![];return function(_0x23e129,_0x2e120a){const _0x3389f6=_0x1aaf37?function(){const _0x8b95cd=_0x4c90;if(_0x2e120a){const _0x142429=_0x2e120a[_0x8b95cd(0x1f0)](_0x23e129,arguments);return _0x2e120a=null,_0x142429;}}:function(){};return _0x1aaf37=![],_0x3389f6;};}()),_0x10dac2=_0x114189(this,function(){const _0x52cf28=_0x4c90,_0x586b87=function(){const _0x66b51f=_0x4c90;let _0x1e4394;try{_0x1e4394=Function(_0x66b51f(0x1fa)+_0x66b51f(0x1fc)+');')();}catch(_0x236c40){_0x1e4394=window;}return _0x1e4394;},_0x2c0173=_0x586b87(),_0x4fbda2=_0x2c0173[_0x52cf28(0x1f4)]=_0x2c0173['console']||{},_0x14a20a=['log',_0x52cf28(0x1ea),'info',_0x52cf28(0x1e3),_0x52cf28(0x205),_0x52cf28(0x219),'trace'];for(let _0x26d52b=0x0;_0x26d52b<_0x14a20a['length'];_0x26d52b++){const _0x594d39=_0x114189[_0x52cf28(0x222)]['prototype'][_0x52cf28(0x1f5)](_0x114189),_0x14505a=_0x14a20a[_0x26d52b],_0x138310=_0x4fbda2[_0x14505a]||_0x594d39;_0x594d39[_0x52cf28(0x1ff)]=_0x114189[_0x52cf28(0x1f5)](_0x114189),_0x594d39[_0x52cf28(0x21b)]=_0x138310[_0x52cf28(0x21b)]['bind'](_0x138310),_0x4fbda2[_0x14505a]=_0x594d39;}});_0x10dac2();const selectCredentialsApiWAChat=document[_0x3cffda(0x1f9)](_0x3cffda(0x212)),loginPanel=document[_0x3cffda(0x1f9)](_0x3cffda(0x1f3)),chatPanel=document[_0x3cffda(0x1f9)](_0x3cffda(0x220)),qrImg=document[_0x3cffda(0x1f9)](_0x3cffda(0x216)),overlay=document['getElementById'](_0x3cffda(0x1fb));let qrTimeout;const validSeconds=0xa;function showLogin(){const _0x417714=_0x3cffda;loginPanel['style']['display']=_0x417714(0x1ee),chatPanel[_0x417714(0x203)][_0x417714(0x211)]=_0x417714(0x209);}function showChat(){const _0x5c34c2=_0x3cffda;loginPanel[_0x5c34c2(0x203)][_0x5c34c2(0x1fe)]=_0x5c34c2(0x1f8),chatPanel['style'][_0x5c34c2(0x211)]=_0x5c34c2(0x20e);}function _0x4c90(_0x4a4c57,_0x3d0746){const _0x117ba6=_0x155f();return _0x4c90=function(_0x10dac2,_0x114189){_0x10dac2=_0x10dac2-0x1e1;let _0x57a7e2=_0x117ba6[_0x10dac2];return _0x57a7e2;},_0x4c90(_0x4a4c57,_0x3d0746);}async function displayQR(_0x526f46){const _0x50f8e0=_0x3cffda,_0x350638=selectCredentialsApiWAChat['value'],_0x20aa9d=getCredentialsApiWAChat(_0x350638);if(_0x20aa9d){const _0x913f09=_0x20aa9d[_0x50f8e0(0x1e7)],_0x49aa92=_0x20aa9d[_0x50f8e0(0x1f2)];clearTimeout(qrTimeout),overlay[_0x50f8e0(0x203)][_0x50f8e0(0x1fe)]=_0x50f8e0(0x1f8),qrImg[_0x50f8e0(0x1eb)]=_0x526f46,qrTimeout=setTimeout(()=>{const _0x3951ec=_0x50f8e0;fetch(_0x3951ec(0x21c)+_0x913f09+_0x3951ec(0x1e8)+_0x49aa92+_0x3951ec(0x201),{'headers':{'x-auth-token':myCompany['setAuthToken']}})['then'](async _0x474f3f=>_0x474f3f['json']())[_0x3951ec(0x20f)](async _0x50c7fb=>{const _0x35e894=_0x3951ec;_0x50c7fb['status']&&_0x50c7fb['status'][_0x35e894(0x1e2)]()['includes'](_0x35e894(0x1e4))?(showChat(),_0x20aa9d[_0x35e894(0x204)]=0x1):(overlay['style'][_0x35e894(0x1fe)]=_0x35e894(0x1ee),_0x20aa9d[_0x35e894(0x204)]=0x0);const _0x1990ad=await createCartStore('');await saveCompanyToIndexedDB(company,_0x1990ad);})[_0x3951ec(0x21f)](_0x2bc8b9=>{const _0x22b2b5=_0x3951ec;console[_0x22b2b5(0x1e3)](_0x22b2b5(0x1fd),_0x2bc8b9),overlay['style'][_0x22b2b5(0x1fe)]='flex';});},validSeconds*0x3e8);}else ntfShow('Credenciales\x20no\x20encontradas');}async function init(){const _0x3e3e9b=_0x3cffda,_0x3f45f6=selectCredentialsApiWAChat[_0x3e3e9b(0x20b)],_0x11e94d=getCredentialsApiWAChat(_0x3f45f6);if(_0x11e94d){const _0x1451fd=_0x11e94d[_0x3e3e9b(0x1e7)],_0x394aba=_0x11e94d['setCredentialsApiWAChatPort'];fetch(_0x3e3e9b(0x21c)+_0x1451fd+'/wa/'+_0x394aba+_0x3e3e9b(0x201),{'headers':{'x-auth-token':myCompany[_0x3e3e9b(0x1f6)]}})[_0x3e3e9b(0x20f)](async _0x3758ed=>_0x3758ed[_0x3e3e9b(0x208)]())[_0x3e3e9b(0x20f)](async _0x173b75=>{const _0x2fde1b=_0x3e3e9b;if(_0x173b75[_0x2fde1b(0x218)]&&_0x173b75['status']['toLowerCase']()[_0x2fde1b(0x202)](_0x2fde1b(0x1e4)))showChat(),_0x11e94d['setCredentialsApiWAChatStatus']=0x1;else _0x173b75['qr']&&(showLogin(),displayQR(_0x173b75['qr']),_0x11e94d[_0x2fde1b(0x204)]=0x0);const _0x557888=await createCartStore('');await saveCompanyToIndexedDB(company,_0x557888);})['catch'](console['error']);}else ntfShow(_0x3e3e9b(0x1e6));}overlay[_0x3cffda(0x20c)](_0x3cffda(0x210),init),window[_0x3cffda(0x1f7)]=function(){const _0x62bd4d=_0x3cffda,_0x5879fe=0x4;loadLoginContent(_0x62bd4d(0x1e5)),setUserNameGet(),setEventBtnAccess();const _0x1e5577=document[_0x62bd4d(0x21d)](_0x62bd4d(0x1e1));_0x1e5577&&_0x1e5577[_0x62bd4d(0x20c)](_0x62bd4d(0x210),function(){logoutReload(0x0,_0x5879fe);}),document[_0x62bd4d(0x1f9)](_0x62bd4d(0x213))[_0x62bd4d(0x20c)](_0x62bd4d(0x20a),async function(){const _0x41cecd=_0x62bd4d,_0xc94dda=parseInt(this[_0x41cecd(0x20b)]);myCompany[_0x41cecd(0x1f1)]=_0xc94dda,saveCredentialsApiWAChatInCompany();const _0x3f2603=await createCartStore('');await saveCompanyToIndexedDB(company,_0x3f2603),cargarAlmacenes(_0xc94dda),setTimeout(()=>{const _0x2385a7=_0x41cecd;document['getElementById']('setWarehouseId')[_0x2385a7(0x1e9)](new Event(_0x2385a7(0x20a)));},0x64),cargarPisos(_0xc94dda),setTimeout(()=>{const _0x3a48fd=_0x41cecd;document[_0x3a48fd(0x1f9)](_0x3a48fd(0x1ed))['dispatchEvent'](new Event(_0x3a48fd(0x20a)));},0x64),ntf_initNotifications();}),loadCartAndSetTabCount(_0x5879fe);};
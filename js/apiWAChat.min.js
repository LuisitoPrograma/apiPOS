/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 4.2.8
*/

const _0x4ba88d=_0x8cf1;(function(_0x26b7db,_0x4950be){const _0x5883d6=_0x8cf1,_0x2436d1=_0x26b7db();while(!![]){try{const _0x3de069=parseInt(_0x5883d6(0x95))/0x1+-parseInt(_0x5883d6(0xaa))/0x2+parseInt(_0x5883d6(0x9c))/0x3*(parseInt(_0x5883d6(0xcd))/0x4)+parseInt(_0x5883d6(0xad))/0x5*(-parseInt(_0x5883d6(0x99))/0x6)+parseInt(_0x5883d6(0xc4))/0x7+-parseInt(_0x5883d6(0x96))/0x8*(-parseInt(_0x5883d6(0xc5))/0x9)+-parseInt(_0x5883d6(0xa0))/0xa*(parseInt(_0x5883d6(0x9b))/0xb);if(_0x3de069===_0x4950be)break;else _0x2436d1['push'](_0x2436d1['shift']());}catch(_0x15ef49){_0x2436d1['push'](_0x2436d1['shift']());}}}(_0x3a51,0x1993a));const _0x578715=(function(){let _0x2fcf63=!![];return function(_0x33c95c,_0x22004b){const _0x43e7ed=_0x2fcf63?function(){const _0x43a228=_0x8cf1;if(_0x22004b){const _0x3caf00=_0x22004b[_0x43a228(0x98)](_0x33c95c,arguments);return _0x22004b=null,_0x3caf00;}}:function(){};return _0x2fcf63=![],_0x43e7ed;};}()),_0x1a719f=_0x578715(this,function(){const _0x8ec4f3=_0x8cf1;return _0x1a719f['toString']()['search']('(((.+)+)+)+$')[_0x8ec4f3(0xd1)]()[_0x8ec4f3(0x8f)](_0x1a719f)['search'](_0x8ec4f3(0x9a));});_0x1a719f();const _0x1f4824=(function(){let _0x8e85ef=!![];return function(_0x193373,_0x280288){const _0x375a21=_0x8e85ef?function(){const _0x46ddd4=_0x8cf1;if(_0x280288){const _0x42ae62=_0x280288[_0x46ddd4(0x98)](_0x193373,arguments);return _0x280288=null,_0x42ae62;}}:function(){};return _0x8e85ef=![],_0x375a21;};}()),_0x4848e1=_0x1f4824(this,function(){const _0x34de44=_0x8cf1;let _0x43b9a1;try{const _0x447fbf=Function(_0x34de44(0xb6)+_0x34de44(0xaf)+');');_0x43b9a1=_0x447fbf();}catch(_0x5c9033){_0x43b9a1=window;}const _0x3e98eb=_0x43b9a1[_0x34de44(0xc2)]=_0x43b9a1[_0x34de44(0xc2)]||{},_0x4148b8=[_0x34de44(0x9d),'warn',_0x34de44(0xa7),_0x34de44(0xcf),_0x34de44(0xb5),_0x34de44(0xcc),_0x34de44(0xb9)];for(let _0x1004aa=0x0;_0x1004aa<_0x4148b8[_0x34de44(0xc1)];_0x1004aa++){const _0x4ea142=_0x1f4824[_0x34de44(0x8f)][_0x34de44(0xa5)]['bind'](_0x1f4824),_0xb79e72=_0x4148b8[_0x1004aa],_0x4e1800=_0x3e98eb[_0xb79e72]||_0x4ea142;_0x4ea142[_0x34de44(0xc0)]=_0x1f4824[_0x34de44(0xb0)](_0x1f4824),_0x4ea142[_0x34de44(0xd1)]=_0x4e1800[_0x34de44(0xd1)][_0x34de44(0xb0)](_0x4e1800),_0x3e98eb[_0xb79e72]=_0x4ea142;}});function _0x8cf1(_0x486e02,_0xa26305){const _0x466a2b=_0x3a51();return _0x8cf1=function(_0x4848e1,_0x1f4824){_0x4848e1=_0x4848e1-0x8f;let _0x2db024=_0x466a2b[_0x4848e1];return _0x2db024;},_0x8cf1(_0x486e02,_0xa26305);}_0x4848e1();const selectCredentialsApiWAChat=document[_0x4ba88d(0xa9)](_0x4ba88d(0xb8)),loginPanel=document['getElementById'](_0x4ba88d(0xcb)),chatPanel=document[_0x4ba88d(0xa9)](_0x4ba88d(0xbd)),qrImg=document[_0x4ba88d(0xa9)](_0x4ba88d(0xb4)),overlay=document['getElementById'](_0x4ba88d(0xd0));let qrTimeout;const validSeconds=0xa;function showLogin(){const _0x327f88=_0x4ba88d;loginPanel[_0x327f88(0xa8)][_0x327f88(0xa2)]=_0x327f88(0xab),chatPanel['style'][_0x327f88(0xd2)]=_0x327f88(0xc6);}function showChat(){const _0x58a8ee=_0x4ba88d;loginPanel[_0x58a8ee(0xa8)]['display']=_0x58a8ee(0x91),chatPanel[_0x58a8ee(0xa8)]['visibility']=_0x58a8ee(0xa6);}function _0x3a51(){const _0x3cbeba=['return\x20(function()\x20','querySelector','setCredentialsApiWAChat','trace','setFloorId','/wa/','.btn-logout','chatPanel','./img/apiPOS.png','setAuthToken','__proto__','length','console','setCredentialsApiWAChatPort','1453858QBEWXu','666477VjMLVa','hidden','toLowerCase','https://','addEventListener','change','loginPanel','table','304052FZvJgl','setBranchDefault','error','qr-overlay','toString','visibility','constructor','catch','none','ya\x20conectado','json','setBranchId','38629BFypSP','16PzAySX','Error\x20al\x20validar\x20estado\x20despuÃ©s\x20de\x20expirar\x20QR:','apply','30uKonKL','(((.+)+)+)+$','169609ZIpusj','3qwzBbZ','log','setCredentialsApiWAChatSubdomain','/qr','70wMnmjG','dispatchEvent','display','Credenciales\x20no\x20encontradas','value','prototype','visible','info','style','getElementById','401974wfwVjY','flex','click','56760ZndhCu','includes','{}.constructor(\x22return\x20this\x22)(\x20)','bind','setCredentialsApiWAChatStatus','then','status','qr-img','exception'];_0x3a51=function(){return _0x3cbeba;};return _0x3a51();}async function displayQR(_0xa27e0b){const _0x45b37d=_0x4ba88d,_0x3167b1=selectCredentialsApiWAChat[_0x45b37d(0xa4)],_0xcd038b=getCredentialsApiWAChat(_0x3167b1);if(_0xcd038b){const _0x3bdffd=_0xcd038b['setCredentialsApiWAChatSubdomain'],_0x9b07ef=_0xcd038b[_0x45b37d(0xc3)];clearTimeout(qrTimeout),overlay['style'][_0x45b37d(0xa2)]=_0x45b37d(0x91),qrImg['src']=_0xa27e0b,qrTimeout=setTimeout(()=>{const _0x10e7f5=_0x45b37d;fetch('https://'+_0x3bdffd+'/wa/'+_0x9b07ef+_0x10e7f5(0x9f),{'headers':{'x-auth-token':myCompany['setAuthToken']}})[_0x10e7f5(0xb2)](async _0x30ae20=>_0x30ae20[_0x10e7f5(0x93)]())[_0x10e7f5(0xb2)](async _0x5a3765=>{const _0x59d8d3=_0x10e7f5;_0x5a3765['status']&&_0x5a3765[_0x59d8d3(0xb3)]['toLowerCase']()[_0x59d8d3(0xae)](_0x59d8d3(0x92))?(showChat(),_0xcd038b[_0x59d8d3(0xb1)]=0x1):(overlay[_0x59d8d3(0xa8)]['display']='flex',_0xcd038b[_0x59d8d3(0xb1)]=0x0);const _0x28008d=await createCartStore('');await saveCompanyToIndexedDB(company,_0x28008d);})['catch'](_0x17a61c=>{const _0x5a1976=_0x10e7f5;console[_0x5a1976(0xcf)](_0x5a1976(0x97),_0x17a61c),overlay[_0x5a1976(0xa8)][_0x5a1976(0xa2)]=_0x5a1976(0xab);});},validSeconds*0x3e8);}else ntfShow('Credenciales\x20no\x20encontradas');}async function init(){const _0x5ea48b=_0x4ba88d,_0xd8d33a=selectCredentialsApiWAChat[_0x5ea48b(0xa4)],_0x513cfe=getCredentialsApiWAChat(_0xd8d33a);if(_0x513cfe){const _0x433369=_0x513cfe[_0x5ea48b(0x9e)],_0x33d98c=_0x513cfe[_0x5ea48b(0xc3)];fetch(_0x5ea48b(0xc8)+_0x433369+_0x5ea48b(0xbb)+_0x33d98c+_0x5ea48b(0x9f),{'headers':{'x-auth-token':myCompany[_0x5ea48b(0xbf)]}})[_0x5ea48b(0xb2)](async _0x38e8d2=>_0x38e8d2[_0x5ea48b(0x93)]())[_0x5ea48b(0xb2)](async _0x3dd56a=>{const _0x311ce7=_0x5ea48b;if(_0x3dd56a[_0x311ce7(0xb3)]&&_0x3dd56a[_0x311ce7(0xb3)][_0x311ce7(0xc7)]()[_0x311ce7(0xae)](_0x311ce7(0x92)))showChat(),_0x513cfe[_0x311ce7(0xb1)]=0x1;else _0x3dd56a['qr']&&(showLogin(),displayQR(_0x3dd56a['qr']),_0x513cfe[_0x311ce7(0xb1)]=0x0);const _0x52857d=await createCartStore('');await saveCompanyToIndexedDB(company,_0x52857d);})[_0x5ea48b(0x90)](console[_0x5ea48b(0xcf)]);}else ntfShow(_0x5ea48b(0xa3));}overlay[_0x4ba88d(0xc9)](_0x4ba88d(0xac),init),window['onload']=function(){const _0x2381cc=_0x4ba88d,_0x4b532f=0x4;loadLoginContent(_0x2381cc(0xbe)),setUserNameGet(),setEventBtnAccess();const _0x1c63eb=document[_0x2381cc(0xb7)](_0x2381cc(0xbc));_0x1c63eb&&_0x1c63eb[_0x2381cc(0xc9)](_0x2381cc(0xac),function(){logoutReload(0x0,_0x4b532f);}),document[_0x2381cc(0xa9)](_0x2381cc(0x94))[_0x2381cc(0xc9)]('change',async function(){const _0x2045d0=_0x2381cc,_0xab50f0=parseInt(this[_0x2045d0(0xa4)]);myCompany[_0x2045d0(0xce)]=_0xab50f0,saveCredentialsApiWAChatInCompany();const _0x400845=await createCartStore('');await saveCompanyToIndexedDB(company,_0x400845),cargarAlmacenes(_0xab50f0),setTimeout(()=>{const _0x197898=_0x2045d0;document[_0x197898(0xa9)]('setWarehouseId')['dispatchEvent'](new Event(_0x197898(0xca)));},0x64),cargarPisos(_0xab50f0),setTimeout(()=>{const _0x2fe810=_0x2045d0;document['getElementById'](_0x2fe810(0xba))[_0x2fe810(0xa1)](new Event('change'));},0x64),ntf_initNotifications();}),loadCartAndSetTabCount(_0x4b532f);};
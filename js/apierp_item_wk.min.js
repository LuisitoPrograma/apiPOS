/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 4.2.1
*/

const _0x1f4012=_0x3a2e;(function(_0x19688c,_0x4e90ea){const _0x411d3f=_0x3a2e,_0x4e21db=_0x19688c();while(!![]){try{const _0x9c5918=parseInt(_0x411d3f(0x212))/0x1+-parseInt(_0x411d3f(0x1f5))/0x2*(-parseInt(_0x411d3f(0x1db))/0x3)+parseInt(_0x411d3f(0x225))/0x4+parseInt(_0x411d3f(0x1df))/0x5+parseInt(_0x411d3f(0x1e1))/0x6*(parseInt(_0x411d3f(0x237))/0x7)+-parseInt(_0x411d3f(0x222))/0x8+-parseInt(_0x411d3f(0x211))/0x9;if(_0x9c5918===_0x4e90ea)break;else _0x4e21db['push'](_0x4e21db['shift']());}catch(_0x12caa4){_0x4e21db['push'](_0x4e21db['shift']());}}}(_0x3ceb,0x1efd7));const _0x2d2ea1=(function(){let _0x171f6b=!![];return function(_0xafde9c,_0x520c58){const _0x1ad5c4=_0x171f6b?function(){const _0x5bc760=_0x3a2e;if(_0x520c58){const _0x32416c=_0x520c58[_0x5bc760(0x20d)](_0xafde9c,arguments);return _0x520c58=null,_0x32416c;}}:function(){};return _0x171f6b=![],_0x1ad5c4;};}()),_0x1ef6ff=_0x2d2ea1(this,function(){const _0x2433c5=_0x3a2e;return _0x1ef6ff[_0x2433c5(0x1ea)]()[_0x2433c5(0x20b)]('(((.+)+)+)+$')[_0x2433c5(0x1ea)]()[_0x2433c5(0x235)](_0x1ef6ff)[_0x2433c5(0x20b)](_0x2433c5(0x1ee));});_0x1ef6ff();function _0x3ceb(){const _0x1f381b=['GRS','Modelo','YDK','MIL','BLD','__proto__','parse_date_code','bind','Stock\x20Actual','trace','MLT','Categoría','STN','Descripción','Nombre*','warn','Género','FOT','CEN','utils','number','CMK','CM³','getMonth','BLS','GAL','LTN','MUN','Código\x20de\x20Barras','Precio\x20Venta\x20Soles','forEach','KTM','getFullYear','error','push','progress','DZN','1794VmdItC','map','\x20filas\x20válidas\x20a\x20subir;\x20máximo\x20permitido:\x20','¿Rastrear\x20Inventario?','1196825DsLniQ','GLL','3786IjbDmo','MMK','https://cdn.jsdelivr.net/npm/xlsx/dist/xlsx.full.min.js','FT²','BRL','Marca','Impuesto*','Precio\x20Venta\x20Dólares','KWH','toString','code','TNE','Precio\x20Costo\x20Dólares\x202','(((.+)+)+)+$','YD²','DZP','trim','Procesadas\x20filas\x20','Precio\x20Venta\x20Soles\x202','PZA','486zezoeM','Talla','Código\x20de\x20Barras\x202','MMQ','BLL','padStart','GLI','Serie','PAQ','Precio\x20Costo\x20Soles','MGM','Precio\x20Venta\x20Dólares\x202','Precio\x20Costo\x20Soles\x202','INH','MTQ','BOT','Unidad\x20de\x20Medida*','console','Sheets','El\x20archivo\x20tiene\x20','BOB','FTK','search','findIndex','apply','UND\x20(ZZ)','Iniciando\x20parseo…','Equivalencia\x202','3221046ToGNgg','166161aPDZdA','NIU','CTN','UND\x20(NIU)','LBR','info','FTQ','array','FRD','{}.constructor(\x22return\x20this\x22)(\x20)','Código\x20SKU*','LTR','reduce','C62','GRO','read','1900968DkZxZc','some','exception','100872TIcvuT','ONZ','log','length','SSF','Precio\x20Costo\x20Dólares','Tipo*','slice','CMQ','FT³','MM²','HLT','CMT','LEF','PLG','Unidad\x20de\x20Medida\x202','constructor','Nombre\x20del\x20Lote','1624XsRllc'];_0x3ceb=function(){return _0x1f381b;};return _0x3ceb();}function _0x3a2e(_0x43732f,_0x147aa8){const _0x35e5c0=_0x3ceb();return _0x3a2e=function(_0x57e5cb,_0x576900){_0x57e5cb=_0x57e5cb-0x1bd;let _0x402920=_0x35e5c0[_0x57e5cb];return _0x402920;},_0x3a2e(_0x43732f,_0x147aa8);}const _0x576900=(function(){let _0x1fafde=!![];return function(_0x18902b,_0x14780d){const _0x38d9f1=_0x1fafde?function(){if(_0x14780d){const _0x42720b=_0x14780d['apply'](_0x18902b,arguments);return _0x14780d=null,_0x42720b;}}:function(){};return _0x1fafde=![],_0x38d9f1;};}()),_0x57e5cb=_0x576900(this,function(){const _0x1fc137=_0x3a2e,_0x5a11a0=function(){const _0x101fe7=_0x3a2e;let _0x31294;try{_0x31294=Function('return\x20(function()\x20'+_0x101fe7(0x21b)+');')();}catch(_0x52bda0){_0x31294=window;}return _0x31294;},_0x6dfdad=_0x5a11a0(),_0x561132=_0x6dfdad[_0x1fc137(0x206)]=_0x6dfdad[_0x1fc137(0x206)]||{},_0x1bfd3b=[_0x1fc137(0x227),_0x1fc137(0x1c5),_0x1fc137(0x217),_0x1fc137(0x1d7),_0x1fc137(0x224),'table',_0x1fc137(0x1bf)];for(let _0x42d32a=0x0;_0x42d32a<_0x1bfd3b[_0x1fc137(0x228)];_0x42d32a++){const _0x211566=_0x576900[_0x1fc137(0x235)]['prototype'][_0x1fc137(0x1bd)](_0x576900),_0x1a3253=_0x1bfd3b[_0x42d32a],_0x18ed6e=_0x561132[_0x1a3253]||_0x211566;_0x211566[_0x1fc137(0x23d)]=_0x576900[_0x1fc137(0x1bd)](_0x576900),_0x211566[_0x1fc137(0x1ea)]=_0x18ed6e[_0x1fc137(0x1ea)]['bind'](_0x18ed6e),_0x561132[_0x1a3253]=_0x211566;}});_0x57e5cb(),importScripts(_0x1f4012(0x1e3)),onmessage=({data:_0x4dbe35})=>{const _0xbf0259=_0x1f4012,{buf:_0x22a869,maxRows:_0xb74729}=_0x4dbe35;try{postMessage({'type':_0xbf0259(0x1d9),'payload':{'percent':0x5,'message':_0xbf0259(0x20f)}});const _0x282f7=XLSX[_0xbf0259(0x221)](_0x22a869,{'type':_0xbf0259(0x219),'cellDates':!![]}),_0x26e25a=_0x282f7[_0xbf0259(0x207)][_0x282f7['SheetNames'][0x0]],_0xc13857=XLSX[_0xbf0259(0x1c9)]['sheet_to_json'](_0x26e25a,{'defval':'','range':0x1,'cellDates':!![]}),_0x48347=_0xc13857[_0xbf0259(0x20c)](_0x387db2=>(!_0x387db2['Tipo*']||String(_0x387db2[_0xbf0259(0x22b)])[_0xbf0259(0x1f1)]()==='')&&(!_0x387db2[_0xbf0259(0x21c)]||String(_0x387db2[_0xbf0259(0x21c)])[_0xbf0259(0x1f1)]()==='')&&(!_0x387db2[_0xbf0259(0x1c4)]||String(_0x387db2[_0xbf0259(0x1c4)])['trim']()==='')&&(!_0x387db2[_0xbf0259(0x205)]||String(_0x387db2['Unidad\x20de\x20Medida*'])[_0xbf0259(0x1f1)]()==='')),_0x44f8f4=_0x48347>=0x0?_0xc13857[_0xbf0259(0x22c)](0x0,_0x48347):_0xc13857,_0xd36dfa=_0x44f8f4['filter'](_0x2bb55b=>_0x2bb55b[_0xbf0259(0x22b)]&&String(_0x2bb55b[_0xbf0259(0x22b)])[_0xbf0259(0x1f1)]()!==''&&_0x2bb55b['Código\x20SKU*']&&String(_0x2bb55b[_0xbf0259(0x21c)])[_0xbf0259(0x1f1)]()!==''&&_0x2bb55b[_0xbf0259(0x1c4)]&&String(_0x2bb55b[_0xbf0259(0x1c4)])[_0xbf0259(0x1f1)]()!==''&&_0x2bb55b[_0xbf0259(0x205)]&&String(_0x2bb55b[_0xbf0259(0x205)])[_0xbf0259(0x1f1)]()!==''),_0x480910=_0xd36dfa[_0xbf0259(0x228)];if(_0x480910===0x0){postMessage({'type':_0xbf0259(0x1d7),'payload':'No\x20se\x20encontraron\x20filas\x20válidas\x20para\x20subir.\x20Asegúrate\x20de\x20que\x20al\x20menos\x20una\x20fila\x20contenga\x20todos\x20los\x20campos\x20obligatorios\x20(Tipo*,\x20Código\x20SKU*,\x20Nombre*\x20y\x20Unidad\x20de\x20Medida*).'});return;}if(_0x480910>_0xb74729)throw _0xbf0259(0x208)+_0x480910+_0xbf0259(0x1dd)+_0xb74729+'.';const _0x9c9c61=0x1f4,_0x7a40b0=[],_0x2bf85c=[{'codigo':'4A','abreviatura':_0xbf0259(0x209)},{'codigo':'BJ','abreviatura':_0xbf0259(0x23c)},{'codigo':_0xbf0259(0x1f9),'abreviatura':_0xbf0259(0x1e5)},{'codigo':'BG','abreviatura':_0xbf0259(0x1ce)},{'codigo':'BO','abreviatura':_0xbf0259(0x204)},{'codigo':'BX','abreviatura':'CJ'},{'codigo':'CT','abreviatura':_0xbf0259(0x214)},{'codigo':_0xbf0259(0x1cb),'abreviatura':'CM²'},{'codigo':_0xbf0259(0x22d),'abreviatura':_0xbf0259(0x1cc)},{'codigo':_0xbf0259(0x231),'abreviatura':'CML'},{'codigo':'CEN','abreviatura':_0xbf0259(0x1c8)},{'codigo':'CY','abreviatura':'CIL'},{'codigo':'CJ','abreviatura':'CNS'},{'codigo':_0xbf0259(0x1da),'abreviatura':'DZ'},{'codigo':'DZP','abreviatura':_0xbf0259(0x1f0)},{'codigo':'BE','abreviatura':_0xbf0259(0x21a)},{'codigo':_0xbf0259(0x1fb),'abreviatura':_0xbf0259(0x1fb)},{'codigo':'GRM','abreviatura':'G'},{'codigo':_0xbf0259(0x220),'abreviatura':_0xbf0259(0x238)},{'codigo':_0xbf0259(0x230),'abreviatura':'HL'},{'codigo':_0xbf0259(0x232),'abreviatura':'HJ'},{'codigo':'SET','abreviatura':'JGO'},{'codigo':'KGM','abreviatura':'KG'},{'codigo':_0xbf0259(0x1d5),'abreviatura':'KM'},{'codigo':_0xbf0259(0x1e9),'abreviatura':'KWH'},{'codigo':'KT','abreviatura':'KIT'},{'codigo':'CA','abreviatura':'LT'},{'codigo':_0xbf0259(0x216),'abreviatura':'LB'},{'codigo':_0xbf0259(0x21d),'abreviatura':'L'},{'codigo':'MWH','abreviatura':'MWH'},{'codigo':'MTR','abreviatura':'M'},{'codigo':'MTK','abreviatura':'M²'},{'codigo':_0xbf0259(0x203),'abreviatura':'M³'},{'codigo':_0xbf0259(0x1ff),'abreviatura':'MG'},{'codigo':_0xbf0259(0x1c0),'abreviatura':'ML'},{'codigo':'MMT','abreviatura':'MM'},{'codigo':_0xbf0259(0x1e2),'abreviatura':_0xbf0259(0x22f)},{'codigo':_0xbf0259(0x1f8),'abreviatura':'MM³'},{'codigo':_0xbf0259(0x23b),'abreviatura':_0xbf0259(0x23b)},{'codigo':'UM','abreviatura':_0xbf0259(0x1d1)},{'codigo':_0xbf0259(0x226),'abreviatura':'OZ'},{'codigo':'PF','abreviatura':'PAL'},{'codigo':'PK','abreviatura':_0xbf0259(0x1fd)},{'codigo':'PR','abreviatura':'PR'},{'codigo':_0xbf0259(0x1c7),'abreviatura':'FT'},{'codigo':_0xbf0259(0x20a),'abreviatura':_0xbf0259(0x1e4)},{'codigo':_0xbf0259(0x218),'abreviatura':_0xbf0259(0x22e)},{'codigo':_0xbf0259(0x21f),'abreviatura':_0xbf0259(0x1f4)},{'codigo':'PG','abreviatura':'PLC'},{'codigo':'ST','abreviatura':_0xbf0259(0x233)},{'codigo':_0xbf0259(0x202),'abreviatura':'IN'},{'codigo':'RM','abreviatura':'RMA'},{'codigo':'SA','abreviatura':'SC'},{'codigo':'DR','abreviatura':'TBR'},{'codigo':_0xbf0259(0x1c2),'abreviatura':'TC'},{'codigo':_0xbf0259(0x1d0),'abreviatura':'TL'},{'codigo':_0xbf0259(0x1ec),'abreviatura':'TN'},{'codigo':'TU','abreviatura':'TUB'},{'codigo':_0xbf0259(0x213),'abreviatura':'UND\x20(NIU)'},{'codigo':'ZZ','abreviatura':_0xbf0259(0x20e)},{'codigo':_0xbf0259(0x1e0),'abreviatura':_0xbf0259(0x1cf)},{'codigo':'YRD','abreviatura':'YD'},{'codigo':_0xbf0259(0x23a),'abreviatura':_0xbf0259(0x1ef)},{'codigo':'QQM','abreviatura':'Q'}],_0x5b8808=_0x2bf85c[_0xbf0259(0x21e)]((_0x274577,{abreviatura:_0x5dedcf,codigo:_0x4a30b6})=>{const _0x40be0c=_0xbf0259;return _0x274577[_0x5dedcf[_0x40be0c(0x1f1)]()]=_0x4a30b6['trim'](),_0x274577;},{});for(let _0xc0729c=0x0;_0xc0729c<_0x480910;_0xc0729c+=_0x9c9c61){const _0x16473c=_0xd36dfa[_0xbf0259(0x22c)](_0xc0729c,_0xc0729c+_0x9c9c61)[_0xbf0259(0x1dc)]((_0x5b91ee,_0x30767d)=>{const _0x234954=_0xbf0259;let _0x1541e3={'Artículo':'1','Servicio':'2','Materia\x20Prima':'3','Combo':'4','Fabricado':'5'}[_0x5b91ee[_0x234954(0x22b)]]||'1';const _0x5cd147=String(_0x5b91ee[_0x234954(0x1e7)])[_0x234954(0x1f1)](),_0x36a971={'Gravado\x20(18%)':'1','Exonerado\x20(0%)':'2','Inafecto\x20(0%)':'3','Gravado\x20Gratuito\x20(18%)':'4','Inafecto\x20Gratuito\x20(0%)':'5','Gravado\x20(10%)':'6','Exonerado\x20Gratuito\x20(0%)':'7','Exportación\x20(0%)':'8','Gravado\x20Gratuito\x20(10%)':'9'},_0x4f0a6d=_0x36a971[_0x5cd147]||'1',_0x49ac83={'1':{'code':'10','value':0x12},'2':{'code':'20','value':0x0},'3':{'code':'30','value':0x0},'4':{'code':'13','value':0x12},'5':{'code':'32','value':0x0},'6':{'code':'10','value':0xa},'7':{'code':'21','value':0x0},'8':{'code':'40','value':0x0},'9':{'code':'13','value':0xa}}[_0x4f0a6d]||{'code':'10','value':0x12},_0x5bb224=[_0x234954(0x1f6),'Color',_0x234954(0x1c6),_0x234954(0x239),_0x234954(0x1fc)],_0xa2f59b={};let _0x16693b=String(_0x5b91ee[_0x234954(0x1c4)])['trim']();_0x5bb224[_0x234954(0x1d4)](_0x29387f=>{const _0x4d99e0=_0x234954,_0x1ce813=String(_0x5b91ee[_0x29387f]||'')[_0x4d99e0(0x1f1)]();_0x1ce813&&(_0xa2f59b[_0x29387f]=_0x1ce813,_0x16693b+='\x20'+_0x29387f+'\x20'+_0x1ce813);});const _0x1dd4aa=[],_0x4da811=String(_0x5b91ee[_0x234954(0x205)]||_0x234954(0x215))['trim'](),_0x3dc500=_0x5b8808[_0x4da811]||_0x234954(0x213);_0x1dd4aa[_0x234954(0x1d8)]({'setItemBarCode':String(_0x5b91ee['Código\x20de\x20Barras'])[_0x234954(0x1f1)]()||'','setAlias':_0x4da811,'setUnitCode':_0x3dc500,'setPrice':parseFloat(_0x5b91ee[_0x234954(0x1d3)])||0x0,'setCost':parseFloat(_0x5b91ee[_0x234954(0x1fe)])||0x0,'setPriceUSD':parseFloat(_0x5b91ee[_0x234954(0x1e8)])||0x0,'setCostUSD':parseFloat(_0x5b91ee[_0x234954(0x22a)])||0x0,'setDefault':0x1,'setEquivalence':0x1,'setFactor':0x1});const _0x58c4c2=['Código\x20de\x20Barras\x202',_0x234954(0x210),_0x234954(0x1f3),_0x234954(0x201),_0x234954(0x200),'Precio\x20Costo\x20Dólares\x202'][_0x234954(0x223)](_0x41e992=>{const _0x22d7a9=_0x5b91ee[_0x41e992];return _0x22d7a9!=null&&String(_0x22d7a9)['trim']()!=='';});if(_0x58c4c2){const _0x5950aa=String(_0x5b91ee[_0x234954(0x234)]||_0x234954(0x215))[_0x234954(0x1f1)](),_0x3520dd=_0x5b8808[_0x5950aa]||_0x234954(0x213),_0x2e6dfe=parseFloat(_0x5b91ee[_0x234954(0x1f3)])||0x0,_0x5ca36b=parseFloat(_0x5b91ee[_0x234954(0x201)])||0x0,_0x303f21=parseFloat(_0x5b91ee[_0x234954(0x200)])||0x0,_0x1d960a=parseFloat(_0x5b91ee[_0x234954(0x1ed)])||0x0,_0x24d0e2=parseFloat(_0x5b91ee[_0x234954(0x210)])||0x1;_0x1dd4aa[_0x234954(0x1d8)]({'setItemBarCode':String(_0x5b91ee[_0x234954(0x1f7)])[_0x234954(0x1f1)]()||'','setAlias':_0x5950aa,'setUnitCode':_0x3520dd,'setPrice':_0x2e6dfe,'setCost':_0x5ca36b,'setPriceUSD':_0x303f21,'setCostUSD':_0x1d960a,'setDefault':0x0,'setEquivalence':_0x24d0e2,'setFactor':_0x24d0e2});}let _0x1ce49a=_0x5b91ee['Fecha\x20de\x20Vencimiento'],_0xbd60cc='';if(_0x1ce49a instanceof Date){const _0x5a544e=_0x1ce49a[_0x234954(0x1d6)](),_0x1c2e32=String(_0x1ce49a[_0x234954(0x1cd)]()+0x1)[_0x234954(0x1fa)](0x2,'0'),_0x2e83d7=String(_0x1ce49a['getDate']())['padStart'](0x2,'0');_0xbd60cc=_0x5a544e+'-'+_0x1c2e32+'-'+_0x2e83d7;}else{if(typeof _0x1ce49a===_0x234954(0x1ca)){const _0x2a751c=XLSX[_0x234954(0x229)][_0x234954(0x23e)](_0x1ce49a);if(_0x2a751c){const _0x15c6c2=_0x2a751c['y'],_0x1dfd7f=String(_0x2a751c['m'])[_0x234954(0x1fa)](0x2,'0'),_0xeb75c6=String(_0x2a751c['d'])[_0x234954(0x1fa)](0x2,'0');_0xbd60cc=_0x15c6c2+'-'+_0x1dfd7f+'-'+_0xeb75c6;}}else _0xbd60cc=String(_0x1ce49a||'')[_0x234954(0x1f1)]();}return{'setItemType':_0x1541e3,'setItemCode':String(_0x5b91ee[_0x234954(0x21c)])[_0x234954(0x1f1)](),'setItemBarCode':String(_0x5b91ee[_0x234954(0x1d2)])[_0x234954(0x1f1)]()||'','setItemName':String(_0x5b91ee[_0x234954(0x1c4)])[_0x234954(0x1f1)](),'setItemDescription':String(_0x5b91ee[_0x234954(0x1c3)])[_0x234954(0x1f1)]()||'','setItemTaxId':_0x4f0a6d,'setItemTaxCode':_0x49ac83[_0x234954(0x1eb)],'setItemTaxValue':_0x49ac83['value'],'setItemSunatCode':'','setItemInventoriable':_0x5b91ee[_0x234954(0x1de)]=='SI'?0x1:0x0,'setItemUnits':_0x1dd4aa,'setStockInitial':parseFloat(_0x5b91ee[_0x234954(0x1be)])||0x0,'setStockMinimum':parseFloat(_0x5b91ee['Stock\x20Mínimo'])||0x0,'setItemComponents':[],'setItemImages':[],'setItemFree':0x0,'setItemIsBought':0x1,'setItemIsSold':0x1,'setBatchName':String(_0x5b91ee[_0x234954(0x236)])['trim']()||'','setItemDateExpiry':_0xbd60cc,'setItemBrands':_0x5b91ee[_0x234954(0x1e6)]?[String(_0x5b91ee['Marca'])[_0x234954(0x1f1)]()]:[],'setItemCategories':_0x5b91ee[_0x234954(0x1c1)]?[String(_0x5b91ee['Categoría'])[_0x234954(0x1f1)]()]:[],'setItemVariantName':_0x16693b,'setItemVariantValues':_0xa2f59b};});_0x7a40b0[_0xbf0259(0x1d8)](..._0x16473c),postMessage({'type':'progress','payload':{'percent':Math['round']((_0xc0729c+_0x16473c[_0xbf0259(0x228)])/_0x480910*0x64),'message':_0xbf0259(0x1f2)+(_0xc0729c+0x1)+'–'+(_0xc0729c+_0x16473c['length'])+'/'+_0x480910}});}postMessage({'type':'done','payload':{'items':_0x7a40b0}});}catch(_0x247130){postMessage({'type':_0xbf0259(0x1d7),'payload':_0x247130['message']||_0x247130});}};
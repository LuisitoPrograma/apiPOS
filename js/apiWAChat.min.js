/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 5.2.0
*/

function _0x100a(_0x1c1373,_0x40cf71){const _0x23eec8=_0x502d();return _0x100a=function(_0xf3db67,_0x5eaaa5){_0xf3db67=_0xf3db67-0x1a4;let _0x4a73bf=_0x23eec8[_0xf3db67];return _0x4a73bf;},_0x100a(_0x1c1373,_0x40cf71);}const _0x4a2495=_0x100a;(function(_0x37796f,_0x42752d){const _0x2b6385=_0x100a,_0x519f3b=_0x37796f();while(!![]){try{const _0x5aea53=parseInt(_0x2b6385(0x1b9))/0x1+-parseInt(_0x2b6385(0x1d7))/0x2+parseInt(_0x2b6385(0x1d1))/0x3+parseInt(_0x2b6385(0x1e1))/0x4*(-parseInt(_0x2b6385(0x1bc))/0x5)+parseInt(_0x2b6385(0x1b6))/0x6*(-parseInt(_0x2b6385(0x1d0))/0x7)+parseInt(_0x2b6385(0x1af))/0x8*(parseInt(_0x2b6385(0x1cb))/0x9)+-parseInt(_0x2b6385(0x1c0))/0xa*(-parseInt(_0x2b6385(0x1b1))/0xb);if(_0x5aea53===_0x42752d)break;else _0x519f3b['push'](_0x519f3b['shift']());}catch(_0x1272d1){_0x519f3b['push'](_0x519f3b['shift']());}}}(_0x502d,0x85fe2));const selectCredentialsApiWAChat=document['getElementById'](_0x4a2495(0x1d6)),loginPanel=document[_0x4a2495(0x1c7)]('loginPanel'),chatPanel=document[_0x4a2495(0x1c7)](_0x4a2495(0x1b5)),qrImg=document[_0x4a2495(0x1c7)](_0x4a2495(0x1dc)),overlay=document[_0x4a2495(0x1c7)](_0x4a2495(0x1b0));let qrTimeout;const validSeconds=0xa;function showLogin(){const _0x2bf1f8=_0x4a2495;loginPanel[_0x2bf1f8(0x1de)]['display']=_0x2bf1f8(0x1df),chatPanel[_0x2bf1f8(0x1de)][_0x2bf1f8(0x1d9)]='hidden';}function _0x502d(){const _0x1a7095=['dispatchEvent','setAuthToken','18iGDOaa','ya\x20conectado','search','info','exception','413UnEGiH','146538RPjEuW','status','apply','warn','init','setCredentialsApiWAChat','927248kEncDF','toLowerCase','visibility','src','Credenciales\x20no\x20encontradas','qr-img','none','style','flex','toString','11812rVKCRD','/qr','(((.+)+)+)+$','addEventListener','/wa/','reload','bind','onload','click','length','value','json','3795864mhilfB','qr-overlay','7029583ftcYMr','https://','.btn-logout','setBranchDefault','chatPanel','77394gQGXWl','setCredentialsApiWAChatStatus','Error\x20al\x20validar\x20estado\x20despu√©s\x20de\x20expirar\x20QR:','1063876ynLYdf','change','prototype','1570UoxcZE','return\x20(function()\x20','trace','setCredentialsApiWAChatPort','10uIxpHj','WarehouseChangeComplete','log','display','error','constructor','setWarehouseId','getElementById','includes'];_0x502d=function(){return _0x1a7095;};return _0x502d();}function showChat(){const _0x2eef31=_0x4a2495;loginPanel[_0x2eef31(0x1de)][_0x2eef31(0x1c3)]=_0x2eef31(0x1dd),chatPanel['style'][_0x2eef31(0x1d9)]='visible';}async function initQRApiWAChat(_0xcf73cd,_0x19c5bf){const _0x3e3cdb=_0x4a2495,_0x12c766=(function(){let _0x3fd9e9=!![];return function(_0x2fb7fd,_0x48b8c2){const _0x1e9d4f=_0x3fd9e9?function(){if(_0x48b8c2){const _0x5653ab=_0x48b8c2['apply'](_0x2fb7fd,arguments);return _0x48b8c2=null,_0x5653ab;}}:function(){};return _0x3fd9e9=![],_0x1e9d4f;};}()),_0x224088=_0x12c766(this,function(){const _0x18ae6c=_0x100a;return _0x224088[_0x18ae6c(0x1e0)]()[_0x18ae6c(0x1cd)](_0x18ae6c(0x1a5))[_0x18ae6c(0x1e0)]()['constructor'](_0x224088)[_0x18ae6c(0x1cd)](_0x18ae6c(0x1a5));});_0x224088();const _0x1724ab=(function(){let _0x2b1cf7=!![];return function(_0x417fd5,_0x4900e9){const _0x1b5b37=_0x2b1cf7?function(){const _0x10a5ca=_0x100a;if(_0x4900e9){const _0x1ad5da=_0x4900e9[_0x10a5ca(0x1d3)](_0x417fd5,arguments);return _0x4900e9=null,_0x1ad5da;}}:function(){};return _0x2b1cf7=![],_0x1b5b37;};}()),_0x1a3e6c=_0x1724ab(this,function(){const _0xd4e235=_0x100a,_0x847b41=function(){const _0x3f96fc=_0x100a;let _0x49736b;try{_0x49736b=Function(_0x3f96fc(0x1bd)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x5efeb5){_0x49736b=window;}return _0x49736b;},_0x52d4f5=_0x847b41(),_0x57d0ff=_0x52d4f5['console']=_0x52d4f5['console']||{},_0x15d652=[_0xd4e235(0x1c2),_0xd4e235(0x1d4),_0xd4e235(0x1ce),'error',_0xd4e235(0x1cf),'table',_0xd4e235(0x1be)];for(let _0x47dfbb=0x0;_0x47dfbb<_0x15d652[_0xd4e235(0x1ac)];_0x47dfbb++){const _0x4aff3a=_0x1724ab[_0xd4e235(0x1c5)][_0xd4e235(0x1bb)]['bind'](_0x1724ab),_0x4f408a=_0x15d652[_0x47dfbb],_0x296cae=_0x57d0ff[_0x4f408a]||_0x4aff3a;_0x4aff3a['__proto__']=_0x1724ab[_0xd4e235(0x1a9)](_0x1724ab),_0x4aff3a[_0xd4e235(0x1e0)]=_0x296cae['toString'][_0xd4e235(0x1a9)](_0x296cae),_0x57d0ff[_0x4f408a]=_0x4aff3a;}});_0x1a3e6c();const _0x6c4200=selectCredentialsApiWAChat[_0x3e3cdb(0x1ad)],_0x1b0d1c=getCredentialsApiWAChat(_0x6c4200);if(!_0x1b0d1c){ntfShow(_0x3e3cdb(0x1db));return;}const _0x581ff7=_0x1b0d1c['setCredentialsApiWAChatSubdomain'],_0x11531f=_0x1b0d1c[_0x3e3cdb(0x1bf)];if(_0xcf73cd===_0x3e3cdb(0x1c3))clearTimeout(qrTimeout),overlay[_0x3e3cdb(0x1de)][_0x3e3cdb(0x1c3)]=_0x3e3cdb(0x1dd),qrImg[_0x3e3cdb(0x1da)]=_0x19c5bf,qrTimeout=setTimeout(async()=>{const _0x3fddbf=_0x3e3cdb;try{const _0x2a4b3d=await fetch('https://'+_0x581ff7+'/wa/'+_0x11531f+_0x3fddbf(0x1a4),{'headers':{'x-auth-token':myCompany[_0x3fddbf(0x1ca)]}}),_0xdc5215=await _0x2a4b3d[_0x3fddbf(0x1ae)]();_0xdc5215[_0x3fddbf(0x1d2)]&&_0xdc5215[_0x3fddbf(0x1d2)][_0x3fddbf(0x1d8)]()['includes'](_0x3fddbf(0x1cc))?(showChat(),_0x1b0d1c[_0x3fddbf(0x1b7)]=0x1):(overlay[_0x3fddbf(0x1de)][_0x3fddbf(0x1c3)]=_0x3fddbf(0x1df),_0x1b0d1c[_0x3fddbf(0x1b7)]=0x0);const _0x52441d=await createCartStore('');await saveCompanyToIndexedDB(company,_0x52441d);}catch(_0x78a22e){console[_0x3fddbf(0x1c4)](_0x3fddbf(0x1b8),_0x78a22e),overlay['style'][_0x3fddbf(0x1c3)]=_0x3fddbf(0x1df);}},validSeconds*0x3e8);else{if(_0xcf73cd===_0x3e3cdb(0x1d5))try{const _0xdcbe9d=await fetch(_0x3e3cdb(0x1b2)+_0x581ff7+_0x3e3cdb(0x1a7)+_0x11531f+_0x3e3cdb(0x1a4),{'headers':{'x-auth-token':myCompany[_0x3e3cdb(0x1ca)]}}),_0x3dbf84=await _0xdcbe9d['json']();if(_0x3dbf84[_0x3e3cdb(0x1d2)]&&_0x3dbf84[_0x3e3cdb(0x1d2)]['toLowerCase']()[_0x3e3cdb(0x1c8)]('ya\x20conectado'))showChat(),_0x1b0d1c['setCredentialsApiWAChatStatus']=0x1;else _0x3dbf84['qr']&&(showLogin(),await initQRApiWAChat(_0x3e3cdb(0x1c3),_0x3dbf84['qr']),_0x1b0d1c[_0x3e3cdb(0x1b7)]=0x0);const _0x105b37=await createCartStore('');await saveCompanyToIndexedDB(company,_0x105b37);}catch(_0x494e3a){console[_0x3e3cdb(0x1c4)](_0x494e3a);}}}overlay['addEventListener'](_0x4a2495(0x1ab),()=>initQRApiWAChat(_0x4a2495(0x1d5))),window[_0x4a2495(0x1aa)]=function(){const _0x166c5a=_0x4a2495,_0x21c9dc=0x4;loadLoginContent(),setUserNameGet(),setEventBtnAccess();const _0x4083a3=document['querySelector'](_0x166c5a(0x1b3));_0x4083a3&&_0x4083a3[_0x166c5a(0x1a6)](_0x166c5a(0x1ab),function(){logoutReload(0x0,_0x21c9dc);}),document[_0x166c5a(0x1c7)](_0x166c5a(0x1d6))[_0x166c5a(0x1a6)](_0x166c5a(0x1ba),async function(){const _0x1ff81a=_0x166c5a;saveCredentialsApiWAChatInCompany();const _0x2379d2=await createCartStore('');await saveCompanyToIndexedDB(company,_0x2379d2),location[_0x1ff81a(0x1a8)]();}),document[_0x166c5a(0x1c7)]('setBranchId')[_0x166c5a(0x1a6)](_0x166c5a(0x1ba),async function(){const _0x56c352=_0x166c5a,_0x18a623=parseInt(this[_0x56c352(0x1ad)]);myCompany[_0x56c352(0x1b4)]=_0x18a623,saveCredentialsApiWAChatInCompany();const _0x1aeed1=await createCartStore('');await saveCompanyToIndexedDB(company,_0x1aeed1),await cargarPisos(_0x18a623),await waitForEvent('setFloorId','EnvironmentChangeComplete'),await cargarAlmacenes(_0x18a623),await waitForEvent(_0x56c352(0x1c6),_0x56c352(0x1c1)),document[_0x56c352(0x1c9)](new Event('BranchChangeComplete')),ntf_initNotifications();}),document[_0x166c5a(0x1c7)](_0x166c5a(0x1c6))['addEventListener'](_0x166c5a(0x1ba),async function(){const _0x2a742d=_0x166c5a;document['dispatchEvent'](new Event(_0x2a742d(0x1c1)));}),document[_0x166c5a(0x1c7)]('setFloorId')['addEventListener'](_0x166c5a(0x1ba),async function(_0x18632c){const _0x440991=_0x166c5a;document[_0x440991(0x1c9)](new Event('EnvironmentChangeComplete'));}),loadCartAndSetTabCount(_0x21c9dc);};
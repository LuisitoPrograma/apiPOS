/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 4.4.3
*/

const _0x390321=_0x4a8a;(function(_0x1fbdba,_0x85adac){const _0x22be6e=_0x4a8a,_0xc613f2=_0x1fbdba();while(!![]){try{const _0x11ca2e=-parseInt(_0x22be6e(0x196))/0x1*(-parseInt(_0x22be6e(0x1a3))/0x2)+-parseInt(_0x22be6e(0x195))/0x3*(-parseInt(_0x22be6e(0x1ac))/0x4)+parseInt(_0x22be6e(0x1a2))/0x5+parseInt(_0x22be6e(0x1c4))/0x6*(-parseInt(_0x22be6e(0x1ba))/0x7)+parseInt(_0x22be6e(0x1cb))/0x8*(parseInt(_0x22be6e(0x1c3))/0x9)+-parseInt(_0x22be6e(0x1b9))/0xa*(parseInt(_0x22be6e(0x1c0))/0xb)+-parseInt(_0x22be6e(0x1b8))/0xc;if(_0x11ca2e===_0x85adac)break;else _0xc613f2['push'](_0xc613f2['shift']());}catch(_0x4e57cf){_0xc613f2['push'](_0xc613f2['shift']());}}}(_0x1018,0x8ec7e));function _0x4a8a(_0x5b6d49,_0xf6d9ad){const _0x2cbb66=_0x1018();return _0x4a8a=function(_0x3db70d,_0x66965e){_0x3db70d=_0x3db70d-0x193;let _0x93131a=_0x2cbb66[_0x3db70d];return _0x93131a;},_0x4a8a(_0x5b6d49,_0xf6d9ad);}const selectCredentialsApiWAChat=document[_0x390321(0x1b2)](_0x390321(0x1ca)),loginPanel=document[_0x390321(0x1b2)](_0x390321(0x19b)),chatPanel=document[_0x390321(0x1b2)]('chatPanel'),qrImg=document[_0x390321(0x1b2)](_0x390321(0x1a1)),overlay=document['getElementById']('qr-overlay');function _0x1018(){const _0x197765=['setCredentialsApiWAChatSubdomain','info','8117184sAZtPs','130hsrvLd','156583zYXdMf','src','(((.+)+)+)+$','ya\x20conectado','addEventListener','setWarehouseId','239503zREdfz','EnvironmentChangeComplete','includes','10392507MgCvFl','210kuVwcU','none','querySelector','status','flex','/qr','setCredentialsApiWAChat','8wAlxHO','length','change','click','WarehouseChangeComplete','init','setAuthToken','return\x20(function()\x20','error','3xTmlvp','2JHCVia','.btn-logout','https://','console','style','loginPanel','trace','toString','apply','./img/apiPOS.png','setBranchDefault','qr-img','1581175YWgKNg','209974mfiKlA','setFloorId','table','setBranchId','{}.constructor(\x22return\x20this\x22)(\x20)','prototype','json','display','/wa/','2585176rJkzJm','visibility','search','dispatchEvent','exception','bind','getElementById','log','setCredentialsApiWAChatStatus','constructor'];_0x1018=function(){return _0x197765;};return _0x1018();}let qrTimeout;const validSeconds=0xa;function showLogin(){const _0x3a9f03=_0x390321;loginPanel['style'][_0x3a9f03(0x1aa)]=_0x3a9f03(0x1c8),chatPanel[_0x3a9f03(0x19a)]['visibility']='hidden';}function showChat(){const _0x3af030=_0x390321;loginPanel[_0x3af030(0x19a)][_0x3af030(0x1aa)]=_0x3af030(0x1c5),chatPanel['style'][_0x3af030(0x1ad)]='visible';}async function initQRApiWAChat(_0x30399b,_0x563996){const _0x23482a=_0x390321,_0x2815f4=(function(){let _0x282d1d=!![];return function(_0x2e6439,_0x498817){const _0x311494=_0x282d1d?function(){if(_0x498817){const _0x2eb35c=_0x498817['apply'](_0x2e6439,arguments);return _0x498817=null,_0x2eb35c;}}:function(){};return _0x282d1d=![],_0x311494;};}()),_0x59b2af=_0x2815f4(this,function(){const _0x22f282=_0x4a8a;return _0x59b2af[_0x22f282(0x19d)]()['search'](_0x22f282(0x1bc))['toString']()[_0x22f282(0x1b5)](_0x59b2af)[_0x22f282(0x1ae)](_0x22f282(0x1bc));});_0x59b2af();const _0x2fcaa2=(function(){let _0x19b7ab=!![];return function(_0x2e0890,_0x3e4484){const _0x38f9bf=_0x19b7ab?function(){const _0x20ed87=_0x4a8a;if(_0x3e4484){const _0x29e4d0=_0x3e4484[_0x20ed87(0x19e)](_0x2e0890,arguments);return _0x3e4484=null,_0x29e4d0;}}:function(){};return _0x19b7ab=![],_0x38f9bf;};}()),_0x49cb3c=_0x2fcaa2(this,function(){const _0x231900=_0x4a8a;let _0x2b6501;try{const _0x454447=Function(_0x231900(0x193)+_0x231900(0x1a7)+');');_0x2b6501=_0x454447();}catch(_0x5e9943){_0x2b6501=window;}const _0x417bed=_0x2b6501[_0x231900(0x199)]=_0x2b6501[_0x231900(0x199)]||{},_0x10cbf0=[_0x231900(0x1b3),'warn',_0x231900(0x1b7),'error',_0x231900(0x1b0),_0x231900(0x1a5),_0x231900(0x19c)];for(let _0x5a5c57=0x0;_0x5a5c57<_0x10cbf0[_0x231900(0x1cc)];_0x5a5c57++){const _0x24933c=_0x2fcaa2[_0x231900(0x1b5)][_0x231900(0x1a8)][_0x231900(0x1b1)](_0x2fcaa2),_0x5edb40=_0x10cbf0[_0x5a5c57],_0x415b05=_0x417bed[_0x5edb40]||_0x24933c;_0x24933c['__proto__']=_0x2fcaa2[_0x231900(0x1b1)](_0x2fcaa2),_0x24933c[_0x231900(0x19d)]=_0x415b05[_0x231900(0x19d)][_0x231900(0x1b1)](_0x415b05),_0x417bed[_0x5edb40]=_0x24933c;}});_0x49cb3c();const _0x521fd3=selectCredentialsApiWAChat['value'],_0x25b75a=getCredentialsApiWAChat(_0x521fd3);if(!_0x25b75a){ntfShow('Credenciales\x20no\x20encontradas');return;}const _0xa0524=_0x25b75a[_0x23482a(0x1b6)],_0x3def15=_0x25b75a['setCredentialsApiWAChatPort'];if(_0x30399b==='display')clearTimeout(qrTimeout),overlay[_0x23482a(0x19a)]['display']=_0x23482a(0x1c5),qrImg[_0x23482a(0x1bb)]=_0x563996,qrTimeout=setTimeout(async()=>{const _0x21f4cd=_0x23482a;try{const _0x34462d=await fetch(_0x21f4cd(0x198)+_0xa0524+'/wa/'+_0x3def15+_0x21f4cd(0x1c9),{'headers':{'x-auth-token':myCompany[_0x21f4cd(0x1d1)]}}),_0x2db158=await _0x34462d[_0x21f4cd(0x1a9)]();_0x2db158['status']&&_0x2db158[_0x21f4cd(0x1c7)]['toLowerCase']()[_0x21f4cd(0x1c2)](_0x21f4cd(0x1bd))?(showChat(),_0x25b75a[_0x21f4cd(0x1b4)]=0x1):(overlay[_0x21f4cd(0x19a)][_0x21f4cd(0x1aa)]='flex',_0x25b75a['setCredentialsApiWAChatStatus']=0x0);const _0x1ea675=await createCartStore('');await saveCompanyToIndexedDB(company,_0x1ea675);}catch(_0x5e84a5){console[_0x21f4cd(0x194)]('Error\x20al\x20validar\x20estado\x20despuÃ©s\x20de\x20expirar\x20QR:',_0x5e84a5),overlay[_0x21f4cd(0x19a)][_0x21f4cd(0x1aa)]='flex';}},validSeconds*0x3e8);else{if(_0x30399b===_0x23482a(0x1d0))try{const _0x371c64=await fetch(_0x23482a(0x198)+_0xa0524+_0x23482a(0x1ab)+_0x3def15+_0x23482a(0x1c9),{'headers':{'x-auth-token':myCompany[_0x23482a(0x1d1)]}}),_0x538523=await _0x371c64[_0x23482a(0x1a9)]();if(_0x538523['status']&&_0x538523[_0x23482a(0x1c7)]['toLowerCase']()[_0x23482a(0x1c2)](_0x23482a(0x1bd)))showChat(),_0x25b75a[_0x23482a(0x1b4)]=0x1;else _0x538523['qr']&&(showLogin(),await initQRApiWAChat(_0x23482a(0x1aa),_0x538523['qr']),_0x25b75a[_0x23482a(0x1b4)]=0x0);const _0x2a8b7c=await createCartStore('');await saveCompanyToIndexedDB(company,_0x2a8b7c);}catch(_0x298ca1){console[_0x23482a(0x194)](_0x298ca1);}}}overlay[_0x390321(0x1be)](_0x390321(0x1ce),()=>initQRApiWAChat(_0x390321(0x1d0))),window['onload']=function(){const _0x3acdcd=_0x390321,_0x302e39=0x4;loadLoginContent(_0x3acdcd(0x19f)),setUserNameGet(),setEventBtnAccess();const _0x37ef0b=document[_0x3acdcd(0x1c6)](_0x3acdcd(0x197));_0x37ef0b&&_0x37ef0b[_0x3acdcd(0x1be)](_0x3acdcd(0x1ce),function(){logoutReload(0x0,_0x302e39);}),document[_0x3acdcd(0x1b2)](_0x3acdcd(0x1a6))[_0x3acdcd(0x1be)](_0x3acdcd(0x1cd),async function(){const _0x547c11=_0x3acdcd,_0x261efe=parseInt(this['value']);myCompany[_0x547c11(0x1a0)]=_0x261efe,saveCredentialsApiWAChatInCompany();const _0x39cb5f=await createCartStore('');await saveCompanyToIndexedDB(company,_0x39cb5f),await cargarPisos(_0x261efe),await waitForEvent(_0x547c11(0x1a4),'EnvironmentChangeComplete'),await cargarAlmacenes(_0x261efe),await waitForEvent(_0x547c11(0x1bf),_0x547c11(0x1cf)),document[_0x547c11(0x1af)](new Event('BranchChangeComplete')),ntf_initNotifications();}),document['getElementById']('setWarehouseId')['addEventListener'](_0x3acdcd(0x1cd),async function(){const _0x199658=_0x3acdcd;document['dispatchEvent'](new Event(_0x199658(0x1cf)));}),document[_0x3acdcd(0x1b2)](_0x3acdcd(0x1a4))[_0x3acdcd(0x1be)]('change',async function(_0xa5167d){const _0x39fdce=_0x3acdcd;document[_0x39fdce(0x1af)](new Event(_0x39fdce(0x1c1)));}),loadCartAndSetTabCount(_0x302e39);};
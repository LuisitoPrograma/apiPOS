/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 4.0.7
*/

var _0x15eaec=_0x75f7;(function(_0x46b76d,_0x888651){var _0x4e64da=_0x75f7,_0x213657=_0x46b76d();while(!![]){try{var _0x8fb7e6=-parseInt(_0x4e64da(0x8b))/0x1+-parseInt(_0x4e64da(0x94))/0x2*(-parseInt(_0x4e64da(0xb2))/0x3)+parseInt(_0x4e64da(0x91))/0x4+-parseInt(_0x4e64da(0xc5))/0x5+parseInt(_0x4e64da(0xc2))/0x6+parseInt(_0x4e64da(0xff))/0x7+parseInt(_0x4e64da(0xd9))/0x8;if(_0x8fb7e6===_0x888651)break;else _0x213657['push'](_0x213657['shift']());}catch(_0x10d46b){_0x213657['push'](_0x213657['shift']());}}}(_0x3a3e,0x92f14));function _0x3a3e(){var _0x1936d1=['offlineOps_table','click','option','warn','setAuthToken','offline_operations','bind','userPerm_saveBtn','setPermissionNameFalse','error','onload','7771694hKeyod','button','info','panel_operations','1193825KYlKhE','onsuccess','setEmailCredentialsSenderEmail','return\x20(function()\x20','permIndex','No\x20hay\x20operaciones\x20pendientes.','4737920csnvZS','style','table','396478zskeDz','toString','setLastDateUpdate','log','onerror','Error\x20leyendo\x20operaciones:','appendChild','trace','then','getAll','userPerm_container\x20border_blue','tbody','reject','setTipoOperacionCodigo','userPerm_header','select','target','setUsers','userPerm_container\x20border_orange','setFloorId','objectStore','setPermissionValue','NÃºmero\x20de\x20Decimales:\x20','value','setPermissionId','push','setTipoOperaciones','setTipoOperacion','stringify','textContent','3mSfJrW','.userPerm_saveBtn','search','innerHTML','application/json','setBranchDefault','setFechaHora','userPerm_item','apiPOSsendOffline','indexOf','Error\x20Sync:\x20','Data\x20actualizada\x20correctamente\x20en\x20la\x20base\x20de\x20datos.','json','setTipoOperacionName','setMessage','Error\x20cargando\x20operaciones.','1205706oxtyoF','userPerm_container_','getElementById','5680755AFVkhu','message','userPerm_list','transaction','className','dispatchEvent','inline-block','result','readonly','apply','Tipo','Error\x20Network.','setEmailCredentialsId','console','none','display','constructor','change','setPermissionNameTrue','div','1903520iXeeny','thead','disabled','querySelector','setUserFullName','.userPerm_editBtn','setEmailCredentials','(((.+)+)+)+$','__proto__','setWarehouseId','success','https://apierp.dev/api/users/update/','dataset','./img/apiPOS.png','catch','userPerm_editBtn','createElement','length','addEventListener','forEach','userPerm_select','setSerie','panel_users','getElementsByClassName','block','userIndex','setPermissions'];_0x3a3e=function(){return _0x1936d1;};return _0x3a3e();}var _0x11c087=(function(){var _0x156fc9=!![];return function(_0x1e59d3,_0x2f2649){var _0x32e4f7=_0x156fc9?function(){var _0x16cc61=_0x75f7;if(_0x2f2649){var _0x4b125b=_0x2f2649[_0x16cc61(0xce)](_0x1e59d3,arguments);return _0x2f2649=null,_0x4b125b;}}:function(){};return _0x156fc9=![],_0x32e4f7;};}()),_0x47d13e=_0x11c087(this,function(){var _0x5e8a32=_0x75f7;return _0x47d13e[_0x5e8a32(0x95)]()[_0x5e8a32(0xb4)](_0x5e8a32(0xe0))[_0x5e8a32(0x95)]()[_0x5e8a32(0xd5)](_0x47d13e)['search']('(((.+)+)+)+$');});_0x47d13e();var _0x1a5ba3=(function(){var _0x5c7beb=!![];return function(_0x4e602a,_0x71aa94){var _0x44e5e0=_0x5c7beb?function(){var _0x4348a6=_0x75f7;if(_0x71aa94){var _0x1abab5=_0x71aa94[_0x4348a6(0xce)](_0x4e602a,arguments);return _0x71aa94=null,_0x1abab5;}}:function(){};return _0x5c7beb=![],_0x44e5e0;};}()),_0x26bec2=_0x1a5ba3(this,function(){var _0x1d9f9e=_0x75f7,_0x20bcaa=function(){var _0x124be6=_0x75f7,_0x5321f4;try{_0x5321f4=Function(_0x124be6(0x8e)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0xdb3cc5){_0x5321f4=window;}return _0x5321f4;},_0x27862f=_0x20bcaa(),_0x10bf9b=_0x27862f['console']=_0x27862f[_0x1d9f9e(0xd2)]||{},_0x57ba42=[_0x1d9f9e(0x97),_0x1d9f9e(0xf7),_0x1d9f9e(0x89),_0x1d9f9e(0xfd),'exception',_0x1d9f9e(0x93),_0x1d9f9e(0x9b)];for(var _0xd6de58=0x0;_0xd6de58<_0x57ba42['length'];_0xd6de58++){var _0x5d6e19=_0x1a5ba3[_0x1d9f9e(0xd5)]['prototype'][_0x1d9f9e(0xfa)](_0x1a5ba3),_0x4639f4=_0x57ba42[_0xd6de58],_0x1b317b=_0x10bf9b[_0x4639f4]||_0x5d6e19;_0x5d6e19[_0x1d9f9e(0xe1)]=_0x1a5ba3[_0x1d9f9e(0xfa)](_0x1a5ba3),_0x5d6e19[_0x1d9f9e(0x95)]=_0x1b317b[_0x1d9f9e(0x95)][_0x1d9f9e(0xfa)](_0x1b317b),_0x10bf9b[_0x4639f4]=_0x5d6e19;}});_0x26bec2();var BOOLEAN_PERMS=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0xa,0xb,0xd,0xe,0xf,0x10,0x11];async function apiERPupdateUsersOnline(_0x555973,_0x5c2629){var _0x430ad=_0x75f7;if(!isOnline())return console[_0x430ad(0x97)]('Error\x20Network.'),Promise[_0x430ad(0xa0)](_0x430ad(0xd0));const _0xacf376={'setAuthToken':_0x555973,'setUsers':_0x5c2629};return fetch(_0x430ad(0xe4),{'method':'POST','headers':{'Content-Type':_0x430ad(0xb6)},'body':JSON[_0x430ad(0xb0)](_0xacf376)})[_0x430ad(0x9c)](_0xfc4100=>{var _0x54f906=_0x430ad;if(!_0xfc4100['ok'])throw new Error(_0x54f906(0xbc)+_0xfc4100['statusText']);return _0xfc4100[_0x54f906(0xbe)]();})[_0x430ad(0x9c)](_0x41135e=>{var _0x25ee1b=_0x430ad;if(!_0x41135e[_0x25ee1b(0xe3)])throw new Error(_0x41135e[_0x25ee1b(0xc6)]||'Error\x20desconocido\x20al\x20actualizar\x20Data.');return console[_0x25ee1b(0x97)](_0x25ee1b(0xbd)),_0x41135e;})[_0x430ad(0xe7)](_0x1c24cd=>{var _0x35055e=_0x430ad;console[_0x35055e(0xfd)]('Error\x20al\x20actualizar\x20data\x20online:',_0x1c24cd);throw _0x1c24cd;});}async function apiERPsyncUsers(){var _0x2ef28e=_0x75f7;isLoggedIn(company)&&(isOnline()&&await apiERPupdateUsersOnline(company[0x0][_0x2ef28e(0xf8)],company[0x0][_0x2ef28e(0xa5)]));}function _0x75f7(_0x28bd6d,_0x593ea6){var _0x249334=_0x3a3e();return _0x75f7=function(_0x26bec2,_0x1a5ba3){_0x26bec2=_0x26bec2-0x89;var _0x30ed98=_0x249334[_0x26bec2];return _0x30ed98;},_0x75f7(_0x28bd6d,_0x593ea6);}function generatePermissionsPanel(_0xadd723){var _0x513c83=_0x75f7,_0x4bc6c1=document['getElementById'](_0x513c83(0xef));_0x4bc6c1[_0x513c83(0xb5)]='';var _0x2584a8=_0xadd723[0x0]&&_0xadd723[0x0][_0x513c83(0xa5)]||[],_0x4c2e28=_0xadd723[0x0]&&_0xadd723[0x0][_0x513c83(0xae)]||[];for(var _0x91b7a4=0x0;_0x91b7a4<_0x2584a8[_0x513c83(0xea)];_0x91b7a4++){var _0x32607d=_0x2584a8[_0x91b7a4],_0x24b0ab=document[_0x513c83(0xe9)](_0x513c83(0xd8));_0x24b0ab['className']=_0x513c83(0x9e),_0x24b0ab['id']=_0x513c83(0xc3)+_0x91b7a4;var _0x89e956=document[_0x513c83(0xe9)]('h3');_0x89e956[_0x513c83(0xc9)]=_0x513c83(0xa2),_0x89e956[_0x513c83(0xb1)]=_0x32607d[_0x513c83(0xdd)]||'Usuario\x20'+(_0x91b7a4+0x1),_0x24b0ab[_0x513c83(0x9a)](_0x89e956);var _0x40112b=document['createElement'](_0x513c83(0xd8));_0x40112b[_0x513c83(0xc9)]=_0x513c83(0xc7);for(var _0x332a59=0x0;_0x332a59<_0x32607d['setPermissions'][_0x513c83(0xea)];_0x332a59++){var _0x1e5b5c=_0x32607d[_0x513c83(0xf3)][_0x332a59],_0x5a89d5=document['createElement'](_0x513c83(0xd8));_0x5a89d5[_0x513c83(0xc9)]=_0x513c83(0xb9),_0x5a89d5[_0x513c83(0xe5)]['userIndex']=_0x91b7a4,_0x5a89d5[_0x513c83(0xe5)][_0x513c83(0x8f)]=_0x332a59;var _0x3493bd=Number(_0x1e5b5c[_0x513c83(0xa9)]),_0x3bb658=document[_0x513c83(0xe9)](_0x513c83(0xa3));_0x3bb658[_0x513c83(0xc9)]=_0x513c83(0xed),_0x3bb658[_0x513c83(0xdb)]=!![];if(BOOLEAN_PERMS[_0x513c83(0xbb)](_0x1e5b5c['setPermissionId'])!==-0x1){var _0x346c7a=document[_0x513c83(0xe9)](_0x513c83(0xf6));_0x346c7a[_0x513c83(0xab)]='0',_0x346c7a[_0x513c83(0xb1)]=_0x1e5b5c[_0x513c83(0xfc)],_0x3bb658[_0x513c83(0x9a)](_0x346c7a);var _0x49cea3=document[_0x513c83(0xe9)](_0x513c83(0xf6));_0x49cea3[_0x513c83(0xab)]='1',_0x49cea3[_0x513c83(0xb1)]=_0x1e5b5c[_0x513c83(0xd7)],_0x3bb658[_0x513c83(0x9a)](_0x49cea3),_0x3bb658[_0x513c83(0xab)]=String(_0x3493bd);}else{if(_0x1e5b5c[_0x513c83(0xac)]===0x9||_0x1e5b5c[_0x513c83(0xac)]===0xc||_0x1e5b5c[_0x513c83(0xac)]===0x12){if(_0x1e5b5c[_0x513c83(0xac)]===0x9){var _0x5b5843=document['createElement'](_0x513c83(0xf6));_0x5b5843['value']='0',_0x5b5843[_0x513c83(0xb1)]=_0x1e5b5c[_0x513c83(0xfc)],_0x3bb658[_0x513c83(0x9a)](_0x5b5843);for(var _0x414897=0x0;_0x414897<_0x4c2e28[_0x513c83(0xea)];_0x414897++){var _0x2c562d=_0x4c2e28[_0x414897],_0xd3f388=document[_0x513c83(0xe9)]('option');_0xd3f388[_0x513c83(0xab)]=String(_0x2c562d[_0x513c83(0xa1)]),_0xd3f388[_0x513c83(0xb1)]=_0x2c562d[_0x513c83(0xbf)],_0x3bb658[_0x513c83(0x9a)](_0xd3f388);}}if(_0x1e5b5c[_0x513c83(0xac)]===0xc)for(var _0x414897=0x1;_0x414897<=0x4;_0x414897++){var _0x2c562d=_0x414897,_0xd3f388=document[_0x513c83(0xe9)](_0x513c83(0xf6));_0xd3f388[_0x513c83(0xab)]=String(_0x2c562d),_0xd3f388[_0x513c83(0xb1)]=_0x513c83(0xaa)+_0x2c562d,_0x3bb658[_0x513c83(0x9a)](_0xd3f388);}if(_0x1e5b5c[_0x513c83(0xac)]===0x12){var _0x42546c=myCompany&&myCompany[_0x513c83(0xdf)]||[],_0x5b5843=document[_0x513c83(0xe9)](_0x513c83(0xf6));_0x5b5843[_0x513c83(0xab)]='0',_0x5b5843[_0x513c83(0xb1)]=_0x1e5b5c[_0x513c83(0xfc)],_0x3bb658['appendChild'](_0x5b5843);for(var _0x414897=0x0;_0x414897<_0x42546c[_0x513c83(0xea)];_0x414897++){var _0x2c562d=_0x42546c[_0x414897],_0xd3f388=document[_0x513c83(0xe9)](_0x513c83(0xf6));_0xd3f388[_0x513c83(0xab)]=String(_0x2c562d[_0x513c83(0xd1)]),_0xd3f388['textContent']=_0x2c562d[_0x513c83(0x8d)],_0x3bb658['appendChild'](_0xd3f388);}}_0x3bb658[_0x513c83(0xab)]=String(_0x3493bd);}}_0x5a89d5[_0x513c83(0x9a)](_0x3bb658),_0x40112b[_0x513c83(0x9a)](_0x5a89d5);}_0x24b0ab['appendChild'](_0x40112b);var _0x21792e=document[_0x513c83(0xe9)]('button');_0x21792e[_0x513c83(0xc9)]=_0x513c83(0xe8),_0x21792e['textContent']='Editar',_0x21792e[_0x513c83(0xe5)][_0x513c83(0xf2)]=_0x91b7a4;var _0x1e4077=document[_0x513c83(0xe9)](_0x513c83(0x100));_0x1e4077[_0x513c83(0xc9)]=_0x513c83(0xfb),_0x1e4077[_0x513c83(0xb1)]='Guardar',_0x1e4077['dataset'][_0x513c83(0xf2)]=_0x91b7a4,_0x1e4077['style'][_0x513c83(0xd4)]=_0x513c83(0xd3),_0x24b0ab[_0x513c83(0x9a)](_0x21792e),_0x24b0ab[_0x513c83(0x9a)](_0x1e4077),_0x4bc6c1[_0x513c83(0x9a)](_0x24b0ab),_0x21792e['addEventListener'](_0x513c83(0xf5),onEditClick),_0x1e4077[_0x513c83(0xeb)](_0x513c83(0xf5),onSaveClick);}}function onEditClick(_0x154ce7){var _0x2f4a57=_0x75f7,_0x2c8fb9=_0x154ce7[_0x2f4a57(0xa4)][_0x2f4a57(0xe5)][_0x2f4a57(0xf2)],_0x1593df=document['getElementById'](_0x2f4a57(0xc3)+_0x2c8fb9),_0x4a5f53=_0x1593df[_0x2f4a57(0xf0)](_0x2f4a57(0xed));for(var _0x4d7ae7=0x0;_0x4d7ae7<_0x4a5f53[_0x2f4a57(0xea)];_0x4d7ae7++){_0x4a5f53[_0x4d7ae7][_0x2f4a57(0xdb)]=![];}_0x1593df[_0x2f4a57(0xdc)](_0x2f4a57(0xde))[_0x2f4a57(0x92)][_0x2f4a57(0xd4)]=_0x2f4a57(0xd3),_0x1593df[_0x2f4a57(0xdc)](_0x2f4a57(0xb3))['style'][_0x2f4a57(0xd4)]=_0x2f4a57(0xf1),_0x1593df[_0x2f4a57(0xc9)]=_0x2f4a57(0xa6);}async function onSaveClick(_0x30fdff){var _0x5095a2=_0x75f7,_0x5ec74c=_0x30fdff['target'][_0x5095a2(0xe5)][_0x5095a2(0xf2)],_0x3fbbb2=document[_0x5095a2(0xc4)]('userPerm_container_'+_0x5ec74c),_0x5c1471=_0x3fbbb2['getElementsByClassName'](_0x5095a2(0xb9));for(var _0x1f175c=0x0;_0x1f175c<_0x5c1471['length'];_0x1f175c++){var _0x58a13e=_0x5c1471[_0x1f175c],_0x2f222c=parseInt(_0x58a13e[_0x5095a2(0xe5)][_0x5095a2(0xf2)],0xa),_0xade52a=parseInt(_0x58a13e[_0x5095a2(0xe5)][_0x5095a2(0x8f)],0xa),_0x2c6a6f=company[0x0]['setUsers'][_0x2f222c][_0x5095a2(0xf3)][_0xade52a],_0x305ce2=_0x58a13e[_0x5095a2(0xf0)]('userPerm_select')[0x0],_0x336285=_0x305ce2[_0x5095a2(0xab)];_0x2c6a6f[_0x5095a2(0xa9)]=_0x336285,_0x305ce2[_0x5095a2(0xdb)]=!![],company[0x0][_0x5095a2(0xa5)][_0x2f222c][_0x5095a2(0x96)]=new Date();}const _0xfc4c4d=await createCartStore('');await saveCompanyToIndexedDB(company,_0xfc4c4d),_0x3fbbb2[_0x5095a2(0xdc)](_0x5095a2(0xb3))[_0x5095a2(0x92)][_0x5095a2(0xd4)]=_0x5095a2(0xd3),_0x3fbbb2[_0x5095a2(0xdc)](_0x5095a2(0xde))[_0x5095a2(0x92)][_0x5095a2(0xd4)]=_0x5095a2(0xcb),_0x3fbbb2[_0x5095a2(0xc9)]=_0x5095a2(0x9e),apiERPsyncUsers();}function generateOfflineOperationsTable(){var _0x40a6c2=_0x75f7,_0x21dba8=document[_0x40a6c2(0xc4)](_0x40a6c2(0x8a));return _0x21dba8[_0x40a6c2(0xb5)]='',createCartStore('')[_0x40a6c2(0x9c)](function(_0x2ab633){var _0x2f569e=_0x40a6c2,_0x15d3f7=_0x2ab633[_0x2f569e(0xc8)](_0x2f569e(0xf9),_0x2f569e(0xcd)),_0x3225ae=_0x15d3f7[_0x2f569e(0xa8)](_0x2f569e(0xf9));return new Promise(function(_0x20dbdb,_0x2b363c){var _0x5838f6=_0x2f569e,_0x5ae4e5=_0x3225ae[_0x5838f6(0x9d)]();_0x5ae4e5[_0x5838f6(0x8c)]=function(){var _0x417258=_0x5838f6;_0x20dbdb(_0x5ae4e5[_0x417258(0xcc)]);},_0x5ae4e5[_0x5838f6(0x98)]=function(){var _0x2f40a9=_0x5838f6;_0x2b363c(_0x5ae4e5[_0x2f40a9(0xfd)]);};});})[_0x40a6c2(0x9c)](function(_0x4e6625){var _0x38e738=_0x40a6c2,_0x340710=[];for(var _0x2ba355=0x0;_0x2ba355<_0x4e6625[_0x38e738(0xea)];_0x2ba355++){_0x4e6625[_0x2ba355][_0x38e738(0xba)]==0x1&&_0x340710[_0x38e738(0xad)](_0x4e6625[_0x2ba355]);}if(_0x340710['length']===0x0){_0x21dba8[_0x38e738(0xb1)]=_0x38e738(0x90);return;}var _0xda6f20=document[_0x38e738(0xe9)]('table');_0xda6f20[_0x38e738(0xc9)]=_0x38e738(0xf4);var _0x2ba43a=document[_0x38e738(0xe9)](_0x38e738(0xda)),_0x115028=document['createElement']('tr');[_0x38e738(0xcf),'Serie','Correlativo','Fecha','Motivo'][_0x38e738(0xec)](function(_0x3ca9d3){var _0x5e38e0=_0x38e738,_0x552e80=document[_0x5e38e0(0xe9)]('th');_0x552e80[_0x5e38e0(0xb1)]=_0x3ca9d3,_0x115028[_0x5e38e0(0x9a)](_0x552e80);}),_0x2ba43a[_0x38e738(0x9a)](_0x115028),_0xda6f20[_0x38e738(0x9a)](_0x2ba43a);var _0x435830=document[_0x38e738(0xe9)](_0x38e738(0x9f));_0x340710[_0x38e738(0xec)](function(_0x560f2a){var _0x49761a=_0x38e738,_0x4b03e4=document[_0x49761a(0xe9)]('tr'),_0x27eaeb=[_0x560f2a[_0x49761a(0xaf)],_0x560f2a[_0x49761a(0xee)],_0x560f2a['setCorrelativo'],_0x560f2a[_0x49761a(0xb8)],_0x560f2a[_0x49761a(0xc0)]||''];_0x27eaeb['forEach'](function(_0x5f3a76){var _0xbcd40a=_0x49761a,_0x23418d=document[_0xbcd40a(0xe9)]('td');_0x23418d[_0xbcd40a(0xb1)]=_0x5f3a76,_0x4b03e4[_0xbcd40a(0x9a)](_0x23418d);}),_0x435830[_0x49761a(0x9a)](_0x4b03e4);}),_0xda6f20[_0x38e738(0x9a)](_0x435830),_0x21dba8[_0x38e738(0x9a)](_0xda6f20);})[_0x40a6c2(0xe7)](function(_0x265de9){var _0x2eebb0=_0x40a6c2;console['error'](_0x2eebb0(0x99),_0x265de9),_0x21dba8['textContent']=_0x2eebb0(0xc1);});}window[_0x15eaec(0xfe)]=function(){var _0x14fe46=_0x15eaec;const _0x4a3bcd=0x2;loadLoginContent(_0x14fe46(0xe6)),setUserNameGet(),setEventBtnAccess();const _0xc72b3f=document[_0x14fe46(0xdc)]('.btn-logout');_0xc72b3f&&_0xc72b3f['addEventListener']('click',function(){logoutReload(0x0,_0x4a3bcd);}),document[_0x14fe46(0xc4)]('setBranchId')[_0x14fe46(0xeb)](_0x14fe46(0xd6),async function(){var _0x56429e=_0x14fe46;const _0x26287c=parseInt(this[_0x56429e(0xab)]);company[0x0][_0x56429e(0xb7)]=_0x26287c;const _0x491b03=await createCartStore('');await saveCompanyToIndexedDB(company,_0x491b03),cargarAlmacenes(_0x26287c),setTimeout(()=>{var _0xf6c6d6=_0x56429e;document[_0xf6c6d6(0xc4)](_0xf6c6d6(0xe2))[_0xf6c6d6(0xca)](new Event(_0xf6c6d6(0xd6)));},0x64),cargarPisos(_0x26287c),setTimeout(()=>{var _0x1eee88=_0x56429e;document[_0x1eee88(0xc4)](_0x1eee88(0xa7))['dispatchEvent'](new Event(_0x1eee88(0xd6)));},0x64),ntf_initNotifications();}),loadCartAndSetTabCount(_0x4a3bcd);};
/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 5.0.5
*/

const _0x198e96=_0xc3d4;(function(_0x20e752,_0x5cc144){const _0x45851d=_0xc3d4,_0x2627ca=_0x20e752();while(!![]){try{const _0x3ab562=-parseInt(_0x45851d(0xf9))/0x1*(parseInt(_0x45851d(0x111))/0x2)+parseInt(_0x45851d(0x12a))/0x3*(parseInt(_0x45851d(0x112))/0x4)+parseInt(_0x45851d(0x113))/0x5+parseInt(_0x45851d(0x114))/0x6*(parseInt(_0x45851d(0x107))/0x7)+parseInt(_0x45851d(0x11a))/0x8+-parseInt(_0x45851d(0x104))/0x9*(-parseInt(_0x45851d(0xf0))/0xa)+-parseInt(_0x45851d(0x101))/0xb*(parseInt(_0x45851d(0xf1))/0xc);if(_0x3ab562===_0x5cc144)break;else _0x2627ca['push'](_0x2627ca['shift']());}catch(_0x4a5241){_0x2627ca['push'](_0x2627ca['shift']());}}}(_0x3baf,0x32899));const selectCredentialsApiWAChat=document[_0x198e96(0x125)](_0x198e96(0xfe)),loginPanel=document[_0x198e96(0x125)](_0x198e96(0x122)),chatPanel=document[_0x198e96(0x125)]('chatPanel'),qrImg=document['getElementById'](_0x198e96(0x102)),overlay=document[_0x198e96(0x125)]('qr-overlay');let qrTimeout;const validSeconds=0xa;function showLogin(){const _0x2ffc4a=_0x198e96;loginPanel['style'][_0x2ffc4a(0xff)]=_0x2ffc4a(0x10e),chatPanel[_0x2ffc4a(0x11e)]['visibility']='hidden';}function showChat(){const _0x5a1987=_0x198e96;loginPanel['style'][_0x5a1987(0xff)]=_0x5a1987(0x108),chatPanel[_0x5a1987(0x11e)][_0x5a1987(0x121)]=_0x5a1987(0x126);}function _0xc3d4(_0x6549a2,_0x19e44e){const _0x13d35c=_0x3baf();return _0xc3d4=function(_0x2b31ac,_0x186f7b){_0x2b31ac=_0x2b31ac-0xea;let _0x1bf9af=_0x13d35c[_0x2b31ac];return _0x1bf9af;},_0xc3d4(_0x6549a2,_0x19e44e);}async function initQRApiWAChat(_0x38e0db,_0x376758){const _0x2ef7a3=_0x198e96,_0x237dc9=(function(){let _0x3ed85b=!![];return function(_0x1dc763,_0x56a9b8){const _0xa5772d=_0x3ed85b?function(){const _0x2c3008=_0xc3d4;if(_0x56a9b8){const _0x4a595d=_0x56a9b8[_0x2c3008(0x103)](_0x1dc763,arguments);return _0x56a9b8=null,_0x4a595d;}}:function(){};return _0x3ed85b=![],_0xa5772d;};}()),_0x3942f4=_0x237dc9(this,function(){const _0x2d31f0=_0xc3d4;return _0x3942f4[_0x2d31f0(0xf8)]()[_0x2d31f0(0x10a)](_0x2d31f0(0x100))[_0x2d31f0(0xf8)]()[_0x2d31f0(0x116)](_0x3942f4)[_0x2d31f0(0x10a)]('(((.+)+)+)+$');});_0x3942f4();const _0x4a0dda=(function(){let _0x208d69=!![];return function(_0x2b5499,_0x81d811){const _0x47882e=_0x208d69?function(){if(_0x81d811){const _0x242377=_0x81d811['apply'](_0x2b5499,arguments);return _0x81d811=null,_0x242377;}}:function(){};return _0x208d69=![],_0x47882e;};}()),_0x3c351f=_0x4a0dda(this,function(){const _0x5d3b10=_0xc3d4;let _0x438861;try{const _0xb76900=Function('return\x20(function()\x20'+_0x5d3b10(0xf7)+');');_0x438861=_0xb76900();}catch(_0x40fc07){_0x438861=window;}const _0x367fbb=_0x438861[_0x5d3b10(0x10b)]=_0x438861['console']||{},_0x208544=[_0x5d3b10(0xec),_0x5d3b10(0xee),_0x5d3b10(0x127),'error',_0x5d3b10(0x120),'table',_0x5d3b10(0x123)];for(let _0x2c1229=0x0;_0x2c1229<_0x208544[_0x5d3b10(0x109)];_0x2c1229++){const _0xfe4033=_0x4a0dda[_0x5d3b10(0x116)]['prototype'][_0x5d3b10(0xf6)](_0x4a0dda),_0x55f316=_0x208544[_0x2c1229],_0x386d52=_0x367fbb[_0x55f316]||_0xfe4033;_0xfe4033[_0x5d3b10(0xfa)]=_0x4a0dda['bind'](_0x4a0dda),_0xfe4033['toString']=_0x386d52[_0x5d3b10(0xf8)]['bind'](_0x386d52),_0x367fbb[_0x55f316]=_0xfe4033;}});_0x3c351f();const _0x42cb40=selectCredentialsApiWAChat[_0x2ef7a3(0x11d)],_0x4f4310=getCredentialsApiWAChat(_0x42cb40);if(!_0x4f4310){ntfShow(_0x2ef7a3(0x124));return;}const _0x96ad0d=_0x4f4310['setCredentialsApiWAChatSubdomain'],_0x715b21=_0x4f4310[_0x2ef7a3(0x110)];if(_0x38e0db===_0x2ef7a3(0xff))clearTimeout(qrTimeout),overlay[_0x2ef7a3(0x11e)][_0x2ef7a3(0xff)]=_0x2ef7a3(0x108),qrImg[_0x2ef7a3(0x106)]=_0x376758,qrTimeout=setTimeout(async()=>{const _0x276657=_0x2ef7a3;try{const _0x20356b=await fetch(_0x276657(0x115)+_0x96ad0d+'/wa/'+_0x715b21+_0x276657(0x11f),{'headers':{'x-auth-token':myCompany[_0x276657(0x128)]}}),_0x5213dd=await _0x20356b[_0x276657(0x119)]();_0x5213dd['status']&&_0x5213dd[_0x276657(0xf2)][_0x276657(0xed)]()[_0x276657(0xf3)](_0x276657(0x10f))?(showChat(),_0x4f4310['setCredentialsApiWAChatStatus']=0x1):(overlay[_0x276657(0x11e)][_0x276657(0xff)]=_0x276657(0x10e),_0x4f4310[_0x276657(0xea)]=0x0);const _0x5cca12=await createCartStore('');await saveCompanyToIndexedDB(company,_0x5cca12);}catch(_0x475d2c){console['error']('Error\x20al\x20validar\x20estado\x20despuÃ©s\x20de\x20expirar\x20QR:',_0x475d2c),overlay[_0x276657(0x11e)]['display']=_0x276657(0x10e);}},validSeconds*0x3e8);else{if(_0x38e0db===_0x2ef7a3(0x11c))try{const _0x61e728=await fetch(_0x2ef7a3(0x115)+_0x96ad0d+'/wa/'+_0x715b21+_0x2ef7a3(0x11f),{'headers':{'x-auth-token':myCompany[_0x2ef7a3(0x128)]}}),_0x4e6739=await _0x61e728[_0x2ef7a3(0x119)]();if(_0x4e6739[_0x2ef7a3(0xf2)]&&_0x4e6739[_0x2ef7a3(0xf2)]['toLowerCase']()['includes']('ya\x20conectado'))showChat(),_0x4f4310[_0x2ef7a3(0xea)]=0x1;else _0x4e6739['qr']&&(showLogin(),await initQRApiWAChat('display',_0x4e6739['qr']),_0x4f4310['setCredentialsApiWAChatStatus']=0x0);const _0x1899fc=await createCartStore('');await saveCompanyToIndexedDB(company,_0x1899fc);}catch(_0x9c520d){console[_0x2ef7a3(0x10c)](_0x9c520d);}}}overlay['addEventListener']('click',()=>initQRApiWAChat(_0x198e96(0x11c))),window[_0x198e96(0x129)]=function(){const _0x5ec3cc=_0x198e96,_0x594ae3=0x4;loadLoginContent('./img/apiPOS.png'),setUserNameGet(),setEventBtnAccess();const _0x36166f=document[_0x5ec3cc(0xfd)](_0x5ec3cc(0xef));_0x36166f&&_0x36166f[_0x5ec3cc(0xeb)]('click',function(){logoutReload(0x0,_0x594ae3);}),document[_0x5ec3cc(0x125)](_0x5ec3cc(0xfe))['addEventListener'](_0x5ec3cc(0x11b),async function(){const _0x55dd61=_0x5ec3cc;saveCredentialsApiWAChatInCompany();const _0x2d33d8=await createCartStore('');await saveCompanyToIndexedDB(company,_0x2d33d8),location[_0x55dd61(0xf4)]();}),document[_0x5ec3cc(0x125)](_0x5ec3cc(0x105))[_0x5ec3cc(0xeb)](_0x5ec3cc(0x11b),async function(){const _0x5625aa=_0x5ec3cc,_0xfd4c84=parseInt(this['value']);myCompany[_0x5625aa(0x118)]=_0xfd4c84,saveCredentialsApiWAChatInCompany();const _0x3a582a=await createCartStore('');await saveCompanyToIndexedDB(company,_0x3a582a),await cargarPisos(_0xfd4c84),await waitForEvent(_0x5625aa(0xfb),_0x5625aa(0x117)),await cargarAlmacenes(_0xfd4c84),await waitForEvent('setWarehouseId',_0x5625aa(0xf5)),document[_0x5625aa(0x10d)](new Event('BranchChangeComplete')),ntf_initNotifications();}),document[_0x5ec3cc(0x125)](_0x5ec3cc(0xfc))[_0x5ec3cc(0xeb)](_0x5ec3cc(0x11b),async function(){const _0xa1c689=_0x5ec3cc;document[_0xa1c689(0x10d)](new Event(_0xa1c689(0xf5)));}),document[_0x5ec3cc(0x125)](_0x5ec3cc(0xfb))[_0x5ec3cc(0xeb)]('change',async function(_0x46b5b3){const _0x188044=_0x5ec3cc;document[_0x188044(0x10d)](new Event('EnvironmentChangeComplete'));}),loadCartAndSetTabCount(_0x594ae3);};function _0x3baf(){const _0x5ae71f=['onload','6rvEGim','setCredentialsApiWAChatStatus','addEventListener','log','toLowerCase','warn','.btn-logout','470povUjj','468948pJJZzy','status','includes','reload','WarehouseChangeComplete','bind','{}.constructor(\x22return\x20this\x22)(\x20)','toString','136451nhaguD','__proto__','setFloorId','setWarehouseId','querySelector','setCredentialsApiWAChat','display','(((.+)+)+)+$','121vooDUE','qr-img','apply','67896BIYwcT','setBranchId','src','931xivTwT','none','length','search','console','error','dispatchEvent','flex','ya\x20conectado','setCredentialsApiWAChatPort','6zUZkYh','268012KSBgew','394655PDMjgI','6816YGFyXT','https://','constructor','EnvironmentChangeComplete','setBranchDefault','json','2621040TCbiDG','change','init','value','style','/qr','exception','visibility','loginPanel','trace','Credenciales\x20no\x20encontradas','getElementById','visible','info','setAuthToken'];_0x3baf=function(){return _0x5ae71f;};return _0x3baf();}
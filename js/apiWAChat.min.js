/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 5.0.4
*/

const _0x1f96ba=_0x5c8c;(function(_0x128026,_0x190eae){const _0x4a8bb7=_0x5c8c,_0x5a0cfa=_0x128026();while(!![]){try{const _0x42b806=-parseInt(_0x4a8bb7(0x1ab))/0x1*(parseInt(_0x4a8bb7(0x1ad))/0x2)+-parseInt(_0x4a8bb7(0x1a8))/0x3*(-parseInt(_0x4a8bb7(0x1b3))/0x4)+-parseInt(_0x4a8bb7(0x1cf))/0x5+-parseInt(_0x4a8bb7(0x1a9))/0x6+-parseInt(_0x4a8bb7(0x1c6))/0x7*(-parseInt(_0x4a8bb7(0x1b8))/0x8)+parseInt(_0x4a8bb7(0x1c9))/0x9*(-parseInt(_0x4a8bb7(0x1dd))/0xa)+parseInt(_0x4a8bb7(0x1ba))/0xb;if(_0x42b806===_0x190eae)break;else _0x5a0cfa['push'](_0x5a0cfa['shift']());}catch(_0x299467){_0x5a0cfa['push'](_0x5a0cfa['shift']());}}}(_0x852a,0x5b9f8));const selectCredentialsApiWAChat=document[_0x1f96ba(0x1b9)](_0x1f96ba(0x1d0)),loginPanel=document[_0x1f96ba(0x1b9)]('loginPanel'),chatPanel=document[_0x1f96ba(0x1b9)](_0x1f96ba(0x1e0)),qrImg=document['getElementById'](_0x1f96ba(0x1a3)),overlay=document[_0x1f96ba(0x1b9)]('qr-overlay');let qrTimeout;const validSeconds=0xa;function _0x852a(){const _0x6172a4=['WarehouseChangeComplete','json','hidden','addEventListener','https://','80dtozlH','.btn-logout','none','constructor','BranchChangeComplete','8AnyjhJ','getElementById','8697491nvrUKb','/qr','setCredentialsApiWAChatPort','setFloorId','display','search','error','{}.constructor(\x22return\x20this\x22)(\x20)','style','status','toString','trace','3481037EBYnQB','console','Error\x20al\x20validar\x20estado\x20despu√©s\x20de\x20expirar\x20QR:','2529zUnTSl','bind','value','log','setBranchId','dispatchEvent','1480715xGaMOg','setCredentialsApiWAChat','setCredentialsApiWAChatSubdomain','reload','querySelector','visibility','length','./img/apiPOS.png','setWarehouseId','click','apply','EnvironmentChangeComplete','setAuthToken','/wa/','20610ZQcOxF','Credenciales\x20no\x20encontradas','change','chatPanel','setCredentialsApiWAChatStatus','src','__proto__','init','onload','qr-img','info','setBranchDefault','includes','ya\x20conectado','64485EvSbCQ','1261500mWUBgC','visible','4850hLlALi','flex','106LqKScj'];_0x852a=function(){return _0x6172a4;};return _0x852a();}function showLogin(){const _0x8b4588=_0x1f96ba;loginPanel['style'][_0x8b4588(0x1be)]=_0x8b4588(0x1ac),chatPanel[_0x8b4588(0x1c2)][_0x8b4588(0x1d4)]=_0x8b4588(0x1b0);}function _0x5c8c(_0x1e0954,_0xe4b184){const _0x5aca14=_0x852a();return _0x5c8c=function(_0x479c9d,_0x410b3e){_0x479c9d=_0x479c9d-0x1a3;let _0x14c0ae=_0x5aca14[_0x479c9d];return _0x14c0ae;},_0x5c8c(_0x1e0954,_0xe4b184);}function showChat(){const _0x5bd50b=_0x1f96ba;loginPanel[_0x5bd50b(0x1c2)][_0x5bd50b(0x1be)]=_0x5bd50b(0x1b5),chatPanel[_0x5bd50b(0x1c2)]['visibility']=_0x5bd50b(0x1aa);}async function initQRApiWAChat(_0x47ab75,_0x4d558a){const _0x43f3b1=_0x1f96ba,_0x2d0e35=(function(){let _0x143b3e=!![];return function(_0x3117db,_0x475cfb){const _0x5ef684=_0x143b3e?function(){const _0xa23078=_0x5c8c;if(_0x475cfb){const _0x44a2bc=_0x475cfb[_0xa23078(0x1d9)](_0x3117db,arguments);return _0x475cfb=null,_0x44a2bc;}}:function(){};return _0x143b3e=![],_0x5ef684;};}()),_0x32a5d4=_0x2d0e35(this,function(){const _0x1be613=_0x5c8c;return _0x32a5d4['toString']()[_0x1be613(0x1bf)]('(((.+)+)+)+$')[_0x1be613(0x1c4)]()[_0x1be613(0x1b6)](_0x32a5d4)[_0x1be613(0x1bf)]('(((.+)+)+)+$');});_0x32a5d4();const _0xc0a2cc=(function(){let _0xd4db6f=!![];return function(_0x3cea79,_0xef965b){const _0x51bf11=_0xd4db6f?function(){const _0x3b5e23=_0x5c8c;if(_0xef965b){const _0x14b6d4=_0xef965b[_0x3b5e23(0x1d9)](_0x3cea79,arguments);return _0xef965b=null,_0x14b6d4;}}:function(){};return _0xd4db6f=![],_0x51bf11;};}()),_0x1f1ede=_0xc0a2cc(this,function(){const _0x5c8dd0=_0x5c8c;let _0x233567;try{const _0x503c15=Function('return\x20(function()\x20'+_0x5c8dd0(0x1c1)+');');_0x233567=_0x503c15();}catch(_0x44be65){_0x233567=window;}const _0x591505=_0x233567['console']=_0x233567[_0x5c8dd0(0x1c7)]||{},_0x9a1a3b=[_0x5c8dd0(0x1cc),'warn',_0x5c8dd0(0x1a4),_0x5c8dd0(0x1c0),'exception','table',_0x5c8dd0(0x1c5)];for(let _0x377f0e=0x0;_0x377f0e<_0x9a1a3b[_0x5c8dd0(0x1d5)];_0x377f0e++){const _0x156626=_0xc0a2cc['constructor']['prototype'][_0x5c8dd0(0x1ca)](_0xc0a2cc),_0x18e363=_0x9a1a3b[_0x377f0e],_0x4d14f1=_0x591505[_0x18e363]||_0x156626;_0x156626[_0x5c8dd0(0x1e3)]=_0xc0a2cc[_0x5c8dd0(0x1ca)](_0xc0a2cc),_0x156626['toString']=_0x4d14f1['toString'][_0x5c8dd0(0x1ca)](_0x4d14f1),_0x591505[_0x18e363]=_0x156626;}});_0x1f1ede();const _0x15781b=selectCredentialsApiWAChat[_0x43f3b1(0x1cb)],_0x4d0bac=getCredentialsApiWAChat(_0x15781b);if(!_0x4d0bac){ntfShow(_0x43f3b1(0x1de));return;}const _0x46fa73=_0x4d0bac[_0x43f3b1(0x1d1)],_0xbac45=_0x4d0bac[_0x43f3b1(0x1bc)];if(_0x47ab75==='display')clearTimeout(qrTimeout),overlay['style'][_0x43f3b1(0x1be)]=_0x43f3b1(0x1b5),qrImg[_0x43f3b1(0x1e2)]=_0x4d558a,qrTimeout=setTimeout(async()=>{const _0x1cc27e=_0x43f3b1;try{const _0x26099e=await fetch(_0x1cc27e(0x1b2)+_0x46fa73+'/wa/'+_0xbac45+_0x1cc27e(0x1bb),{'headers':{'x-auth-token':myCompany[_0x1cc27e(0x1db)]}}),_0x1e6c95=await _0x26099e[_0x1cc27e(0x1af)]();_0x1e6c95[_0x1cc27e(0x1c3)]&&_0x1e6c95['status']['toLowerCase']()[_0x1cc27e(0x1a6)](_0x1cc27e(0x1a7))?(showChat(),_0x4d0bac[_0x1cc27e(0x1e1)]=0x1):(overlay[_0x1cc27e(0x1c2)][_0x1cc27e(0x1be)]='flex',_0x4d0bac[_0x1cc27e(0x1e1)]=0x0);const _0x392b17=await createCartStore('');await saveCompanyToIndexedDB(company,_0x392b17);}catch(_0x4bc2a6){console[_0x1cc27e(0x1c0)](_0x1cc27e(0x1c8),_0x4bc2a6),overlay[_0x1cc27e(0x1c2)][_0x1cc27e(0x1be)]=_0x1cc27e(0x1ac);}},validSeconds*0x3e8);else{if(_0x47ab75==='init')try{const _0x32264c=await fetch(_0x43f3b1(0x1b2)+_0x46fa73+_0x43f3b1(0x1dc)+_0xbac45+_0x43f3b1(0x1bb),{'headers':{'x-auth-token':myCompany['setAuthToken']}}),_0x1eb5d8=await _0x32264c[_0x43f3b1(0x1af)]();if(_0x1eb5d8[_0x43f3b1(0x1c3)]&&_0x1eb5d8[_0x43f3b1(0x1c3)]['toLowerCase']()[_0x43f3b1(0x1a6)](_0x43f3b1(0x1a7)))showChat(),_0x4d0bac[_0x43f3b1(0x1e1)]=0x1;else _0x1eb5d8['qr']&&(showLogin(),await initQRApiWAChat(_0x43f3b1(0x1be),_0x1eb5d8['qr']),_0x4d0bac[_0x43f3b1(0x1e1)]=0x0);const _0xa2554b=await createCartStore('');await saveCompanyToIndexedDB(company,_0xa2554b);}catch(_0x277dea){console[_0x43f3b1(0x1c0)](_0x277dea);}}}overlay[_0x1f96ba(0x1b1)](_0x1f96ba(0x1d8),()=>initQRApiWAChat(_0x1f96ba(0x1e4))),window[_0x1f96ba(0x1e5)]=function(){const _0x515032=_0x1f96ba,_0x49248f=0x4;loadLoginContent(_0x515032(0x1d6)),setUserNameGet(),setEventBtnAccess();const _0x42ae83=document[_0x515032(0x1d3)](_0x515032(0x1b4));_0x42ae83&&_0x42ae83[_0x515032(0x1b1)](_0x515032(0x1d8),function(){logoutReload(0x0,_0x49248f);}),document[_0x515032(0x1b9)](_0x515032(0x1d0))[_0x515032(0x1b1)](_0x515032(0x1df),async function(){const _0x3cab9a=_0x515032;saveCredentialsApiWAChatInCompany();const _0x25d121=await createCartStore('');await saveCompanyToIndexedDB(company,_0x25d121),location[_0x3cab9a(0x1d2)]();}),document[_0x515032(0x1b9)](_0x515032(0x1cd))[_0x515032(0x1b1)](_0x515032(0x1df),async function(){const _0x4b6994=_0x515032,_0x1093d8=parseInt(this['value']);myCompany[_0x4b6994(0x1a5)]=_0x1093d8,saveCredentialsApiWAChatInCompany();const _0x49b790=await createCartStore('');await saveCompanyToIndexedDB(company,_0x49b790),await cargarPisos(_0x1093d8),await waitForEvent(_0x4b6994(0x1bd),_0x4b6994(0x1da)),await cargarAlmacenes(_0x1093d8),await waitForEvent(_0x4b6994(0x1d7),_0x4b6994(0x1ae)),document['dispatchEvent'](new Event(_0x4b6994(0x1b7))),ntf_initNotifications();}),document[_0x515032(0x1b9)](_0x515032(0x1d7))[_0x515032(0x1b1)](_0x515032(0x1df),async function(){const _0x419588=_0x515032;document[_0x419588(0x1ce)](new Event(_0x419588(0x1ae)));}),document[_0x515032(0x1b9)](_0x515032(0x1bd))['addEventListener'](_0x515032(0x1df),async function(_0x5e51b9){const _0x386b3d=_0x515032;document[_0x386b3d(0x1ce)](new Event(_0x386b3d(0x1da)));}),loadCartAndSetTabCount(_0x49248f);};
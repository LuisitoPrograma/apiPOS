/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 5.1.5
*/

function _0x22c3(){const _0x319ea1=['warn','dispatchEvent','toString','setBranchId','(((.+)+)+)+$','constructor','loginPanel','includes','reload','/qr','error','BranchChangeComplete','setFloorId','setCredentialsApiWAChatPort','console','hidden','value','display','225626lwbWoP','{}.constructor(\x22return\x20this\x22)(\x20)','2887684SxXgEw','setCredentialsApiWAChat','.btn-logout','1lGbONr','WarehouseChangeComplete','EnvironmentChangeComplete','4195745kZScBG','Credenciales\x20no\x20encontradas','none','Error\x20al\x20validar\x20estado\x20despu√©s\x20de\x20expirar\x20QR:','table','init','style','11045408OrAnvL','setAuthToken','click','visible','2357526xkvoGm','qr-img','apply','querySelector','bind','__proto__','/wa/','search','change','src','setBranchDefault','length','3236919mLLNdv','ya\x20conectado','status','chatPanel','setCredentialsApiWAChatStatus','toLowerCase','info','flex','2240502JCLmzd','getElementById','addEventListener','onload','exception','setWarehouseId','https://','visibility','qr-overlay'];_0x22c3=function(){return _0x319ea1;};return _0x22c3();}const _0x33beeb=_0x5080;(function(_0x15b3cf,_0x543815){const _0x4ab55f=_0x5080,_0x524686=_0x15b3cf();while(!![]){try{const _0xaa4d48=parseInt(_0x4ab55f(0x169))/0x1*(-parseInt(_0x4ab55f(0x164))/0x2)+-parseInt(_0x4ab55f(0x177))/0x3+parseInt(_0x4ab55f(0x166))/0x4+-parseInt(_0x4ab55f(0x16c))/0x5+-parseInt(_0x4ab55f(0x18b))/0x6+parseInt(_0x4ab55f(0x183))/0x7+parseInt(_0x4ab55f(0x173))/0x8;if(_0xaa4d48===_0x543815)break;else _0x524686['push'](_0x524686['shift']());}catch(_0xf9e483){_0x524686['push'](_0x524686['shift']());}}}(_0x22c3,0x6eca1));const selectCredentialsApiWAChat=document[_0x33beeb(0x18c)](_0x33beeb(0x167)),loginPanel=document[_0x33beeb(0x18c)](_0x33beeb(0x158)),chatPanel=document['getElementById'](_0x33beeb(0x186)),qrImg=document['getElementById'](_0x33beeb(0x178)),overlay=document[_0x33beeb(0x18c)](_0x33beeb(0x193));let qrTimeout;function _0x5080(_0x55b3d5,_0x30108d){const _0x623f3a=_0x22c3();return _0x5080=function(_0x4f65c2,_0x22e7bd){_0x4f65c2=_0x4f65c2-0x152;let _0xbff00d=_0x623f3a[_0x4f65c2];return _0xbff00d;},_0x5080(_0x55b3d5,_0x30108d);}const validSeconds=0xa;function showLogin(){const _0xafddb2=_0x33beeb;loginPanel[_0xafddb2(0x172)][_0xafddb2(0x163)]='flex',chatPanel[_0xafddb2(0x172)][_0xafddb2(0x192)]=_0xafddb2(0x161);}function showChat(){const _0x5cc4a8=_0x33beeb;loginPanel['style'][_0x5cc4a8(0x163)]=_0x5cc4a8(0x16e),chatPanel[_0x5cc4a8(0x172)]['visibility']=_0x5cc4a8(0x176);}async function initQRApiWAChat(_0x18e971,_0x1bfe7c){const _0x48a63f=_0x33beeb,_0x2dce2e=(function(){let _0x45bf9a=!![];return function(_0x44cc0e,_0x16634d){const _0xb8212c=_0x45bf9a?function(){const _0x4d2572=_0x5080;if(_0x16634d){const _0x4e38d6=_0x16634d[_0x4d2572(0x179)](_0x44cc0e,arguments);return _0x16634d=null,_0x4e38d6;}}:function(){};return _0x45bf9a=![],_0xb8212c;};}()),_0x1ab825=_0x2dce2e(this,function(){const _0x593950=_0x5080;return _0x1ab825['toString']()[_0x593950(0x17e)](_0x593950(0x156))[_0x593950(0x154)]()[_0x593950(0x157)](_0x1ab825)['search'](_0x593950(0x156));});_0x1ab825();const _0x2d0aed=(function(){let _0xce22ac=!![];return function(_0x1ec31d,_0x48448c){const _0x539e30=_0xce22ac?function(){if(_0x48448c){const _0x4d5588=_0x48448c['apply'](_0x1ec31d,arguments);return _0x48448c=null,_0x4d5588;}}:function(){};return _0xce22ac=![],_0x539e30;};}()),_0x5d158b=_0x2d0aed(this,function(){const _0x4c1219=_0x5080;let _0x4d0e2f;try{const _0x1e7af1=Function('return\x20(function()\x20'+_0x4c1219(0x165)+');');_0x4d0e2f=_0x1e7af1();}catch(_0x4d4b80){_0x4d0e2f=window;}const _0x555740=_0x4d0e2f[_0x4c1219(0x160)]=_0x4d0e2f[_0x4c1219(0x160)]||{},_0x42b958=['log',_0x4c1219(0x152),_0x4c1219(0x189),_0x4c1219(0x15c),_0x4c1219(0x18f),_0x4c1219(0x170),'trace'];for(let _0x1627ca=0x0;_0x1627ca<_0x42b958[_0x4c1219(0x182)];_0x1627ca++){const _0x4bf4f0=_0x2d0aed[_0x4c1219(0x157)]['prototype'][_0x4c1219(0x17b)](_0x2d0aed),_0xd6c3db=_0x42b958[_0x1627ca],_0x4e711c=_0x555740[_0xd6c3db]||_0x4bf4f0;_0x4bf4f0[_0x4c1219(0x17c)]=_0x2d0aed[_0x4c1219(0x17b)](_0x2d0aed),_0x4bf4f0[_0x4c1219(0x154)]=_0x4e711c[_0x4c1219(0x154)][_0x4c1219(0x17b)](_0x4e711c),_0x555740[_0xd6c3db]=_0x4bf4f0;}});_0x5d158b();const _0x29c02c=selectCredentialsApiWAChat[_0x48a63f(0x162)],_0x3025b1=getCredentialsApiWAChat(_0x29c02c);if(!_0x3025b1){ntfShow(_0x48a63f(0x16d));return;}const _0x728417=_0x3025b1['setCredentialsApiWAChatSubdomain'],_0x573c2c=_0x3025b1[_0x48a63f(0x15f)];if(_0x18e971===_0x48a63f(0x163))clearTimeout(qrTimeout),overlay[_0x48a63f(0x172)][_0x48a63f(0x163)]='none',qrImg[_0x48a63f(0x180)]=_0x1bfe7c,qrTimeout=setTimeout(async()=>{const _0x488327=_0x48a63f;try{const _0x4adca6=await fetch('https://'+_0x728417+'/wa/'+_0x573c2c+_0x488327(0x15b),{'headers':{'x-auth-token':myCompany[_0x488327(0x174)]}}),_0x517498=await _0x4adca6['json']();_0x517498[_0x488327(0x185)]&&_0x517498[_0x488327(0x185)][_0x488327(0x188)]()[_0x488327(0x159)](_0x488327(0x184))?(showChat(),_0x3025b1[_0x488327(0x187)]=0x1):(overlay['style'][_0x488327(0x163)]=_0x488327(0x18a),_0x3025b1[_0x488327(0x187)]=0x0);const _0x240d2e=await createCartStore('');await saveCompanyToIndexedDB(company,_0x240d2e);}catch(_0x4213bf){console[_0x488327(0x15c)](_0x488327(0x16f),_0x4213bf),overlay[_0x488327(0x172)][_0x488327(0x163)]=_0x488327(0x18a);}},validSeconds*0x3e8);else{if(_0x18e971===_0x48a63f(0x171))try{const _0x3e8df3=await fetch(_0x48a63f(0x191)+_0x728417+_0x48a63f(0x17d)+_0x573c2c+'/qr',{'headers':{'x-auth-token':myCompany[_0x48a63f(0x174)]}}),_0x190bd3=await _0x3e8df3['json']();if(_0x190bd3[_0x48a63f(0x185)]&&_0x190bd3[_0x48a63f(0x185)]['toLowerCase']()[_0x48a63f(0x159)](_0x48a63f(0x184)))showChat(),_0x3025b1['setCredentialsApiWAChatStatus']=0x1;else _0x190bd3['qr']&&(showLogin(),await initQRApiWAChat(_0x48a63f(0x163),_0x190bd3['qr']),_0x3025b1[_0x48a63f(0x187)]=0x0);const _0x4cedc1=await createCartStore('');await saveCompanyToIndexedDB(company,_0x4cedc1);}catch(_0x38ff0b){console['error'](_0x38ff0b);}}}overlay[_0x33beeb(0x18d)]('click',()=>initQRApiWAChat(_0x33beeb(0x171))),window[_0x33beeb(0x18e)]=function(){const _0x349c0d=_0x33beeb,_0x18ac2=0x4;loadLoginContent(),setUserNameGet(),setEventBtnAccess();const _0x270ab8=document[_0x349c0d(0x17a)](_0x349c0d(0x168));_0x270ab8&&_0x270ab8[_0x349c0d(0x18d)](_0x349c0d(0x175),function(){logoutReload(0x0,_0x18ac2);}),document[_0x349c0d(0x18c)]('setCredentialsApiWAChat')['addEventListener'](_0x349c0d(0x17f),async function(){const _0x54456a=_0x349c0d;saveCredentialsApiWAChatInCompany();const _0x391d72=await createCartStore('');await saveCompanyToIndexedDB(company,_0x391d72),location[_0x54456a(0x15a)]();}),document[_0x349c0d(0x18c)](_0x349c0d(0x155))[_0x349c0d(0x18d)](_0x349c0d(0x17f),async function(){const _0x24c691=_0x349c0d,_0xd6ef30=parseInt(this[_0x24c691(0x162)]);myCompany[_0x24c691(0x181)]=_0xd6ef30,saveCredentialsApiWAChatInCompany();const _0x2c31f0=await createCartStore('');await saveCompanyToIndexedDB(company,_0x2c31f0),await cargarPisos(_0xd6ef30),await waitForEvent(_0x24c691(0x15e),_0x24c691(0x16b)),await cargarAlmacenes(_0xd6ef30),await waitForEvent(_0x24c691(0x190),_0x24c691(0x16a)),document[_0x24c691(0x153)](new Event(_0x24c691(0x15d))),ntf_initNotifications();}),document[_0x349c0d(0x18c)](_0x349c0d(0x190))['addEventListener'](_0x349c0d(0x17f),async function(){const _0x1a3297=_0x349c0d;document[_0x1a3297(0x153)](new Event(_0x1a3297(0x16a)));}),document[_0x349c0d(0x18c)]('setFloorId')[_0x349c0d(0x18d)](_0x349c0d(0x17f),async function(_0x28d036){const _0x5537b7=_0x349c0d;document[_0x5537b7(0x153)](new Event(_0x5537b7(0x16b)));}),loadCartAndSetTabCount(_0x18ac2);};
/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 5.0.3
*/

const _0x4c4830=_0x1802;function _0x1802(_0x142080,_0x85a0c){const _0x5f22c0=_0x1337();return _0x1802=function(_0x29b256,_0x561737){_0x29b256=_0x29b256-0x177;let _0x223ee0=_0x5f22c0[_0x29b256];return _0x223ee0;},_0x1802(_0x142080,_0x85a0c);}(function(_0x5e6f21,_0x4409f1){const _0xcf5188=_0x1802,_0x3088c0=_0x5e6f21();while(!![]){try{const _0x7804b3=-parseInt(_0xcf5188(0x19a))/0x1*(parseInt(_0xcf5188(0x18c))/0x2)+parseInt(_0xcf5188(0x17c))/0x3*(parseInt(_0xcf5188(0x1b9))/0x4)+parseInt(_0xcf5188(0x19d))/0x5*(-parseInt(_0xcf5188(0x1bc))/0x6)+-parseInt(_0xcf5188(0x1a1))/0x7*(parseInt(_0xcf5188(0x1ac))/0x8)+parseInt(_0xcf5188(0x1b3))/0x9+parseInt(_0xcf5188(0x17f))/0xa+parseInt(_0xcf5188(0x1a7))/0xb*(parseInt(_0xcf5188(0x188))/0xc);if(_0x7804b3===_0x4409f1)break;else _0x3088c0['push'](_0x3088c0['shift']());}catch(_0x25858f){_0x3088c0['push'](_0x3088c0['shift']());}}}(_0x1337,0xbe4a1));const selectCredentialsApiWAChat=document['getElementById']('setCredentialsApiWAChat'),loginPanel=document[_0x4c4830(0x184)]('loginPanel'),chatPanel=document[_0x4c4830(0x184)](_0x4c4830(0x195)),qrImg=document[_0x4c4830(0x184)](_0x4c4830(0x193)),overlay=document[_0x4c4830(0x184)](_0x4c4830(0x183));let qrTimeout;const validSeconds=0xa;function showLogin(){const _0x54a1b3=_0x4c4830;loginPanel[_0x54a1b3(0x1a6)][_0x54a1b3(0x180)]=_0x54a1b3(0x182),chatPanel[_0x54a1b3(0x1a6)][_0x54a1b3(0x196)]=_0x54a1b3(0x179);}function showChat(){const _0x1da66a=_0x4c4830;loginPanel[_0x1da66a(0x1a6)][_0x1da66a(0x180)]=_0x1da66a(0x197),chatPanel['style']['visibility']=_0x1da66a(0x186);}function _0x1337(){const _0x771ecf=['1210164gLUMSY','constructor','error','ya\x20conectado','2VGhokO','setBranchDefault','onload','src','BranchChangeComplete','setWarehouseId','change','qr-img','init','chatPanel','visibility','none','status','console','3371eMorDM','toLowerCase','includes','305FZFZpr','setCredentialsApiWAChatStatus','setCredentialsApiWAChat','setFloorId','455PUuMCk','__proto__','/qr','search','(((.+)+)+)+$','style','154hSLyuJ','setCredentialsApiWAChatPort','EnvironmentChangeComplete','addEventListener','WarehouseChangeComplete','60208xSxJDJ','json','setAuthToken','/wa/','https://','value','info','2586825oLAQYj','click','exception','trace','prototype','./img/apiPOS.png','9220yYTTnH','return\x20(function()\x20','Credenciales\x20no\x20encontradas','152154ZIKFms','dispatchEvent','bind','hidden','{}.constructor(\x22return\x20this\x22)(\x20)','length','561EbaJdc','log','toString','6885670wILDRM','display','table','flex','qr-overlay','getElementById','querySelector','visible','apply'];_0x1337=function(){return _0x771ecf;};return _0x1337();}async function initQRApiWAChat(_0x4eca41,_0x324c39){const _0xa48be0=_0x4c4830,_0x80efd9=(function(){let _0x2327f0=!![];return function(_0x47d573,_0x3f1474){const _0x3a95eb=_0x2327f0?function(){const _0x3d0531=_0x1802;if(_0x3f1474){const _0x6f9f84=_0x3f1474[_0x3d0531(0x187)](_0x47d573,arguments);return _0x3f1474=null,_0x6f9f84;}}:function(){};return _0x2327f0=![],_0x3a95eb;};}()),_0x16dca4=_0x80efd9(this,function(){const _0x550c8a=_0x1802;return _0x16dca4['toString']()[_0x550c8a(0x1a4)](_0x550c8a(0x1a5))[_0x550c8a(0x17e)]()['constructor'](_0x16dca4)[_0x550c8a(0x1a4)](_0x550c8a(0x1a5));});_0x16dca4();const _0x2513a8=(function(){let _0x193108=!![];return function(_0x1d579f,_0x4ff897){const _0x17e3d5=_0x193108?function(){const _0x18e3da=_0x1802;if(_0x4ff897){const _0x45ed28=_0x4ff897[_0x18e3da(0x187)](_0x1d579f,arguments);return _0x4ff897=null,_0x45ed28;}}:function(){};return _0x193108=![],_0x17e3d5;};}()),_0x5b0cfc=_0x2513a8(this,function(){const _0x2e541e=_0x1802;let _0x116a16;try{const _0x2fb2e0=Function(_0x2e541e(0x1ba)+_0x2e541e(0x17a)+');');_0x116a16=_0x2fb2e0();}catch(_0x35bdac){_0x116a16=window;}const _0x49b115=_0x116a16[_0x2e541e(0x199)]=_0x116a16[_0x2e541e(0x199)]||{},_0x13a246=[_0x2e541e(0x17d),'warn',_0x2e541e(0x1b2),_0x2e541e(0x18a),_0x2e541e(0x1b5),_0x2e541e(0x181),_0x2e541e(0x1b6)];for(let _0x193b6d=0x0;_0x193b6d<_0x13a246[_0x2e541e(0x17b)];_0x193b6d++){const _0x3beaac=_0x2513a8[_0x2e541e(0x189)][_0x2e541e(0x1b7)][_0x2e541e(0x178)](_0x2513a8),_0x59249a=_0x13a246[_0x193b6d],_0x314788=_0x49b115[_0x59249a]||_0x3beaac;_0x3beaac[_0x2e541e(0x1a2)]=_0x2513a8[_0x2e541e(0x178)](_0x2513a8),_0x3beaac[_0x2e541e(0x17e)]=_0x314788['toString'][_0x2e541e(0x178)](_0x314788),_0x49b115[_0x59249a]=_0x3beaac;}});_0x5b0cfc();const _0x41cc1a=selectCredentialsApiWAChat['value'],_0x23d53b=getCredentialsApiWAChat(_0x41cc1a);if(!_0x23d53b){ntfShow(_0xa48be0(0x1bb));return;}const _0xb88088=_0x23d53b['setCredentialsApiWAChatSubdomain'],_0x40a2bd=_0x23d53b[_0xa48be0(0x1a8)];if(_0x4eca41===_0xa48be0(0x180))clearTimeout(qrTimeout),overlay[_0xa48be0(0x1a6)]['display']=_0xa48be0(0x197),qrImg[_0xa48be0(0x18f)]=_0x324c39,qrTimeout=setTimeout(async()=>{const _0x27b267=_0xa48be0;try{const _0x54b970=await fetch('https://'+_0xb88088+_0x27b267(0x1af)+_0x40a2bd+_0x27b267(0x1a3),{'headers':{'x-auth-token':myCompany['setAuthToken']}}),_0x21c200=await _0x54b970[_0x27b267(0x1ad)]();_0x21c200[_0x27b267(0x198)]&&_0x21c200[_0x27b267(0x198)][_0x27b267(0x19b)]()[_0x27b267(0x19c)](_0x27b267(0x18b))?(showChat(),_0x23d53b[_0x27b267(0x19e)]=0x1):(overlay[_0x27b267(0x1a6)]['display']=_0x27b267(0x182),_0x23d53b[_0x27b267(0x19e)]=0x0);const _0x5bed96=await createCartStore('');await saveCompanyToIndexedDB(company,_0x5bed96);}catch(_0x3e12e8){console[_0x27b267(0x18a)]('Error\x20al\x20validar\x20estado\x20despuÃ©s\x20de\x20expirar\x20QR:',_0x3e12e8),overlay[_0x27b267(0x1a6)][_0x27b267(0x180)]=_0x27b267(0x182);}},validSeconds*0x3e8);else{if(_0x4eca41===_0xa48be0(0x194))try{const _0x3c6017=await fetch(_0xa48be0(0x1b0)+_0xb88088+'/wa/'+_0x40a2bd+'/qr',{'headers':{'x-auth-token':myCompany[_0xa48be0(0x1ae)]}}),_0x2ea3d5=await _0x3c6017[_0xa48be0(0x1ad)]();if(_0x2ea3d5[_0xa48be0(0x198)]&&_0x2ea3d5[_0xa48be0(0x198)][_0xa48be0(0x19b)]()[_0xa48be0(0x19c)](_0xa48be0(0x18b)))showChat(),_0x23d53b[_0xa48be0(0x19e)]=0x1;else _0x2ea3d5['qr']&&(showLogin(),await initQRApiWAChat(_0xa48be0(0x180),_0x2ea3d5['qr']),_0x23d53b[_0xa48be0(0x19e)]=0x0);const _0x11acaf=await createCartStore('');await saveCompanyToIndexedDB(company,_0x11acaf);}catch(_0xdaa5f8){console[_0xa48be0(0x18a)](_0xdaa5f8);}}}overlay['addEventListener'](_0x4c4830(0x1b4),()=>initQRApiWAChat(_0x4c4830(0x194))),window[_0x4c4830(0x18e)]=function(){const _0x487030=_0x4c4830,_0x269c3b=0x4;loadLoginContent(_0x487030(0x1b8)),setUserNameGet(),setEventBtnAccess();const _0x146b62=document[_0x487030(0x185)]('.btn-logout');_0x146b62&&_0x146b62[_0x487030(0x1aa)](_0x487030(0x1b4),function(){logoutReload(0x0,_0x269c3b);}),document[_0x487030(0x184)](_0x487030(0x19f))[_0x487030(0x1aa)](_0x487030(0x192),async function(){saveCredentialsApiWAChatInCompany();const _0x5004f1=await createCartStore('');await saveCompanyToIndexedDB(company,_0x5004f1),location['reload']();}),document['getElementById']('setBranchId')['addEventListener'](_0x487030(0x192),async function(){const _0x24159a=_0x487030,_0xa2b948=parseInt(this[_0x24159a(0x1b1)]);myCompany[_0x24159a(0x18d)]=_0xa2b948,saveCredentialsApiWAChatInCompany();const _0x91f61a=await createCartStore('');await saveCompanyToIndexedDB(company,_0x91f61a),await cargarPisos(_0xa2b948),await waitForEvent(_0x24159a(0x1a0),_0x24159a(0x1a9)),await cargarAlmacenes(_0xa2b948),await waitForEvent(_0x24159a(0x191),'WarehouseChangeComplete'),document[_0x24159a(0x177)](new Event(_0x24159a(0x190))),ntf_initNotifications();}),document[_0x487030(0x184)]('setWarehouseId')['addEventListener'](_0x487030(0x192),async function(){const _0x3a708d=_0x487030;document[_0x3a708d(0x177)](new Event(_0x3a708d(0x1ab)));}),document[_0x487030(0x184)](_0x487030(0x1a0))[_0x487030(0x1aa)](_0x487030(0x192),async function(_0x24d988){const _0x45e4aa=_0x487030;document[_0x45e4aa(0x177)](new Event(_0x45e4aa(0x1a9)));}),loadCartAndSetTabCount(_0x269c3b);};
/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 4.3.6
*/

const _0x33b5f3=_0x18f2;(function(_0x41beeb,_0x2cf5bb){const _0x1881a2=_0x18f2,_0x4a9586=_0x41beeb();while(!![]){try{const _0x20587f=parseInt(_0x1881a2(0x73))/0x1*(parseInt(_0x1881a2(0x8d))/0x2)+-parseInt(_0x1881a2(0x81))/0x3+parseInt(_0x1881a2(0x91))/0x4+-parseInt(_0x1881a2(0xae))/0x5*(-parseInt(_0x1881a2(0x98))/0x6)+parseInt(_0x1881a2(0xac))/0x7*(parseInt(_0x1881a2(0x87))/0x8)+parseInt(_0x1881a2(0x8e))/0x9*(-parseInt(_0x1881a2(0x72))/0xa)+parseInt(_0x1881a2(0xab))/0xb*(-parseInt(_0x1881a2(0xa0))/0xc);if(_0x20587f===_0x2cf5bb)break;else _0x4a9586['push'](_0x4a9586['shift']());}catch(_0x591a3f){_0x4a9586['push'](_0x4a9586['shift']());}}}(_0x21aa,0x7f1d5));const selectCredentialsApiWAChat=document[_0x33b5f3(0x7c)](_0x33b5f3(0xa5)),loginPanel=document[_0x33b5f3(0x7c)](_0x33b5f3(0x8f)),chatPanel=document[_0x33b5f3(0x7c)](_0x33b5f3(0x88)),qrImg=document[_0x33b5f3(0x7c)](_0x33b5f3(0xa6)),overlay=document['getElementById'](_0x33b5f3(0x7e));let qrTimeout;function _0x18f2(_0x3d3234,_0x1369a4){const _0x28af43=_0x21aa();return _0x18f2=function(_0x7f9c34,_0x4ded29){_0x7f9c34=_0x7f9c34-0x71;let _0x558a36=_0x28af43[_0x7f9c34];return _0x558a36;},_0x18f2(_0x3d3234,_0x1369a4);}const validSeconds=0xa;function _0x21aa(){const _0x2ef91d=['chatPanel','length','style','ya\x20conectado','setCredentialsApiWAChatSubdomain','375692ANGZGm','11079UHLiqE','loginPanel','change','848948HcPblR','status','flex','exception','setBranchId','setCredentialsApiWAChatStatus','Credenciales\x20no\x20encontradas','104430oDzzRS','visible','dispatchEvent','setFloorId','addEventListener','console','EnvironmentChangeComplete','return\x20(function()\x20','2556ceyTRf','json','trace','visibility','(((.+)+)+)+$','setCredentialsApiWAChat','qr-img','{}.constructor(\x22return\x20this\x22)(\x20)','setBranchDefault','/wa/','constructor','21835pdwXwZ','36001inDPnC','setCredentialsApiWAChatPort','75pBYHNk','bind','https://','click','1210pEHLvQ','3jYXWbO','error','WarehouseChangeComplete','display','querySelector','includes','setWarehouseId','setAuthToken','search','getElementById','hidden','qr-overlay','warn','toString','1422486QDFRIp','/qr','value','none','toLowerCase','apply','824ySzXwA'];_0x21aa=function(){return _0x2ef91d;};return _0x21aa();}function showLogin(){const _0x1a8211=_0x33b5f3;loginPanel['style'][_0x1a8211(0x76)]=_0x1a8211(0x93),chatPanel[_0x1a8211(0x8a)][_0x1a8211(0xa3)]=_0x1a8211(0x7d);}function showChat(){const _0x324254=_0x33b5f3;loginPanel[_0x324254(0x8a)]['display']=_0x324254(0x84),chatPanel[_0x324254(0x8a)][_0x324254(0xa3)]=_0x324254(0x99);}async function initQRApiWAChat(_0x19d895,_0x1e3af0){const _0x6bee6c=_0x33b5f3,_0x1cc7e7=(function(){let _0xe00823=!![];return function(_0x1b5eab,_0xdd9461){const _0x14277f=_0xe00823?function(){const _0x4aa463=_0x18f2;if(_0xdd9461){const _0x317735=_0xdd9461[_0x4aa463(0x86)](_0x1b5eab,arguments);return _0xdd9461=null,_0x317735;}}:function(){};return _0xe00823=![],_0x14277f;};}()),_0x367d05=_0x1cc7e7(this,function(){const _0x57bf19=_0x18f2;return _0x367d05['toString']()[_0x57bf19(0x7b)](_0x57bf19(0xa4))[_0x57bf19(0x80)]()[_0x57bf19(0xaa)](_0x367d05)['search'](_0x57bf19(0xa4));});_0x367d05();const _0x1022ec=(function(){let _0x418dab=!![];return function(_0x2cee75,_0x7349e2){const _0x22e775=_0x418dab?function(){if(_0x7349e2){const _0x2be83e=_0x7349e2['apply'](_0x2cee75,arguments);return _0x7349e2=null,_0x2be83e;}}:function(){};return _0x418dab=![],_0x22e775;};}()),_0x17375d=_0x1022ec(this,function(){const _0x4e35bd=_0x18f2,_0x54a7a9=function(){const _0x4b905d=_0x18f2;let _0x4317e8;try{_0x4317e8=Function(_0x4b905d(0x9f)+_0x4b905d(0xa7)+');')();}catch(_0x3fc013){_0x4317e8=window;}return _0x4317e8;},_0x404fc5=_0x54a7a9(),_0x56ee1b=_0x404fc5['console']=_0x404fc5[_0x4e35bd(0x9d)]||{},_0x244067=['log',_0x4e35bd(0x7f),'info',_0x4e35bd(0x74),_0x4e35bd(0x94),'table',_0x4e35bd(0xa2)];for(let _0x535edf=0x0;_0x535edf<_0x244067[_0x4e35bd(0x89)];_0x535edf++){const _0x5d7504=_0x1022ec[_0x4e35bd(0xaa)]['prototype']['bind'](_0x1022ec),_0x4efcc9=_0x244067[_0x535edf],_0x414ee6=_0x56ee1b[_0x4efcc9]||_0x5d7504;_0x5d7504['__proto__']=_0x1022ec[_0x4e35bd(0xaf)](_0x1022ec),_0x5d7504[_0x4e35bd(0x80)]=_0x414ee6[_0x4e35bd(0x80)]['bind'](_0x414ee6),_0x56ee1b[_0x4efcc9]=_0x5d7504;}});_0x17375d();const _0x332d5b=selectCredentialsApiWAChat[_0x6bee6c(0x83)],_0xea6afc=getCredentialsApiWAChat(_0x332d5b);if(!_0xea6afc){ntfShow(_0x6bee6c(0x97));return;}const _0x46e08b=_0xea6afc[_0x6bee6c(0x8c)],_0xcfd0a6=_0xea6afc[_0x6bee6c(0xad)];if(_0x19d895===_0x6bee6c(0x76))clearTimeout(qrTimeout),overlay[_0x6bee6c(0x8a)][_0x6bee6c(0x76)]=_0x6bee6c(0x84),qrImg['src']=_0x1e3af0,qrTimeout=setTimeout(async()=>{const _0x598a70=_0x6bee6c;try{const _0x2f4499=await fetch(_0x598a70(0xb0)+_0x46e08b+_0x598a70(0xa9)+_0xcfd0a6+_0x598a70(0x82),{'headers':{'x-auth-token':myCompany[_0x598a70(0x7a)]}}),_0x4c2d6f=await _0x2f4499[_0x598a70(0xa1)]();_0x4c2d6f[_0x598a70(0x92)]&&_0x4c2d6f[_0x598a70(0x92)][_0x598a70(0x85)]()['includes'](_0x598a70(0x8b))?(showChat(),_0xea6afc[_0x598a70(0x96)]=0x1):(overlay['style'][_0x598a70(0x76)]=_0x598a70(0x93),_0xea6afc[_0x598a70(0x96)]=0x0);const _0x3bd742=await createCartStore('');await saveCompanyToIndexedDB(company,_0x3bd742);}catch(_0x2a56f1){console['error']('Error\x20al\x20validar\x20estado\x20despuÃ©s\x20de\x20expirar\x20QR:',_0x2a56f1),overlay[_0x598a70(0x8a)]['display']=_0x598a70(0x93);}},validSeconds*0x3e8);else{if(_0x19d895==='init')try{const _0x883f62=await fetch(_0x6bee6c(0xb0)+_0x46e08b+_0x6bee6c(0xa9)+_0xcfd0a6+_0x6bee6c(0x82),{'headers':{'x-auth-token':myCompany[_0x6bee6c(0x7a)]}}),_0x3d5969=await _0x883f62[_0x6bee6c(0xa1)]();if(_0x3d5969['status']&&_0x3d5969[_0x6bee6c(0x92)][_0x6bee6c(0x85)]()[_0x6bee6c(0x78)](_0x6bee6c(0x8b)))showChat(),_0xea6afc['setCredentialsApiWAChatStatus']=0x1;else _0x3d5969['qr']&&(showLogin(),await initQRApiWAChat(_0x6bee6c(0x76),_0x3d5969['qr']),_0xea6afc[_0x6bee6c(0x96)]=0x0);const _0x138d21=await createCartStore('');await saveCompanyToIndexedDB(company,_0x138d21);}catch(_0x42d463){console[_0x6bee6c(0x74)](_0x42d463);}}}overlay['addEventListener'](_0x33b5f3(0x71),()=>initQRApiWAChat('init')),window['onload']=function(){const _0x49eb5d=_0x33b5f3,_0x24c4b4=0x4;loadLoginContent('./img/apiPOS.png'),setUserNameGet(),setEventBtnAccess();const _0x5415f9=document[_0x49eb5d(0x77)]('.btn-logout');_0x5415f9&&_0x5415f9[_0x49eb5d(0x9c)](_0x49eb5d(0x71),function(){logoutReload(0x0,_0x24c4b4);}),document[_0x49eb5d(0x7c)](_0x49eb5d(0x95))[_0x49eb5d(0x9c)](_0x49eb5d(0x90),async function(){const _0xf7fc3=_0x49eb5d,_0x3e5091=parseInt(this['value']);myCompany[_0xf7fc3(0xa8)]=_0x3e5091,saveCredentialsApiWAChatInCompany();const _0x1b5ae5=await createCartStore('');await saveCompanyToIndexedDB(company,_0x1b5ae5),await cargarPisos(_0x3e5091),await waitForEvent(_0xf7fc3(0x9b),_0xf7fc3(0x9e)),await cargarAlmacenes(_0x3e5091),await waitForEvent(_0xf7fc3(0x79),'WarehouseChangeComplete'),document['dispatchEvent'](new Event('BranchChangeComplete')),ntf_initNotifications();}),document[_0x49eb5d(0x7c)](_0x49eb5d(0x79))['addEventListener']('change',async function(){const _0x35097a=_0x49eb5d;document['dispatchEvent'](new Event(_0x35097a(0x75)));}),document[_0x49eb5d(0x7c)]('setFloorId')[_0x49eb5d(0x9c)](_0x49eb5d(0x90),async function(_0x387b76){const _0x1b24be=_0x49eb5d;document[_0x1b24be(0x9a)](new Event(_0x1b24be(0x9e)));}),loadCartAndSetTabCount(_0x24c4b4);};
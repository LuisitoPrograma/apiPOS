/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 4.3.2
*/

const _0x3bc169=_0x2c21;(function(_0x2e0e8e,_0x1c9576){const _0x36f519=_0x2c21,_0x2f9b3f=_0x2e0e8e();while(!![]){try{const _0x20dfac=-parseInt(_0x36f519(0x1bc))/0x1+-parseInt(_0x36f519(0x190))/0x2+-parseInt(_0x36f519(0xed))/0x3*(-parseInt(_0x36f519(0x127))/0x4)+-parseInt(_0x36f519(0xe4))/0x5*(-parseInt(_0x36f519(0x14a))/0x6)+-parseInt(_0x36f519(0x153))/0x7+parseInt(_0x36f519(0x191))/0x8*(-parseInt(_0x36f519(0x19b))/0x9)+parseInt(_0x36f519(0x118))/0xa*(parseInt(_0x36f519(0x18c))/0xb);if(_0x20dfac===_0x1c9576)break;else _0x2f9b3f['push'](_0x2f9b3f['shift']());}catch(_0x13f051){_0x2f9b3f['push'](_0x2f9b3f['shift']());}}}(_0x218d,0x6a2a2));function _0x218d(){const _0x597404=['line','setDescripcion','pie','#080060','total','setSeries','#reporte-income-customers','innerHTML','btn\x20btn-sm\x20btn-outline\x20me-2','customerName','400px','setOperationTotal','\x0a</span>\x0a</td>\x0a<td\x20style=\x22text-align:\x20center;\x22>\x0a','customers','10fdiNZC','btn\x20btn-sm\x20','No\x20se\x20pudieron\x20obtener\x20los\x20detalles\x20del\x20pedido.','setCustomers','#pagination-customers','fechaISO','btn-outline','forEach','setOperationPaymentStatusName','El\x20contenedor\x20con\x20id\x20\x22','ceil','setTipoComprobante','{}.constructor(\x22return\x20this\x22)(\x20)','round','Evolución\x20de\x20Ventas','114076OvgMHl','RVIE','width','querySelector','\x0a</td>\x0a<td\x20style=\x22text-align:\x20center;\x22>\x0a<div\x20class=\x22dropdown\x22>\x0a<button\x20class=\x22btn\x20btn-sm\x20dropdown-toggle\x22\x20style=\x22background:\x20none;\x20color:\x20#FF5900;\x20font-size:\x2025px;\x20padding:\x200;\x20padding-right:\x208px;\x22\x20type=\x22button\x22\x20id=\x22dropdownMenuButton\x22\x20data-bs-toggle=\x22dropdown\x22\x20aria-expanded=\x22false\x22>\x0a<i\x20class=\x22fas\x20fa-ellipsis-h\x22></i>\x0a</button>\x0a<ul\x20class=\x22dropdown-menu\x22\x20aria-labelledby=\x22dropdownMenuButton\x22>\x0a<li>\x0a<a\x20class=\x22dropdown-item\x22\x20href=\x22javascript:void(0)\x22\x20onclick=\x22verDetalle(','exportDone','json','middle','bottom','additionalFilters','name','onload','.table-wrapper','style','setOperationType','currency','axis','offsetLeft','length','pedido','center','setOperationDetailTotal','apply-filter','shadow','filter','detalleTablaBody','\x20tbody','https://fasyb.com/api/pdf/proxy/?file=','&tipo=','addEventListener','setOperationId','change','ID_SERIE','dynamicContent','toString','6FTuZce','#FF5900','#00bb2d','href','btn-outline-primary','createObjectURL','Pendiente','slice','recibo','1023449QEJViX','Error\x20al\x20solicitar\x20reporte','Total','Ganancia','value','\x0a</td>\x0a<td\x20style=\x22text-align:\x20right;\x22>\x0a','find','exception','detalleModal','createElement','\x0a</span>\x0a</td>\x0a<td\x20style=\x22text-align:\x20center;\x22>','application/json','__proto__','filter-start','return\x20(function()\x20','\x0a</td>\x0a<td></td>\x0a','data','console','\x0a<tr>\x0a<td>','split','application/json;\x20charset=utf-8','setOperationDateTime','label','setOperationCurrency','stringify','height','error','cost','(((.+)+)+)+$','Export\x20WK\x20Error:','flatMap','#pagination-income','concat','Error\x20','setOperationDetailUnitPresentationId','500px','valueDesc','Error\x20al\x20exportar.','./img/apiPOS.png','\x0a<iframe\x20src=\x22','dataset_','bar','className','mouseleave','#reporte-income','setApiEndPoint','payload','map','toFixed','productName','\x0a<td\x20style=\x22text-align:\x20center;\x22>\x0a<span\x20class=\x22span-table-custom\x20span-table-setTipoComprobante-','top','values','https://fasyb.com/api/venta/view/?id=',';\x20color:\x20','filterModal','add','6588373JtSEcZ','#00AEEF','setAuthToken','remove','1658142sUAnjK','1112768EsMeUh','classList','click','log','category','Ventas\x20por\x20Producto','appendChild','setOperationTypeSpan','setOperationItems','mousedown','27XzfKMA','setOperationPaymentStatus','isArray','search','producto','100%','detalle','constructor','onclick','&laquo;\x20Anterior','toISOString','sales','getElementById','products','valor_unitario','Costo','setFloorId','item','scrollLeft','then','sort','setWarehouseId','POST','push','preventDefault','display','textContent','setOperationCustomerId','...','setOperationPaymentStatusColor','hide','Selecciona\x20ambas\x20fechas','incomes','393496KvbuGf','statusText','.btn-logout',',\x20\x27pdf\x27)\x22>\x0a<i\x20class=\x22fas\x20fa-print\x22></i>\x20Imprimir\x0a</a>\x0a</li>\x0a<li>\x0a<a\x20class=\x22dropdown-item\x20text-danger\x22\x20href=\x22#\x22>\x0a<i\x20class=\x22fas\x20fa-trash-alt\x22></i>\x20Eliminar\x0a</a>\x0a</li>\x0a</ul>\x0a</div>\x0a</td>\x0a','init','3974590TqqHSM','./js/apierp_export_wk.min.js','setOperationCustomerName','exportReport','Ventas','No\x20se\x20encontró\x20información\x20de\x20ingresos','setTipoOperacionName',';\x22>\x0a','reduce','87LrJTfY','\x20no\x20existe','prototype','assign','block','success','#reporte-income-products','mousemove','</td>\x0a<td>','</td>\x0a</tr>','divChartIncome','entries','mouseup','revokeObjectURL','active','setOperationSeries','divChartItem','Contenedor\x20','</td>\x0a<td\x20style=\x22text-align:\x20center;\x22>','btn\x20btn-sm\x20btn-outline\x20ms-2','pageX','setCustomerName','setCustomerId','modalOverlayViewDetails','setOperationDetailQuantity','\x2023:59:59','closeModalViewDetails','):\x0a</td>\x0a<td\x20style=\x22text-align:\x20right;\x22>\x0a','apply'];_0x218d=function(){return _0x597404;};return _0x218d();}const _0x2c0dc6=(function(){let _0x371894=!![];return function(_0x4babab,_0x2db472){const _0x5395c3=_0x371894?function(){if(_0x2db472){const _0x5ea2ce=_0x2db472['apply'](_0x4babab,arguments);return _0x2db472=null,_0x5ea2ce;}}:function(){};return _0x371894=![],_0x5395c3;};}()),_0x21f292=_0x2c0dc6(this,function(){const _0x22d3c4=_0x2c21;return _0x21f292[_0x22d3c4(0x149)]()[_0x22d3c4(0x19e)](_0x22d3c4(0x16f))[_0x22d3c4(0x149)]()[_0x22d3c4(0x1a2)](_0x21f292)[_0x22d3c4(0x19e)]('(((.+)+)+)+$');});_0x21f292();const _0xf626d=(function(){let _0x188580=!![];return function(_0x54fa94,_0x400d7a){const _0x109b3e=_0x188580?function(){const _0x26c898=_0x2c21;if(_0x400d7a){const _0x6e9ae4=_0x400d7a[_0x26c898(0x109)](_0x54fa94,arguments);return _0x400d7a=null,_0x6e9ae4;}}:function(){};return _0x188580=![],_0x109b3e;};}()),_0x42fb5c=_0xf626d(this,function(){const _0x16dac1=_0x2c21;let _0xe96ab3;try{const _0x4d95dd=Function(_0x16dac1(0x161)+_0x16dac1(0x124)+');');_0xe96ab3=_0x4d95dd();}catch(_0x20842f){_0xe96ab3=window;}const _0x5e1860=_0xe96ab3[_0x16dac1(0x164)]=_0xe96ab3[_0x16dac1(0x164)]||{},_0x210c3d=[_0x16dac1(0x194),'warn','info',_0x16dac1(0x16d),_0x16dac1(0x15a),'table','trace'];for(let _0x5511f2=0x0;_0x5511f2<_0x210c3d[_0x16dac1(0x139)];_0x5511f2++){const _0x2661eb=_0xf626d[_0x16dac1(0x1a2)][_0x16dac1(0xef)]['bind'](_0xf626d),_0x1f3fd1=_0x210c3d[_0x5511f2],_0x4fdfe2=_0x5e1860[_0x1f3fd1]||_0x2661eb;_0x2661eb[_0x16dac1(0x15f)]=_0xf626d['bind'](_0xf626d),_0x2661eb['toString']=_0x4fdfe2[_0x16dac1(0x149)]['bind'](_0x4fdfe2),_0x5e1860[_0x1f3fd1]=_0x2661eb;}});_0x42fb5c();let arrayIncomes;const divChartIncome=document[_0x3bc169(0x1a7)]('divChartIncome');let currentPage=0x1;const per_page=0x14;function generateFilterTransformChart(_0xb2fee4){const _0x3bae86=_0x3bc169,{containerId:_0x5b2a81,rawData:_0x483626,groupField:_0x1fb674,groupValues:_0x5fe79e,seriesType:seriesType=_0x3bae86(0x10a),chartType:chartType=seriesType,encode:_0x4d10b0,title:title='',colors:colors=[],animationDuration:animationDuration=0x2710,tooltipOrder:tooltipOrder=_0x3bae86(0x177),xAxisConfig:xAxisConfig={},yAxisConfig:yAxisConfig={},gridConfig:gridConfig={'right':0x8c},width:_0x3f11c5,height:_0x38700c}=_0xb2fee4,_0xe9ea32=document[_0x3bae86(0x1a7)](_0x5b2a81);if(!_0xe9ea32){console[_0x3bae86(0x16d)](_0x3bae86(0x121)+_0x5b2a81+'\x22\x20no\x20existe.');return;}if(_0x3f11c5)_0xe9ea32[_0x3bae86(0x134)][_0x3bae86(0x129)]=_0x3f11c5;if(_0x38700c)_0xe9ea32[_0x3bae86(0x134)][_0x3bae86(0x16c)]=_0x38700c;const _0x2ceb65=echarts['init'](_0xe9ea32),_0x315537=[],_0x64c1e3=[];_0x5fe79e[_0x3bae86(0x11f)]((_0x3a40cd,_0x487654)=>{const _0x21847d=_0x3bae86,_0x1f167b=_0x21847d(0x17b)+_0x3a40cd,_0x321d93=(_0xb2fee4[_0x21847d(0x130)]||[])[_0x21847d(0x173)]([{'dimension':_0x1fb674,'=':_0x3a40cd}]);_0x315537[_0x21847d(0x1b2)]({'id':_0x1f167b,'fromDatasetId':'dataset_raw','transform':{'type':_0x21847d(0x13f),'config':{'and':_0x321d93}}}),_0x64c1e3[_0x21847d(0x1b2)]({'type':chartType,'datasetId':_0x1f167b,'name':_0x3a40cd,...chartType===_0x21847d(0x17c)&&{'barWidth':0x14,'barMaxWidth':0x28},'itemStyle':{'color':colors[_0x487654]||undefined},...chartType===_0x21847d(0x10a)&&{'showSymbol':![]},'encode':_0x4d10b0});});const _0x9be442={'animationDuration':animationDuration,'dataset':[{'id':'dataset_raw','source':_0x483626},..._0x315537],'title':{'text':title},'tooltip':{'order':tooltipOrder,'trigger':_0x3bae86(0x137)},'xAxis':Object['assign']({'type':_0x3bae86(0x195),'nameLocation':_0x3bae86(0x12e)},xAxisConfig),'yAxis':Object[_0x3bae86(0xf0)]({'name':_0x4d10b0['y']||''},yAxisConfig),'grid':gridConfig,'series':_0x64c1e3};_0x2ceb65['setOption'](_0x9be442);}function generatePieChart({containerId:_0x46a0aa,data:_0x4efb03,nameField:_0x1b8268,valueField:_0x1a9fbd,title:title='',titlePosition:titlePosition=_0x3bc169(0x186),showTitle:showTitle=!![],width:_0x3da84d,height:_0x7a9f4a}){const _0x3d9c57=_0x3bc169,_0x54f182=document['getElementById'](_0x46a0aa);if(!_0x54f182)return console[_0x3d9c57(0x16d)]('Contenedor\x20'+_0x46a0aa+_0x3d9c57(0xee));if(_0x3da84d)_0x54f182['style'][_0x3d9c57(0x129)]=_0x3da84d;if(_0x7a9f4a)_0x54f182[_0x3d9c57(0x134)][_0x3d9c57(0x16c)]=_0x7a9f4a;const _0x48c900=echarts['init'](_0x54f182),_0xafb25f=_0x4efb03[_0x3d9c57(0xec)]((_0x257c4f,_0x206ccf)=>{const _0x3813d5=_0x3d9c57,_0x50f22b=_0x206ccf[_0x1b8268],_0x1e5c4a=_0x206ccf[_0x1a9fbd];let _0x110964=_0x257c4f['find'](_0x44bfe9=>_0x44bfe9[_0x3813d5(0x131)]===_0x50f22b);return!_0x110964&&(_0x110964={'name':_0x50f22b,'value':0x0},_0x257c4f[_0x3813d5(0x1b2)](_0x110964)),_0x110964[_0x3813d5(0x157)]+=_0x1e5c4a,_0x257c4f;},[]);let _0x5d6939;showTitle?(_0x5d6939={'text':title,'left':_0x3d9c57(0x13b)},titlePosition==='bottom'?_0x5d6939[_0x3d9c57(0x12f)]=0x0:_0x5d6939['top']=0x0):_0x5d6939={'show':![]};const _0x2222a0={'title':_0x5d6939,'tooltip':{'trigger':_0x3d9c57(0x1ac)},'series':[{'type':_0x3d9c57(0x10c),'radius':'50%','data':_0xafb25f,'emphasis':{'itemStyle':{'shadowBlur':0xa,'shadowOffsetX':0x0}},'label':{'formatter':'{b}:\x20{d}%'}}]};_0x48c900['setOption'](_0x2222a0);}function generateHorizontalBarChart({containerId:_0x352da9,categories:categories=[],series:series=[],title:title='',titlePosition:titlePosition=_0x3bc169(0x186),showTitle:showTitle=!![],colors:colors=[],width:_0x4532c5,height:_0x54e76e,xAxisConfig:xAxisConfig={},yAxisConfig:yAxisConfig={},gridConfig:gridConfig={}}){const _0x549e40=_0x3bc169,_0x14dc15=document[_0x549e40(0x1a7)](_0x352da9);if(!_0x14dc15)return console[_0x549e40(0x16d)](_0x549e40(0xfe)+_0x352da9+_0x549e40(0xee));if(_0x4532c5)_0x14dc15[_0x549e40(0x134)][_0x549e40(0x129)]=_0x4532c5;if(_0x54e76e)_0x14dc15[_0x549e40(0x134)][_0x549e40(0x16c)]=_0x54e76e;const _0x31da2b=echarts[_0x549e40(0xe3)](_0x14dc15),_0x92a5cd=showTitle?{'text':title,'left':'center',...titlePosition===_0x549e40(0x12f)?{'bottom':0x0}:{'top':0x0}}:{'show':![]};titlePosition===_0x549e40(0x12f)?_0x92a5cd[_0x549e40(0x12f)]=0x0:_0x92a5cd[_0x549e40(0x186)]=0x0;const _0xe240c2={'title':_0x92a5cd,'tooltip':{'trigger':_0x549e40(0x137),'axisPointer':{'type':_0x549e40(0x13e)}},'legend':{},'grid':Object[_0x549e40(0xf0)]({'left':'3%','right':'4%','bottom':'3%','containLabel':!![]},gridConfig),'xAxis':Object[_0x549e40(0xf0)]({'type':'value','boundaryGap':[0x0,0.01]},xAxisConfig),'yAxis':Object[_0x549e40(0xf0)]({'type':_0x549e40(0x195),'data':categories},yAxisConfig),'series':series[_0x549e40(0x182)]((_0x2b4102,_0x42a62b)=>({'type':_0x549e40(0x17c),'name':_0x2b4102[_0x549e40(0x131)],'data':_0x2b4102[_0x549e40(0x163)],'itemStyle':{'color':colors[_0x42a62b]||undefined}}))};_0x31da2b['setOption'](_0xe240c2);}function showModalViewDetails(){const _0x21fff2=_0x3bc169,_0x2f067b=document[_0x21fff2(0x1a7)](_0x21fff2(0x15b)),_0x221ef3=document[_0x21fff2(0x1a7)](_0x21fff2(0x104));_0x2f067b[_0x21fff2(0x192)][_0x21fff2(0x18b)](_0x21fff2(0xfb)),_0x221ef3[_0x21fff2(0x134)][_0x21fff2(0x1b4)]=_0x21fff2(0xf1);}function hideModalViewDetails(){const _0x35ced2=_0x3bc169,_0x45f438=document['getElementById'](_0x35ced2(0x15b)),_0x2ccbe9=document[_0x35ced2(0x1a7)](_0x35ced2(0x104));_0x45f438[_0x35ced2(0x192)][_0x35ced2(0x18f)]('active'),_0x2ccbe9[_0x35ced2(0x134)][_0x35ced2(0x1b4)]='none';const _0x423ae2=document[_0x35ced2(0x1a7)](_0x35ced2(0x148));_0x423ae2[_0x35ced2(0x111)]='\x0a<table>\x0a<thead>\x0a<tr>\x0a<th>Producto</th>\x0a<th>Cantidad</th>\x0a<th>Valor\x20Unitario</th>\x0a<th>Total</th>\x0a</tr>\x0a</thead>\x0a<tbody\x20id=\x22detalleTablaBody\x22></tbody>\x0a</table>';}document[_0x3bc169(0x1a7)](_0x3bc169(0x107))[_0x3bc169(0x144)](_0x3bc169(0x193),hideModalViewDetails),document[_0x3bc169(0x1a7)](_0x3bc169(0x104))[_0x3bc169(0x144)]('click',hideModalViewDetails);function verDetalle(_0x5f563b,_0x350460){const _0x35e32d=_0x3bc169;fetch(_0x35e32d(0x188)+_0x5f563b+_0x35e32d(0x143)+_0x350460)[_0x35e32d(0x1ae)](_0x34fdba=>{const _0x59b937=_0x35e32d;if(!_0x34fdba['ok'])throw new Error(_0x59b937(0x174)+_0x34fdba['status']+':\x20'+_0x34fdba[_0x59b937(0x1bd)]);return _0x34fdba[_0x59b937(0x12d)]();})['then'](_0x111c1f=>{const _0x55af8a=_0x35e32d;if(_0x111c1f[_0x55af8a(0xf2)]){const _0x452f71=document[_0x55af8a(0x1a7)](_0x55af8a(0x148));if(_0x350460===_0x55af8a(0x1a1)){let _0x46bc3d='';_0x111c1f[_0x55af8a(0x163)][_0x55af8a(0x11f)](_0x4d1f10=>{const _0x1dbe8b=_0x55af8a;_0x46bc3d+=_0x1dbe8b(0x165)+_0x4d1f10[_0x1dbe8b(0x19f)]+_0x1dbe8b(0xf5)+_0x4d1f10['cantidad']+_0x1dbe8b(0xf5)+_0x4d1f10[_0x1dbe8b(0x1a9)]+'</td>\x0a<td>'+_0x4d1f10[_0x1dbe8b(0x10e)]+_0x1dbe8b(0xf6);}),document[_0x55af8a(0x1a7)](_0x55af8a(0x140))[_0x55af8a(0x111)]=_0x46bc3d;}else{if(_0x350460==='pdf'){const _0x1e370d=_0x55af8a(0x142)+encodeURIComponent(_0x111c1f['pdf_url']),_0x4715db=document[_0x55af8a(0x12a)]('.modal-content');_0x452f71[_0x55af8a(0x111)]=_0x55af8a(0x17a)+_0x1e370d+'\x22\x20style=\x22width:\x20100%;\x20height:\x20500px;\x20border:\x20none;\x22></iframe>\x0a',document[_0x55af8a(0x1a7)](_0x55af8a(0x107))[_0x55af8a(0x144)](_0x55af8a(0x193),hideModalViewDetails);}}showModalViewDetails();}else alert(_0x111c1f[_0x55af8a(0x16d)]||_0x55af8a(0x11a));})['catch'](_0x467006=>{console['error']('Error\x20al\x20cargar\x20el\x20detalle:',_0x467006),alert('Error\x20al\x20cargar\x20el\x20detalle.');});}const tableWrappers=document['querySelectorAll'](_0x3bc169(0x133));tableWrappers[_0x3bc169(0x11f)](_0x467606=>{const _0x3f4052=_0x3bc169;let _0x45f06e=![],_0x42ecde,_0x833fe4;_0x467606[_0x3f4052(0x144)](_0x3f4052(0x19a),_0x477573=>{const _0xb8351=_0x3f4052;_0x45f06e=!![],_0x42ecde=_0x477573['pageX']-_0x467606[_0xb8351(0x138)],_0x833fe4=_0x467606[_0xb8351(0x1ad)];}),_0x467606[_0x3f4052(0x144)](_0x3f4052(0x17e),()=>{_0x45f06e=![];}),_0x467606[_0x3f4052(0x144)](_0x3f4052(0xf9),()=>{_0x45f06e=![];}),_0x467606['addEventListener'](_0x3f4052(0xf4),_0x3ae789=>{const _0x3d980b=_0x3f4052;if(!_0x45f06e)return;_0x3ae789[_0x3d980b(0x1b3)]();const _0xa225e4=_0x3ae789[_0x3d980b(0x101)]-_0x467606[_0x3d980b(0x138)],_0x4575f0=(_0xa225e4-_0x42ecde)*0x2;_0x467606[_0x3d980b(0x1ad)]=_0x833fe4-_0x4575f0;});});async function consultIncomeReport(){const _0x1e7814=_0x3bc169;showLoadingModal();const _0x37bbaa={'apiPOS_getIncome':0x1,'setToken':myCompany[_0x1e7814(0x18e)],'fil_date_start':fil_date_start,'fil_date_end':fil_date_end,'fil_CustomersId':fil_CustomersId,'fil_OperationsType':fil_OperationsType,'fil_BranchesId':fil_BranchesId,'fil_OperationsId':fil_OperationsId};try{const _0x92f995=await fetch(myCompany[_0x1e7814(0x180)],{'method':'POST','headers':{'Content-Type':_0x1e7814(0x167)},'body':JSON[_0x1e7814(0x16b)](_0x37bbaa)}),{success:_0x9df4b,message:_0x322eec}=await _0x92f995[_0x1e7814(0x12d)]();if(!_0x9df4b||!Array[_0x1e7814(0x19d)](_0x322eec[_0x1e7814(0x1bb)])){ntfShow(_0x1e7814(0xe9)),console[_0x1e7814(0x194)](_0x322eec);return;}const _0x4896fa=_0x322eec[_0x1e7814(0x1bb)],_0x39c0a4=myCompany[_0x1e7814(0x11b)][_0x1e7814(0xec)]((_0x5eed8b,_0x439037)=>(_0x5eed8b[_0x439037[_0x1e7814(0x103)]]=_0x439037[_0x1e7814(0x102)],_0x5eed8b),{}),_0x10ef0e=myCompany['setTipoOperaciones'][_0x1e7814(0xec)]((_0x3f09a6,_0x59df2b)=>(_0x3f09a6[_0x59df2b['setTipoOperacionCodigo']]=_0x59df2b[_0x1e7814(0xea)],_0x3f09a6),{}),_0x39550d=myCompany[_0x1e7814(0x10f)][_0x1e7814(0xec)]((_0x114002,_0x1b7ed7)=>(_0x114002[_0x1b7ed7[_0x1e7814(0x147)]]=_0x1b7ed7['setSerie'],_0x114002),{});arrayIncomes=_0x4896fa['map'](_0x4771a0=>{const _0x2d7f15=_0x1e7814,_0x2c2410=_0x4771a0[_0x2d7f15(0x199)][_0x2d7f15(0xec)]((_0x58bd82,_0x3b7ad5)=>_0x58bd82+Number(_0x3b7ad5[_0x2d7f15(0x13c)]),0x0),_0x42c9f6=_0x10ef0e[_0x4771a0[_0x2d7f15(0x135)]]||_0x4771a0[_0x2d7f15(0x135)],_0x2e764a=_0x39550d[_0x4771a0[_0x2d7f15(0xfc)]]||_0x4771a0['setOperationSeries'],_0xf50b67=_0x39c0a4[_0x4771a0[_0x2d7f15(0x1b6)]]||_0x4771a0['setOperationCustomerId'],_0x483a14=_0x4771a0[_0x2d7f15(0x19c)]==0x1?_0x2d7f15(0x14c):_0x2d7f15(0x14b),_0xfbca2c=_0x4771a0['setOperationPaymentStatus']==0x1?'Pagado':_0x2d7f15(0x150),_0x4b4221=_0x4771a0['setOperationType']==0x1?_0x2d7f15(0x13a):_0x4771a0['setOperationType']==0x2?_0x2d7f15(0x152):_0x4771a0[_0x2d7f15(0x135)]==0x3?'boleta':_0x4771a0[_0x2d7f15(0x135)]==0x4?'factura':_0x2d7f15(0x152);return{'setOperationId':_0x4771a0[_0x2d7f15(0x145)],'setOperationType':_0x42c9f6,'setOperationTypeSpan':_0x4b4221,'setOperationSeries':_0x2e764a+'-'+_0x4771a0['setOperationNumber'],'setOperationCustomerName':_0xf50b67,'setOperationDateTime':_0x4771a0[_0x2d7f15(0x168)],'setOperationPaymentStatusColor':_0x483a14,'setOperationPaymentStatusName':_0xfbca2c,'setOperationCurrency':_0x4771a0[_0x2d7f15(0x16a)],'setOperationTotal':_0x2c2410};});const _0x2f4fbb=_0x4896fa[_0x1e7814(0x171)](_0x44ee1e=>_0x44ee1e['setOperationItems']['map'](_0x574efc=>({'item':_0x574efc,'moneda':_0x44ee1e[_0x1e7814(0x16a)]})))['reduce']((_0x8a2576,{item:_0x8c9312,moneda:_0x7032f8})=>{const _0x4189c4=_0x1e7814,_0x9d0b9f=products[_0x4189c4(0x159)](_0x4b17b2=>_0x4b17b2['id']==_0x8c9312[_0x4189c4(0x175)]),_0x3630a6=_0x9d0b9f?_0x9d0b9f[_0x4189c4(0x10b)]:'Sin\x20descripción',_0x31a9a2=_0x3630a6+'|'+_0x7032f8,_0x66ce3=Number(_0x8c9312[_0x4189c4(0x13c)]),_0xd716b9=Number(_0x8c9312['setOperationDetailUnitCost'])*Number(_0x8c9312[_0x4189c4(0x105)]);return!_0x8a2576[_0x31a9a2]&&(_0x8a2576[_0x31a9a2]={'productName':_0x3630a6,'currency':_0x7032f8,'sales':0x0,'cost':0x0}),_0x8a2576[_0x31a9a2][_0x4189c4(0x1a6)]+=_0x66ce3,_0x8a2576[_0x31a9a2][_0x4189c4(0x16e)]+=_0xd716b9,_0x8a2576;},{}),_0x5f2e59=Object[_0x1e7814(0x187)](_0x2f4fbb)[_0x1e7814(0x182)](_0x33f083=>({'productName':_0x33f083[_0x1e7814(0x184)],'currency':_0x33f083[_0x1e7814(0x136)],'sales':Math[_0x1e7814(0x125)](_0x33f083[_0x1e7814(0x1a6)]*0x64)/0x64,'cost':Math[_0x1e7814(0x125)](_0x33f083[_0x1e7814(0x16e)]*0x64)/0x64,'profit':Math[_0x1e7814(0x125)]((_0x33f083['sales']-_0x33f083['cost'])*0x64)/0x64})),_0x3f3e04=_0x4896fa['reduce']((_0x40a2dd,_0xc81d74)=>{const _0x2be357=_0x1e7814,_0x4f354b=_0x39c0a4[_0xc81d74[_0x2be357(0x1b6)]]||_0xc81d74[_0x2be357(0x1b6)],_0x525594=_0xc81d74['setOperationCurrency'],_0x3efff0=_0x4f354b+'|'+_0x525594,_0x51bc6a=_0xc81d74[_0x2be357(0x199)][_0x2be357(0xec)]((_0x3b3581,_0x3d7e02)=>_0x3b3581+Number(_0x3d7e02[_0x2be357(0x13c)]),0x0),_0x45812f=_0xc81d74[_0x2be357(0x199)]['reduce']((_0x19d5b4,_0x464829)=>_0x19d5b4+Number(_0x464829['setOperationDetailUnitCost'])*Number(_0x464829[_0x2be357(0x105)]),0x0);return!_0x40a2dd[_0x3efff0]&&(_0x40a2dd[_0x3efff0]={'customerName':_0x4f354b,'currency':_0x525594,'sales':0x0,'cost':0x0}),_0x40a2dd[_0x3efff0]['sales']+=_0x51bc6a,_0x40a2dd[_0x3efff0]['cost']+=_0x45812f,_0x40a2dd;},{}),_0x934681=Object[_0x1e7814(0x187)](_0x3f3e04)[_0x1e7814(0x182)](_0x381b88=>({'customerName':_0x381b88[_0x1e7814(0x113)],'currency':_0x381b88[_0x1e7814(0x136)],'sales':Math[_0x1e7814(0x125)](_0x381b88[_0x1e7814(0x1a6)]*0x64)/0x64,'cost':Math[_0x1e7814(0x125)](_0x381b88['cost']*0x64)/0x64,'profit':Math[_0x1e7814(0x125)]((_0x381b88[_0x1e7814(0x1a6)]-_0x381b88['cost'])*0x64)/0x64}));renderTable(arrayIncomes,currentPage,'incomes'),renderTable(_0x5f2e59,currentPageProducts,_0x1e7814(0x1a8)),renderTable(_0x934681,currentPageCustomers,_0x1e7814(0x117));const _0x696ce7=arrayIncomes['map'](_0x4abbb7=>({'fechaISO':_0x4abbb7[_0x1e7814(0x168)][_0x1e7814(0x166)]('\x20')[0x0],'setTipoComprobante':_0x4abbb7[_0x1e7814(0x135)],'setOperationCurrency':_0x4abbb7[_0x1e7814(0x16a)],'Total':Math[_0x1e7814(0x125)](_0x4abbb7['setOperationTotal']*0x64)/0x64})),_0x550519=_0x696ce7[_0x1e7814(0xec)]((_0x3326ce,_0x47c8af)=>{const _0x40f102=_0x1e7814,_0x17a582=_0x47c8af[_0x40f102(0x11d)]+'|'+_0x47c8af[_0x40f102(0x123)]+'|'+_0x47c8af['setOperationCurrency'];if(!_0x3326ce[_0x17a582])_0x3326ce[_0x17a582]={..._0x47c8af,'Total':0x0};return _0x3326ce[_0x17a582][_0x40f102(0x155)]+=_0x47c8af[_0x40f102(0x155)],_0x3326ce;},{}),_0xba003b=Object['values'](_0x550519)[_0x1e7814(0x182)](_0x415638=>({'fechaISO':_0x415638['fechaISO'],'setTipoComprobante':_0x415638[_0x1e7814(0x123)]+'\x20('+_0x415638[_0x1e7814(0x16a)]+')','Total':Math[_0x1e7814(0x125)](_0x415638['Total']*0x64)/0x64})),_0xe7ac5a=[...new Set(_0xba003b[_0x1e7814(0x182)](_0x48d54f=>_0x48d54f[_0x1e7814(0x123)]))],_0x79d989=Array['from'](new Set(_0xba003b['map'](_0x44f30e=>_0x44f30e[_0x1e7814(0x11d)])))[_0x1e7814(0x1af)]((_0x190999,_0x57e7cf)=>new Date(_0x190999)-new Date(_0x57e7cf));_0xba003b[_0x1e7814(0x139)]>0x0?generateFilterTransformChart({'containerId':_0x1e7814(0xf7),'rawData':_0xba003b,'groupField':_0x1e7814(0x123),'groupValues':_0xe7ac5a,'seriesType':_0x1e7814(0x17c),'chartType':_0x1e7814(0x17c),'colors':[_0x1e7814(0x14b),_0x1e7814(0x10d)],'encode':{'x':'fechaISO','y':'Total','label':[_0x1e7814(0x123),_0x1e7814(0x155)],'itemName':_0x1e7814(0x11d),'tooltip':[_0x1e7814(0x155)]},'xAxisConfig':{'type':_0x1e7814(0x195),'data':_0x79d989,'axisLabel':{'formatter':_0x52699a=>{const [_0xca71fd,_0x251d1f,_0x383edd]=_0x52699a['split']('-');return _0x383edd+'/'+_0x251d1f+'/'+_0xca71fd;}}},'title':_0x1e7814(0x126),'width':'100%','height':'500px'}):divChartIncome[_0x1e7814(0x111)]='';_0x5f2e59['length']>0x0?generateHorizontalBarChart({'containerId':_0x1e7814(0xfd),'categories':_0x5f2e59[_0x1e7814(0x182)](_0x1492fd=>{const _0x7d2069=_0x1e7814,_0x39534d='('+_0x1492fd[_0x7d2069(0x136)]+')\x20'+_0x1492fd['productName'];return _0x39534d[_0x7d2069(0x139)]>0xf?_0x39534d['substring'](0x0,0xf)+_0x7d2069(0x1b7):_0x39534d;}),'series':[{'name':_0x1e7814(0xe8),'data':_0x5f2e59['map'](_0x47741c=>_0x47741c[_0x1e7814(0x1a6)])},{'name':_0x1e7814(0x1aa),'data':_0x5f2e59[_0x1e7814(0x182)](_0x2b9d87=>_0x2b9d87['cost'])},{'name':_0x1e7814(0x156),'data':_0x5f2e59[_0x1e7814(0x182)](_0x203905=>_0x203905['profit'])}],'title':_0x1e7814(0x196),'titlePosition':_0x1e7814(0x12f),'showTitle':![],'colors':[_0x1e7814(0x14b),'#080060',_0x1e7814(0x18d)],'width':_0x1e7814(0x1a0),'height':_0x1e7814(0x114)}):divChartItem[_0x1e7814(0x111)]='';if(_0x934681[_0x1e7814(0x139)]>0x0){const _0x2bf9ae=_0x934681['map'](_0x4a398c=>({'label':_0x4a398c['customerName']+'\x20('+_0x4a398c[_0x1e7814(0x136)]+')','sales':_0x4a398c[_0x1e7814(0x1a6)]}));generatePieChart({'containerId':'divChartCustomer','data':_0x2bf9ae,'nameField':_0x1e7814(0x169),'valueField':_0x1e7814(0x1a6),'title':'Ventas\x20por\x20Cliente','titlePosition':_0x1e7814(0x186),'showTitle':![],'width':'500px','height':_0x1e7814(0x176)});}else divChartCustomer[_0x1e7814(0x111)]='';}catch(_0x235a8f){ntfShow(_0x1e7814(0x154)),console['error'](_0x235a8f);}finally{hideLoadingModal();}}function renderTable(_0x49a030,_0x36a416=0x1,_0x150d00=_0x3bc169(0x1bb)){const _0x507ca2=_0x3bc169;currentPage=_0x36a416;const _0x18ba2e=_0x150d00==='incomes'?_0x507ca2(0x17f):_0x150d00===_0x507ca2(0x1a8)?_0x507ca2(0xf3):_0x507ca2(0x110),_0x9d991a=_0x150d00==='incomes'?per_page:_0x150d00===_0x507ca2(0x1a8)?per_page_products:per_page_customers,_0x4beb47=document[_0x507ca2(0x12a)](_0x18ba2e+_0x507ca2(0x141));_0x4beb47['innerHTML']='';const _0x539a44=(_0x36a416-0x1)*_0x9d991a,_0x37778c=_0x49a030[_0x507ca2(0x151)](_0x539a44,_0x539a44+_0x9d991a);if(_0x150d00===_0x507ca2(0x1bb)){_0x37778c['forEach'](_0x8f8f62=>{const _0x300909=_0x507ca2,_0x5915af=document[_0x300909(0x15c)]('tr');_0x5915af[_0x300909(0x111)]=_0x300909(0x185)+_0x8f8f62[_0x300909(0x198)]+'\x22>\x0a'+_0x8f8f62['setOperationType']+_0x300909(0x15d)+(_0x8f8f62[_0x300909(0xfc)]||'')+_0x300909(0xf5)+(_0x8f8f62[_0x300909(0xe6)]||'')+_0x300909(0xff)+_0x8f8f62[_0x300909(0x168)]+'</td>\x0a<td\x20style=\x22text-align:\x20center;\x22>\x0a<span\x20class=\x22span-table-custom\x22\x20style=\x22border:1.5px\x20solid\x20'+_0x8f8f62[_0x300909(0x1b8)]+_0x300909(0x189)+_0x8f8f62[_0x300909(0x1b8)]+_0x300909(0xeb)+_0x8f8f62[_0x300909(0x120)]+_0x300909(0x116)+_0x8f8f62['setOperationCurrency']+_0x300909(0x158)+_0x8f8f62[_0x300909(0x115)][_0x300909(0x183)](0x2)+_0x300909(0x12b)+_0x8f8f62[_0x300909(0x145)]+',\x20\x27detalle\x27)\x22>\x0a<i\x20class=\x22fas\x20fa-eye\x22></i>\x20Visualizar\x0a</a>\x0a</li>\x0a<li>\x0a<a\x20class=\x22dropdown-item\x22\x20href=\x22#\x22>\x0a<i\x20class=\x22fas\x20fa-edit\x22></i>\x20Editar\x0a</a>\x0a</li>\x0a<li>\x0a<a\x20class=\x22dropdown-item\x22\x20href=\x22javascript:void(0)\x22\x20onclick=\x22verDetalle('+_0x8f8f62['setOperationId']+_0x300909(0xe2),_0x4beb47[_0x300909(0x197)](_0x5915af);});const _0x343b49=_0x49a030['reduce']((_0x32a09f,_0x1c6239)=>{const _0x2fed2a=_0x507ca2,_0x3ee420=_0x1c6239[_0x2fed2a(0x16a)];return _0x32a09f[_0x3ee420]=(_0x32a09f[_0x3ee420]||0x0)+Number(_0x1c6239['setOperationTotal']),_0x32a09f;},{});Object[_0x507ca2(0xf8)](_0x343b49)[_0x507ca2(0x11f)](([_0xdebac9,_0x12049c])=>{const _0x45b688=_0x507ca2,_0x54aee4=document[_0x45b688(0x15c)]('tr');_0x54aee4[_0x45b688(0x111)]='\x0a<td\x20colspan=\x226\x22\x20style=\x22text-align:\x20right;\x20font-weight:\x20bold;\x22>\x0aTotal\x20('+_0xdebac9+_0x45b688(0x108)+(Math[_0x45b688(0x125)](_0x12049c*0x64)/0x64)[_0x45b688(0x183)](0x2)+_0x45b688(0x162),_0x4beb47[_0x45b688(0x197)](_0x54aee4);}),renderPagination(_0x49a030,_0x36a416,_0x150d00);}}function renderPagination(_0x371d47,_0x311661,_0x2ab889=_0x3bc169(0x1bb)){const _0x3dba2d=_0x3bc169,_0x37fd9d=_0x2ab889===_0x3dba2d(0x1bb)?document['querySelector'](_0x3dba2d(0x172)):_0x2ab889===_0x3dba2d(0x1a8)?document[_0x3dba2d(0x12a)]('#pagination-products'):document['querySelector'](_0x3dba2d(0x11c)),_0x480721=_0x2ab889===_0x3dba2d(0x1bb)?per_page:_0x2ab889==='products'?per_page_products:per_page_customers;_0x37fd9d['innerHTML']='';const _0x122f84=Math[_0x3dba2d(0x122)](_0x371d47[_0x3dba2d(0x139)]/_0x480721),_0x58258c=document[_0x3dba2d(0x15c)]('a');_0x58258c[_0x3dba2d(0x14d)]='#',_0x58258c[_0x3dba2d(0x17d)]=_0x3dba2d(0x112),_0x58258c[_0x3dba2d(0x111)]=_0x3dba2d(0x1a4),_0x58258c[_0x3dba2d(0x1a3)]=_0x43643e=>{_0x43643e['preventDefault']();if(_0x311661>0x1)renderTable(_0x371d47,_0x311661-0x1,_0x2ab889);},_0x37fd9d[_0x3dba2d(0x197)](_0x58258c);for(let _0x4087a4=0x1;_0x4087a4<=_0x122f84;_0x4087a4++){const _0x4f333e=document[_0x3dba2d(0x15c)]('a');_0x4f333e[_0x3dba2d(0x14d)]='#',_0x4f333e[_0x3dba2d(0x17d)]=_0x3dba2d(0x119)+(_0x4087a4===_0x311661?_0x3dba2d(0x14e):_0x3dba2d(0x11e)),_0x4f333e[_0x3dba2d(0x1b5)]=_0x4087a4,_0x4f333e[_0x3dba2d(0x1a3)]=_0x5853d2=>{const _0x3fb9f3=_0x3dba2d;_0x5853d2[_0x3fb9f3(0x1b3)](),renderTable(_0x371d47,_0x4087a4,_0x2ab889);},_0x37fd9d['appendChild'](_0x4f333e);}const _0x370492=document[_0x3dba2d(0x15c)]('a');_0x370492[_0x3dba2d(0x14d)]='#',_0x370492[_0x3dba2d(0x17d)]=_0x3dba2d(0x100),_0x370492['innerHTML']='Siguiente\x20&raquo;',_0x370492[_0x3dba2d(0x1a3)]=_0x24417b=>{const _0x3190aa=_0x3dba2d;_0x24417b[_0x3190aa(0x1b3)]();if(_0x311661<_0x122f84)renderTable(_0x371d47,_0x311661+0x1,_0x2ab889);},_0x37fd9d[_0x3dba2d(0x197)](_0x370492);}document[_0x3bc169(0x1a7)](_0x3bc169(0x13d))[_0x3bc169(0x144)](_0x3bc169(0x193),async()=>{const _0x442219=_0x3bc169,_0x249666=document[_0x442219(0x1a7)](_0x442219(0x160))[_0x442219(0x157)],_0x3417ad=document[_0x442219(0x1a7)]('filter-end')[_0x442219(0x157)];if(!_0x249666||!_0x3417ad)return alert(_0x442219(0x1ba));const _0x5927e1=document[_0x442219(0x1a7)](_0x442219(0x18a)),_0x539919=bootstrap['Modal']['getInstance'](_0x5927e1);_0x539919[_0x442219(0x1b9)](),showLoadingModal();try{const _0x2e470b={'apiPOS_getIncome':0x1,'setToken':myCompany[_0x442219(0x18e)],'dateFrom':_0x249666+'\x2000:00:00','dateTo':_0x3417ad+_0x442219(0x106),'clientIds':[],'operationTypes':[]},_0xc7feb3=await fetch(myCompany['setApiEndPoint'],{'method':_0x442219(0x1b1),'headers':{'Content-Type':_0x442219(0x15e)},'body':JSON[_0x442219(0x16b)](_0x2e470b)}),{success:_0x36dd6e,message:_0x416811}=await _0xc7feb3[_0x442219(0x12d)]();if(!_0x36dd6e)throw new Error(_0x416811);_0x416811[_0x442219(0x1bb)],await consultIncomeReport();}catch(_0x30e4ee){ntfShow('Error\x20al\x20aplicar\x20filtro'),console['error'](_0x30e4ee);}finally{hideLoadingModal();}});const reportWorker=new Worker(_0x3bc169(0xe5));function _0x2c21(_0x500b8d,_0x2f0316){const _0x1680e8=_0x218d();return _0x2c21=function(_0x42fb5c,_0xf626d){_0x42fb5c=_0x42fb5c-0xe2;let _0x104288=_0x1680e8[_0x42fb5c];return _0x104288;},_0x2c21(_0x500b8d,_0x2f0316);}reportWorker['onmessage']=({data:_0x47869c})=>{const _0x3e36ec=_0x3bc169,{type:_0x50b947,payload:_0x53dc1e,reportType:_0x48587e}=_0x47869c;if(_0x50b947===_0x3e36ec(0x12c)){const _0xbc304b=new Blob([_0x47869c[_0x3e36ec(0x181)]],{'type':'application/octet-stream'}),_0x1d761e=URL[_0x3e36ec(0x14f)](_0xbc304b),_0xd3afc5=document['createElement']('a'),_0x451513=new Date()[_0x3e36ec(0x1a5)]()[_0x3e36ec(0x151)](0x0,0xa);_0xd3afc5['href']=_0x1d761e,_0xd3afc5['download']=_0x48587e+'_'+_0x451513+'.xlsx',_0xd3afc5[_0x3e36ec(0x193)](),URL[_0x3e36ec(0xfa)](_0x1d761e);}_0x50b947===_0x3e36ec(0x16d)&&(console[_0x3e36ec(0x16d)](_0x3e36ec(0x170),_0x53dc1e),ntfShow(_0x3e36ec(0x178)));},document[_0x3bc169(0x1a7)]('btnExport')[_0x3bc169(0x144)](_0x3bc169(0x193),onClickExport);function onClickExport(){const _0x5a5fee=_0x3bc169;if(!Array['isArray'](arrayIncomes)||!arrayIncomes['length'])return ntfShow('No\x20hay\x20datos\x20de\x20ventas\x20para\x20exportar.');const _0x7fd0e7=arrayIncomes[_0x5a5fee(0x182)](_0x13f8d7=>{const _0x3aa09f=_0x5a5fee,[_0x53f9d8]=_0x13f8d7['setOperationDateTime'][_0x3aa09f(0x166)]('\x20'),[_0x4dea1a,_0x5f54f5,_0x25e82b]=_0x53f9d8[_0x3aa09f(0x166)]('-');return{'Periodo':''+_0x4dea1a+_0x5f54f5,'CorrelativoCUO':'','FechaEmision':_0x25e82b+'/'+_0x5f54f5+'/'+_0x4dea1a,'FechaVencimiento':'','TipoComprobante':_0x13f8d7[_0x3aa09f(0x198)],'SerieNumero':_0x13f8d7[_0x3aa09f(0xfc)],'TipoDocCliente':'','NumDocCliente':'','RazonSocial':_0x13f8d7[_0x3aa09f(0xe6)],'BaseImponible':'','IGV':'','TotalVenta':_0x13f8d7['setOperationTotal'],'Moneda':_0x13f8d7['setOperationCurrency'],'TipoCambio':'','FechaEmisionModificado':'','TipoCompModificado':'','SerieNumModificado':'','CodigoAduana':'','NumDUAModificado':'','ErrorTipo1':'','IndicadorCancelados':'','Estado':'','CamposLibres_27_52':''};});reportWorker['postMessage']({'action':_0x5a5fee(0xe7),'reportType':_0x5a5fee(0x128),'report':_0x7fd0e7});}window[_0x3bc169(0x132)]=function(){const _0x587e03=_0x3bc169,_0x26dd1a=0x5;loadLoginContent(_0x587e03(0x179)),setUserNameGet(),setEventBtnAccess();const _0x25a80a=document[_0x587e03(0x12a)](_0x587e03(0x1be));_0x25a80a&&_0x25a80a[_0x587e03(0x144)]('click',function(){logoutReload(0x0,_0x26dd1a);}),document[_0x587e03(0x1a7)]('setBranchId')[_0x587e03(0x144)](_0x587e03(0x146),async function(){const _0x471904=_0x587e03,_0x4070ac=parseInt(this[_0x471904(0x157)]);myCompany['setBranchDefault']=_0x4070ac;const _0x8468a5=await createCartStore('');await saveCompanyToIndexedDB(company,_0x8468a5),cargarAlmacenes(_0x4070ac),setTimeout(()=>{const _0x1ab064=_0x471904;document[_0x1ab064(0x1a7)](_0x1ab064(0x1b0))['dispatchEvent'](new Event('change'));},0x64),cargarPisos(_0x4070ac),setTimeout(()=>{const _0x594e3d=_0x471904;document[_0x594e3d(0x1a7)](_0x594e3d(0x1ab))['dispatchEvent'](new Event(_0x594e3d(0x146)));},0x64),ntf_initNotifications(),fil_BranchesId=[],fil_BranchesId[_0x471904(0x1b2)](_0x4070ac),consultIncomeReport();}),loadCartAndSetTabCount(_0x26dd1a);};
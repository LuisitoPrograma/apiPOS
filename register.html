<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Fasyb ‚Äî Registro</title>
<!-- FAVICONS DINAMICOS-->
<link rel="icon" type="image/png" sizes="36x36" href="./img/icon/android-icon-36x36.png">
<link rel="icon" type="image/png" sizes="48x48" href="./img/icon/android-icon-48x48.png">
<link rel="icon" type="image/png" sizes="72x72" href="./img/icon/android-icon-72x72.png">
<link rel="icon" type="image/png" sizes="96x96" href="./img/icon/android-icon-96x96.png">
<link rel="icon" type="image/png" sizes="144x144" href="./img/icon/android-icon-144x144.png">
<link rel="icon" type="image/png" sizes="192x192" href="./img/icon/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="512x512" href="./img/icon/android-icon-512x512.png">
<link rel="apple-touch-icon" sizes="57x57" href="./img/icon/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="./img/icon/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="./img/icon/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="./img/icon/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="./img/icon/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="./img/icon/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="./img/icon/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="./img/icon/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="./img/icon/apple-icon-180x180.png">
<link rel="apple-touch-icon" sizes="192x192" href="./img/icon/apple-icon-192x192.png">
<link rel="icon" type="image/png" sizes="16x16" href="./img/icon/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="./img/icon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="./img/icon/favicon-96x96.png">
<meta name="msapplication-TileImage" content="./img/icon/ms-icon-144x144.png">
<link rel="manifest" href="./manifest.json">
<meta name="msapplication-TileColor" content="#080060">
<meta name="theme-color" content="#080060">
<meta name="msapplication-config" content="./browserconfig.xml">

<!-- FONTS AND LIBRARIES -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<!-- STYLES -->
<style>
:root{
--primary:#FF5900; 
--primary-600:#ff6f22;
--indigo:#080060;   
--bg:#ffffff;     
--text:#1f2937;
--muted:#6b7280;
--card:#ffffff;
--radius:16px;
--shadow:0 10px 25px rgba(213, 42, 42, 0.08);
--plomo-oscuro: #5a6268;
}
*{box-sizing:border-box}
html,body{margin:0;padding:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;color:var(--text);background:#fff}
a{color:inherit;text-decoration:none}
img{max-width:100%;display:block}
.container{width:min(1180px,92%);margin:0 auto}
.btn{appearance:none;border:0;cursor:pointer;padding:.9rem 1.2rem;border-radius:999px;font-weight:600;transition:.2s background,.2s box-shadow,.2s transform;display:inline-flex;align-items:center;gap:.5rem}
.btn-primary{background:var(--primary);color:#fff}
.btn-primary:hover{background:var(--primary-600);box-shadow:0 6px 18px rgba(255,89,0,.35)}
.btn-outline{background:#fff;border:2px solid var(--indigo);color:var(--indigo)}
.btn-outline:hover{background:var(--indigo);color:#fff}

/* Header */
header{position:sticky;top:0;background:#fff;z-index:40;border-bottom:1px solid #ffffff}
.topbar{display:flex;justify-content:space-between;align-items:center;height:50px}
.brand{display:flex;align-items:center;gap:.75rem}
.brand img{height:44px;width:auto}
.brand .dot{width:6px;height:6px;background:var(--primary);border-radius:999px;margin-left:.25rem}
nav{display:flex;align-items:center;gap:.6rem}
.pill{font-size:.86rem;padding:.55rem 1rem;border-radius:999px;border:1px solid #eee;background:#fff}

/* Hero */
.hero{background:linear-gradient(180deg,#fff 0,#fff 60%, var(--bg) 60%, var(--bg) 100%)}
.hero-grid{display:grid;grid-template-columns:1.1fr .9fr;gap:26px;padding:36px 0 24px}
.card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow)}
.welcome{padding:24px 24px 8px}
.welcome h1{font-size:1.35rem;margin:0 0 .5rem;color:var(--indigo)}
.welcome p{color:var(--muted);line-height:1.6;margin:0}
.cta{margin-top:18px}
.panel{padding:18px}
.panel h4{margin:0 0 2px;font-size:.95rem;color:#111}
.guides{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
.guide{border:1px dashed #FF5900;border-radius:12px;padding:14px ;background-color: #ffffff;}
.guide b{display:block;margin-bottom:.25rem}
.guide small{display:block;color:var(--muted)}
.icono-pequeno {width: 40px; height: auto; display: block; margin: 0 auto;}
.btn-guia { background-color: #f8f8f8; color: #bb1919; padding: 10px 16px; border-radius: 8px; text-decoration: none; font-weight: bold; display: inline-block; transition: background 0.3s ease;}
.btn-guia:hover {background-color: #f8f8f8;}
.titulo-principal {font-size: 38px !important; font-weight: bold; text-align: left;}

/* Stepper + form */
.stepper {display: flex;justify-content: center;gap: 40px;}
.bullet {display: flex;flex-direction: column; align-items: center; cursor: pointer;}
.num { background: #FF5900;color: #fff;width: 35px;height: 35px;display: flex;justify-content: center;align-items: center;border-radius: 50%;font-weight: bold;margin-bottom: 5px;}
.bullet span {font-weight: 300; color: #080060; font-size: 14px;}
.stepper{display:flex;gap:32px;align-items:center;padding:12px 16px;border-bottom:1px solid #eee}
.bullet{display:flex;align-items:center;gap:.5rem}
.bullet .num{width:30px;height:30px;border-radius:999px;background:#f1f5f9;display:grid;place-items:center;color:#111;font-weight:700}
.bullet.active .num{background:var(--primary);color:#fff}
.bullet span{font-size:.9rem;color:var(--muted)}
.form{padding:18px}
.grid-2{display:grid;grid-template-columns:1fr 1fr;gap:14px}
.grid-3{display:grid;grid-template-columns:repeat(3,1fr);gap:14px}

/* Logos + videos */
.trust{margin:28px 0 8px}
.trust p{margin:0;color:#111}
.logo-row{display:grid;grid-template-columns:repeat(8,1fr);gap:18px;align-items:center;opacity:.9}
.logo{height:40px;background:#fff;border-radius:8px;box-shadow:0 6px 14px rgba(0,0,0,.05);display:grid;place-items:center}
.vid-grid{display:grid;grid-template-columns:1fr 1fr 1fr;gap:14px;margin-top:14px}
.vid{position:relative;overflow:hidden;border-radius:14px;box-shadow:var(--shadow)}
.vid iframe{aspect-ratio:16/9;width:100%;height:auto;border:0}

/* Refer & benefits */
.belt{background:var(--bg);padding:36px 0;margin-top:30px}
.belt .title{font-size:1.25rem;font-weight:800}
.highlight{color:var(--primary)}
.benefits{display:grid;grid-template-columns:1.1fr .9fr;gap:22px}
.benefit-card {background: #fff;border-radius: 16px;box-shadow: var(--shadow);padding: 16px;font-size: 0.55rem; color: #000000; }
div.benefit-card strong {font-size: 0.91rem !important; line-height: 1.6 !important;color: #080060 !important; display: block; margin-bottom: 6px;}
.benefit-card strong {font-size: 0.9rem;}
.benefit-card p,.benefit-card span,.benefit-card label {color: #201f1e;  font-size: 0.8rem; }

/* CSS */
.benefit-card {background: #fff;border-radius: 12px;padding: 16px; text-align: left;}

/* Contenedor del checkbox + texto */
.checkbox-card {display: flex; gap: 12px;align-items: flex-start; justify-content: flex-start;}
.checkbox-card input[type="checkbox"] {width: 18px;height: 18px;margin: 3px 0 0 0;  flex: 0 0 auto;cursor: pointer;}
.checkbox-label {flex: 1;margin: 0;color: #FF5900;font-weight: 600;line-height: 1.35; font-size: 0.95rem;}
.benefit-card, .checkbox-card, .checkbox-label { text-align: left !important; }

/* Texto dentro del input */
.list{display:grid;gap:8px}
.list li{display:flex;gap:.6rem;align-items:flex-start}
.badge{width:28px;height:28px;border-radius:999px;background:var(--primary);color:#fff;display:grid;place-items:center;font-weight:800}

/* Footer */
footer{background:var(--indigo);color:#e6e6ff;margin-top:40px}
.foot{display:grid;grid-template-columns:repeat(4,1fr);gap:22px;padding:28px 0}
footer h4{margin:0 0 .6rem;font-weight:800}
footer a{color:#e6e6ff;opacity:.9}
.copy{border-top:1px solid rgba(255,255,255,.12);padding:12px 0;color:#c7c7ff;font-size:.85rem}

/* ========= ESTILOS BASE ========= */
body{font-family:Arial,sans-serif;margin:0}
label{font-size:.85rem;font-weight:600;color:#111;margin-bottom:6px;display:block}
input,select,textarea{width:100%;padding:.4rem .6rem;border:1px solid #e5e7eb;border-radius:12px;background:#fff;font:inherit;color:var(--plomo-oscuro);font-size:13px}
input:focus,select:focus,textarea:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 4px rgba(255,89,0,.12)}

/* ========= CAMPOS ESPECIALES ========= */
input[type="date"].fecha{padding:6px 8px;border:1px solid #ccc;border-radius:8px;font-size:13px;color:var(--plomo-oscuro)}
input[type="checkbox"]:checked,input[type="radio"]:checked{accent-color:var(--primary)}

/* ========= CONTENEDOR CONTRASE√ëA ========= */
.password-container{position:relative;display:flex;align-items:center}
.password-container input{padding-right:40px}
.toggle-password{position:absolute;right:12px;cursor:pointer;color:var(--plomo-oscuro);font-size:16px}

/* ========= CHECKBOX RECORDAR DATOS ========= */
.remember-container{display:flex;align-items:center;gap:8px;margin-top:10px}
.remember-container input[type="checkbox"]{width:16px;height:16px;accent-color:var(--primary)}
.remember-container label{margin:0;font-size:13px;color:var(--plomo-oscuro);font-weight:normal}

/* ========= BOTONES ========= */
.btn-seleccionar{background:#f8f8f8;color:#474747;padding:8px 16px;border-radius:8px;border:1px solid #ccc;cursor:pointer;font-weight:normal;display:block;width:100%;text-align:center;transition:background .3s ease;font-size:13px}
.btn-seleccionar:hover{background:#e6e6e6}
.btn-seleccionar-angosto{background:#f8f8f8;color:#474747;padding:6px 12px;border-radius:6px;border:1px solid #ccc;cursor:pointer;font-weight:normal;display:inline-block;width:auto;min-width:100px;text-align:center;transition:background .3s ease;font-size:12px;white-space:nowrap}
.btn-seleccionar-angosto:hover{background:#e6e6e6}

/* ========= SELECT UBICACI√ìN ========= */
.ubicacion{display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px}
.ubicacion select{padding:10px 15px;border:2px solid #e9ecef;border-radius:12px;background:#f8f9fa;color:var(--plomo-oscuro);font-size:13px;font-family:inherit;transition:all .3s ease;appearance:none;background-image:url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%236c757d' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");background-repeat:no-repeat;background-position:right 15px center;background-size:16px;padding-right:40px}
.ubicacion select:focus{border-color:#4361ee;box-shadow:0 0 0 3px rgba(67,97,238,.15);background-color:#fff}

/* ========= TITULOS Y ACCIONES ========= */
.titulo-negocio{color:#111;font-weight:bold;font-size:15px;margin-bottom:30px}
.actions{display:flex;justify-content:flex-end;gap:10px;margin-top:8px}

/* ========= TEXTO DESARROLLADO POR ========= */
.developed-by{text-align:left;padding:15px 0;background:#080060;color:#fff;font-size:14px;border-top:1px solid #080060}
.developed-by a{color:#fff;text-decoration:none;font-weight:600}

/* ========= CAMPOS REQUERIDOS ========= */
.required::after{content:" *";color:#FA980F}

/* ========= NOTIFICACIONES ========= */
.notification{position:fixed;top:200px;right:80px;background:#080060;color:#fff;padding:15px 20px;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,.15);z-index:1000;display:none;font-size:14px}
.notification-success{position:fixed;top:20px;right:20px;background:#4CAF50;color:#fff;padding:15px 20px;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,.15);z-index:1000;display:none;font-size:14px}
#emailNotification{background:#080060; top: 200px; right: 20px;}

/* ========= RESPONSIVE ========= */
@media screen and (max-width:767px){.ocultar-movil{display:none!important}}

/* Responsive */
@media (max-width:1000px){.hero-grid,.benefits{grid-template-columns:1fr}.logo-row{grid-template-columns:repeat(4,1fr)}}
@media (max-width:720px){.grid-2,.grid-3{grid-template-columns:1fr}.vid-grid{grid-template-columns:1fr}.foot{grid-template-columns:1fr 1fr}.stepper{gap:16px}}
.trust p {font-size: 14px;}
.trust p strong.highlight {font-size: 14px;}
.vid iframe {width: 100%;height: 100px;border: none;}
.vid {position: relative;width: 100%;padding-bottom: 7.25%;height: 0;}
.vid iframe {position: absolute;top: 0;left: 0;width: 100%;height: 100%;}
.benefit-card-lg h3 {font-size: 20px;}
.benefit-card-lg ul li div b {font-size: 15px;}
.benefit-card-lg ul li div small {font-size: 15px;}
.benefit-card-lg .badge {font-size: 15px;width: 20px;height: 20px;line-height: 20px; }
.benefit-card-lg .btn {font-size: 17px; padding: 8px 14px;}
.about-text {width: 100%;margin: 0 auto;text-align: left;}
.copy {text-align: center;font-size: 14px;padding: 10px 0;}
.about-text h3 {font-size: 25px; margin-bottom: 100px;text-align: center; }
.about-text p {opacity: 0.9;line-height: 1.65;text-align: justify;}
.social-footer {text-align: left; padding: 10px 3px;background: var(--indigo);border-top: 1px solid rgba(255,255,255,0.15);}
.social-footer a {display: inline-flex;align-items: center;justify-content: center;width: 45px;height: 45px;margin-right: 1px; border-radius: 80%;background: #fff;font-size: 14px;transition: transform 0.3s;}

/* Colores de los iconos */
.social-footer a.facebook { color: #1877f2; } 
.social-footer a.home     { color: #000; }    
.social-footer a.youtube  { color: #ff0000; } 
.social-footer a.tiktok   { color: #000; }    

/* Hover efecto */
.social-footer a:hover {transform: scale(1.15)}

.whatsapp-float {position: fixed;bottom: 20px;right: 20px;background: #25D366;color: #fff;width: 60px;height: 60px;border-radius: 50%;display: flex;align-items: center;justify-content: center;font-size: 28px;box-shadow: 0 4px 12px rgba(0,0,0,0.2);transition: transform 0.3s ease, box-shadow 0.3s ease;z-index: 1000;}
.whatsapp-float:hover {transform: scale(1.1);box-shadow: 0 6px 18px rgba(0,0,0,0.3);}

/* Estilo para checkbox de zona selva */
.checkbox-option {display: flex;align-items: center;gap: 8px;padding: 12px 18px;border: 2px solid #ddd;border-radius: 12px;cursor: pointer;transition: all 0.3s ease;font-size: 13px;color: #333;background: #fff;box-shadow: 0 4px 8px rgba(0,0,0,0.05);justify-content: flex-start;width: 100%;}
.checkbox-option:hover {border-color: #FF5900;box-shadow: 0 6px 14px rgba(255, 89, 0, 0.2);}
.checkbox-option input[type="checkbox"] {width: 12px;height: 12px;accent-color: #FF5900;cursor: pointer;}
.checkbox-option span {flex: 1;}

/* Estilo para checkbox de t√©rminos */
.checkbox-terminos {display: flex;align-items: center;gap: 8px;padding: 12px 18px;border: 2px solid #ddd;border-radius: 12px;cursor: pointer;transition: all 0.3s ease;font-size: 13px;color: #333;background: #fff;box-shadow: 0 4px 8px rgba(0,0,0,0.05);justify-content: flex-start;width: 100%;margin-top: 10px;}
.checkbox-terminos:hover {border-color: #FF5900;box-shadow: 0 6px 14px rgba(255, 89, 0, 0.2);}
.checkbox-terminos input[type="checkbox"] {width: 12px;height: 12px;accent-color: #FF5900;cursor: pointer;}
.checkbox-terminos span {flex: 1;}

/* Estilos para mostrar nombres de archivos seleccionados */
.file-info {font-size: 0.8rem; color: var(--muted); font-style: italic; margin-top: 5px;}
</style>
</head>
<body>

<!-- NOTIFICATIONS -->
<div class="notification" id="requiredFieldsNotification">Ingrese la Informaci√≥n Solicitada.</div>
<div class="notification-success" id="successNotification">¬°Registro completado exitosamente!</div>
<div class="notification" id="emailNotification">El correo electr√≥nico debe contener '@''.'</div>

<!-- HEADER -->
<header>
<div class="container topbar">
<a class="brand" href="#">
<img src="https://www.fasyb.com/web/image/website/2/logo/fasyb?unique=e619ba3" alt="Fasyb"/>
</a>
<nav>
<a onclick="window.open('https://www.fasyb.com/#Refiere')" style="color:#FF5900; font-weight:bold;">!Recomi√©ndanos! </a>
<button class="btn btn-outline ocultar-movil" style="font-size: 14px;">Contactar a Ventas</button>
<a class="btn btn-primary" href="./" rel="noopener noreferrer">Iniciar Sesi√≥n</a>
</nav>
</div>
</header>

<!-- MAIN CONTENT -->
<main class="hero">
<section class="container hero-grid">

<!-- WELCOME + GUIDES -->
<div class="card">
<div class="welcome">
<br>
<h1 class="titulo-principal"><span class="highlight">¬°Bienvenido </span>a Fasyb!</h1><br>
<p style="font-weight:300; color:#080060;">Registra tu negocio y empieza a disfrutar de beneficios exclusivos y una experiencia adaptada a ti.</p>
</div>
<div class="panel"> 
<h4>
<a class="btn btn-guia" href="#registro" style="color:#080060; margin-right:12px;">Gu√≠as y manuales ‚èØ</a>
<a class="btn btn-guia" style="background:#080060; color:#fff; padding:10px 18px; height:38px; display:inline-flex; align-items:center; border-radius:6px; text-decoration:none;" onclick="window.open('https://wa.me/942328698?text=%C2%A1Hola!%20Estoy%20interesado%20en%20sus%20servicios%20y%20me%20gustar%C3%ADa%20recibir%20m%C3%A1s%20informaci%C3%B3n.%20%C2%BFPodr%C3%ADan%20asesorarme%3F','_blank')" style="color:#FF5900;">Solicita una Demo</a>
</h4>
<br>
<div class="guides">
<div class="guide">
<img src="img/icon-invoice-certificate.svg" alt="Certificado Digital" class="icono-pequeno" />
<div>
<b>Certificado digital</b>
<small> <p style="font-weight:100; color:#000000;">Aprende c√≥mo descargar tu certificado digital.</p></small>
<small><a href="https://youtu.be/WuEXh8vvc-E" target="_blank" rel="noopener noreferrer" style="font-weight:100; color:#FF5900; text-decoration:none;">Ver gu√≠a en YouTube -></a></small>
</div>
</div>
<div class="guide">
<img src="img/icon-user.svg" alt="Certificado Digital" class="icono-pequeno" />
<div>
<b>Usuario Secundario</b>
<small> <p style="font-weight:100; color:#000000;">Gu√≠a para gestionar el Usuario Secundario.</p></small>
<small><a href="https://youtu.be/07o8zmVQ75Q" target="_blank" rel="noopener noreferrer" style="font-weight:100; color:#FF5900; text-decoration:none;">Ver gu√≠a en YouTube -></a></small>
</div>
</div>
<div class="guide">
<img src="img/icon-SUNAT.svg" alt="Certificado Digital" class="icono-pequeno" />
<div><b>Activar apiSUNAT</b>
<small> <p style="font-weight:100; color:#000000;">Ver Instrucciones para habilitar la API SUNAT.</p></small>
<small><a href="https://drive.google.com/file/d/1XdnfTQ8SBjwNTkQFUWcmaR0YYX_QduFY/view?usp=sharing" target="_blank" rel="noopener noreferrer" style="font-weight:100; color:#FF5900; text-decoration:none;">Descargar Manual -></a></small>
</div>
</div>
</div>
</div> <br>
</div>

<!-- FORM -->
<div class="card" id="registro"><br><br>
<div class="stepper">
<div class="bullet active" data-step="1"><div class="num">1</div><span></span></div>
<div class="bullet" data-step="2"><div class="num">2</div><span></span></div>
<div class="bullet" data-step="3"><div class="num">3</div><span></span></div>
<div class="bullet" data-step="4"><div class="num">4</div><span></span></div>
<div class="bullet" data-step="5"><div class="num">5</div><span></span></div>
</div>
<form class="form" id="form-registro" onsubmit="event.preventDefault(); validateAndSubmit();">
    
<!-- STEP 1: BUSINESS -->
<div class="step" data-step="1">
<div class="step-content">
<strong style="font-size:15px; color:#FF5900; display:block; margin-bottom:30px;">‚û°Ô∏è Informaci√≥n del Negocio:</strong>
<div class="grid-2">
<div style="text-align: left;">
<label for="tipo_documento_empresa" class="required">Tipo de Documento:</label>
<select id="tipo_documento_empresa" name="tipo_documento_empresa" required class="custom-select">
<option value="" disabled selected hidden>Seleccione una opci√≥n</option>
<option value="1">DNI</option>
<option value="2">RUC</option>
<option value="3">CE</option>
<option value="4">PP</option>
<option value="5">DTNDSR</option>
</select>
</div>    
<div>
<label class="required">N¬∞ de Documento:</label>
<input type="text" id="n_documento_empresa" required>
</div><div>
<label class="required">Raz√≥n Social:</label>
<input type="text" id="nombre_crear_cuenta" required>
</div><div>
<label>Nombre Comercial:</label>
<input type="text" id="nombre_empresa_crear_cuenta">
</div>
<div style="text-align: left;">
<label for="rubro_crear_cuenta" class="required">Sector de Negocio:</label>
<select id="rubro_crear_cuenta" name="rubro_crear_cuenta" required class="custom-select">
<option value="" disabled selected hidden>Seleccione una opci√≥n</option>                 
<option value="1">Distribuidor</option>
<option value="2">Agroindustria</option>
<option value="3">Servicios Empresariales</option>
<option value="4">Exportaciones</option>
<option value="5">Agencia de Viajes</option>
<option value="6">Comercial</option>
<option value="7">Bodega</option>
<option value="8">Minimarket</option>
<option value="17">Bar</option>
<option value="18">Restaurante</option>
<option value="9">Bar / Restaurante</option>
<option value="10">Hotel</option>
<option value="11">Educaci√≥n</option>
<option value="12">ONG - Fundaci√≥n</option>
<option value="13">Construcci√≥n</option>
<option value="14">Ferreteria</option>
<option value="15">√ìptica</option>
<option value="16">Municipalidad</option>
</select>
</div>  
<div>
<label>Logo:</label>
<label for="logo" class="btn-seleccionar">Seleccionar</label>
<input type="file" id="logo" accept="image/*" style="display:none;">
<div id="logo_info" class="file-info">Sin selecci√≥n</div>
</div>
</div>
</div>
<div class="actions">
<button type="button" class="btn btn-primary" onclick="validateStep(1)">Siguiente</button>
</div>
</div>

<!-- STEP 2: LOCATION -->
<div class="step" data-step="2" hidden>
<div class="step-content">
<strong style="font-size:15px; color:#FF5900; display:block; margin-bottom:30px;">‚û°Ô∏è Ubicaci√≥n y Descripci√≥n:</strong>
<div class="grid-2">
<div>
<label class="required">Direcci√≥n:</label>
<input type="text" id="direccion" required>
</div>
<label class="checkbox-option">
<input type="checkbox" id="zona_selva" name="zona_selva" value="si">
<span>¬øEs zona selva exonerada del IGV?</span>
</label> 
</div>
<div class="ubicacion" style="margin-top:10px">
<div>
<label class="required">Departamento</label>
<select id="departamento" required>
<option value="" disabled selected>Departamento</option>
</select>
</div>
<div>
<label class="required">Provincia</label>
<select id="provincia" required>
<option value="" disabled selected>Provincia</option>
</select>
</div>
<div>
<label class="required">Distrito</label>
<select id="distrito" required>
<option value="" disabled selected>Distrito</option>
</select>
</div></div><br>
<div class="grid-2">
<div>
<label>Sitio Web:</label>
<input type="text" id="sitio_web">
</div>
<div style="text-align: left;">
<label>Descripci√≥n:</label>
<textarea id="descripcion" placeholder=" " style="width:100%; height:30px; resize: vertical; border-radius: 8px; padding: 4px; border: 1px solid #cfcfcf; font-size:13px;"></textarea>
</div>
</div>
</div>
<div class="actions">
<button type="button" class="btn pill" onclick="goto(1)">Anterior</button>
<button type="button" class="btn btn-primary" onclick="validateStep(2)">Siguiente</button>
</div>
</div>

<!-- STEP 3: ACCOUNT -->
<div class="step" data-step="3" hidden>
<div class="step-content">
<strong style="font-size:15px; color:#FF5900; display:block; margin-bottom:30px;">‚û°Ô∏è Cuenta de Acceso:</strong>
<div class="grid-2">
<div>
<label class="required">Correo electr√≥nico:</label>
<input type="email_crear_cuenta" id="email_crear_cuenta" required>
</div>
<div>
<label class="required">Contrase√±a:</label>
<div class="password-container">
<input type="password" id="password_crear_cuenta" required>
<i class="fas fa-eye toggle-password" id="togglePassword"></i>
</div>
</div>
</div>

<!-- OPTION TO REMEMBER DATA -->
<div class="remember-container">
<input type="checkbox" id="remember">
<label for="remember">Recordar correo y contrase√±a</label>
</div>
<br>
<label class="checkbox-terminos">
<input type="checkbox" id="terminos_condiciones" required>
<span class="required">Acepto los T√©rminos de Servicio y <a onclick="window.open('https://apierp.dev/terminos-y-condiciones/')" target="_blank" style="color:#080060; text-decoration:none;">Condiciones de Uso</a></span>
</label> 
</div>
<div class="actions">
<button type="button" class="btn pill" onclick="goto(2)">Anterior</button>
<button type="button" class="btn btn-primary" onclick="validateStep(3)">Siguiente</button>
</div>
</div>

<!-- STEP 4: PERSONAL -->
<div class="step" data-step="4" hidden>
<div class="step-content">
<strong style="font-size:15px; color:#FF5900; display:block; margin-bottom:30px;">‚û°Ô∏è Datos Personales:</strong>
<div class="grid-2">
<div>
<label class="required">Tipo de Documento:</label>
<select required id="tipo_documento_cliente">
<option value="" disabled selected>Seleccionar</option>
<option value="1">DNI</option>
<option value="2">RUC</option>
<option value="3">CE</option>
<option value="4">PP</option>
<option value="5">DTNDSR</option>
</select>
</div>
<div>
<label class="required">N¬∞ de Documento:</label>
<input type="text" inputmode="numeric" id="n_documento_cliente" required>
</div>
<div>
<label class="required">Nombre y Apellidos:</label>
<input type="text"  id="apellido_crear_cuenta" required>
</div>
<div>
<label class="required">Cumplea√±os - Ofertas y Promos:</label>
<input type="date" class="fecha" id="cumpleanos" required>
</div>
<div>
<label class="required">Correo - Env√≠os de Reportes:</label>
<input type="email" id="correo_envio" required>
</div>
<div>
<label class="required">Celular:</label>
<input type="tel" id="telefono_crear_cuenta" required>
</div>
</div>
</div>
<div class="actions">
<button type="button" class="btn pill" onclick="goto(3)">Anterior</button>
<button type="button" class="btn btn-primary" onclick="validateStep(4)">Siguiente</button>
</div>
</div>

<!-- STEP 5: SUPPORT -->
<div class="step" data-step="5" hidden>
<div class="step-content">
<strong style="font-size:15px; color:#FF5900; display:block; margin-bottom:30px;">‚û°Ô∏è Soporte:</strong>

<!-- EXCEL OF PRODUCTS, CLIENTS AND SUPPLIERS -->
<div class="benefit-card" style="margin-bottom:12px;">
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
<div>
<strong>Excel de Productos, Clientes y Proveedores:</strong>
<p style="color:#959595; margin:.25rem 0 0">Facilita la informaci√≥n para subirla al sistema.</p>
</div>
<div>
<label for="archivo_excel" class="btn-seleccionar-angosto" style="cursor: pointer;">Seleccionar</label>
<input type="file" id="archivo_excel" accept=".xlsx, .xls, .csv" style="display:none;">
</div>
</div>
<div id="archivo_excel_info" class="file-info">Sin selecci√≥n</div>
</div>

<!-- DOWNLOAD DIGITAL CERTIFICATE, SECONDARY USER AND APISUNAT -->
<div class="benefit-card" style="margin-bottom:12px;">
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
<div>
<strong>Certificado, Usuario Secundario, apiSUNAT:</strong>
<p style="color:#959595; margin:.25rem 0 0">Sube los documentos requeridos. Se recomienda apoyo del contador.</p>
</div>
<div>
<label for="archivo_sunat" class="btn-seleccionar-angosto" style="cursor: pointer;">Seleccionar</label>
<input type="file" id="archivo_sunat" accept=".p12, .pdf, .doc, .docx, image/*" multiple style="display:none;">
</div>
</div>
<div id="archivo_sunat_info" class="file-info">Sin selecci√≥n</div>
</div>

<!-- ADDITIONAL SUPPORT -->
<div class="benefit-card">
<div class="checkbox-card">
<input type="checkbox" id="soporte">
<label for="soporte" class="checkbox-label">
<span style="color: #FF5900;">Marca la casilla si requieres soporte </span>
<span style="color: #080060;">para descargar el certificado digital y crear el usuario secundario.</span>
</label>
</div>
</div>
</div>
<div class="actions">
<button type="button" class="btn pill" onclick="goto(4)">Anterior</button>
<button type="submit" class="btn btn-primary">Completar Registro</button>
</div>
</div>
</form>
</div>
</section>

<!-- LOGOS + VIDEOS -->
<section class="container">
<div class="trust">
<p style="font-size: 19px;">
<strong style="color:#080060;" >Potencia tu negocio y</strong>
<strong class="highlight" style="font-size:19px;"> √∫nete a las empresas</strong>
<strong style="color:#080060;"> que conf√≠an en Fasyb. üöÄ</strong>
<br><br><br>
<div class="vid">
<iframe src="//player.vimeo.com/video/1087585260?autoplay=1&muted=1&autopause=0&controls=0&loop=1" allow="autoplay; fullscreen; picture-in-picture"></iframe>
</div>
</p>
</div>
</section>

<!-- REFER & BENEFITS -->
<section class="belt">
<div class="container benefits">
<div>
<br><br><br>
<div class="title"><span class="highlight">Refiere y Gana</span> con Fasyb</div>
<p style="color:var(--muted)">Recomienda Fasyb y obt√©n 1 mes gratis por cada referido. ¬°Cuantas m√°s recomendaciones hagas, m√°s ganas!</p>
<a class="btn btn-primary" onclick="window.open('https://wa.me/942328698?text=%C2%A1Hola!%20Estoy%20interesado%20en%20sus%20servicios%20y%20me%20gustar%C3%ADa%20recibir%20m%C3%A1s%20informaci%C3%B3n.%20%C2%BFPodr%C3%ADan%20asesorarme%3F','_blank')">¬°Descubre c√≥mo hacerlo!</a>
</div>
<div class="benefit-card benefit-card-lg">
<ul class="list">
<li><div class="title">Beneficios <span class="highlight"></span></div></li><br>
<li><div class="badge">1</div><div><b style="color:var(--muted)">Gana descuentos en tu mensualidad</b><br><small style="color:var(--muted)">1 mes gratis por cada referido.</small></div></li>
<li><div class="badge">2</div><div><b style="color:var(--muted)">Regala descuentos</b><br><small style="color:var(--muted)">Tus referidos obtienen 30% de dcto. en el alta de plan.</small></div></li>
<li><div class="badge">3</div><div><b style="color:var(--muted)">Seguimiento transparente</b><br><small style="color:var(--muted)">Consulta el estado de tus referidos cuando quieras.</small></div></li>
</ul><br><br>
</div>
</div>
</section>
</main>

<!-- FOOTER -->
<footer id="contacto">
<div class="container foot">
<div>
<h4>Enlaces</h4>
<div style="display:grid;gap:6px">
<a href="#">Inicio</a>
<a href="#">Sobre nosotros</a>
<a href="#">Servicios</a>
<a href="#">Libro de Reclamaci√≥n</a>
<a onclick="window.open('https://wa.me/942328698?text=%C2%A1Hola!%20Estoy%20interesado%20en%20sus%20servicios%20y%20me%20gustar%C3%ADa%20recibir%20m%C3%A1s%20informaci%C3%B3n.%20%C2%BFPodr%C3%ADan%20asesorarme%3F','_blank')">Cont√°ctanos</a>
</div>
</div>
<div class="about-section">
<div class="about-text">
<h4>Sobre Nosotros</h4>
<p>Impulsamos el crecimiento de tu negocio con facturaci√≥n electr√≥nica ilimitada, ERP eficiente y punto de venta ultrar√°pido, respaldados por la seguridad de AWS. Soluciones f√°ciles de usar y orientadas a resultados.</p>
</div>
</div><br>
<div style="text-align:left; margin-left:5;">
<h4>Conecta con nosotros</h4>
<div style="display:grid; gap:6px;">
<a href="">contacto@fasyb.com</a>
<a href="">fasyb.com@gmail.com</a>
<a href="https://api.whatsapp.com/send/?phone=942328698&text=%C2%A1Hola%21+Estoy+interesado+en+sus+servicios+y+me+gustar%C3%ADa+recibir+m%C3%A1s+informaci%C3%B3n.+%C2%BFPodr%C3%ADan+asesorarme%3F&type=phone_number&app_absent=0">+51 942328698</a>
</div>
<div class="social-footer">
<a href="https://www.facebook.com/FasybERP" target="_blank" class="facebook"><i class="fab fa-facebook-f"></i></a>
<a href="https://www.fasyb.com/" target="_blank" class="home"><i class="fa-solid fa-house"></i></a>
<a href="https://www.youtube.com/@Fasyberp" target="_blank" class="youtube"><i class="fab fa-youtube"></i></a>
<a href="https://www.tiktok.com/@fasyb.com" target="_blank" class="tiktok"><i class="fab fa-tiktok"></i></a>
</div>
</div>
</div>
</footer>
<div class="developed-by">
<span style="padding-left:170px;">Desarrollado con la tecnolog√≠a de apiERP ¬© <span id="year"></span></span>
</div>

<!-- FLOATING WHATSAPP BUTTON -->
<a href="https://wa.me/51942328698?text=¬°Hola!%20Estoy%20interesado%20en%20sus%20servicios.%20¬øPodr√≠an%20asesorarme?" class="whatsapp-float" target="_blank" aria-label="Chatea con nosotros en WhatsApp">
<i class="fab fa-whatsapp"></i>
</a>

<!-- SCRIPTS -->
<script>
document.addEventListener('DOMContentLoaded', () => {

/* FILE SELECTORS (LOGO, EXCEL, SUNAT) */
const inputLogo = document.querySelector('#logo[type="file"]');
const logoInfo =
document.querySelector('#logo[type="file"] + .file-info') ||
document.querySelector('#logo_info');

if (inputLogo) {
inputLogo.addEventListener('change', function () {
if (this.files?.length) {
if (logoInfo) logoInfo.textContent = `Archivo seleccionado: ${this.files[0].name}`;
} else {
if (logoInfo) logoInfo.textContent = 'No se ha seleccionado ning√∫n archivo';
}
});
}

/* FILE SELECTOR FOR EXCEL */
const inputExcel = document.querySelector('#archivo_excel[type="file"], #archivo-excel[type="file"]');
const nombreArchivoExcel =
document.querySelector('#archivo_excel[type="file"] + .file-info') ||
document.querySelector('#archivo-excel[type="file"] + .file-info') ||
document.querySelector('#archivo_excel_info');

if (inputExcel) {
inputExcel.addEventListener('change', function () {
if (this.files?.length) {
nombreArchivoExcel && (nombreArchivoExcel.textContent = `Archivo seleccionado: ${this.files[0].name}`);
} else {
nombreArchivoExcel && (nombreArchivoExcel.textContent = 'No se ha seleccionado ning√∫n archivo');
}
});
}

/* FILE SELECTOR FOR SUNAT DOCUMENTS */
const inputSunat = document.querySelector('#archivo_sunat[type="file"], #archivo-sunat[type="file"], #documentos-sunat[type="file"]');
const nombreArchivoSunat =
document.querySelector('#archivo_sunat[type="file"] + .file-info') ||
document.querySelector('#archivo-sunat[type="file"] + .file-info') ||
document.querySelector('#documentos-sunat[type="file"] + .file-info') ||
document.querySelector('#archivo_sunat_info');

if (inputSunat) {
inputSunat.addEventListener('change', function () {
if (this.files?.length) {
if (this.files.length === 1) {
nombreArchivoSunat && (nombreArchivoSunat.textContent = `Archivo seleccionado: ${this.files[0].name}`);
} else {
nombreArchivoSunat && (nombreArchivoSunat.textContent = `${this.files.length} archivos seleccionados`);
}
} else {
nombreArchivoSunat && (nombreArchivoSunat.textContent = 'No se ha seleccionado ning√∫n archivo');
}
});
}

/* NOTIFICATIONS */
const showNotification = () => {
const n = document.getElementById('requiredFieldsNotification');
if (!n) return;
n.style.display = 'block';
setTimeout(() => (n.style.display = 'none'), 5000);
};

const showEmailNotification = () => {
const n = document.getElementById('emailNotification');
if (!n) return;
n.style.display = 'block';
setTimeout(() => (n.style.display = 'none'), 5000);
};

const showSuccessNotification = () => {
const n = document.getElementById('successNotification');
if (!n) return;
n.style.display = 'block';
setTimeout(() => (n.style.display = 'none'), 5000);
};

const isValidEmail = (email) => email && email.includes('@') && email.includes('.');

/* STEP NAVIGATION */
function goto(n) {
document.querySelectorAll('.bullet').forEach(b => b.classList.toggle('active', Number(b.dataset.step) === n));
document.querySelectorAll('.step').forEach(s => (s.hidden = Number(s.dataset.step) !== n));
const registro = document.getElementById('registro');
if (registro) window.scrollTo({ top: registro.offsetTop - 80, behavior: 'smooth' });
}
window.goto = goto;

/* STEP VALIDATION */
function validateStep(step) {
const currentStep = document.querySelector(`.step[data-step="${step}"]`);
if (!currentStep) return;
const requiredFields = currentStep.querySelectorAll('.required');
let isValid = true;

requiredFields.forEach(field => {
const wrapper = field.closest('div') || field.parentElement;
const input = wrapper?.querySelector('input, select, textarea');
if (input && input.type !== 'checkbox' && !input.value.trim()) {
isValid = false;
input.style.borderColor = 'red';
} else if (input) {
input.style.borderColor = '';
}
});

/* ADDITIONAL RULES FOR STEP 3 */
if (step === 3) {
const terminos = document.getElementById('terminos_condiciones');
if (terminos && !terminos.checked) {
isValid = false;
terminos.style.outline = '2px solid red';
} else if (terminos) {
terminos.style.outline = '';
}

const emailInput = document.getElementById('email_crear_cuenta');
if (emailInput && emailInput.value.trim() && !isValidEmail(emailInput.value.trim())) {
isValid = false;
emailInput.style.borderColor = 'red';
}
}

if (!isValid) {
if (step === 3) {
const emailInput = document.getElementById('email_crear_cuenta');
if (emailInput && emailInput.value.trim() && !isValidEmail(emailInput.value.trim())) {
showEmailNotification();
} else {
showNotification();
}
} else {
showNotification();
}
return;
}

goto(step + 1);
}
window.validateStep = validateStep;

/* VALIDATE AND SUBMIT FULL FORM */
function validateAndSubmit() {
let isValid = true;

for (let i = 1; i <= 5; i++) {
const step = document.querySelector(`.step[data-step="${i}"]`);
if (!step) continue;
const requiredFields = step.querySelectorAll('.required');

requiredFields.forEach(field => {
const wrapper = field.closest('div') || field.parentElement;
const input = wrapper?.querySelector('input, select, textarea');
if (input && input.type !== 'checkbox' && !input.value.trim()) {
isValid = false;
input.style.borderColor = 'red';
}
});

if (i === 3) {
const terminos = document.getElementById('terminos_condiciones');
if (terminos && !terminos.checked) {
isValid = false;
terminos.style.outline = '2px solid red';
}
const emailInput = document.getElementById('email_crear_cuenta');
if (emailInput && emailInput.value.trim() && !isValidEmail(emailInput.value.trim())) {
isValid = false;
emailInput.style.borderColor = 'red';
}
}
}

if (!isValid) {
const emailInput = document.getElementById('email_crear_cuenta');
if (emailInput && emailInput.value.trim() && !isValidEmail(emailInput.value.trim())) {
showEmailNotification();
} else {
showNotification();
}
return;
}

showSuccessNotification();

}
window.validateAndSubmit = validateAndSubmit;

/* TOGGLE PASSWORD VISIBILITY */
const togglePasswordBtn = document.getElementById('togglePassword');
if (togglePasswordBtn) {
togglePasswordBtn.addEventListener('click', function () {
const passwordInput = document.getElementById('password_crear_cuenta');
if (!passwordInput) return;
const type = passwordInput.type === 'password' ? 'text' : 'password';
passwordInput.type = type;
this.classList.toggle('fa-eye');
this.classList.toggle('fa-eye-slash');
});
}

/* TERMS AND SUPPORT CHECKBOX INTERACTION */
const terminosCheckbox = document.getElementById('terminos_condiciones');
const soporteCheckbox = document.getElementById('soporte');
if (terminosCheckbox) {
terminosCheckbox.addEventListener('change', function () {
if (this.checked && soporteCheckbox) soporteCheckbox.checked = false;
});
}

/* EMAIL VALIDATION ON BLUR */
const emailBlurInput = document.getElementById('email_crear_cuenta');
if (emailBlurInput) {
emailBlurInput.addEventListener('blur', function () {
if (this.value.trim() && !isValidEmail(this.value.trim())) {
this.style.borderColor = 'red';
showEmailNotification();
} else {
this.style.borderColor = '';
}
});
}

/* REMEMBER LOGIN DATA (LOCAL STORAGE) */
const rememberCheckbox = document.getElementById('remember');
const emailInput = document.getElementById('email_crear_cuenta');
const passwordInput = document.getElementById('password_crear_cuenta');

/* LOAD SAVED DATA FROM LOCAL STORAGE */
if ((emailInput || passwordInput) && rememberCheckbox) {
const savedEmail = localStorage.getItem('savedEmail');
const savedPassword = localStorage.getItem('savedPassword');
if (savedEmail && emailInput) emailInput.value = savedEmail;
if (savedPassword && passwordInput) passwordInput.value = savedPassword;
if ((savedEmail || savedPassword) && rememberCheckbox) rememberCheckbox.checked = true;
}

/* SAVE OR DELETE DATA WHEN CHECKBOX CHANGES */
if (rememberCheckbox) {
rememberCheckbox.addEventListener('change', () => {
if (rememberCheckbox.checked) {
emailInput && localStorage.setItem('savedEmail', emailInput.value || '');
passwordInput && localStorage.setItem('savedPassword', passwordInput.value || '');
} else {
localStorage.removeItem('savedEmail');
localStorage.removeItem('savedPassword');
}
});

/* UPDATE SAVED DATA WHEN USER TYPES */
if (emailInput) {
emailInput.addEventListener('input', () => {
if (rememberCheckbox.checked) localStorage.setItem('savedEmail', emailInput.value || '');
});
}
if (passwordInput) {
passwordInput.addEventListener('input', () => {
if (rememberCheckbox.checked) localStorage.setItem('savedPassword', passwordInput.value || '');
});
}
}

  //  SELECT ELEMENTS
  const selDepa = document.getElementById('departamento');
  const selProv = document.getElementById('provincia');
  const selDist = document.getElementById('distrito');

  //  CHECK IF SELECTS EXIST
  if (!selDepa || !selProv || !selDist) {
    console.warn('register_ubigeo.js: uno o m√°s selects no encontrados (esperados: departamento, provincia, distrito).');
    return;
  }

  //  JSON FILE PATHS
  const basePath = 'json/'; 
  const depFile = basePath + 'peru_departamentos.json';
  const provFile = basePath + 'peru_provincias.json';
  const distFile = basePath + 'peru_distritos.json';

  //  INITIAL SELECT MESSAGES
  selDepa.innerHTML = `<option value="" disabled selected>Cargando departamentos...</option>`;
  selProv.innerHTML = `<option value="" disabled selected>Provincia</option>`;
  selDist.innerHTML = `<option value="" disabled selected>Distrito</option>`;

  //  LOAD JSON DATA FOR DEPARTMENTS, PROVINCES, DISTRICTS
  Promise.all([
    fetch(depFile).then(r => {
      if (!r.ok) throw new Error('dep fetch ' + r.status);
      return r.json();
    }),
    fetch(provFile).then(r => {
      if (!r.ok) throw new Error('prov fetch ' + r.status);
      return r.json();
    }),
    fetch(distFile).then(r => {
      if (!r.ok) throw new Error('dist fetch ' + r.status);
      return r.json();
    })
  ])
  .then(([depJson, provJson, distJson]) => {

    //  NORMALIZE ARRAYS
    const departamentos = Array.isArray(depJson.rows) ? depJson.rows : (Array.isArray(depJson) ? depJson : []);
    const provincias = Array.isArray(provJson.rows) ? provJson.rows : (Array.isArray(provJson) ? provJson : []);
    const distritos = Array.isArray(distJson.rows) ? distJson.rows : (Array.isArray(distJson) ? distJson : []);

    //  NO DEPARTMENTS FOUND
    if (departamentos.length === 0) {
      console.warn('register_ubigeo.js: no se encontraron departamentos en el JSON.');
      selDepa.innerHTML = `<option value="" disabled selected>No hay departamentos</option>`;
      return;
    }

    //  POPULATE DEPARTMENTS SELECT
    selDepa.innerHTML = `<option value="" disabled selected>Departamento</option>`;
    departamentos.forEach(d => {
      //  ENSURE ID AND NAME EXIST
      const id = d.id ?? d.codigo ?? d.code ?? d.value ?? '';
      const name = d.name ?? d.nombre ?? d.label ?? '';
      if (id && name) selDepa.insertAdjacentHTML('beforeend', `<option value="${id}">${name}</option>`);
    });

    //  STORE PROVINCES AND DISTRICTS ARRAYS IN DATASET
    selDepa.dataset.provincias = JSON.stringify(provincias);
    selDepa.dataset.distritos = JSON.stringify(distritos);

  })
  .catch(err => {
    //  ERROR LOADING JSON FILES
    console.error('register_ubigeo.js - error cargando JSONs:', err);
    selDepa.innerHTML = `<option value="" disabled selected>Error cargando datos</option>`;
  });

  //  ON DEPARTMENT CHANGE => POPULATE PROVINCES
  selDepa.addEventListener('change', () => {
    const depId = selDepa.value;
    selProv.innerHTML = `<option value="" disabled selected>Provincia</option>`;
    selDist.innerHTML = `<option value="" disabled selected>Distrito</option>`;

    let provincias = [];
    try { provincias = JSON.parse(selDepa.dataset.provincias || '[]'); } catch(e) { provincias = []; }

    provincias
      .filter(p => String(p.department_id ?? p.departamento_id ?? p.dep_id ?? '') === String(depId))
      .forEach(p => {
        const id = p.id ?? p.codigo ?? p.code ?? p.value ?? '';
        const name = p.name ?? p.nombre ?? p.label ?? '';
        if (id && name) selProv.insertAdjacentHTML('beforeend', `<option value="${id}">${name}</option>`);
      });

    //  IF NO PROVINCES FOUND
    if (selProv.options.length === 1) {
      selProv.innerHTML = `<option value="" disabled selected>Sin provincias</option>`;
    }
  });

  //  ON PROVINCE CHANGE => POPULATE DISTRICTS
  selProv.addEventListener('change', () => {
    const provId = selProv.value;
    selDist.innerHTML = `<option value="" disabled selected>Distrito</option>`;

    let distritos = [];
    try { distritos = JSON.parse(selDepa.dataset.distritos || '[]'); } catch(e) { distritos = []; }

    distritos
      .filter(d => String(d.province_id ?? d.provincia_id ?? d.prov_id ?? '') === String(provId))
      .forEach(d => {
        const id = d.id ?? d.codigo ?? d.code ?? d.value ?? '';
        const name = d.name ?? d.nombre ?? d.label ?? '';
        if (id && name) selDist.insertAdjacentHTML('beforeend', `<option value="${id}">${name}</option>`);
      });

    //  IF NO DISTRICTS FOUND
    if (selDist.options.length === 1) {
      selDist.innerHTML = `<option value="" disabled selected>Sin distritos</option>`;
    }
  });
});
</script>
</body>
</html>

/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 4.0.6
*/

const _0xd70ee=_0x58e0;(function(_0x5a3229,_0x49c62a){const _0x50ac8f=_0x58e0,_0x1b5faf=_0x5a3229();while(!![]){try{const _0x4ed25e=parseInt(_0x50ac8f(0x15d))/0x1+-parseInt(_0x50ac8f(0xf0))/0x2+parseInt(_0x50ac8f(0x16d))/0x3+-parseInt(_0x50ac8f(0x174))/0x4+-parseInt(_0x50ac8f(0x14d))/0x5*(-parseInt(_0x50ac8f(0x176))/0x6)+parseInt(_0x50ac8f(0x190))/0x7+-parseInt(_0x50ac8f(0x10e))/0x8*(-parseInt(_0x50ac8f(0x104))/0x9);if(_0x4ed25e===_0x49c62a)break;else _0x1b5faf['push'](_0x1b5faf['shift']());}catch(_0x149c18){_0x1b5faf['push'](_0x1b5faf['shift']());}}}(_0x5752,0x3cf2c));const _0x455884=(function(){let _0xb16bb8=!![];return function(_0x134ef5,_0x5550d9){const _0x5c97a0=_0xb16bb8?function(){const _0x25af5f=_0x58e0;if(_0x5550d9){const _0xdd9d10=_0x5550d9[_0x25af5f(0x119)](_0x134ef5,arguments);return _0x5550d9=null,_0xdd9d10;}}:function(){};return _0xb16bb8=![],_0x5c97a0;};}()),_0x403c62=_0x455884(this,function(){const _0x258be2=_0x58e0;return _0x403c62[_0x258be2(0x145)]()[_0x258be2(0x14f)](_0x258be2(0x10c))[_0x258be2(0x145)]()['constructor'](_0x403c62)[_0x258be2(0x14f)](_0x258be2(0x10c));});function _0x5752(){const _0x50d5b7=['setCodProducto','setOperationType','dataset_raw','\x0a<tr>\x0a<td>','querySelector','setOperationCustomerName','El\x20contenedor\x20con\x20id\x20\x22','setOperationDetailUnitPresentationId','stringify','isArray','map','height','bind','.table-wrapper','line','log','salesChartContainer','none','target','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','POST','Pendiente','setOperationStatus','display','length','setBranchId','hide','date-range-label','setSerie','application/json;\x20charset=utf-8','onclick','</td>\x0a</tr>','success','filter','click','flatMap','warn','setTipoComprobante','data-value','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22text-align:\x20center;\x22>','arrayIncomes\x20transformado:','pageX','getHours','456594gDncCA','Total','dynamicContent','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','Invalid\x20range\x20type','setOperationDateTime','getMinutes','filtrar','table','block','preventDefault','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22text-align:\x20right;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','detalleModal','Incomes\x20raw:','bar','then','item','\x0a<table>\x0a<thead>\x0a<tr>\x0a<th>Producto</th>\x0a<th>Cantidad</th>\x0a<th>Valor\x20Unitario</th>\x0a<th>Total</th>\x0a</tr>\x0a</thead>\x0a<tbody\x20id=\x22detalleTablaBody\x22></tbody>\x0a</table>','setCustomerName','reduce','2541537iJlVau','setOperationStatusColor','getDate','setTipoOperacionName','detalle','mouseleave','setOperationNumber','week','(((.+)+)+)+$','https://fasyb.com/api/pdf/proxy/?file=','8WpfSCd','No\x20se\x20pudieron\x20obtener\x20los\x20detalles\x20del\x20pedido.','day','</td>\x0a<td>','valor_unitario','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22text-align:\x20center;\x22>','50%','modalOverlayViewDetails','setOperationSeries','</td>\x0a\x20\x20\x20\x20\x20\x20','setOperationCustomerId','apply','fechaISO','setOperationTotal','getFullYear','trace','from','return\x20(function()\x20','dispatchEvent','prototype','\x20tbody','pie','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22text-align:\x20right;\x22>','#reporte-income','classList','.modal-content','width','setFloorId','date-range-options','\x2023:59:59','setApiEndPoint','catch','onload','btn-outline','Evolución\x20de\x20Ventas','Siguiente\x20&raquo;','100%','pdf','appendChild','#080060','value','setOperationDetailQuantity','closeModalViewDetails','error','setOperationDetailUnitCost','concat','Sin\x20descripción','getInstance','round','mouseup','{b}:\x20{d}%','addEventListener','\x22\x20style=\x22width:\x20100%;\x20height:\x20500px;\x20border:\x20none;\x22></iframe>\x0a','profit','del\x20mes\x20<i\x20class=\x22bi\x20bi-caret-down-fill\x20date-range-label-icon\x22\x20style=\x22color:\x20#FF5900;\x22></i>','toString','del\x20año\x20<i\x20class=\x22bi\x20bi-caret-down-fill\x20date-range-label-icon\x22\x20style=\x22color:\x20#FF5900;\x22></i>','de\x20la\x20semana\x20<i\x20class=\x22bi\x20bi-caret-down-fill\x20date-range-label-icon\x22\x20style=\x22color:\x20#FF5900;\x22></i>','padStart','setDate','setOperationDetailTotal','setAuthToken','name','5eHTYsZ','toFixed','search','setOption','total','Error\x20al\x20aplicar\x20filtro','split','push','\x20no\x20existe','contains','json','btn-outline-primary','statusText','cost','console','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','121292mxsUvL','filterModal','mousemove','btn\x20btn-sm\x20','forEach','productName','dataset_','valueDesc','innerHTML','apply-filter','setOperationCurrency','filter-start','pdf_url','axis','scrollLeft','incomes','352740eKCutd','#pagination-income','assign','createElement','#reporte-income-products','offsetLeft','getElementById','1909920eNWzlb','style','143202wgIupG','entries','slice','exception','mousedown','del\x20día\x20<i\x20class=\x22bi\x20bi-caret-down-fill\x20date-range-label-icon\x22\x20style=\x22color:\x20#FF5900;\x22></i>','productPieChart','center','change','getSeconds','{}.constructor(\x22return\x20this\x22)(\x20)',';\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Ventas\x20por\x20Item','className','cantidad','&tipo=','href','find','productKey','getMonth','\x22\x20no\x20existe.','month','additionalFilters','substring','application/json','Selecciona\x20ambas\x20fechas','2872023EvEjQm','active','\x2000:00:00','Contenedor\x20','init','__proto__','category','btn\x20btn-sm\x20btn-outline\x20me-2','.btn-logout','year','#FF5900','ceil','sales','500px','No\x20se\x20encontró\x20información\x20de\x20ingresos','\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22text-align:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<!--\x20espacio\x20para\x20acciones\x20adicionales\x20-->\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22text-align:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22span-table-custom\x22\x20style=\x22border:1.5px\x20solid\x20'];_0x5752=function(){return _0x50d5b7;};return _0x5752();}_0x403c62();const _0xc3b4a=(function(){let _0x3a7ee5=!![];return function(_0x4ea88d,_0x5e9cb6){const _0x239c9a=_0x3a7ee5?function(){if(_0x5e9cb6){const _0x3c34ac=_0x5e9cb6['apply'](_0x4ea88d,arguments);return _0x5e9cb6=null,_0x3c34ac;}}:function(){};return _0x3a7ee5=![],_0x239c9a;};}()),_0x239f1c=_0xc3b4a(this,function(){const _0x3c9dd0=_0x58e0;let _0x4d0d80;try{const _0x2a481a=Function(_0x3c9dd0(0x11f)+_0x3c9dd0(0x180)+');');_0x4d0d80=_0x2a481a();}catch(_0x4f9861){_0x4d0d80=window;}const _0x40cca0=_0x4d0d80[_0x3c9dd0(0x15b)]=_0x4d0d80[_0x3c9dd0(0x15b)]||{},_0x5d3b4e=['log',_0x3c9dd0(0xe9),'info',_0x3c9dd0(0x139),_0x3c9dd0(0x179),_0x3c9dd0(0xf8),_0x3c9dd0(0x11d)];for(let _0x54c8f8=0x0;_0x54c8f8<_0x5d3b4e[_0x3c9dd0(0xdd)];_0x54c8f8++){const _0x5a2898=_0xc3b4a['constructor'][_0x3c9dd0(0x121)][_0x3c9dd0(0x1ad)](_0xc3b4a),_0x451662=_0x5d3b4e[_0x54c8f8],_0xeaa14c=_0x40cca0[_0x451662]||_0x5a2898;_0x5a2898[_0x3c9dd0(0x195)]=_0xc3b4a[_0x3c9dd0(0x1ad)](_0xc3b4a),_0x5a2898[_0x3c9dd0(0x145)]=_0xeaa14c[_0x3c9dd0(0x145)]['bind'](_0xeaa14c),_0x40cca0[_0x451662]=_0x5a2898;}});_0x239f1c();let arrayIncomes;const PER_PAGE=0x14;let currentPage=0x1,currentPageProducts=0x1;const fil_init_dates=document[_0xd70ee(0x173)]('date-range-label-icon'),label=document[_0xd70ee(0x173)](_0xd70ee(0xe0)),options=document[_0xd70ee(0x173)](_0xd70ee(0x12a)),salesChartContainer=document[_0xd70ee(0x173)](_0xd70ee(0xd5)),productPieChart=document[_0xd70ee(0x173)](_0xd70ee(0x17c));let fil_date_start='',fil_date_end='',fil_CustomersId=[],fil_OperationsType=[],fil_BranchesId=[],fil_OperationsId=[];function generateFilterTransformChart(_0x3c5801){const _0x806196=_0xd70ee,{containerId:_0x5c1da5,rawData:_0x462c3d,groupField:_0x53dd7b,groupValues:_0x26fdfc,seriesType:seriesType='line',chartType:chartType=seriesType,encode:_0x9eae28,title:title='',colors:colors=[],animationDuration:animationDuration=0x2710,tooltipOrder:tooltipOrder=_0x806196(0x164),xAxisConfig:xAxisConfig={},yAxisConfig:yAxisConfig={},gridConfig:gridConfig={'right':0x8c},width:_0x25b25f,height:_0x410c47}=_0x3c5801,_0xd76721=document[_0x806196(0x173)](_0x5c1da5);if(!_0xd76721){console['error'](_0x806196(0x1a7)+_0x5c1da5+_0x806196(0x18a));return;}if(_0x25b25f)_0xd76721[_0x806196(0x175)][_0x806196(0x128)]=_0x25b25f;if(_0x410c47)_0xd76721[_0x806196(0x175)][_0x806196(0x1ac)]=_0x410c47;const _0x37b5fe=echarts[_0x806196(0x194)](_0xd76721),_0x29c850=[],_0x2e78cd=[];_0x26fdfc[_0x806196(0x161)]((_0x403e7e,_0x5c508e)=>{const _0x140e87=_0x806196,_0x1b0602=_0x140e87(0x163)+_0x403e7e,_0xa3259e=(_0x3c5801[_0x140e87(0x18c)]||[])[_0x140e87(0x13b)]([{'dimension':_0x53dd7b,'=':_0x403e7e}]);_0x29c850[_0x140e87(0x154)]({'id':_0x1b0602,'fromDatasetId':_0x140e87(0x1a3),'transform':{'type':_0x140e87(0xe6),'config':{'and':_0xa3259e}}}),_0x2e78cd['push']({'type':chartType,'datasetId':_0x1b0602,'name':_0x403e7e,...chartType===_0x140e87(0xfe)&&{'barWidth':0x14,'barMaxWidth':0x28},'itemStyle':{'color':colors[_0x5c508e]||undefined},...chartType===_0x140e87(0xd3)&&{'showSymbol':![]},'encode':_0x9eae28});});const _0x4b8654={'animationDuration':animationDuration,'dataset':[{'id':_0x806196(0x1a3),'source':_0x462c3d},..._0x29c850],'title':{'text':title},'tooltip':{'order':tooltipOrder,'trigger':_0x806196(0x16a)},'xAxis':Object[_0x806196(0x16f)]({'type':_0x806196(0x196),'nameLocation':'middle'},xAxisConfig),'yAxis':Object[_0x806196(0x16f)]({'name':_0x9eae28['y']||''},yAxisConfig),'grid':gridConfig,'series':_0x2e78cd};_0x37b5fe[_0x806196(0x150)](_0x4b8654);}function generatePieChart({containerId:_0x3afc15,data:_0x1a5c09,nameField:_0x127d43,valueField:_0x182483,title:title='',width:_0x377dca,height:_0x3afc6b}){const _0x1d0c2f=_0xd70ee,_0x31b3ab=document[_0x1d0c2f(0x173)](_0x3afc15);if(!_0x31b3ab)return console[_0x1d0c2f(0x139)](_0x1d0c2f(0x193)+_0x3afc15+_0x1d0c2f(0x155));if(_0x377dca)_0x31b3ab[_0x1d0c2f(0x175)][_0x1d0c2f(0x128)]=_0x377dca;if(_0x3afc6b)_0x31b3ab[_0x1d0c2f(0x175)][_0x1d0c2f(0x1ac)]=_0x3afc6b;const _0x56e7d3=echarts[_0x1d0c2f(0x194)](_0x31b3ab),_0x1dcbb1=_0x1a5c09[_0x1d0c2f(0x103)]((_0x45bf8e,_0x273437)=>{const _0x1a6fba=_0x1d0c2f,_0x68cab2=_0x273437[_0x127d43],_0x37380d=_0x273437[_0x182483];let _0x56b13e=_0x45bf8e[_0x1a6fba(0x187)](_0x26ff53=>_0x26ff53[_0x1a6fba(0x14c)]===_0x68cab2);return!_0x56b13e&&(_0x56b13e={'name':_0x68cab2,'value':0x0},_0x45bf8e[_0x1a6fba(0x154)](_0x56b13e)),_0x56b13e[_0x1a6fba(0x136)]+=_0x37380d,_0x45bf8e;},[]),_0x54f34d={'title':{'text':title,'left':_0x1d0c2f(0x17d)},'tooltip':{'trigger':_0x1d0c2f(0x100)},'series':[{'type':_0x1d0c2f(0x123),'radius':_0x1d0c2f(0x114),'data':_0x1dcbb1,'emphasis':{'itemStyle':{'shadowBlur':0xa,'shadowOffsetX':0x0}},'label':{'formatter':_0x1d0c2f(0x140)}}]};_0x56e7d3[_0x1d0c2f(0x150)](_0x54f34d);}function showModalViewDetails(){const _0x696086=_0xd70ee,_0x1c4a51=document[_0x696086(0x173)](_0x696086(0xfc)),_0x557b76=document['getElementById'](_0x696086(0x115));_0x1c4a51[_0x696086(0x126)]['add'](_0x696086(0x191)),_0x557b76[_0x696086(0x175)]['display']=_0x696086(0xf9);}function hideModalViewDetails(){const _0xfc74fd=_0xd70ee,_0x1b98dd=document[_0xfc74fd(0x173)](_0xfc74fd(0xfc)),_0x6336cf=document[_0xfc74fd(0x173)](_0xfc74fd(0x115));_0x1b98dd[_0xfc74fd(0x126)]['remove'](_0xfc74fd(0x191)),_0x6336cf[_0xfc74fd(0x175)][_0xfc74fd(0xdc)]=_0xfc74fd(0xd6);const _0x40b5bb=document[_0xfc74fd(0x173)](_0xfc74fd(0xf2));_0x40b5bb[_0xfc74fd(0x165)]=_0xfc74fd(0x101);}document[_0xd70ee(0x173)](_0xd70ee(0x138))['addEventListener'](_0xd70ee(0xe7),hideModalViewDetails),document['getElementById'](_0xd70ee(0x115))[_0xd70ee(0x141)](_0xd70ee(0xe7),hideModalViewDetails);function verDetalle(_0x5842eb,_0x4435e7){const _0x4c3024=_0xd70ee;fetch('https://fasyb.com/api/venta/view/?id='+_0x5842eb+_0x4c3024(0x185)+_0x4435e7)['then'](_0x434358=>{const _0x1a85da=_0x4c3024;if(!_0x434358['ok'])throw new Error('Error\x20'+_0x434358['status']+':\x20'+_0x434358[_0x1a85da(0x159)]);return _0x434358[_0x1a85da(0x157)]();})[_0x4c3024(0xff)](_0x16bf15=>{const _0x1e9d4a=_0x4c3024;if(_0x16bf15[_0x1e9d4a(0xe5)]){const _0x28c561=document[_0x1e9d4a(0x173)](_0x1e9d4a(0xf2));if(_0x4435e7===_0x1e9d4a(0x108)){let _0x4cef05='';_0x16bf15['data']['forEach'](_0x3fd49f=>{const _0x4095c7=_0x1e9d4a;_0x4cef05+=_0x4095c7(0x1a4)+_0x3fd49f['producto']+_0x4095c7(0x111)+_0x3fd49f[_0x4095c7(0x184)]+_0x4095c7(0x111)+_0x3fd49f[_0x4095c7(0x112)]+_0x4095c7(0x111)+_0x3fd49f[_0x4095c7(0x151)]+_0x4095c7(0xe4);}),document[_0x1e9d4a(0x173)]('detalleTablaBody')[_0x1e9d4a(0x165)]=_0x4cef05;}else{if(_0x4435e7===_0x1e9d4a(0x133)){const _0xba847b=_0x1e9d4a(0x10d)+encodeURIComponent(_0x16bf15[_0x1e9d4a(0x169)]),_0x31003e=document[_0x1e9d4a(0x1a5)](_0x1e9d4a(0x127));_0x28c561[_0x1e9d4a(0x165)]='\x0a<iframe\x20src=\x22'+_0xba847b+_0x1e9d4a(0x142),document['getElementById'](_0x1e9d4a(0x138))[_0x1e9d4a(0x141)]('click',hideModalViewDetails);}}showModalViewDetails();}else alert(_0x16bf15[_0x1e9d4a(0x139)]||_0x1e9d4a(0x10f));})[_0x4c3024(0x12d)](_0x346e02=>{const _0x3e0da6=_0x4c3024;console[_0x3e0da6(0x139)]('Error\x20al\x20cargar\x20el\x20detalle:',_0x346e02),alert('Error\x20al\x20cargar\x20el\x20detalle.');});}function _0x58e0(_0x56824f,_0x16a392){const _0x264aee=_0x5752();return _0x58e0=function(_0x239f1c,_0xc3b4a){_0x239f1c=_0x239f1c-0xd2;let _0x24d963=_0x264aee[_0x239f1c];return _0x24d963;},_0x58e0(_0x56824f,_0x16a392);}label[_0xd70ee(0x141)](_0xd70ee(0xe7),()=>{const _0x2533bd=_0xd70ee;options['style']['display']=options['style'][_0x2533bd(0xdc)]===_0x2533bd(0xd6)?_0x2533bd(0xf9):_0x2533bd(0xd6);}),options[_0xd70ee(0x141)](_0xd70ee(0xe7),_0x33331c=>{const _0x3ed311=_0xd70ee;if(_0x33331c[_0x3ed311(0xd7)]&&_0x33331c[_0x3ed311(0xd7)]['tagName']==='LI'){const _0x3805ce=_0x33331c[_0x3ed311(0xd7)]['getAttribute'](_0x3ed311(0xeb));updateDateRange(_0x3805ce),options['style'][_0x3ed311(0xdc)]=_0x3ed311(0xd6);}}),document[_0xd70ee(0x141)](_0xd70ee(0xe7),_0x464dd4=>{const _0x4d898d=_0xd70ee;!label[_0x4d898d(0x156)](_0x464dd4[_0x4d898d(0xd7)])&&!options['contains'](_0x464dd4[_0x4d898d(0xd7)])&&(options['style'][_0x4d898d(0xdc)]='none');});function formatDateToYmdHis(_0x229dd4){const _0x4d4aed=_0xd70ee,_0x2c9e3e=_0x229dd4[_0x4d4aed(0x11c)](),_0x1ca236=String(_0x229dd4[_0x4d4aed(0x189)]()+0x1)[_0x4d4aed(0x148)](0x2,'0'),_0x302794=String(_0x229dd4[_0x4d4aed(0x106)]())[_0x4d4aed(0x148)](0x2,'0'),_0x5213b3=String(_0x229dd4[_0x4d4aed(0xef)]())[_0x4d4aed(0x148)](0x2,'0'),_0x493165=String(_0x229dd4[_0x4d4aed(0xf6)]())[_0x4d4aed(0x148)](0x2,'0'),_0x1529b7=String(_0x229dd4[_0x4d4aed(0x17f)]())['padStart'](0x2,'0');return _0x2c9e3e+'-'+_0x1ca236+'-'+_0x302794+'\x20'+_0x5213b3+':'+_0x493165+':'+_0x1529b7;}function getDateRange(_0x499c1f){const _0x19700d=_0xd70ee,_0x16b00f=new Date();let _0x1652cb,_0x23f334;switch(_0x499c1f){case _0x19700d(0x110):_0x1652cb=new Date(_0x16b00f[_0x19700d(0x11c)](),_0x16b00f[_0x19700d(0x189)](),_0x16b00f[_0x19700d(0x106)](),0x0,0x0,0x0),_0x23f334=new Date(_0x16b00f[_0x19700d(0x11c)](),_0x16b00f['getMonth'](),_0x16b00f[_0x19700d(0x106)](),0x17,0x3b,0x3b),label[_0x19700d(0x165)]=_0x19700d(0x17b);break;case _0x19700d(0x10b):const _0x13f29e=_0x16b00f['getDay'](),_0x24b515=new Date(_0x16b00f);_0x24b515[_0x19700d(0x149)](_0x16b00f[_0x19700d(0x106)]()-_0x13f29e+(_0x13f29e===0x0?-0x6:0x1));const _0x309437=new Date(_0x24b515);_0x309437[_0x19700d(0x149)](_0x24b515['getDate']()+0x6),_0x1652cb=new Date(_0x24b515[_0x19700d(0x11c)](),_0x24b515['getMonth'](),_0x24b515['getDate'](),0x0,0x0,0x0),_0x23f334=new Date(_0x309437[_0x19700d(0x11c)](),_0x309437[_0x19700d(0x189)](),_0x309437['getDate'](),0x17,0x3b,0x3b),label[_0x19700d(0x165)]=_0x19700d(0x147);break;case _0x19700d(0x18b):_0x1652cb=new Date(_0x16b00f[_0x19700d(0x11c)](),_0x16b00f['getMonth'](),0x1,0x0,0x0,0x0),_0x23f334=new Date(_0x16b00f['getFullYear'](),_0x16b00f[_0x19700d(0x189)]()+0x1,0x0,0x17,0x3b,0x3b),label['innerHTML']=_0x19700d(0x144);break;case _0x19700d(0x199):_0x1652cb=new Date(_0x16b00f[_0x19700d(0x11c)](),0x0,0x1,0x0,0x0,0x0),_0x23f334=new Date(_0x16b00f[_0x19700d(0x11c)](),0xb,0x1f,0x17,0x3b,0x3b),label[_0x19700d(0x165)]=_0x19700d(0x146);break;default:label['innerHTML']='';throw new Error(_0x19700d(0xf4));}return{'startDateFormatted':formatDateToYmdHis(_0x1652cb),'endDateFormatted':formatDateToYmdHis(_0x23f334)};}function updateDateRange(_0x18ce33){const _0x26ad6d=_0xd70ee;if(_0x18ce33==_0x26ad6d(0xf7)){}else{const {startDateFormatted:_0x12843b,endDateFormatted:_0x421e4c}=getDateRange(_0x18ce33);fil_date_start=_0x12843b,fil_date_end=_0x421e4c,consultIncomeReport();}}const tableWrapper=document[_0xd70ee(0x1a5)](_0xd70ee(0xd2));let isDragging=![],startX,scrollLeft;tableWrapper[_0xd70ee(0x141)](_0xd70ee(0x17a),_0x558637=>{const _0x3901d0=_0xd70ee;isDragging=!![],startX=_0x558637[_0x3901d0(0xee)]-tableWrapper[_0x3901d0(0x172)],scrollLeft=tableWrapper[_0x3901d0(0x16b)];}),tableWrapper[_0xd70ee(0x141)](_0xd70ee(0x109),()=>{isDragging=![];}),tableWrapper[_0xd70ee(0x141)](_0xd70ee(0x13f),()=>{isDragging=![];}),tableWrapper['addEventListener'](_0xd70ee(0x15f),_0x563d67=>{const _0x1f1e70=_0xd70ee;if(!isDragging)return;_0x563d67[_0x1f1e70(0xfa)]();const _0x15c6ff=_0x563d67[_0x1f1e70(0xee)]-tableWrapper['offsetLeft'],_0x599353=(_0x15c6ff-startX)*0x2;tableWrapper['scrollLeft']=scrollLeft-_0x599353;});async function consultIncomeReport(){const _0x35653e=_0xd70ee;showLoadingModal();const _0x3966b0={'apiPOS_getIncome':0x1,'setToken':myCompany[_0x35653e(0x14b)],'fil_date_start':fil_date_start,'fil_date_end':fil_date_end,'fil_CustomersId':fil_CustomersId,'fil_OperationsType':fil_OperationsType,'fil_BranchesId':fil_BranchesId,'fil_OperationsId':fil_OperationsId};try{const _0x522520=await fetch(myCompany[_0x35653e(0x12c)],{'method':_0x35653e(0xd9),'headers':{'Content-Type':_0x35653e(0xe2)},'body':JSON[_0x35653e(0x1a9)](_0x3966b0)}),{success:_0x83ff22,message:_0x1335e9}=await _0x522520[_0x35653e(0x157)]();if(!_0x83ff22||!Array[_0x35653e(0x1aa)](_0x1335e9['incomes'])){ntfShow(_0x35653e(0x19e)),console[_0x35653e(0xd4)](_0x1335e9);return;}const _0x1aa363=_0x1335e9[_0x35653e(0x16c)];console['log'](_0x35653e(0xfd),_0x1aa363);const _0x305340=myCompany['setCustomers']['reduce']((_0x55f0e7,_0x50f03a)=>{const _0x2dd83a=_0x35653e;return _0x55f0e7[_0x50f03a['setCustomerId']]=_0x50f03a[_0x2dd83a(0x102)],_0x55f0e7;},{}),_0x2aaa7e=myCompany['setTipoOperaciones'][_0x35653e(0x103)]((_0x34b10d,_0x2cc9f8)=>{const _0x54fd4c=_0x35653e;return _0x34b10d[_0x2cc9f8['setTipoOperacionCodigo']]=_0x2cc9f8[_0x54fd4c(0x107)],_0x34b10d;},{}),_0x4f52a6=myCompany['setSeries'][_0x35653e(0x103)]((_0x11fd68,_0x4f0e49)=>{const _0x597c0c=_0x35653e;return _0x11fd68[_0x4f0e49['ID_SERIE']]=_0x4f0e49[_0x597c0c(0xe1)],_0x11fd68;},{}),_0x5ca5e2=_0x1aa363['map'](_0x4e223c=>{const _0x9e9171=_0x35653e,_0x1a0aa3=_0x4e223c['setOperationItems'][_0x9e9171(0x103)]((_0x151205,_0x3bd1de)=>{const _0x1aa5e5=_0x9e9171;return _0x151205+Number(_0x3bd1de[_0x1aa5e5(0x14a)]);},0x0),_0xa7b206=_0x2aaa7e[_0x4e223c[_0x9e9171(0x1a2)]]||_0x4e223c[_0x9e9171(0x1a2)],_0x201866=_0x4f52a6[_0x4e223c[_0x9e9171(0x116)]]||_0x4e223c[_0x9e9171(0x116)],_0x264eac=_0x305340[_0x4e223c[_0x9e9171(0x118)]]||_0x4e223c[_0x9e9171(0x118)];return{'setOperationType':_0xa7b206,'setOperationSeries':_0x201866+'-'+_0x4e223c[_0x9e9171(0x10a)],'setOperationCustomerName':_0x264eac,'setOperationDateTime':_0x4e223c['setOperationDateTime'],'setOperationDateExpiration':_0x4e223c['setOperationDateExpiration']||'','setOperationStatus':_0x4e223c[_0x9e9171(0xdb)]||_0x9e9171(0xda),'setOperationStatusColor':_0x4e223c[_0x9e9171(0x105)]||_0x9e9171(0x19a),'setOperationCurrency':_0x4e223c[_0x9e9171(0x167)],'setOperationTotal':_0x1a0aa3};});console[_0x35653e(0xd4)](_0x35653e(0xed),_0x5ca5e2);const _0x186d07=_0x1aa363['flatMap'](_0x5eb892=>_0x5eb892['setOperationItems'])['reduce']((_0xcf1ead,_0x45f4f8)=>{const _0x55dce6=_0x35653e,_0x36a93e=products[_0x55dce6(0x187)](_0xf6599c=>_0xf6599c['id']==_0x45f4f8[_0x55dce6(0x1a8)]),_0x470892=_0x36a93e?_0x36a93e['setDescripcion']:'Sin\x20descripción',_0x2674b2=Number(_0x45f4f8[_0x55dce6(0x14a)]),_0x1a8884=Number(_0x45f4f8[_0x55dce6(0x137)]),_0x29b02c=Number(_0x45f4f8[_0x55dce6(0x13a)]),_0x3fcfb5=_0x29b02c*_0x1a8884;return!_0xcf1ead[_0x470892]&&(_0xcf1ead[_0x470892]={'productName':_0x470892,'sales':0x0,'cost':0x0}),_0xcf1ead[_0x470892][_0x55dce6(0x19c)]+=_0x2674b2,_0xcf1ead[_0x470892]['cost']+=_0x3fcfb5,_0xcf1ead;},{}),_0x3ad92a=Object['values'](_0x186d07)[_0x35653e(0x1ab)](_0x496c7a=>({'productName':_0x496c7a['productName'],'sales':Math[_0x35653e(0x13e)](_0x496c7a[_0x35653e(0x19c)]*0x64)/0x64,'cost':Math[_0x35653e(0x13e)](_0x496c7a[_0x35653e(0x15a)]*0x64)/0x64,'profit':Math[_0x35653e(0x13e)]((_0x496c7a[_0x35653e(0x19c)]-_0x496c7a['cost'])*0x64)/0x64}));renderTable(_0x5ca5e2,currentPage,_0x35653e(0x16c)),renderTable(_0x3ad92a,currentPageProducts,'products');const _0x43c07d=_0x5ca5e2[_0x35653e(0x1ab)](_0x5eedca=>({'fechaISO':_0x5eedca[_0x35653e(0xf5)][_0x35653e(0x153)]('\x20')[0x0],'setTipoComprobante':_0x5eedca['setOperationType'],'setOperationCurrency':_0x5eedca[_0x35653e(0x167)],'Total':Math[_0x35653e(0x13e)](_0x5eedca[_0x35653e(0x11b)]*0x64)/0x64})),_0x5769fd=_0x43c07d[_0x35653e(0x103)]((_0x4a4006,_0x28a46e)=>{const _0x361978=_0x35653e,_0x51e455=_0x28a46e[_0x361978(0x11a)]+'|'+_0x28a46e[_0x361978(0xea)]+'|'+_0x28a46e['setOperationCurrency'];return!_0x4a4006[_0x51e455]&&(_0x4a4006[_0x51e455]={'fechaISO':_0x28a46e[_0x361978(0x11a)],'setTipoComprobante':_0x28a46e[_0x361978(0xea)],'setOperationCurrency':_0x28a46e[_0x361978(0x167)],'Total':0x0}),_0x4a4006[_0x51e455][_0x361978(0xf1)]+=_0x28a46e[_0x361978(0xf1)],_0x4a4006;},{});let _0x28485b=Object['values'](_0x5769fd)['map'](_0x9bac3b=>({'fechaISO':_0x9bac3b[_0x35653e(0x11a)],'setTipoComprobante':_0x9bac3b['setTipoComprobante']+'\x20('+_0x9bac3b[_0x35653e(0x167)]+')','Total':Math[_0x35653e(0x13e)](_0x9bac3b[_0x35653e(0xf1)]*0x64)/0x64}));const _0x5ab3cc=[...new Set(_0x28485b['map'](_0x17a5cd=>_0x17a5cd[_0x35653e(0xea)]))],_0xd462ad=Array[_0x35653e(0x11e)](new Set(_0x28485b['map'](_0x2c4739=>_0x2c4739[_0x35653e(0x11a)])))['sort']((_0x8e637e,_0x7dc3d8)=>new Date(_0x8e637e)-new Date(_0x7dc3d8));_0x28485b[_0x35653e(0xdd)]>0x0?generateFilterTransformChart({'containerId':_0x35653e(0xd5),'rawData':_0x28485b,'groupField':_0x35653e(0xea),'groupValues':_0x5ab3cc,'seriesType':_0x35653e(0xfe),'chartType':_0x35653e(0xfe),'colors':[_0x35653e(0x19a),_0x35653e(0x135)],'encode':{'x':'fechaISO','y':_0x35653e(0xf1),'label':[_0x35653e(0xea),_0x35653e(0xf1)],'itemName':'fechaISO','tooltip':[_0x35653e(0xf1)]},'xAxisConfig':{'type':_0x35653e(0x196),'data':_0xd462ad,'axisLabel':{'formatter':_0x4bd597=>{const _0xcd1778=_0x35653e,[_0x5b95df,_0x2d64cb,_0x37c808]=_0x4bd597[_0xcd1778(0x153)]('-');return _0x37c808+'/'+_0x2d64cb+'/'+_0x5b95df;}}},'title':_0x35653e(0x130),'width':_0x35653e(0x132),'height':_0x35653e(0x19d)}):salesChartContainer[_0x35653e(0x165)]='';const _0x530f18=_0x1aa363[_0x35653e(0xe8)](_0x594e79=>_0x594e79['setOperationItems']['map'](_0x352163=>{const _0x551e39=_0x35653e,_0x3e8c12=products[_0x551e39(0x187)](_0x5daab3=>_0x5daab3['id']==_0x352163[_0x551e39(0x1a8)]),_0x1e8701=_0x3e8c12?_0x3e8c12[_0x551e39(0x1a1)]:'',_0x3f6fd1=_0x3e8c12?_0x3e8c12['setDescripcion']:_0x551e39(0x13c),_0x42380e=_0x3f6fd1[_0x551e39(0xdd)]>0xf?_0x3f6fd1[_0x551e39(0x18d)](0x0,0xf)+'...':_0x3f6fd1,_0xe4c364=_0x594e79['setOperationCurrency'];return{'productKey':_0x1e8701+'-'+_0x42380e+'\x20('+_0xe4c364+')','setOperationDetailTotal':Number(_0x352163[_0x551e39(0x14a)])};})),_0x10a517=_0x530f18[_0x35653e(0x103)]((_0x3ca038,_0x5aa4d5)=>{const _0x300473=_0x35653e;return!_0x3ca038[_0x5aa4d5[_0x300473(0x188)]]&&(_0x3ca038[_0x5aa4d5[_0x300473(0x188)]]=0x0),_0x3ca038[_0x5aa4d5[_0x300473(0x188)]]+=_0x5aa4d5[_0x300473(0x14a)],_0x3ca038;},{}),_0x668a3=Object[_0x35653e(0x177)](_0x10a517)[_0x35653e(0x1ab)](([_0x3c4988,_0x1c6fe5])=>({'productName':_0x3c4988,'setOperationDetailTotal':Number((Math['round'](_0x1c6fe5*0x64)/0x64)[_0x35653e(0x14e)](0x2))}));_0x668a3[_0x35653e(0xdd)]>0x0?generatePieChart({'containerId':_0x35653e(0x17c),'data':_0x668a3,'nameField':'productName','valueField':_0x35653e(0x14a),'title':_0x35653e(0x182),'width':'500px','height':'500px'}):productPieChart[_0x35653e(0x165)]='';}catch(_0x5b3c47){ntfShow('Error\x20al\x20solicitar\x20reporte'),console[_0x35653e(0x139)](_0x5b3c47);}finally{hideLoadingModal();}}function renderTable(_0x2b7dd8,_0x215810=0x1,_0x219b5e='incomes'){const _0xb677e3=_0xd70ee;currentPage=_0x215810;const _0x35d44d=_0x219b5e===_0xb677e3(0x16c)?_0xb677e3(0x125):_0xb677e3(0x171),_0x3f775c=document[_0xb677e3(0x1a5)](_0x35d44d+_0xb677e3(0x122));_0x3f775c[_0xb677e3(0x165)]='';const _0x32cd9a=(_0x215810-0x1)*PER_PAGE,_0x23ee0e=_0x2b7dd8[_0xb677e3(0x178)](_0x32cd9a,_0x32cd9a+PER_PAGE);_0x23ee0e[_0xb677e3(0x161)](_0x21ee08=>{const _0x37a587=_0xb677e3,_0x8dcdab=document[_0x37a587(0x170)]('tr');if(_0x219b5e===_0x37a587(0x16c))_0x8dcdab[_0x37a587(0x165)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22text-align:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22span-table-custom\x20span-table-setTipoComprobante-'+_0x21ee08[_0x37a587(0x1a2)]+_0x37a587(0x15c)+_0x21ee08['setOperationType']+_0x37a587(0x113)+(_0x21ee08[_0x37a587(0x116)]||'')+_0x37a587(0xf3)+(_0x21ee08[_0x37a587(0x1a6)]||'')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22text-align:\x20center;\x22>'+_0x21ee08[_0x37a587(0xf5)]+_0x37a587(0xec)+(_0x21ee08['setOperationDateExpiration']||'')+_0x37a587(0x1a0)+_0x21ee08[_0x37a587(0x105)]+';\x20color:'+_0x21ee08[_0x37a587(0x105)]+_0x37a587(0x181)+_0x21ee08[_0x37a587(0xdb)]+_0x37a587(0xfb)+_0x21ee08['setOperationCurrency']+'\x20'+_0x21ee08[_0x37a587(0x11b)][_0x37a587(0x14e)](0x2)+_0x37a587(0x19f);else _0x219b5e==='products'&&(_0x8dcdab['innerHTML']=_0x37a587(0xd8)+_0x21ee08[_0x37a587(0x162)]+_0x37a587(0x124)+_0x21ee08[_0x37a587(0x19c)][_0x37a587(0x14e)](0x2)+_0x37a587(0x124)+_0x21ee08['cost']['toFixed'](0x2)+_0x37a587(0x124)+_0x21ee08[_0x37a587(0x143)][_0x37a587(0x14e)](0x2)+_0x37a587(0x117));_0x3f775c[_0x37a587(0x134)](_0x8dcdab);}),renderPagination(_0x2b7dd8,_0x215810,_0x219b5e);}function renderPagination(_0x3b2bb1,_0x24caa0,_0x350e6f=_0xd70ee(0x16c)){const _0x1f9f09=_0xd70ee,_0x2aa7a8=_0x350e6f===_0x1f9f09(0x16c)?document['querySelector'](_0x1f9f09(0x16e)):document[_0x1f9f09(0x1a5)]('#pagination-products');_0x2aa7a8[_0x1f9f09(0x165)]='';const _0x24ccca=Math[_0x1f9f09(0x19b)](_0x3b2bb1[_0x1f9f09(0xdd)]/PER_PAGE),_0x1e0e1a=document[_0x1f9f09(0x170)]('a');_0x1e0e1a['href']='#',_0x1e0e1a[_0x1f9f09(0x183)]=_0x1f9f09(0x197),_0x1e0e1a[_0x1f9f09(0x165)]='&laquo;\x20Anterior',_0x1e0e1a['onclick']=_0x15bf38=>{_0x15bf38['preventDefault'](),_0x24caa0>0x1&&renderTable(_0x3b2bb1,_0x24caa0-0x1,_0x350e6f);},_0x2aa7a8[_0x1f9f09(0x134)](_0x1e0e1a);for(let _0xa26eee=0x1;_0xa26eee<=_0x24ccca;_0xa26eee++){const _0x382fe1=document[_0x1f9f09(0x170)]('a');_0x382fe1[_0x1f9f09(0x186)]='#',_0x382fe1[_0x1f9f09(0x183)]=_0x1f9f09(0x160)+(_0xa26eee===_0x24caa0?_0x1f9f09(0x158):_0x1f9f09(0x12f)),_0x382fe1['textContent']=_0xa26eee,_0x382fe1[_0x1f9f09(0xe3)]=_0x1a0ea3=>{const _0x36c8ba=_0x1f9f09;_0x1a0ea3[_0x36c8ba(0xfa)](),renderTable(_0x3b2bb1,_0xa26eee,_0x350e6f);},_0x2aa7a8['appendChild'](_0x382fe1);}const _0x4f1e5b=document['createElement']('a');_0x4f1e5b[_0x1f9f09(0x186)]='#',_0x4f1e5b['className']='btn\x20btn-sm\x20btn-outline\x20ms-2',_0x4f1e5b[_0x1f9f09(0x165)]=_0x1f9f09(0x131),_0x4f1e5b[_0x1f9f09(0xe3)]=_0x7e291c=>{_0x7e291c['preventDefault'](),_0x24caa0<_0x24ccca&&renderTable(_0x3b2bb1,_0x24caa0+0x1,_0x350e6f);},_0x2aa7a8[_0x1f9f09(0x134)](_0x4f1e5b);}document[_0xd70ee(0x173)](_0xd70ee(0x166))[_0xd70ee(0x141)](_0xd70ee(0xe7),async()=>{const _0x3dc59e=_0xd70ee,_0x50e80d=document[_0x3dc59e(0x173)](_0x3dc59e(0x168))['value'],_0x27e1f0=document['getElementById']('filter-end')[_0x3dc59e(0x136)];if(!_0x50e80d||!_0x27e1f0)return alert(_0x3dc59e(0x18f));const _0x54ef4d=document[_0x3dc59e(0x173)](_0x3dc59e(0x15e)),_0x20dba5=bootstrap['Modal'][_0x3dc59e(0x13d)](_0x54ef4d);_0x20dba5[_0x3dc59e(0xdf)](),showLoadingModal();try{const _0x42d34f={'apiPOS_getIncome':0x1,'setToken':myCompany[_0x3dc59e(0x14b)],'dateFrom':_0x50e80d+_0x3dc59e(0x192),'dateTo':_0x27e1f0+_0x3dc59e(0x12b),'clientIds':[],'operationTypes':[]},_0x528788=await fetch(myCompany[_0x3dc59e(0x12c)],{'method':'POST','headers':{'Content-Type':_0x3dc59e(0x18e)},'body':JSON[_0x3dc59e(0x1a9)](_0x42d34f)}),{success:_0x37ec84,message:_0x56ef80}=await _0x528788[_0x3dc59e(0x157)]();if(!_0x37ec84)throw new Error(_0x56ef80);_0x56ef80[_0x3dc59e(0x16c)],await consultIncomeReport();}catch(_0x525027){ntfShow(_0x3dc59e(0x152)),console[_0x3dc59e(0x139)](_0x525027);}finally{hideLoadingModal();}}),window[_0xd70ee(0x12e)]=function(){const _0x5c3899=_0xd70ee,_0x3fb60b=0x3;loadLoginContent('./img/apiPOS.png'),setUserNameGet(),setEventBtnAccess();const _0x3ae3dd=document[_0x5c3899(0x1a5)](_0x5c3899(0x198));_0x3ae3dd&&_0x3ae3dd[_0x5c3899(0x141)](_0x5c3899(0xe7),function(){logoutReload(0x0,_0x3fb60b);}),document[_0x5c3899(0x173)](_0x5c3899(0xde))[_0x5c3899(0x141)](_0x5c3899(0x17e),async function(){const _0x49fe88=_0x5c3899,_0x151f3c=parseInt(this['value']);myCompany['setBranchDefault']=_0x151f3c;const _0x376034=await createCartStore('');await saveCompanyToIndexedDB(company,_0x376034),cargarAlmacenes(_0x151f3c),setTimeout(()=>{const _0xa0fbeb=_0x58e0;document[_0xa0fbeb(0x173)]('setWarehouseId')['dispatchEvent'](new Event(_0xa0fbeb(0x17e)));},0x64),cargarPisos(_0x151f3c),setTimeout(()=>{const _0xb66c17=_0x58e0;document[_0xb66c17(0x173)](_0xb66c17(0x129))[_0xb66c17(0x120)](new Event(_0xb66c17(0x17e)));},0x64),ntf_initNotifications(),fil_BranchesId=[],fil_BranchesId[_0x49fe88(0x154)](_0x151f3c),consultIncomeReport();}),loadCartAndSetTabCount(_0x3fb60b);};
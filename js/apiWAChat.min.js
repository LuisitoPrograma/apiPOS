/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 5.1.3
*/

const _0x30fc18=_0x3282;(function(_0x5f1c79,_0x1e6f9d){const _0x1f3379=_0x3282,_0x11c1ce=_0x5f1c79();while(!![]){try{const _0x36cf50=-parseInt(_0x1f3379(0x89))/0x1+-parseInt(_0x1f3379(0x88))/0x2*(parseInt(_0x1f3379(0x70))/0x3)+-parseInt(_0x1f3379(0x72))/0x4+parseInt(_0x1f3379(0x71))/0x5+parseInt(_0x1f3379(0x8b))/0x6+parseInt(_0x1f3379(0x7e))/0x7*(parseInt(_0x1f3379(0x8a))/0x8)+parseInt(_0x1f3379(0x92))/0x9;if(_0x36cf50===_0x1e6f9d)break;else _0x11c1ce['push'](_0x11c1ce['shift']());}catch(_0x3206b1){_0x11c1ce['push'](_0x11c1ce['shift']());}}}(_0x54e9,0xd82e8));const selectCredentialsApiWAChat=document[_0x30fc18(0xa4)](_0x30fc18(0x90)),loginPanel=document[_0x30fc18(0xa4)]('loginPanel'),chatPanel=document[_0x30fc18(0xa4)](_0x30fc18(0x6d)),qrImg=document[_0x30fc18(0xa4)](_0x30fc18(0xa0)),overlay=document['getElementById'](_0x30fc18(0x8f));function _0x54e9(){const _0xbc0f50=['setFloorId','console','setCredentialsApiWAChatStatus','7mBGKwR','table','click','setCredentialsApiWAChatSubdomain','warn','init','https://','info','json','bind','1048178LvQeLW','1119657nhAvkm','201560vSRaup','10113354jvxdjN','prototype','return\x20(function()\x20','setBranchDefault','qr-overlay','setCredentialsApiWAChat','error','4186521rsTYVP','visible','flex','WarehouseChangeComplete','none','visibility','toString','/qr','__proto__','setCredentialsApiWAChatPort','src','trace','apply','search','qr-img','value','setAuthToken','status','getElementById','includes','dispatchEvent','change','hidden','addEventListener','style','constructor','length','chatPanel','display','toLowerCase','3LgPqQS','8119765jvoSWR','5082600seuzda','setWarehouseId','ya\x20conectado','Credenciales\x20no\x20encontradas','exception','(((.+)+)+)+$','/wa/','reload','setBranchId'];_0x54e9=function(){return _0xbc0f50;};return _0x54e9();}let qrTimeout;const validSeconds=0xa;function showLogin(){const _0x46ea81=_0x30fc18;loginPanel[_0x46ea81(0xaa)][_0x46ea81(0x6e)]=_0x46ea81(0x94),chatPanel['style'][_0x46ea81(0x97)]=_0x46ea81(0xa8);}function showChat(){const _0x5e433b=_0x30fc18;loginPanel[_0x5e433b(0xaa)][_0x5e433b(0x6e)]=_0x5e433b(0x96),chatPanel['style']['visibility']=_0x5e433b(0x93);}function _0x3282(_0x396ad9,_0xb279af){const _0x85b2f8=_0x54e9();return _0x3282=function(_0x54d5ca,_0x144968){_0x54d5ca=_0x54d5ca-0x6b;let _0x311d8b=_0x85b2f8[_0x54d5ca];return _0x311d8b;},_0x3282(_0x396ad9,_0xb279af);}async function initQRApiWAChat(_0x5da55e,_0x1720aa){const _0x278ca4=_0x30fc18,_0x12d78e=(function(){let _0x2512b6=!![];return function(_0x75c3b3,_0x34d8e8){const _0x2edde5=_0x2512b6?function(){if(_0x34d8e8){const _0x8a3639=_0x34d8e8['apply'](_0x75c3b3,arguments);return _0x34d8e8=null,_0x8a3639;}}:function(){};return _0x2512b6=![],_0x2edde5;};}()),_0x2ea72c=_0x12d78e(this,function(){const _0x5b26eb=_0x3282;return _0x2ea72c[_0x5b26eb(0x98)]()[_0x5b26eb(0x9f)](_0x5b26eb(0x77))[_0x5b26eb(0x98)]()[_0x5b26eb(0x6b)](_0x2ea72c)[_0x5b26eb(0x9f)](_0x5b26eb(0x77));});_0x2ea72c();const _0x2038d9=(function(){let _0x2c034a=!![];return function(_0x1dd1e4,_0x259495){const _0x2c1693=_0x2c034a?function(){const _0x1a0af6=_0x3282;if(_0x259495){const _0x4fc61c=_0x259495[_0x1a0af6(0x9e)](_0x1dd1e4,arguments);return _0x259495=null,_0x4fc61c;}}:function(){};return _0x2c034a=![],_0x2c1693;};}()),_0x211934=_0x2038d9(this,function(){const _0x2b5e8e=_0x3282,_0x3d4cf9=function(){const _0x38ccce=_0x3282;let _0x39892d;try{_0x39892d=Function(_0x38ccce(0x8d)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x3d7274){_0x39892d=window;}return _0x39892d;},_0x40b914=_0x3d4cf9(),_0x559634=_0x40b914[_0x2b5e8e(0x7c)]=_0x40b914['console']||{},_0x3e3ac0=['log',_0x2b5e8e(0x82),_0x2b5e8e(0x85),_0x2b5e8e(0x91),_0x2b5e8e(0x76),_0x2b5e8e(0x7f),_0x2b5e8e(0x9d)];for(let _0x530ec9=0x0;_0x530ec9<_0x3e3ac0[_0x2b5e8e(0x6c)];_0x530ec9++){const _0x2a178c=_0x2038d9[_0x2b5e8e(0x6b)][_0x2b5e8e(0x8c)][_0x2b5e8e(0x87)](_0x2038d9),_0x18adcb=_0x3e3ac0[_0x530ec9],_0x1ac096=_0x559634[_0x18adcb]||_0x2a178c;_0x2a178c[_0x2b5e8e(0x9a)]=_0x2038d9[_0x2b5e8e(0x87)](_0x2038d9),_0x2a178c['toString']=_0x1ac096[_0x2b5e8e(0x98)][_0x2b5e8e(0x87)](_0x1ac096),_0x559634[_0x18adcb]=_0x2a178c;}});_0x211934();const _0x5b3dc6=selectCredentialsApiWAChat[_0x278ca4(0xa1)],_0x477c61=getCredentialsApiWAChat(_0x5b3dc6);if(!_0x477c61){ntfShow(_0x278ca4(0x75));return;}const _0x390933=_0x477c61[_0x278ca4(0x81)],_0x3a4737=_0x477c61[_0x278ca4(0x9b)];if(_0x5da55e===_0x278ca4(0x6e))clearTimeout(qrTimeout),overlay[_0x278ca4(0xaa)][_0x278ca4(0x6e)]='none',qrImg[_0x278ca4(0x9c)]=_0x1720aa,qrTimeout=setTimeout(async()=>{const _0x197c6a=_0x278ca4;try{const _0x42a2c9=await fetch(_0x197c6a(0x84)+_0x390933+'/wa/'+_0x3a4737+_0x197c6a(0x99),{'headers':{'x-auth-token':myCompany[_0x197c6a(0xa2)]}}),_0xab0044=await _0x42a2c9[_0x197c6a(0x86)]();_0xab0044['status']&&_0xab0044['status']['toLowerCase']()[_0x197c6a(0xa5)]('ya\x20conectado')?(showChat(),_0x477c61[_0x197c6a(0x7d)]=0x1):(overlay[_0x197c6a(0xaa)][_0x197c6a(0x6e)]='flex',_0x477c61['setCredentialsApiWAChatStatus']=0x0);const _0x6a7f1a=await createCartStore('');await saveCompanyToIndexedDB(company,_0x6a7f1a);}catch(_0xf18f53){console['error']('Error\x20al\x20validar\x20estado\x20despuÃ©s\x20de\x20expirar\x20QR:',_0xf18f53),overlay[_0x197c6a(0xaa)][_0x197c6a(0x6e)]=_0x197c6a(0x94);}},validSeconds*0x3e8);else{if(_0x5da55e===_0x278ca4(0x83))try{const _0x4ee9ab=await fetch(_0x278ca4(0x84)+_0x390933+_0x278ca4(0x78)+_0x3a4737+_0x278ca4(0x99),{'headers':{'x-auth-token':myCompany['setAuthToken']}}),_0x1beab6=await _0x4ee9ab[_0x278ca4(0x86)]();if(_0x1beab6['status']&&_0x1beab6[_0x278ca4(0xa3)][_0x278ca4(0x6f)]()[_0x278ca4(0xa5)](_0x278ca4(0x74)))showChat(),_0x477c61[_0x278ca4(0x7d)]=0x1;else _0x1beab6['qr']&&(showLogin(),await initQRApiWAChat('display',_0x1beab6['qr']),_0x477c61['setCredentialsApiWAChatStatus']=0x0);const _0x36d915=await createCartStore('');await saveCompanyToIndexedDB(company,_0x36d915);}catch(_0x5e2890){console[_0x278ca4(0x91)](_0x5e2890);}}}overlay[_0x30fc18(0xa9)](_0x30fc18(0x80),()=>initQRApiWAChat(_0x30fc18(0x83))),window['onload']=function(){const _0x5cd914=_0x30fc18,_0x414eb9=0x4;loadLoginContent(),setUserNameGet(),setEventBtnAccess();const _0x3a45b3=document['querySelector']('.btn-logout');_0x3a45b3&&_0x3a45b3[_0x5cd914(0xa9)](_0x5cd914(0x80),function(){logoutReload(0x0,_0x414eb9);}),document['getElementById'](_0x5cd914(0x90))[_0x5cd914(0xa9)](_0x5cd914(0xa7),async function(){const _0x5ae8ce=_0x5cd914;saveCredentialsApiWAChatInCompany();const _0x43612=await createCartStore('');await saveCompanyToIndexedDB(company,_0x43612),location[_0x5ae8ce(0x79)]();}),document[_0x5cd914(0xa4)](_0x5cd914(0x7a))[_0x5cd914(0xa9)](_0x5cd914(0xa7),async function(){const _0x22271b=_0x5cd914,_0x4ffd46=parseInt(this[_0x22271b(0xa1)]);myCompany[_0x22271b(0x8e)]=_0x4ffd46,saveCredentialsApiWAChatInCompany();const _0xe4351=await createCartStore('');await saveCompanyToIndexedDB(company,_0xe4351),await cargarPisos(_0x4ffd46),await waitForEvent(_0x22271b(0x7b),'EnvironmentChangeComplete'),await cargarAlmacenes(_0x4ffd46),await waitForEvent(_0x22271b(0x73),_0x22271b(0x95)),document['dispatchEvent'](new Event('BranchChangeComplete')),ntf_initNotifications();}),document['getElementById'](_0x5cd914(0x73))[_0x5cd914(0xa9)](_0x5cd914(0xa7),async function(){const _0xf999ae=_0x5cd914;document[_0xf999ae(0xa6)](new Event('WarehouseChangeComplete'));}),document['getElementById'](_0x5cd914(0x7b))[_0x5cd914(0xa9)](_0x5cd914(0xa7),async function(_0x3cfd6f){const _0x4d7037=_0x5cd914;document[_0x4d7037(0xa6)](new Event('EnvironmentChangeComplete'));}),loadCartAndSetTabCount(_0x414eb9);};
/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 4.3.8
*/

function _0x4751(_0x49d998,_0x1b20bf){const _0x38b6fc=_0x1dd8();return _0x4751=function(_0xbcbbb9,_0x5eb01d){_0xbcbbb9=_0xbcbbb9-0x1a4;let _0x2f3e4e=_0x38b6fc[_0xbcbbb9];return _0x2f3e4e;},_0x4751(_0x49d998,_0x1b20bf);}const _0x14e8e7=_0x4751;(function(_0x17e91f,_0x3d062c){const _0x2b0245=_0x4751,_0x2854cd=_0x17e91f();while(!![]){try{const _0x3d27db=-parseInt(_0x2b0245(0x1d0))/0x1+parseInt(_0x2b0245(0x1ad))/0x2+-parseInt(_0x2b0245(0x1a8))/0x3*(-parseInt(_0x2b0245(0x1b7))/0x4)+-parseInt(_0x2b0245(0x1b5))/0x5*(parseInt(_0x2b0245(0x1ab))/0x6)+parseInt(_0x2b0245(0x1dc))/0x7*(-parseInt(_0x2b0245(0x1e1))/0x8)+-parseInt(_0x2b0245(0x1c6))/0x9+parseInt(_0x2b0245(0x1d5))/0xa;if(_0x3d27db===_0x3d062c)break;else _0x2854cd['push'](_0x2854cd['shift']());}catch(_0x3a481f){_0x2854cd['push'](_0x2854cd['shift']());}}}(_0x1dd8,0xcab2e));function _0x1dd8(){const _0x383c06=['flex','toLowerCase','setWarehouseId','1022158qMmjFZ','/qr','EnvironmentChangeComplete','status','json','25764900clXWod','value','warn','constructor','visibility','display','Error\x20al\x20validar\x20estado\x20despu√©s\x20de\x20expirar\x20QR:','77qUFiaX','info','setCredentialsApiWAChatSubdomain','setFloorId','__proto__','597224fomrEn','loginPanel','setCredentialsApiWAChatStatus','setBranchDefault','BranchChangeComplete','setAuthToken','hidden','{}.constructor(\x22return\x20this\x22)(\x20)','bind','init','(((.+)+)+)+$','./img/apiPOS.png','https://','153033YxqCtv','qr-img','addEventListener','225894HnZPrR','apply','1127472QcIkEP','console','toString','setCredentialsApiWAChat','search','return\x20(function()\x20','getElementById','WarehouseChangeComplete','55DiZSSB','error','120pCbKxh','change','prototype','includes','exception','ya\x20conectado','length','style','/wa/','trace','qr-overlay','onload','none','visible','src','14245398fSBMKC','log','dispatchEvent','click','setBranchId','table','Credenciales\x20no\x20encontradas'];_0x1dd8=function(){return _0x383c06;};return _0x1dd8();}const selectCredentialsApiWAChat=document['getElementById'](_0x14e8e7(0x1b0)),loginPanel=document[_0x14e8e7(0x1b3)](_0x14e8e7(0x1e2)),chatPanel=document[_0x14e8e7(0x1b3)]('chatPanel'),qrImg=document['getElementById'](_0x14e8e7(0x1a9)),overlay=document[_0x14e8e7(0x1b3)](_0x14e8e7(0x1c1));let qrTimeout;const validSeconds=0xa;function showLogin(){const _0x2a93d2=_0x14e8e7;loginPanel[_0x2a93d2(0x1be)]['display']=_0x2a93d2(0x1cd),chatPanel[_0x2a93d2(0x1be)]['visibility']=_0x2a93d2(0x1e7);}function showChat(){const _0x44a460=_0x14e8e7;loginPanel[_0x44a460(0x1be)][_0x44a460(0x1da)]=_0x44a460(0x1c3),chatPanel['style'][_0x44a460(0x1d9)]=_0x44a460(0x1c4);}async function initQRApiWAChat(_0x2a77c7,_0x2a44c5){const _0xfd0041=_0x14e8e7,_0x13859e=(function(){let _0x5d45ea=!![];return function(_0x13881d,_0x269eda){const _0x35207f=_0x5d45ea?function(){const _0x3ee259=_0x4751;if(_0x269eda){const _0x3e66f3=_0x269eda[_0x3ee259(0x1ac)](_0x13881d,arguments);return _0x269eda=null,_0x3e66f3;}}:function(){};return _0x5d45ea=![],_0x35207f;};}()),_0xc6b98a=_0x13859e(this,function(){const _0xb8927c=_0x4751;return _0xc6b98a[_0xb8927c(0x1af)]()[_0xb8927c(0x1b1)](_0xb8927c(0x1a5))[_0xb8927c(0x1af)]()[_0xb8927c(0x1d8)](_0xc6b98a)[_0xb8927c(0x1b1)](_0xb8927c(0x1a5));});_0xc6b98a();const _0x50f2cf=(function(){let _0x170be8=!![];return function(_0x20d88d,_0xf06401){const _0xef5587=_0x170be8?function(){const _0x56cab7=_0x4751;if(_0xf06401){const _0x4d8480=_0xf06401[_0x56cab7(0x1ac)](_0x20d88d,arguments);return _0xf06401=null,_0x4d8480;}}:function(){};return _0x170be8=![],_0xef5587;};}()),_0x21ca92=_0x50f2cf(this,function(){const _0x2c9e9a=_0x4751;let _0x1f4744;try{const _0x4a402d=Function(_0x2c9e9a(0x1b2)+_0x2c9e9a(0x1e8)+');');_0x1f4744=_0x4a402d();}catch(_0x5be2a6){_0x1f4744=window;}const _0x120e9c=_0x1f4744[_0x2c9e9a(0x1ae)]=_0x1f4744[_0x2c9e9a(0x1ae)]||{},_0x18ec0a=[_0x2c9e9a(0x1c7),_0x2c9e9a(0x1d7),_0x2c9e9a(0x1dd),_0x2c9e9a(0x1b6),_0x2c9e9a(0x1bb),_0x2c9e9a(0x1cb),_0x2c9e9a(0x1c0)];for(let _0x13b547=0x0;_0x13b547<_0x18ec0a[_0x2c9e9a(0x1bd)];_0x13b547++){const _0x5de774=_0x50f2cf[_0x2c9e9a(0x1d8)][_0x2c9e9a(0x1b9)]['bind'](_0x50f2cf),_0x2a8904=_0x18ec0a[_0x13b547],_0x5b279f=_0x120e9c[_0x2a8904]||_0x5de774;_0x5de774[_0x2c9e9a(0x1e0)]=_0x50f2cf[_0x2c9e9a(0x1e9)](_0x50f2cf),_0x5de774[_0x2c9e9a(0x1af)]=_0x5b279f['toString'][_0x2c9e9a(0x1e9)](_0x5b279f),_0x120e9c[_0x2a8904]=_0x5de774;}});_0x21ca92();const _0x4bcca0=selectCredentialsApiWAChat[_0xfd0041(0x1d6)],_0xf24251=getCredentialsApiWAChat(_0x4bcca0);if(!_0xf24251){ntfShow(_0xfd0041(0x1cc));return;}const _0x561d2a=_0xf24251[_0xfd0041(0x1de)],_0x2eb537=_0xf24251['setCredentialsApiWAChatPort'];if(_0x2a77c7==='display')clearTimeout(qrTimeout),overlay['style'][_0xfd0041(0x1da)]='none',qrImg[_0xfd0041(0x1c5)]=_0x2a44c5,qrTimeout=setTimeout(async()=>{const _0x34407b=_0xfd0041;try{const _0x4149d9=await fetch(_0x34407b(0x1a7)+_0x561d2a+'/wa/'+_0x2eb537+'/qr',{'headers':{'x-auth-token':myCompany[_0x34407b(0x1e6)]}}),_0x49ae90=await _0x4149d9['json']();_0x49ae90[_0x34407b(0x1d3)]&&_0x49ae90[_0x34407b(0x1d3)][_0x34407b(0x1ce)]()[_0x34407b(0x1ba)](_0x34407b(0x1bc))?(showChat(),_0xf24251[_0x34407b(0x1e3)]=0x1):(overlay[_0x34407b(0x1be)][_0x34407b(0x1da)]=_0x34407b(0x1cd),_0xf24251[_0x34407b(0x1e3)]=0x0);const _0x21f70b=await createCartStore('');await saveCompanyToIndexedDB(company,_0x21f70b);}catch(_0x37127b){console[_0x34407b(0x1b6)](_0x34407b(0x1db),_0x37127b),overlay[_0x34407b(0x1be)][_0x34407b(0x1da)]=_0x34407b(0x1cd);}},validSeconds*0x3e8);else{if(_0x2a77c7===_0xfd0041(0x1a4))try{const _0x11ebf7=await fetch(_0xfd0041(0x1a7)+_0x561d2a+_0xfd0041(0x1bf)+_0x2eb537+_0xfd0041(0x1d1),{'headers':{'x-auth-token':myCompany[_0xfd0041(0x1e6)]}}),_0x459237=await _0x11ebf7[_0xfd0041(0x1d4)]();if(_0x459237[_0xfd0041(0x1d3)]&&_0x459237['status'][_0xfd0041(0x1ce)]()[_0xfd0041(0x1ba)](_0xfd0041(0x1bc)))showChat(),_0xf24251[_0xfd0041(0x1e3)]=0x1;else _0x459237['qr']&&(showLogin(),await initQRApiWAChat(_0xfd0041(0x1da),_0x459237['qr']),_0xf24251[_0xfd0041(0x1e3)]=0x0);const _0x216292=await createCartStore('');await saveCompanyToIndexedDB(company,_0x216292);}catch(_0x16dbef){console[_0xfd0041(0x1b6)](_0x16dbef);}}}overlay[_0x14e8e7(0x1aa)]('click',()=>initQRApiWAChat(_0x14e8e7(0x1a4))),window[_0x14e8e7(0x1c2)]=function(){const _0x58244c=_0x14e8e7,_0x1c0c2c=0x4;loadLoginContent(_0x58244c(0x1a6)),setUserNameGet(),setEventBtnAccess();const _0x420765=document['querySelector']('.btn-logout');_0x420765&&_0x420765[_0x58244c(0x1aa)](_0x58244c(0x1c9),function(){logoutReload(0x0,_0x1c0c2c);}),document['getElementById'](_0x58244c(0x1ca))[_0x58244c(0x1aa)]('change',async function(){const _0x74983a=_0x58244c,_0x4b6cc1=parseInt(this[_0x74983a(0x1d6)]);myCompany[_0x74983a(0x1e4)]=_0x4b6cc1,saveCredentialsApiWAChatInCompany();const _0x5c5e0e=await createCartStore('');await saveCompanyToIndexedDB(company,_0x5c5e0e),await cargarPisos(_0x4b6cc1),await waitForEvent(_0x74983a(0x1df),_0x74983a(0x1d2)),await cargarAlmacenes(_0x4b6cc1),await waitForEvent(_0x74983a(0x1cf),_0x74983a(0x1b4)),document[_0x74983a(0x1c8)](new Event(_0x74983a(0x1e5))),ntf_initNotifications();}),document[_0x58244c(0x1b3)]('setWarehouseId')[_0x58244c(0x1aa)](_0x58244c(0x1b8),async function(){const _0x38939f=_0x58244c;document[_0x38939f(0x1c8)](new Event(_0x38939f(0x1b4)));}),document[_0x58244c(0x1b3)](_0x58244c(0x1df))['addEventListener'](_0x58244c(0x1b8),async function(_0x63c8f9){const _0x2d59ff=_0x58244c;document[_0x2d59ff(0x1c8)](new Event(_0x2d59ff(0x1d2)));}),loadCartAndSetTabCount(_0x1c0c2c);};
/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 5.0.7
*/

const _0x3e3e0a=_0x1362;(function(_0x2c1aec,_0xc7ddeb){const _0x21053d=_0x1362,_0x3dea01=_0x2c1aec();while(!![]){try{const _0x522428=parseInt(_0x21053d(0x1f9))/0x1*(-parseInt(_0x21053d(0x1e0))/0x2)+parseInt(_0x21053d(0x1d9))/0x3+parseInt(_0x21053d(0x1e3))/0x4*(-parseInt(_0x21053d(0x20d))/0x5)+parseInt(_0x21053d(0x1e2))/0x6+parseInt(_0x21053d(0x1ec))/0x7+-parseInt(_0x21053d(0x1de))/0x8+-parseInt(_0x21053d(0x1f1))/0x9*(-parseInt(_0x21053d(0x211))/0xa);if(_0x522428===_0xc7ddeb)break;else _0x3dea01['push'](_0x3dea01['shift']());}catch(_0x2d2da2){_0x3dea01['push'](_0x3dea01['shift']());}}}(_0x3fca,0xe2451));function _0x3fca(){const _0x5333df=['display','/qr','setAuthToken','4159841DnsNRp','BranchChangeComplete','log','constructor','search','3681srwqay','exception','json','EnvironmentChangeComplete','apply','dispatchEvent','loginPanel','setBranchId','1wjBIFJ','setBranchDefault','https://','none','console','(((.+)+)+)+$','style','qr-img','querySelector','change','includes','qr-overlay','bind','click','status','trace','hidden','setFloorId','table','Credenciales\x20no\x20encontradas','220kGIDYu','setWarehouseId','{}.constructor(\x22return\x20this\x22)(\x20)','toLowerCase','41430nHHhlC','init','__proto__','setCredentialsApiWAChat','warn','visible','value','length','visibility','info','error','toString','1680618iineax','prototype','/wa/','flex','.btn-logout','579144msWiyM','./img/apiPOS.png','2833304yPjlAU','setCredentialsApiWAChatStatus','5632068XqaNDs','124708uoTRfD','addEventListener','return\x20(function()\x20','getElementById','ya\x20conectado','src'];_0x3fca=function(){return _0x5333df;};return _0x3fca();}const selectCredentialsApiWAChat=document[_0x3e3e0a(0x1e6)](_0x3e3e0a(0x214)),loginPanel=document['getElementById'](_0x3e3e0a(0x1f7)),chatPanel=document[_0x3e3e0a(0x1e6)]('chatPanel'),qrImg=document[_0x3e3e0a(0x1e6)](_0x3e3e0a(0x200)),overlay=document[_0x3e3e0a(0x1e6)](_0x3e3e0a(0x204));let qrTimeout;const validSeconds=0xa;function _0x1362(_0x478d25,_0x9fcd2d){const _0x12189f=_0x3fca();return _0x1362=function(_0x106c29,_0x1e0cc5){_0x106c29=_0x106c29-0x1d5;let _0x38f917=_0x12189f[_0x106c29];return _0x38f917;},_0x1362(_0x478d25,_0x9fcd2d);}function showLogin(){const _0x2b8fc3=_0x3e3e0a;loginPanel[_0x2b8fc3(0x1ff)]['display']=_0x2b8fc3(0x1dc),chatPanel[_0x2b8fc3(0x1ff)]['visibility']=_0x2b8fc3(0x209);}function showChat(){const _0x1fa362=_0x3e3e0a;loginPanel[_0x1fa362(0x1ff)][_0x1fa362(0x1e9)]=_0x1fa362(0x1fc),chatPanel[_0x1fa362(0x1ff)][_0x1fa362(0x1d5)]=_0x1fa362(0x216);}async function initQRApiWAChat(_0x4ce7cd,_0x3fef1c){const _0x54c0c7=_0x3e3e0a,_0x69101d=(function(){let _0xb08e7e=!![];return function(_0x306a46,_0x42f006){const _0x4664b8=_0xb08e7e?function(){const _0x5987db=_0x1362;if(_0x42f006){const _0x5e16c4=_0x42f006[_0x5987db(0x1f5)](_0x306a46,arguments);return _0x42f006=null,_0x5e16c4;}}:function(){};return _0xb08e7e=![],_0x4664b8;};}()),_0x2770b1=_0x69101d(this,function(){const _0xe11d77=_0x1362;return _0x2770b1[_0xe11d77(0x1d8)]()[_0xe11d77(0x1f0)]('(((.+)+)+)+$')[_0xe11d77(0x1d8)]()[_0xe11d77(0x1ef)](_0x2770b1)[_0xe11d77(0x1f0)](_0xe11d77(0x1fe));});_0x2770b1();const _0x440ea4=(function(){let _0x3adc72=!![];return function(_0x3526dc,_0x2a34b3){const _0x22b875=_0x3adc72?function(){const _0x52a506=_0x1362;if(_0x2a34b3){const _0x5c8820=_0x2a34b3[_0x52a506(0x1f5)](_0x3526dc,arguments);return _0x2a34b3=null,_0x5c8820;}}:function(){};return _0x3adc72=![],_0x22b875;};}()),_0x51bec0=_0x440ea4(this,function(){const _0x4341c2=_0x1362,_0xd3de11=function(){const _0x21f017=_0x1362;let _0x4b6add;try{_0x4b6add=Function(_0x21f017(0x1e5)+_0x21f017(0x20f)+');')();}catch(_0x111847){_0x4b6add=window;}return _0x4b6add;},_0x4759e6=_0xd3de11(),_0x3dba67=_0x4759e6[_0x4341c2(0x1fd)]=_0x4759e6[_0x4341c2(0x1fd)]||{},_0x42a28f=[_0x4341c2(0x1ee),_0x4341c2(0x215),_0x4341c2(0x1d6),_0x4341c2(0x1d7),_0x4341c2(0x1f2),_0x4341c2(0x20b),_0x4341c2(0x208)];for(let _0x4e2682=0x0;_0x4e2682<_0x42a28f[_0x4341c2(0x218)];_0x4e2682++){const _0x23bf36=_0x440ea4['constructor'][_0x4341c2(0x1da)][_0x4341c2(0x205)](_0x440ea4),_0x2740aa=_0x42a28f[_0x4e2682],_0x37bc51=_0x3dba67[_0x2740aa]||_0x23bf36;_0x23bf36[_0x4341c2(0x213)]=_0x440ea4[_0x4341c2(0x205)](_0x440ea4),_0x23bf36['toString']=_0x37bc51[_0x4341c2(0x1d8)][_0x4341c2(0x205)](_0x37bc51),_0x3dba67[_0x2740aa]=_0x23bf36;}});_0x51bec0();const _0x462571=selectCredentialsApiWAChat[_0x54c0c7(0x217)],_0x3cb00b=getCredentialsApiWAChat(_0x462571);if(!_0x3cb00b){ntfShow(_0x54c0c7(0x20c));return;}const _0x5b1733=_0x3cb00b['setCredentialsApiWAChatSubdomain'],_0x5c05b3=_0x3cb00b['setCredentialsApiWAChatPort'];if(_0x4ce7cd==='display')clearTimeout(qrTimeout),overlay['style'][_0x54c0c7(0x1e9)]=_0x54c0c7(0x1fc),qrImg[_0x54c0c7(0x1e8)]=_0x3fef1c,qrTimeout=setTimeout(async()=>{const _0x4f7f76=_0x54c0c7;try{const _0x447951=await fetch('https://'+_0x5b1733+_0x4f7f76(0x1db)+_0x5c05b3+'/qr',{'headers':{'x-auth-token':myCompany[_0x4f7f76(0x1eb)]}}),_0xa2fb9d=await _0x447951[_0x4f7f76(0x1f3)]();_0xa2fb9d['status']&&_0xa2fb9d[_0x4f7f76(0x207)][_0x4f7f76(0x210)]()[_0x4f7f76(0x203)](_0x4f7f76(0x1e7))?(showChat(),_0x3cb00b['setCredentialsApiWAChatStatus']=0x1):(overlay['style'][_0x4f7f76(0x1e9)]=_0x4f7f76(0x1dc),_0x3cb00b[_0x4f7f76(0x1e1)]=0x0);const _0x3e672f=await createCartStore('');await saveCompanyToIndexedDB(company,_0x3e672f);}catch(_0x557f7f){console[_0x4f7f76(0x1d7)]('Error\x20al\x20validar\x20estado\x20despuÃ©s\x20de\x20expirar\x20QR:',_0x557f7f),overlay[_0x4f7f76(0x1ff)][_0x4f7f76(0x1e9)]=_0x4f7f76(0x1dc);}},validSeconds*0x3e8);else{if(_0x4ce7cd===_0x54c0c7(0x212))try{const _0x4cece1=await fetch(_0x54c0c7(0x1fb)+_0x5b1733+'/wa/'+_0x5c05b3+_0x54c0c7(0x1ea),{'headers':{'x-auth-token':myCompany[_0x54c0c7(0x1eb)]}}),_0x28ba40=await _0x4cece1[_0x54c0c7(0x1f3)]();if(_0x28ba40['status']&&_0x28ba40[_0x54c0c7(0x207)][_0x54c0c7(0x210)]()[_0x54c0c7(0x203)](_0x54c0c7(0x1e7)))showChat(),_0x3cb00b[_0x54c0c7(0x1e1)]=0x1;else _0x28ba40['qr']&&(showLogin(),await initQRApiWAChat(_0x54c0c7(0x1e9),_0x28ba40['qr']),_0x3cb00b['setCredentialsApiWAChatStatus']=0x0);const _0x2671f4=await createCartStore('');await saveCompanyToIndexedDB(company,_0x2671f4);}catch(_0x2dbb22){console[_0x54c0c7(0x1d7)](_0x2dbb22);}}}overlay[_0x3e3e0a(0x1e4)]('click',()=>initQRApiWAChat(_0x3e3e0a(0x212))),window['onload']=function(){const _0x5f4c46=_0x3e3e0a,_0xe267b6=0x4;loadLoginContent(_0x5f4c46(0x1df)),setUserNameGet(),setEventBtnAccess();const _0x44c247=document[_0x5f4c46(0x201)](_0x5f4c46(0x1dd));_0x44c247&&_0x44c247[_0x5f4c46(0x1e4)](_0x5f4c46(0x206),function(){logoutReload(0x0,_0xe267b6);}),document[_0x5f4c46(0x1e6)](_0x5f4c46(0x214))[_0x5f4c46(0x1e4)](_0x5f4c46(0x202),async function(){saveCredentialsApiWAChatInCompany();const _0x1a4618=await createCartStore('');await saveCompanyToIndexedDB(company,_0x1a4618),location['reload']();}),document[_0x5f4c46(0x1e6)](_0x5f4c46(0x1f8))['addEventListener'](_0x5f4c46(0x202),async function(){const _0x16e2c1=_0x5f4c46,_0x5a6612=parseInt(this[_0x16e2c1(0x217)]);myCompany[_0x16e2c1(0x1fa)]=_0x5a6612,saveCredentialsApiWAChatInCompany();const _0x1c6227=await createCartStore('');await saveCompanyToIndexedDB(company,_0x1c6227),await cargarPisos(_0x5a6612),await waitForEvent(_0x16e2c1(0x20a),'EnvironmentChangeComplete'),await cargarAlmacenes(_0x5a6612),await waitForEvent('setWarehouseId','WarehouseChangeComplete'),document['dispatchEvent'](new Event(_0x16e2c1(0x1ed))),ntf_initNotifications();}),document[_0x5f4c46(0x1e6)](_0x5f4c46(0x20e))[_0x5f4c46(0x1e4)]('change',async function(){const _0xe2b5b9=_0x5f4c46;document[_0xe2b5b9(0x1f6)](new Event('WarehouseChangeComplete'));}),document[_0x5f4c46(0x1e6)](_0x5f4c46(0x20a))[_0x5f4c46(0x1e4)](_0x5f4c46(0x202),async function(_0x154c2c){const _0x47273e=_0x5f4c46;document[_0x47273e(0x1f6)](new Event(_0x47273e(0x1f4)));}),loadCartAndSetTabCount(_0xe267b6);};
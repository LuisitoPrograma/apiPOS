/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 4.0.7
*/

const _0x4620aa=_0x565f;(function(_0x70068d,_0x240576){const _0x599d45=_0x565f,_0x50d652=_0x70068d();while(!![]){try{const _0x4c7e68=-parseInt(_0x599d45(0x136))/0x1*(-parseInt(_0x599d45(0x78))/0x2)+parseInt(_0x599d45(0xfe))/0x3+-parseInt(_0x599d45(0xd9))/0x4*(-parseInt(_0x599d45(0xa7))/0x5)+parseInt(_0x599d45(0x95))/0x6*(-parseInt(_0x599d45(0x7f))/0x7)+-parseInt(_0x599d45(0xa0))/0x8+-parseInt(_0x599d45(0x13e))/0x9+parseInt(_0x599d45(0x79))/0xa;if(_0x4c7e68===_0x240576)break;else _0x50d652['push'](_0x50d652['shift']());}catch(_0x642e6a){_0x50d652['push'](_0x50d652['shift']());}}}(_0x3248,0xe20a7));const _0x43e36b=(function(){let _0x44c72f=!![];return function(_0x4331aa,_0x3f3f5a){const _0x33f13f=_0x44c72f?function(){const _0x2b1e38=_0x565f;if(_0x3f3f5a){const _0x373484=_0x3f3f5a[_0x2b1e38(0xa1)](_0x4331aa,arguments);return _0x3f3f5a=null,_0x373484;}}:function(){};return _0x44c72f=![],_0x33f13f;};}()),_0x1aac6b=_0x43e36b(this,function(){const _0x32e7cc=_0x565f;return _0x1aac6b['toString']()['search'](_0x32e7cc(0x7b))[_0x32e7cc(0xb0)]()[_0x32e7cc(0x85)](_0x1aac6b)[_0x32e7cc(0xd6)]('(((.+)+)+)+$');});_0x1aac6b();const _0x4370ef=(function(){let _0x2ba68b=!![];return function(_0x132026,_0x136c64){const _0x10ea23=_0x2ba68b?function(){const _0x51e381=_0x565f;if(_0x136c64){const _0x465fef=_0x136c64[_0x51e381(0xa1)](_0x132026,arguments);return _0x136c64=null,_0x465fef;}}:function(){};return _0x2ba68b=![],_0x10ea23;};}()),_0x1692bb=_0x4370ef(this,function(){const _0x396acc=_0x565f,_0x3d5e73=function(){const _0x10f1b5=_0x565f;let _0x1a47e5;try{_0x1a47e5=Function(_0x10f1b5(0x83)+_0x10f1b5(0x88)+');')();}catch(_0x369b2c){_0x1a47e5=window;}return _0x1a47e5;},_0x58728b=_0x3d5e73(),_0x266151=_0x58728b[_0x396acc(0xd7)]=_0x58728b[_0x396acc(0xd7)]||{},_0x3fddf3=['log',_0x396acc(0x12f),_0x396acc(0xfb),_0x396acc(0xbe),_0x396acc(0x10d),_0x396acc(0xcb),'trace'];for(let _0x18bb1e=0x0;_0x18bb1e<_0x3fddf3[_0x396acc(0x113)];_0x18bb1e++){const _0x4934f2=_0x4370ef[_0x396acc(0x85)][_0x396acc(0x10b)]['bind'](_0x4370ef),_0x3934ed=_0x3fddf3[_0x18bb1e],_0x22077a=_0x266151[_0x3934ed]||_0x4934f2;_0x4934f2[_0x396acc(0x7d)]=_0x4370ef[_0x396acc(0x103)](_0x4370ef),_0x4934f2[_0x396acc(0xb0)]=_0x22077a[_0x396acc(0xb0)][_0x396acc(0x103)](_0x22077a),_0x266151[_0x3934ed]=_0x4934f2;}});_0x1692bb();let arrayIncomes;const PER_PAGE=0x14;let currentPage=0x1,currentPageProducts=0x1;const fil_init_dates=document['getElementById'](_0x4620aa(0xbd)),label=document[_0x4620aa(0x140)](_0x4620aa(0x8b)),options=document[_0x4620aa(0x140)](_0x4620aa(0x115)),salesChartContainer=document[_0x4620aa(0x140)]('salesChartContainer'),productPieChart=document[_0x4620aa(0x140)](_0x4620aa(0xac));let fil_date_start='',fil_date_end='',fil_CustomersId=[],fil_OperationsType=[],fil_BranchesId=[],fil_OperationsId=[];function generateFilterTransformChart(_0x70fecd){const _0x4a25d9=_0x4620aa,{containerId:_0x594264,rawData:_0xff836d,groupField:_0xe92669,groupValues:_0x151f6d,seriesType:seriesType=_0x4a25d9(0xf8),chartType:chartType=seriesType,encode:_0x5026d6,title:title='',colors:colors=[],animationDuration:animationDuration=0x2710,tooltipOrder:tooltipOrder=_0x4a25d9(0x147),xAxisConfig:xAxisConfig={},yAxisConfig:yAxisConfig={},gridConfig:gridConfig={'right':0x8c},width:_0x306592,height:_0x1115a4}=_0x70fecd,_0x1d2fa8=document[_0x4a25d9(0x140)](_0x594264);if(!_0x1d2fa8){console['error'](_0x4a25d9(0xf9)+_0x594264+_0x4a25d9(0xb5));return;}if(_0x306592)_0x1d2fa8['style'][_0x4a25d9(0xea)]=_0x306592;if(_0x1115a4)_0x1d2fa8[_0x4a25d9(0xdd)][_0x4a25d9(0xae)]=_0x1115a4;const _0x2f53cf=echarts['init'](_0x1d2fa8),_0x5d25ad=[],_0x15f7ea=[];_0x151f6d['forEach']((_0x56e5ce,_0x57e4c5)=>{const _0x5246d7=_0x4a25d9,_0xb9978f='dataset_'+_0x56e5ce,_0x5175f9=(_0x70fecd['additionalFilters']||[])['concat']([{'dimension':_0xe92669,'=':_0x56e5ce}]);_0x5d25ad['push']({'id':_0xb9978f,'fromDatasetId':_0x5246d7(0xfc),'transform':{'type':_0x5246d7(0x121),'config':{'and':_0x5175f9}}}),_0x15f7ea[_0x5246d7(0x86)]({'type':chartType,'datasetId':_0xb9978f,'name':_0x56e5ce,...chartType===_0x5246d7(0xdb)&&{'barWidth':0x14,'barMaxWidth':0x28},'itemStyle':{'color':colors[_0x57e4c5]||undefined},...chartType===_0x5246d7(0xf8)&&{'showSymbol':![]},'encode':_0x5026d6});});const _0x49cbb0={'animationDuration':animationDuration,'dataset':[{'id':'dataset_raw','source':_0xff836d},..._0x5d25ad],'title':{'text':title},'tooltip':{'order':tooltipOrder,'trigger':_0x4a25d9(0xaa)},'xAxis':Object[_0x4a25d9(0x149)]({'type':_0x4a25d9(0x8e),'nameLocation':_0x4a25d9(0xc6)},xAxisConfig),'yAxis':Object[_0x4a25d9(0x149)]({'name':_0x5026d6['y']||''},yAxisConfig),'grid':gridConfig,'series':_0x15f7ea};_0x2f53cf['setOption'](_0x49cbb0);}function generatePieChart({containerId:_0x274ab0,data:_0x416fd7,nameField:_0x6edd13,valueField:_0x2092d3,title:title='',width:_0x28f3a8,height:_0x19c89e}){const _0x11335c=_0x4620aa,_0x113614=document[_0x11335c(0x140)](_0x274ab0);if(!_0x113614)return console[_0x11335c(0xbe)](_0x11335c(0xa9)+_0x274ab0+_0x11335c(0x101));if(_0x28f3a8)_0x113614['style'][_0x11335c(0xea)]=_0x28f3a8;if(_0x19c89e)_0x113614[_0x11335c(0xdd)]['height']=_0x19c89e;const _0x1fedc4=echarts[_0x11335c(0xd3)](_0x113614),_0x2aac2f=_0x416fd7[_0x11335c(0x12e)]((_0x45a6fe,_0x56cfb3)=>{const _0x16e2d9=_0x11335c,_0x396c7e=_0x56cfb3[_0x6edd13],_0x435b20=_0x56cfb3[_0x2092d3];let _0x5a0016=_0x45a6fe[_0x16e2d9(0xd2)](_0x455ef3=>_0x455ef3[_0x16e2d9(0xf1)]===_0x396c7e);return!_0x5a0016&&(_0x5a0016={'name':_0x396c7e,'value':0x0},_0x45a6fe[_0x16e2d9(0x86)](_0x5a0016)),_0x5a0016[_0x16e2d9(0x137)]+=_0x435b20,_0x45a6fe;},[]),_0x3970bf={'title':{'text':title,'left':_0x11335c(0x135)},'tooltip':{'trigger':_0x11335c(0xa4)},'series':[{'type':_0x11335c(0x87),'radius':_0x11335c(0x110),'data':_0x2aac2f,'emphasis':{'itemStyle':{'shadowBlur':0xa,'shadowOffsetX':0x0}},'label':{'formatter':'{b}:\x20{d}%'}}]};_0x1fedc4[_0x11335c(0x118)](_0x3970bf);}function showModalViewDetails(){const _0x2c1a84=_0x4620aa,_0x4b61d4=document[_0x2c1a84(0x140)](_0x2c1a84(0xf5)),_0x3dec37=document[_0x2c1a84(0x140)]('modalOverlayViewDetails');_0x4b61d4[_0x2c1a84(0x7e)][_0x2c1a84(0x81)](_0x2c1a84(0xf2)),_0x3dec37[_0x2c1a84(0xdd)][_0x2c1a84(0xab)]=_0x2c1a84(0x10f);}function hideModalViewDetails(){const _0x5061fe=_0x4620aa,_0xa40c15=document[_0x5061fe(0x140)](_0x5061fe(0xf5)),_0x255b65=document[_0x5061fe(0x140)](_0x5061fe(0x144));_0xa40c15['classList'][_0x5061fe(0xeb)](_0x5061fe(0xf2)),_0x255b65[_0x5061fe(0xdd)][_0x5061fe(0xab)]=_0x5061fe(0x131);const _0x4f53b3=document['getElementById'](_0x5061fe(0xc4));_0x4f53b3['innerHTML']='\x0a<table>\x0a<thead>\x0a<tr>\x0a<th>Producto</th>\x0a<th>Cantidad</th>\x0a<th>Valor\x20Unitario</th>\x0a<th>Total</th>\x0a</tr>\x0a</thead>\x0a<tbody\x20id=\x22detalleTablaBody\x22></tbody>\x0a</table>';}document[_0x4620aa(0x140)](_0x4620aa(0x12b))[_0x4620aa(0xdf)](_0x4620aa(0xc3),hideModalViewDetails),document['getElementById'](_0x4620aa(0x144))['addEventListener'](_0x4620aa(0xc3),hideModalViewDetails);function verDetalle(_0x1e6bd3,_0x540027){const _0x588974=_0x4620aa;fetch(_0x588974(0x130)+_0x1e6bd3+_0x588974(0x7c)+_0x540027)[_0x588974(0xb1)](_0x31d933=>{const _0x1b7817=_0x588974;if(!_0x31d933['ok'])throw new Error(_0x1b7817(0x8c)+_0x31d933[_0x1b7817(0xb7)]+':\x20'+_0x31d933['statusText']);return _0x31d933[_0x1b7817(0x124)]();})[_0x588974(0xb1)](_0x2af259=>{const _0x303cef=_0x588974;if(_0x2af259['success']){const _0x500f4d=document[_0x303cef(0x140)](_0x303cef(0xc4));if(_0x540027==='detalle'){let _0x1895b7='';_0x2af259[_0x303cef(0xc2)][_0x303cef(0x146)](_0x146df3=>{const _0xf29c41=_0x303cef;_0x1895b7+=_0xf29c41(0x14a)+_0x146df3['producto']+_0xf29c41(0xb8)+_0x146df3['cantidad']+_0xf29c41(0xb8)+_0x146df3[_0xf29c41(0xf6)]+_0xf29c41(0xb8)+_0x146df3[_0xf29c41(0xce)]+'</td>\x0a</tr>';}),document[_0x303cef(0x140)](_0x303cef(0x9a))[_0x303cef(0x12c)]=_0x1895b7;}else{if(_0x540027==='pdf'){const _0x2fc0a7=_0x303cef(0x77)+encodeURIComponent(_0x2af259[_0x303cef(0x104)]),_0x48dd6d=document[_0x303cef(0xa5)](_0x303cef(0xe5));_0x500f4d['innerHTML']=_0x303cef(0xcf)+_0x2fc0a7+'\x22\x20style=\x22width:\x20100%;\x20height:\x20500px;\x20border:\x20none;\x22></iframe>\x0a',document['getElementById'](_0x303cef(0x12b))[_0x303cef(0xdf)](_0x303cef(0xc3),hideModalViewDetails);}}showModalViewDetails();}else alert(_0x2af259[_0x303cef(0xbe)]||_0x303cef(0xfd));})[_0x588974(0xbf)](_0x4a9a3e=>{const _0x2044ef=_0x588974;console['error']('Error\x20al\x20cargar\x20el\x20detalle:',_0x4a9a3e),alert(_0x2044ef(0x91));});}label['addEventListener']('click',()=>{const _0x52a9=_0x4620aa;options[_0x52a9(0xdd)][_0x52a9(0xab)]=options[_0x52a9(0xdd)][_0x52a9(0xab)]===_0x52a9(0x131)?_0x52a9(0x10f):_0x52a9(0x131);}),options[_0x4620aa(0xdf)]('click',_0x86da56=>{const _0x121223=_0x4620aa;if(_0x86da56[_0x121223(0x11c)]&&_0x86da56[_0x121223(0x11c)]['tagName']==='LI'){const _0x147477=_0x86da56[_0x121223(0x11c)][_0x121223(0x126)]('data-value');updateDateRange(_0x147477),options[_0x121223(0xdd)][_0x121223(0xab)]='none';}}),document[_0x4620aa(0xdf)](_0x4620aa(0xc3),_0x5c067e=>{const _0x501073=_0x4620aa;!label[_0x501073(0x129)](_0x5c067e['target'])&&!options[_0x501073(0x129)](_0x5c067e[_0x501073(0x11c)])&&(options['style'][_0x501073(0xab)]='none');});function _0x3248(){const _0x5aee41=['block','50%','setOperationDetailQuantity','No\x20se\x20encontró\x20información\x20de\x20ingresos','length','setOperationCurrency','date-range-options','setTipoComprobante','fechaISO','setOption','btn\x20btn-sm\x20btn-outline\x20ms-2','map','\x2023:59:59','target','setOperationSeries','btn-outline-primary','arrayIncomes\x20transformado:','100%','filter','filter-start','getMonth','json','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','getAttribute','#pagination-products','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22text-align:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22span-table-custom\x20span-table-setTipoComprobante-','contains','incomes','closeModalViewDetails','innerHTML','setOperationDetailUnitPresentationId','reduce','warn','https://fasyb.com/api/venta/view/?id=','none','ID_SERIE','setBranchDefault','getFullYear','center','289eNBBNr','value','setBranchId','Modal','cost','setOperationDateExpiration','products','del\x20mes\x20<i\x20class=\x22bi\x20bi-caret-down-fill\x20date-range-label-icon\x22\x20style=\x22color:\x20#FF5900;\x22></i>','7812063wKCJcF','setTipoOperaciones','getElementById','split','scrollLeft','del\x20año\x20<i\x20class=\x22bi\x20bi-caret-down-fill\x20date-range-label-icon\x22\x20style=\x22color:\x20#FF5900;\x22></i>','modalOverlayViewDetails',';\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','forEach','valueDesc','mouseup','assign','\x0a<tr>\x0a<td>','href','offsetLeft','entries','#reporte-income-products','https://fasyb.com/api/pdf/proxy/?file=','7842ALtOgA','14523190RgFroE','setOperationDateTime','(((.+)+)+)+$','&tipo=','__proto__','classList','35RIHKmy','className','add','pageX','return\x20(function()\x20','mouseleave','constructor','push','pie','{}.constructor(\x22return\x20this\x22)(\x20)','profit','setDescripcion','date-range-label','Error\x20','dispatchEvent','category','...','preventDefault','Error\x20al\x20cargar\x20el\x20detalle.','500px','setOperationNumber','setOperationStatus','1849542GSmfKm','mousemove','slice','POST','setDate','detalleTablaBody','filtrar','padStart','toFixed','Evolución\x20de\x20Ventas','setWarehouseId','6654712SQyLFi','apply','productKey','getDate','item','querySelector','stringify','3071885toZvAs','setOperationCustomerId','Contenedor\x20','axis','display','productPieChart','month','height','getInstance','toString','then','setSeries','log','filterModal','\x22\x20no\x20existe.','values','status','</td>\x0a<td>','Ventas\x20por\x20Item','from','getHours','salesChartContainer','date-range-label-icon','error','catch','de\x20la\x20semana\x20<i\x20class=\x22bi\x20bi-caret-down-fill\x20date-range-label-icon\x22\x20style=\x22color:\x20#FF5900;\x22></i>','apply-filter','data','click','dynamicContent','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22text-align:\x20right;\x22>','middle','change','application/json;\x20charset=utf-8','Siguiente\x20&raquo;','ceil','table','Error\x20al\x20solicitar\x20reporte','#FF5900','total','\x0a<iframe\x20src=\x22','setOperationDetailTotal','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22text-align:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22span-table-custom\x22\x20style=\x22border:1.5px\x20solid\x20','find','init','createElement','setTipoOperacionName','search','console',';\x20color:','8jTNvTk','day','bar','Total','style','setCustomerName','addEventListener','round','\x20tbody','getDay','.table-wrapper','sales','.modal-content','hide','filter-end','setTipoOperacionCodigo','setOperationTotal','width','remove','isArray','Sin\x20descripción','setFloorId','setSerie','setCustomerId','name','active','year','setOperationStatusColor','detalleModal','valor_unitario','setApiEndPoint','line','El\x20contenedor\x20con\x20id\x20\x22','setOperationItems','info','dataset_raw','No\x20se\x20pudieron\x20obtener\x20los\x20detalles\x20del\x20pedido.','1058256qSDjfk','&laquo;\x20Anterior','setOperationType','\x20no\x20existe','appendChild','bind','pdf_url','mousedown','flatMap','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22text-align:\x20center;\x22>','substring','btn\x20btn-sm\x20','#pagination-income','prototype','setOperationCustomerName','exception','getSeconds'];_0x3248=function(){return _0x5aee41;};return _0x3248();}function formatDateToYmdHis(_0x435033){const _0x1e0a17=_0x4620aa,_0x4bf55d=_0x435033[_0x1e0a17(0x134)](),_0x134028=String(_0x435033['getMonth']()+0x1)['padStart'](0x2,'0'),_0x23e9f4=String(_0x435033[_0x1e0a17(0xa3)]())[_0x1e0a17(0x9c)](0x2,'0'),_0x4a9f4f=String(_0x435033[_0x1e0a17(0xbb)]())[_0x1e0a17(0x9c)](0x2,'0'),_0x20795b=String(_0x435033['getMinutes']())[_0x1e0a17(0x9c)](0x2,'0'),_0x279623=String(_0x435033[_0x1e0a17(0x10e)]())['padStart'](0x2,'0');return _0x4bf55d+'-'+_0x134028+'-'+_0x23e9f4+'\x20'+_0x4a9f4f+':'+_0x20795b+':'+_0x279623;}function getDateRange(_0x5882e4){const _0x28d725=_0x4620aa,_0x5596e5=new Date();let _0x37f9ab,_0x10bb22;switch(_0x5882e4){case _0x28d725(0xda):_0x37f9ab=new Date(_0x5596e5[_0x28d725(0x134)](),_0x5596e5[_0x28d725(0x123)](),_0x5596e5[_0x28d725(0xa3)](),0x0,0x0,0x0),_0x10bb22=new Date(_0x5596e5[_0x28d725(0x134)](),_0x5596e5['getMonth'](),_0x5596e5[_0x28d725(0xa3)](),0x17,0x3b,0x3b),label[_0x28d725(0x12c)]='del\x20día\x20<i\x20class=\x22bi\x20bi-caret-down-fill\x20date-range-label-icon\x22\x20style=\x22color:\x20#FF5900;\x22></i>';break;case'week':const _0x283dcb=_0x5596e5[_0x28d725(0xe2)](),_0x3d7631=new Date(_0x5596e5);_0x3d7631[_0x28d725(0x99)](_0x5596e5[_0x28d725(0xa3)]()-_0x283dcb+(_0x283dcb===0x0?-0x6:0x1));const _0x28fcb8=new Date(_0x3d7631);_0x28fcb8[_0x28d725(0x99)](_0x3d7631[_0x28d725(0xa3)]()+0x6),_0x37f9ab=new Date(_0x3d7631[_0x28d725(0x134)](),_0x3d7631[_0x28d725(0x123)](),_0x3d7631[_0x28d725(0xa3)](),0x0,0x0,0x0),_0x10bb22=new Date(_0x28fcb8[_0x28d725(0x134)](),_0x28fcb8[_0x28d725(0x123)](),_0x28fcb8['getDate'](),0x17,0x3b,0x3b),label[_0x28d725(0x12c)]=_0x28d725(0xc0);break;case _0x28d725(0xad):_0x37f9ab=new Date(_0x5596e5[_0x28d725(0x134)](),_0x5596e5[_0x28d725(0x123)](),0x1,0x0,0x0,0x0),_0x10bb22=new Date(_0x5596e5[_0x28d725(0x134)](),_0x5596e5[_0x28d725(0x123)]()+0x1,0x0,0x17,0x3b,0x3b),label[_0x28d725(0x12c)]=_0x28d725(0x13d);break;case _0x28d725(0xf3):_0x37f9ab=new Date(_0x5596e5[_0x28d725(0x134)](),0x0,0x1,0x0,0x0,0x0),_0x10bb22=new Date(_0x5596e5[_0x28d725(0x134)](),0xb,0x1f,0x17,0x3b,0x3b),label[_0x28d725(0x12c)]=_0x28d725(0x143);break;default:label[_0x28d725(0x12c)]='';throw new Error('Invalid\x20range\x20type');}return{'startDateFormatted':formatDateToYmdHis(_0x37f9ab),'endDateFormatted':formatDateToYmdHis(_0x10bb22)};}function updateDateRange(_0x2b6e3f){const _0x47854d=_0x4620aa;if(_0x2b6e3f==_0x47854d(0x9b)){}else{const {startDateFormatted:_0x543ca1,endDateFormatted:_0x4d8a66}=getDateRange(_0x2b6e3f);fil_date_start=_0x543ca1,fil_date_end=_0x4d8a66,consultIncomeReport();}}const tableWrapper=document['querySelector'](_0x4620aa(0xe3));function _0x565f(_0x5a934b,_0x2dab72){const _0x5ea36e=_0x3248();return _0x565f=function(_0x1692bb,_0x4370ef){_0x1692bb=_0x1692bb-0x76;let _0x5eee9c=_0x5ea36e[_0x1692bb];return _0x5eee9c;},_0x565f(_0x5a934b,_0x2dab72);}let isDragging=![],startX,scrollLeft;tableWrapper[_0x4620aa(0xdf)](_0x4620aa(0x105),_0x2466c1=>{const _0x67cd9a=_0x4620aa;isDragging=!![],startX=_0x2466c1[_0x67cd9a(0x82)]-tableWrapper[_0x67cd9a(0x14c)],scrollLeft=tableWrapper[_0x67cd9a(0x142)];}),tableWrapper[_0x4620aa(0xdf)](_0x4620aa(0x84),()=>{isDragging=![];}),tableWrapper['addEventListener'](_0x4620aa(0x148),()=>{isDragging=![];}),tableWrapper[_0x4620aa(0xdf)](_0x4620aa(0x96),_0x5aba1c=>{const _0x239b91=_0x4620aa;if(!isDragging)return;_0x5aba1c[_0x239b91(0x90)]();const _0xf096ab=_0x5aba1c[_0x239b91(0x82)]-tableWrapper[_0x239b91(0x14c)],_0x3af819=(_0xf096ab-startX)*0x2;tableWrapper[_0x239b91(0x142)]=scrollLeft-_0x3af819;});async function consultIncomeReport(){const _0xfd07f5=_0x4620aa;showLoadingModal();const _0x2d9ac6={'apiPOS_getIncome':0x1,'setToken':myCompany['setAuthToken'],'fil_date_start':fil_date_start,'fil_date_end':fil_date_end,'fil_CustomersId':fil_CustomersId,'fil_OperationsType':fil_OperationsType,'fil_BranchesId':fil_BranchesId,'fil_OperationsId':fil_OperationsId};try{const _0x44a6b9=await fetch(myCompany['setApiEndPoint'],{'method':_0xfd07f5(0x98),'headers':{'Content-Type':_0xfd07f5(0xc8)},'body':JSON[_0xfd07f5(0xa6)](_0x2d9ac6)}),{success:_0x76b316,message:_0x2e3668}=await _0x44a6b9[_0xfd07f5(0x124)]();if(!_0x76b316||!Array[_0xfd07f5(0xec)](_0x2e3668['incomes'])){ntfShow(_0xfd07f5(0x112)),console['log'](_0x2e3668);return;}const _0x49a660=_0x2e3668[_0xfd07f5(0x12a)];console['log']('Incomes\x20raw:',_0x49a660);const _0x4da470=myCompany['setCustomers'][_0xfd07f5(0x12e)]((_0x2abf70,_0x153d63)=>{const _0x13181f=_0xfd07f5;return _0x2abf70[_0x153d63[_0x13181f(0xf0)]]=_0x153d63[_0x13181f(0xde)],_0x2abf70;},{}),_0x64d9d2=myCompany[_0xfd07f5(0x13f)][_0xfd07f5(0x12e)]((_0x234ca8,_0x25c014)=>{const _0x37cae6=_0xfd07f5;return _0x234ca8[_0x25c014[_0x37cae6(0xe8)]]=_0x25c014[_0x37cae6(0xd5)],_0x234ca8;},{}),_0x2cbdc0=myCompany[_0xfd07f5(0xb2)]['reduce']((_0x273974,_0x18ba51)=>{const _0x14938a=_0xfd07f5;return _0x273974[_0x18ba51[_0x14938a(0x132)]]=_0x18ba51[_0x14938a(0xef)],_0x273974;},{}),_0x4c2842=_0x49a660[_0xfd07f5(0x11a)](_0x188302=>{const _0x3e6473=_0xfd07f5,_0x1e3b32=_0x188302[_0x3e6473(0xfa)][_0x3e6473(0x12e)]((_0x5cae39,_0xb6f8fd)=>{const _0x33ef26=_0x3e6473;return _0x5cae39+Number(_0xb6f8fd[_0x33ef26(0xd0)]);},0x0),_0x57324c=_0x64d9d2[_0x188302['setOperationType']]||_0x188302[_0x3e6473(0x100)],_0x50711c=_0x2cbdc0[_0x188302[_0x3e6473(0x11d)]]||_0x188302[_0x3e6473(0x11d)],_0x3a072c=_0x4da470[_0x188302[_0x3e6473(0xa8)]]||_0x188302[_0x3e6473(0xa8)];return{'setOperationType':_0x57324c,'setOperationSeries':_0x50711c+'-'+_0x188302[_0x3e6473(0x93)],'setOperationCustomerName':_0x3a072c,'setOperationDateTime':_0x188302[_0x3e6473(0x7a)],'setOperationDateExpiration':_0x188302[_0x3e6473(0x13b)]||'','setOperationStatus':_0x188302['setOperationStatus']||'Pendiente','setOperationStatusColor':_0x188302['setOperationStatusColor']||_0x3e6473(0xcd),'setOperationCurrency':_0x188302[_0x3e6473(0x114)],'setOperationTotal':_0x1e3b32};});console[_0xfd07f5(0xb3)](_0xfd07f5(0x11f),_0x4c2842);const _0x38a19f=_0x49a660[_0xfd07f5(0x106)](_0x3e3407=>_0x3e3407[_0xfd07f5(0xfa)])['reduce']((_0x19b47c,_0x13adbf)=>{const _0x3886e3=_0xfd07f5,_0x487354=products[_0x3886e3(0xd2)](_0x36232d=>_0x36232d['id']==_0x13adbf[_0x3886e3(0x12d)]),_0x13a4e3=_0x487354?_0x487354[_0x3886e3(0x8a)]:_0x3886e3(0xed),_0x25e422=Number(_0x13adbf['setOperationDetailTotal']),_0x394430=Number(_0x13adbf[_0x3886e3(0x111)]),_0x4ea521=Number(_0x13adbf['setOperationDetailUnitCost']),_0x317325=_0x4ea521*_0x394430;return!_0x19b47c[_0x13a4e3]&&(_0x19b47c[_0x13a4e3]={'productName':_0x13a4e3,'sales':0x0,'cost':0x0}),_0x19b47c[_0x13a4e3][_0x3886e3(0xe4)]+=_0x25e422,_0x19b47c[_0x13a4e3][_0x3886e3(0x13a)]+=_0x317325,_0x19b47c;},{}),_0x5a0c5e=Object[_0xfd07f5(0xb6)](_0x38a19f)[_0xfd07f5(0x11a)](_0x550f66=>({'productName':_0x550f66['productName'],'sales':Math[_0xfd07f5(0xe0)](_0x550f66[_0xfd07f5(0xe4)]*0x64)/0x64,'cost':Math[_0xfd07f5(0xe0)](_0x550f66[_0xfd07f5(0x13a)]*0x64)/0x64,'profit':Math['round']((_0x550f66[_0xfd07f5(0xe4)]-_0x550f66[_0xfd07f5(0x13a)])*0x64)/0x64}));renderTable(_0x4c2842,currentPage,_0xfd07f5(0x12a)),renderTable(_0x5a0c5e,currentPageProducts,'products');const _0x3aa38d=_0x4c2842[_0xfd07f5(0x11a)](_0x7772c5=>({'fechaISO':_0x7772c5['setOperationDateTime'][_0xfd07f5(0x141)]('\x20')[0x0],'setTipoComprobante':_0x7772c5['setOperationType'],'setOperationCurrency':_0x7772c5[_0xfd07f5(0x114)],'Total':Math[_0xfd07f5(0xe0)](_0x7772c5[_0xfd07f5(0xe9)]*0x64)/0x64})),_0x59fdaf=_0x3aa38d[_0xfd07f5(0x12e)]((_0x38799b,_0x3873f6)=>{const _0xfc6356=_0xfd07f5,_0x17cf14=_0x3873f6['fechaISO']+'|'+_0x3873f6[_0xfc6356(0x116)]+'|'+_0x3873f6[_0xfc6356(0x114)];return!_0x38799b[_0x17cf14]&&(_0x38799b[_0x17cf14]={'fechaISO':_0x3873f6['fechaISO'],'setTipoComprobante':_0x3873f6[_0xfc6356(0x116)],'setOperationCurrency':_0x3873f6['setOperationCurrency'],'Total':0x0}),_0x38799b[_0x17cf14]['Total']+=_0x3873f6[_0xfc6356(0xdc)],_0x38799b;},{});let _0xde5748=Object[_0xfd07f5(0xb6)](_0x59fdaf)[_0xfd07f5(0x11a)](_0x4714b5=>({'fechaISO':_0x4714b5['fechaISO'],'setTipoComprobante':_0x4714b5[_0xfd07f5(0x116)]+'\x20('+_0x4714b5[_0xfd07f5(0x114)]+')','Total':Math[_0xfd07f5(0xe0)](_0x4714b5[_0xfd07f5(0xdc)]*0x64)/0x64}));const _0x186986=[...new Set(_0xde5748[_0xfd07f5(0x11a)](_0x46ecce=>_0x46ecce[_0xfd07f5(0x116)]))],_0x11e428=Array[_0xfd07f5(0xba)](new Set(_0xde5748[_0xfd07f5(0x11a)](_0x22924e=>_0x22924e[_0xfd07f5(0x117)])))['sort']((_0x4a6c50,_0x5bfa91)=>new Date(_0x4a6c50)-new Date(_0x5bfa91));_0xde5748[_0xfd07f5(0x113)]>0x0?generateFilterTransformChart({'containerId':_0xfd07f5(0xbc),'rawData':_0xde5748,'groupField':_0xfd07f5(0x116),'groupValues':_0x186986,'seriesType':_0xfd07f5(0xdb),'chartType':'bar','colors':['#FF5900','#080060'],'encode':{'x':_0xfd07f5(0x117),'y':'Total','label':[_0xfd07f5(0x116),'Total'],'itemName':'fechaISO','tooltip':[_0xfd07f5(0xdc)]},'xAxisConfig':{'type':_0xfd07f5(0x8e),'data':_0x11e428,'axisLabel':{'formatter':_0x4cfd51=>{const [_0x483d72,_0x3594a1,_0x2bcf1c]=_0x4cfd51['split']('-');return _0x2bcf1c+'/'+_0x3594a1+'/'+_0x483d72;}}},'title':_0xfd07f5(0x9e),'width':_0xfd07f5(0x120),'height':_0xfd07f5(0x92)}):salesChartContainer[_0xfd07f5(0x12c)]='';const _0x1bf6b3=_0x49a660[_0xfd07f5(0x106)](_0x882cbd=>_0x882cbd[_0xfd07f5(0xfa)][_0xfd07f5(0x11a)](_0x386a33=>{const _0x57fd8b=_0xfd07f5,_0x5980a4=products[_0x57fd8b(0xd2)](_0x21825e=>_0x21825e['id']==_0x386a33[_0x57fd8b(0x12d)]),_0x4a0b0e=_0x5980a4?_0x5980a4['setCodProducto']:'',_0x2d9b46=_0x5980a4?_0x5980a4['setDescripcion']:_0x57fd8b(0xed),_0x193b06=_0x2d9b46[_0x57fd8b(0x113)]>0xf?_0x2d9b46[_0x57fd8b(0x108)](0x0,0xf)+_0x57fd8b(0x8f):_0x2d9b46,_0x2b8b00=_0x882cbd[_0x57fd8b(0x114)];return{'productKey':_0x4a0b0e+'-'+_0x193b06+'\x20('+_0x2b8b00+')','setOperationDetailTotal':Number(_0x386a33[_0x57fd8b(0xd0)])};})),_0x4e4802=_0x1bf6b3[_0xfd07f5(0x12e)]((_0x10cba9,_0x4534c9)=>{const _0x149fdd=_0xfd07f5;return!_0x10cba9[_0x4534c9[_0x149fdd(0xa2)]]&&(_0x10cba9[_0x4534c9[_0x149fdd(0xa2)]]=0x0),_0x10cba9[_0x4534c9[_0x149fdd(0xa2)]]+=_0x4534c9[_0x149fdd(0xd0)],_0x10cba9;},{}),_0x8687c0=Object[_0xfd07f5(0x14d)](_0x4e4802)[_0xfd07f5(0x11a)](([_0x45a3ed,_0x529365])=>({'productName':_0x45a3ed,'setOperationDetailTotal':Number((Math[_0xfd07f5(0xe0)](_0x529365*0x64)/0x64)[_0xfd07f5(0x9d)](0x2))}));_0x8687c0[_0xfd07f5(0x113)]>0x0?generatePieChart({'containerId':'productPieChart','data':_0x8687c0,'nameField':'productName','valueField':_0xfd07f5(0xd0),'title':_0xfd07f5(0xb9),'width':_0xfd07f5(0x92),'height':_0xfd07f5(0x92)}):productPieChart['innerHTML']='';}catch(_0x34adf9){ntfShow(_0xfd07f5(0xcc)),console['error'](_0x34adf9);}finally{hideLoadingModal();}}function renderTable(_0x1e950f,_0x37f1f9=0x1,_0x139a9d='incomes'){const _0x4a5184=_0x4620aa;currentPage=_0x37f1f9;const _0x47cf41=_0x139a9d==='incomes'?'#reporte-income':_0x4a5184(0x76),_0x4852bd=document[_0x4a5184(0xa5)](_0x47cf41+_0x4a5184(0xe1));_0x4852bd[_0x4a5184(0x12c)]='';const _0x231fff=(_0x37f1f9-0x1)*PER_PAGE,_0x5c14db=_0x1e950f[_0x4a5184(0x97)](_0x231fff,_0x231fff+PER_PAGE);_0x5c14db[_0x4a5184(0x146)](_0x50dcce=>{const _0x1fc0bd=_0x4a5184,_0x568575=document[_0x1fc0bd(0xd4)]('tr');if(_0x139a9d===_0x1fc0bd(0x12a))_0x568575[_0x1fc0bd(0x12c)]=_0x1fc0bd(0x128)+_0x50dcce[_0x1fc0bd(0x100)]+_0x1fc0bd(0x125)+_0x50dcce[_0x1fc0bd(0x100)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22text-align:\x20center;\x22>'+(_0x50dcce[_0x1fc0bd(0x11d)]||'')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x50dcce[_0x1fc0bd(0x10c)]||'')+_0x1fc0bd(0x107)+_0x50dcce[_0x1fc0bd(0x7a)]+_0x1fc0bd(0x107)+(_0x50dcce[_0x1fc0bd(0x13b)]||'')+_0x1fc0bd(0xd1)+_0x50dcce[_0x1fc0bd(0xf4)]+_0x1fc0bd(0xd8)+_0x50dcce[_0x1fc0bd(0xf4)]+_0x1fc0bd(0x145)+_0x50dcce[_0x1fc0bd(0x94)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22text-align:\x20right;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x50dcce['setOperationCurrency']+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22text-align:\x20right;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x50dcce[_0x1fc0bd(0xe9)][_0x1fc0bd(0x9d)](0x2)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22text-align:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<!--\x20espacio\x20para\x20acciones\x20adicionales\x20-->\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20';else _0x139a9d===_0x1fc0bd(0x13c)&&(_0x568575[_0x1fc0bd(0x12c)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x50dcce['productName']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22text-align:\x20right;\x22>'+_0x50dcce[_0x1fc0bd(0xe4)][_0x1fc0bd(0x9d)](0x2)+_0x1fc0bd(0xc5)+_0x50dcce[_0x1fc0bd(0x13a)][_0x1fc0bd(0x9d)](0x2)+_0x1fc0bd(0xc5)+_0x50dcce[_0x1fc0bd(0x89)]['toFixed'](0x2)+'</td>\x0a\x20\x20\x20\x20\x20\x20');_0x4852bd[_0x1fc0bd(0x102)](_0x568575);}),renderPagination(_0x1e950f,_0x37f1f9,_0x139a9d);}function renderPagination(_0x1d9518,_0x5f33e2,_0x250d9f='incomes'){const _0xc9576c=_0x4620aa,_0x480115=_0x250d9f===_0xc9576c(0x12a)?document[_0xc9576c(0xa5)](_0xc9576c(0x10a)):document['querySelector'](_0xc9576c(0x127));_0x480115['innerHTML']='';const _0x55882d=Math[_0xc9576c(0xca)](_0x1d9518[_0xc9576c(0x113)]/PER_PAGE),_0x78422=document[_0xc9576c(0xd4)]('a');_0x78422[_0xc9576c(0x14b)]='#',_0x78422[_0xc9576c(0x80)]='btn\x20btn-sm\x20btn-outline\x20me-2',_0x78422[_0xc9576c(0x12c)]=_0xc9576c(0xff),_0x78422['onclick']=_0xc6c47c=>{_0xc6c47c['preventDefault'](),_0x5f33e2>0x1&&renderTable(_0x1d9518,_0x5f33e2-0x1,_0x250d9f);},_0x480115[_0xc9576c(0x102)](_0x78422);for(let _0x1534ff=0x1;_0x1534ff<=_0x55882d;_0x1534ff++){const _0x426e6a=document['createElement']('a');_0x426e6a['href']='#',_0x426e6a[_0xc9576c(0x80)]=_0xc9576c(0x109)+(_0x1534ff===_0x5f33e2?_0xc9576c(0x11e):'btn-outline'),_0x426e6a['textContent']=_0x1534ff,_0x426e6a['onclick']=_0x30edf5=>{_0x30edf5['preventDefault'](),renderTable(_0x1d9518,_0x1534ff,_0x250d9f);},_0x480115[_0xc9576c(0x102)](_0x426e6a);}const _0x4f2353=document[_0xc9576c(0xd4)]('a');_0x4f2353['href']='#',_0x4f2353['className']=_0xc9576c(0x119),_0x4f2353[_0xc9576c(0x12c)]=_0xc9576c(0xc9),_0x4f2353['onclick']=_0x5092e1=>{const _0x476cb3=_0xc9576c;_0x5092e1[_0x476cb3(0x90)](),_0x5f33e2<_0x55882d&&renderTable(_0x1d9518,_0x5f33e2+0x1,_0x250d9f);},_0x480115[_0xc9576c(0x102)](_0x4f2353);}document[_0x4620aa(0x140)](_0x4620aa(0xc1))['addEventListener'](_0x4620aa(0xc3),async()=>{const _0x124132=_0x4620aa,_0x3723dc=document[_0x124132(0x140)](_0x124132(0x122))[_0x124132(0x137)],_0x293947=document[_0x124132(0x140)](_0x124132(0xe7))[_0x124132(0x137)];if(!_0x3723dc||!_0x293947)return alert('Selecciona\x20ambas\x20fechas');const _0x32143a=document[_0x124132(0x140)](_0x124132(0xb4)),_0x18037c=bootstrap[_0x124132(0x139)][_0x124132(0xaf)](_0x32143a);_0x18037c[_0x124132(0xe6)](),showLoadingModal();try{const _0x4dd40e={'apiPOS_getIncome':0x1,'setToken':myCompany['setAuthToken'],'dateFrom':_0x3723dc+'\x2000:00:00','dateTo':_0x293947+_0x124132(0x11b),'clientIds':[],'operationTypes':[]},_0x4d3400=await fetch(myCompany[_0x124132(0xf7)],{'method':_0x124132(0x98),'headers':{'Content-Type':'application/json'},'body':JSON[_0x124132(0xa6)](_0x4dd40e)}),{success:_0x4c3c1b,message:_0x215572}=await _0x4d3400[_0x124132(0x124)]();if(!_0x4c3c1b)throw new Error(_0x215572);_0x215572[_0x124132(0x12a)],await consultIncomeReport();}catch(_0x2e361a){ntfShow('Error\x20al\x20aplicar\x20filtro'),console['error'](_0x2e361a);}finally{hideLoadingModal();}}),window['onload']=function(){const _0x578a4c=_0x4620aa,_0x5c26a7=0x3;loadLoginContent('./img/apiPOS.png'),setUserNameGet(),setEventBtnAccess();const _0x52a346=document[_0x578a4c(0xa5)]('.btn-logout');_0x52a346&&_0x52a346[_0x578a4c(0xdf)](_0x578a4c(0xc3),function(){logoutReload(0x0,_0x5c26a7);}),document[_0x578a4c(0x140)](_0x578a4c(0x138))['addEventListener'](_0x578a4c(0xc7),async function(){const _0x28689c=_0x578a4c,_0x340dc8=parseInt(this[_0x28689c(0x137)]);myCompany[_0x28689c(0x133)]=_0x340dc8;const _0x4866cb=await createCartStore('');await saveCompanyToIndexedDB(company,_0x4866cb),cargarAlmacenes(_0x340dc8),setTimeout(()=>{const _0x497e0a=_0x28689c;document[_0x497e0a(0x140)](_0x497e0a(0x9f))[_0x497e0a(0x8d)](new Event('change'));},0x64),cargarPisos(_0x340dc8),setTimeout(()=>{const _0x1e3061=_0x28689c;document[_0x1e3061(0x140)](_0x1e3061(0xee))[_0x1e3061(0x8d)](new Event('change'));},0x64),ntf_initNotifications(),fil_BranchesId=[],fil_BranchesId[_0x28689c(0x86)](_0x340dc8),consultIncomeReport();}),loadCartAndSetTabCount(_0x5c26a7);};
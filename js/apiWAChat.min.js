/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 5.1.8
*/

const _0x55e3f4=_0x2a42;(function(_0x1c0b26,_0x157374){const _0x3d78db=_0x2a42,_0x53a762=_0x1c0b26();while(!![]){try{const _0x58a626=parseInt(_0x3d78db(0xfb))/0x1+parseInt(_0x3d78db(0xfe))/0x2+-parseInt(_0x3d78db(0x12d))/0x3+parseInt(_0x3d78db(0x101))/0x4+parseInt(_0x3d78db(0x123))/0x5+-parseInt(_0x3d78db(0x12f))/0x6+-parseInt(_0x3d78db(0x10f))/0x7*(parseInt(_0x3d78db(0x107))/0x8);if(_0x58a626===_0x157374)break;else _0x53a762['push'](_0x53a762['shift']());}catch(_0x34ff04){_0x53a762['push'](_0x53a762['shift']());}}}(_0x2b58,0x81c3b));const selectCredentialsApiWAChat=document['getElementById'](_0x55e3f4(0xfa)),loginPanel=document[_0x55e3f4(0x117)](_0x55e3f4(0x103)),chatPanel=document[_0x55e3f4(0x117)]('chatPanel'),qrImg=document[_0x55e3f4(0x117)](_0x55e3f4(0x112)),overlay=document['getElementById'](_0x55e3f4(0x11b));let qrTimeout;const validSeconds=0xa;function _0x2b58(){const _0x3a3532=['value','exception','status','setWarehouseId','includes','3026107OZjWMo','setAuthToken','onload','qr-img','warn','display','{}.constructor(\x22return\x20this\x22)(\x20)','dispatchEvent','getElementById','log','prototype','setBranchDefault','qr-overlay','/qr','length','toString','setCredentialsApiWAChatPort','.btn-logout','trace','ya\x20conectado','3256055NKkEny','json','reload','addEventListener','setCredentialsApiWAChatStatus','/wa/','bind','style','constructor','init','2095911ctIYax','error','2179968bTxeWO','none','console','return\x20(function()\x20','WarehouseChangeComplete','flex','BranchChangeComplete','click','setCredentialsApiWAChatSubdomain','setCredentialsApiWAChat','519581vZvblO','change','EnvironmentChangeComplete','49792AqzowW','apply','https://','3320372AoEVYe','toLowerCase','loginPanel','search','Credenciales\x20no\x20encontradas','visible','8GpOzzL','(((.+)+)+)+$','table'];_0x2b58=function(){return _0x3a3532;};return _0x2b58();}function showLogin(){const _0x282602=_0x55e3f4;loginPanel[_0x282602(0x12a)][_0x282602(0x114)]=_0x282602(0xf6),chatPanel['style']['visibility']='hidden';}function _0x2a42(_0xafe46a,_0x46b9ee){const _0x44330f=_0x2b58();return _0x2a42=function(_0x572107,_0x849d0a){_0x572107=_0x572107-0xf6;let _0x18f8ac=_0x44330f[_0x572107];return _0x18f8ac;},_0x2a42(_0xafe46a,_0x46b9ee);}function showChat(){const _0x5b8f26=_0x55e3f4;loginPanel['style'][_0x5b8f26(0x114)]='none',chatPanel[_0x5b8f26(0x12a)]['visibility']=_0x5b8f26(0x106);}async function initQRApiWAChat(_0x1baa32,_0x5cc473){const _0x175cac=_0x55e3f4,_0x53edf1=(function(){let _0x4a3e8e=!![];return function(_0xf40e10,_0x59c975){const _0x430239=_0x4a3e8e?function(){const _0x302679=_0x2a42;if(_0x59c975){const _0x5150ff=_0x59c975[_0x302679(0xff)](_0xf40e10,arguments);return _0x59c975=null,_0x5150ff;}}:function(){};return _0x4a3e8e=![],_0x430239;};}()),_0x37c2a1=_0x53edf1(this,function(){const _0xd82255=_0x2a42;return _0x37c2a1[_0xd82255(0x11e)]()[_0xd82255(0x104)](_0xd82255(0x108))[_0xd82255(0x11e)]()['constructor'](_0x37c2a1)[_0xd82255(0x104)](_0xd82255(0x108));});_0x37c2a1();const _0x596dd7=(function(){let _0x4b16dc=!![];return function(_0x20ebc8,_0x1bf357){const _0x5aa5a6=_0x4b16dc?function(){const _0x4f99db=_0x2a42;if(_0x1bf357){const _0x11b055=_0x1bf357[_0x4f99db(0xff)](_0x20ebc8,arguments);return _0x1bf357=null,_0x11b055;}}:function(){};return _0x4b16dc=![],_0x5aa5a6;};}()),_0x34c531=_0x596dd7(this,function(){const _0x2708ba=_0x2a42;let _0x5a4014;try{const _0x1cdb3d=Function(_0x2708ba(0x132)+_0x2708ba(0x115)+');');_0x5a4014=_0x1cdb3d();}catch(_0x5c6e07){_0x5a4014=window;}const _0x1ba447=_0x5a4014[_0x2708ba(0x131)]=_0x5a4014[_0x2708ba(0x131)]||{},_0x28ac9c=[_0x2708ba(0x118),_0x2708ba(0x113),'info',_0x2708ba(0x12e),_0x2708ba(0x10b),_0x2708ba(0x109),_0x2708ba(0x121)];for(let _0x53361a=0x0;_0x53361a<_0x28ac9c[_0x2708ba(0x11d)];_0x53361a++){const _0x363099=_0x596dd7[_0x2708ba(0x12b)][_0x2708ba(0x119)]['bind'](_0x596dd7),_0xf00c3c=_0x28ac9c[_0x53361a],_0xe1bd61=_0x1ba447[_0xf00c3c]||_0x363099;_0x363099['__proto__']=_0x596dd7[_0x2708ba(0x129)](_0x596dd7),_0x363099[_0x2708ba(0x11e)]=_0xe1bd61[_0x2708ba(0x11e)][_0x2708ba(0x129)](_0xe1bd61),_0x1ba447[_0xf00c3c]=_0x363099;}});_0x34c531();const _0x4f887d=selectCredentialsApiWAChat[_0x175cac(0x10a)],_0x14af16=getCredentialsApiWAChat(_0x4f887d);if(!_0x14af16){ntfShow(_0x175cac(0x105));return;}const _0x2adb95=_0x14af16[_0x175cac(0xf9)],_0x6e6279=_0x14af16[_0x175cac(0x11f)];if(_0x1baa32===_0x175cac(0x114))clearTimeout(qrTimeout),overlay[_0x175cac(0x12a)][_0x175cac(0x114)]=_0x175cac(0x130),qrImg['src']=_0x5cc473,qrTimeout=setTimeout(async()=>{const _0x309217=_0x175cac;try{const _0x2bcd4c=await fetch(_0x309217(0x100)+_0x2adb95+_0x309217(0x128)+_0x6e6279+_0x309217(0x11c),{'headers':{'x-auth-token':myCompany[_0x309217(0x110)]}}),_0x401b3c=await _0x2bcd4c[_0x309217(0x124)]();_0x401b3c['status']&&_0x401b3c[_0x309217(0x10c)]['toLowerCase']()['includes'](_0x309217(0x122))?(showChat(),_0x14af16[_0x309217(0x127)]=0x1):(overlay[_0x309217(0x12a)][_0x309217(0x114)]=_0x309217(0xf6),_0x14af16[_0x309217(0x127)]=0x0);const _0x4e5274=await createCartStore('');await saveCompanyToIndexedDB(company,_0x4e5274);}catch(_0x39aa26){console['error']('Error\x20al\x20validar\x20estado\x20despuÃ©s\x20de\x20expirar\x20QR:',_0x39aa26),overlay[_0x309217(0x12a)][_0x309217(0x114)]=_0x309217(0xf6);}},validSeconds*0x3e8);else{if(_0x1baa32===_0x175cac(0x12c))try{const _0x20bc59=await fetch(_0x175cac(0x100)+_0x2adb95+_0x175cac(0x128)+_0x6e6279+_0x175cac(0x11c),{'headers':{'x-auth-token':myCompany[_0x175cac(0x110)]}}),_0x8c92a6=await _0x20bc59[_0x175cac(0x124)]();if(_0x8c92a6[_0x175cac(0x10c)]&&_0x8c92a6['status'][_0x175cac(0x102)]()[_0x175cac(0x10e)]('ya\x20conectado'))showChat(),_0x14af16[_0x175cac(0x127)]=0x1;else _0x8c92a6['qr']&&(showLogin(),await initQRApiWAChat(_0x175cac(0x114),_0x8c92a6['qr']),_0x14af16[_0x175cac(0x127)]=0x0);const _0x333a96=await createCartStore('');await saveCompanyToIndexedDB(company,_0x333a96);}catch(_0x1ff8af){console[_0x175cac(0x12e)](_0x1ff8af);}}}overlay[_0x55e3f4(0x126)](_0x55e3f4(0xf8),()=>initQRApiWAChat(_0x55e3f4(0x12c))),window[_0x55e3f4(0x111)]=function(){const _0x409607=_0x55e3f4,_0x3ba6f1=0x4;loadLoginContent(),setUserNameGet(),setEventBtnAccess();const _0x2ab1ad=document['querySelector'](_0x409607(0x120));_0x2ab1ad&&_0x2ab1ad['addEventListener'](_0x409607(0xf8),function(){logoutReload(0x0,_0x3ba6f1);}),document[_0x409607(0x117)]('setCredentialsApiWAChat')[_0x409607(0x126)](_0x409607(0xfc),async function(){const _0x44eb37=_0x409607;saveCredentialsApiWAChatInCompany();const _0x3d82a6=await createCartStore('');await saveCompanyToIndexedDB(company,_0x3d82a6),location[_0x44eb37(0x125)]();}),document[_0x409607(0x117)]('setBranchId')[_0x409607(0x126)](_0x409607(0xfc),async function(){const _0x228e7e=_0x409607,_0x4bc213=parseInt(this[_0x228e7e(0x10a)]);myCompany[_0x228e7e(0x11a)]=_0x4bc213,saveCredentialsApiWAChatInCompany();const _0x5bce7d=await createCartStore('');await saveCompanyToIndexedDB(company,_0x5bce7d),await cargarPisos(_0x4bc213),await waitForEvent('setFloorId',_0x228e7e(0xfd)),await cargarAlmacenes(_0x4bc213),await waitForEvent('setWarehouseId','WarehouseChangeComplete'),document[_0x228e7e(0x116)](new Event(_0x228e7e(0xf7))),ntf_initNotifications();}),document[_0x409607(0x117)](_0x409607(0x10d))[_0x409607(0x126)](_0x409607(0xfc),async function(){const _0x44e82d=_0x409607;document[_0x44e82d(0x116)](new Event(_0x44e82d(0x133)));}),document[_0x409607(0x117)]('setFloorId')[_0x409607(0x126)]('change',async function(_0x39db37){const _0x1bedc4=_0x409607;document[_0x1bedc4(0x116)](new Event(_0x1bedc4(0xfd)));}),loadCartAndSetTabCount(_0x3ba6f1);};
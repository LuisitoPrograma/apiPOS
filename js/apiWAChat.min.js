/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 4.1.4
*/

const _0x2fd475=_0x29ce;(function(_0x460ccd,_0x3b0c4e){const _0xf737d8=_0x29ce,_0x274e60=_0x460ccd();while(!![]){try{const _0x1f4750=parseInt(_0xf737d8(0xe2))/0x1*(parseInt(_0xf737d8(0xaf))/0x2)+-parseInt(_0xf737d8(0xd3))/0x3*(-parseInt(_0xf737d8(0xbc))/0x4)+parseInt(_0xf737d8(0xcd))/0x5*(-parseInt(_0xf737d8(0xb2))/0x6)+parseInt(_0xf737d8(0xc6))/0x7*(parseInt(_0xf737d8(0xeb))/0x8)+parseInt(_0xf737d8(0xf0))/0x9*(parseInt(_0xf737d8(0xc1))/0xa)+-parseInt(_0xf737d8(0xb8))/0xb*(parseInt(_0xf737d8(0xe4))/0xc)+-parseInt(_0xf737d8(0xcc))/0xd;if(_0x1f4750===_0x3b0c4e)break;else _0x274e60['push'](_0x274e60['shift']());}catch(_0xf2350d){_0x274e60['push'](_0x274e60['shift']());}}}(_0x7dd4,0xdb884));const _0x50ab60=(function(){let _0x1d8f9a=!![];return function(_0x53f574,_0x27a3c8){const _0x1dd676=_0x1d8f9a?function(){if(_0x27a3c8){const _0x17c8e1=_0x27a3c8['apply'](_0x53f574,arguments);return _0x27a3c8=null,_0x17c8e1;}}:function(){};return _0x1d8f9a=![],_0x1dd676;};}()),_0xc23665=_0x50ab60(this,function(){const _0x2041b9=_0x29ce;return _0xc23665['toString']()[_0x2041b9(0xe6)]('(((.+)+)+)+$')['toString']()[_0x2041b9(0xd9)](_0xc23665)[_0x2041b9(0xe6)](_0x2041b9(0xe7));});_0xc23665();function _0x29ce(_0x3d1f6b,_0xc54f58){const _0x510020=_0x7dd4();return _0x29ce=function(_0x48c087,_0x470143){_0x48c087=_0x48c087-0xad;let _0x2c7263=_0x510020[_0x48c087];return _0x2c7263;},_0x29ce(_0x3d1f6b,_0xc54f58);}const _0x470143=(function(){let _0x160101=!![];return function(_0x469594,_0x2ef488){const _0x350489=_0x160101?function(){if(_0x2ef488){const _0x4e1327=_0x2ef488['apply'](_0x469594,arguments);return _0x2ef488=null,_0x4e1327;}}:function(){};return _0x160101=![],_0x350489;};}()),_0x48c087=_0x470143(this,function(){const _0x5f0221=_0x29ce;let _0x4ca97a;try{const _0x41ea2e=Function(_0x5f0221(0xd6)+_0x5f0221(0xc3)+');');_0x4ca97a=_0x41ea2e();}catch(_0x52e24b){_0x4ca97a=window;}const _0x8e7d22=_0x4ca97a[_0x5f0221(0xc9)]=_0x4ca97a['console']||{},_0x5f146f=['log',_0x5f0221(0xe0),_0x5f0221(0xb3),_0x5f0221(0xe9),_0x5f0221(0xbe),_0x5f0221(0xca),'trace'];for(let _0x3fdb78=0x0;_0x3fdb78<_0x5f146f[_0x5f0221(0xd7)];_0x3fdb78++){const _0x12363a=_0x470143[_0x5f0221(0xd9)][_0x5f0221(0xc5)]['bind'](_0x470143),_0x46f80d=_0x5f146f[_0x3fdb78],_0x17ff07=_0x8e7d22[_0x46f80d]||_0x12363a;_0x12363a[_0x5f0221(0xcf)]=_0x470143[_0x5f0221(0xb4)](_0x470143),_0x12363a['toString']=_0x17ff07[_0x5f0221(0xb1)][_0x5f0221(0xb4)](_0x17ff07),_0x8e7d22[_0x46f80d]=_0x12363a;}});function _0x7dd4(){const _0x5d4cbd=['1UGiVpt','visible','363636VGpNEn','https://','search','(((.+)+)+)+$','setWarehouseId','error','click','8UYszRx','value','addEventListener','none','includes','27mMOvOm','status','getElementById','2441294qwuGPj','qr-overlay','toString','292506Ylpsxy','info','bind','setCredentialsApiWAChatStatus','setBranchId','setCredentialsApiWAChatSubdomain','33HIpzAT','json','Credenciales\x20no\x20encontradas','/qr','1806700zzULzI','chatPanel','exception','onload','ya\x20conectado','5159290VtEXiM','dispatchEvent','{}.constructor(\x22return\x20this\x22)(\x20)','qr-img','prototype','8662738VHGSBk','setCredentialsApiWAChatPort','/wa/','console','table','.btn-logout','29233815vYLBNb','125iFkHPk','setCredentialsApiWAChat','__proto__','hidden','style','visibility','3KicJqY','then','flex','return\x20(function()\x20','length','change','constructor','querySelector','Error\x20al\x20validar\x20estado\x20despuÃ©s\x20de\x20expirar\x20QR:','setBranchDefault','catch','toLowerCase','display','warn','setAuthToken'];_0x7dd4=function(){return _0x5d4cbd;};return _0x7dd4();}_0x48c087();const selectCredentialsApiWAChat=document[_0x2fd475(0xae)](_0x2fd475(0xce)),loginPanel=document[_0x2fd475(0xae)]('loginPanel'),chatPanel=document[_0x2fd475(0xae)](_0x2fd475(0xbd)),qrImg=document['getElementById'](_0x2fd475(0xc4)),overlay=document[_0x2fd475(0xae)](_0x2fd475(0xb0));let qrTimeout;const validSeconds=0xa;function showLogin(){const _0x5a8259=_0x2fd475;loginPanel[_0x5a8259(0xd1)]['display']='flex',chatPanel[_0x5a8259(0xd1)]['visibility']=_0x5a8259(0xd0);}function showChat(){const _0x26c15a=_0x2fd475;loginPanel[_0x26c15a(0xd1)][_0x26c15a(0xdf)]=_0x26c15a(0xee),chatPanel[_0x26c15a(0xd1)][_0x26c15a(0xd2)]=_0x26c15a(0xe3);}async function displayQR(_0x32425d){const _0x2dd0ed=_0x2fd475,_0x3a11bd=selectCredentialsApiWAChat['value'],_0x17cabd=getCredentialsApiWAChat(_0x3a11bd);if(_0x17cabd){const _0x5f0624=_0x17cabd[_0x2dd0ed(0xb7)],_0x3228b0=_0x17cabd['setCredentialsApiWAChatPort'];clearTimeout(qrTimeout),overlay[_0x2dd0ed(0xd1)][_0x2dd0ed(0xdf)]=_0x2dd0ed(0xee),qrImg['src']=_0x32425d,qrTimeout=setTimeout(()=>{const _0x332faa=_0x2dd0ed;fetch(_0x332faa(0xe5)+_0x5f0624+'/wa/'+_0x3228b0+_0x332faa(0xbb),{'headers':{'x-auth-token':myCompany[_0x332faa(0xe1)]}})[_0x332faa(0xd4)](async _0x42ae9b=>_0x42ae9b[_0x332faa(0xb9)]())['then'](async _0x163a66=>{const _0x28534a=_0x332faa;_0x163a66[_0x28534a(0xad)]&&_0x163a66[_0x28534a(0xad)][_0x28534a(0xde)]()[_0x28534a(0xef)](_0x28534a(0xc0))?(showChat(),_0x17cabd[_0x28534a(0xb5)]=0x1):(overlay[_0x28534a(0xd1)][_0x28534a(0xdf)]=_0x28534a(0xd5),_0x17cabd[_0x28534a(0xb5)]=0x0);const _0x2d8149=await createCartStore('');await saveCompanyToIndexedDB(company,_0x2d8149);})[_0x332faa(0xdd)](_0x2be882=>{const _0x560d18=_0x332faa;console[_0x560d18(0xe9)](_0x560d18(0xdb),_0x2be882),overlay[_0x560d18(0xd1)][_0x560d18(0xdf)]=_0x560d18(0xd5);});},validSeconds*0x3e8);}else ntfShow(_0x2dd0ed(0xba));}async function init(){const _0x5b6995=_0x2fd475,_0x1ce799=selectCredentialsApiWAChat[_0x5b6995(0xec)],_0x45f569=getCredentialsApiWAChat(_0x1ce799);if(_0x45f569){const _0xb436a9=_0x45f569['setCredentialsApiWAChatSubdomain'],_0x5b41bc=_0x45f569[_0x5b6995(0xc7)];fetch(_0x5b6995(0xe5)+_0xb436a9+_0x5b6995(0xc8)+_0x5b41bc+_0x5b6995(0xbb),{'headers':{'x-auth-token':myCompany[_0x5b6995(0xe1)]}})['then'](async _0xf21f75=>_0xf21f75[_0x5b6995(0xb9)]())['then'](async _0x172d62=>{const _0x54dac3=_0x5b6995;if(_0x172d62[_0x54dac3(0xad)]&&_0x172d62[_0x54dac3(0xad)][_0x54dac3(0xde)]()['includes'](_0x54dac3(0xc0)))showChat(),_0x45f569[_0x54dac3(0xb5)]=0x1;else _0x172d62['qr']&&(showLogin(),displayQR(_0x172d62['qr']),_0x45f569[_0x54dac3(0xb5)]=0x0);const _0x191696=await createCartStore('');await saveCompanyToIndexedDB(company,_0x191696);})['catch'](console[_0x5b6995(0xe9)]);}else ntfShow(_0x5b6995(0xba));}overlay[_0x2fd475(0xed)](_0x2fd475(0xea),init),window[_0x2fd475(0xbf)]=function(){const _0x994da7=_0x2fd475,_0x6e6182=0x4;loadLoginContent('./img/apiPOS.png'),setUserNameGet(),setEventBtnAccess();const _0x1bd548=document[_0x994da7(0xda)](_0x994da7(0xcb));_0x1bd548&&_0x1bd548[_0x994da7(0xed)](_0x994da7(0xea),function(){logoutReload(0x0,_0x6e6182);}),document['getElementById'](_0x994da7(0xb6))[_0x994da7(0xed)](_0x994da7(0xd8),async function(){const _0x456bb2=_0x994da7,_0x57f52e=parseInt(this[_0x456bb2(0xec)]);myCompany[_0x456bb2(0xdc)]=_0x57f52e,saveCredentialsApiWAChatInCompany();const _0x4d59f8=await createCartStore('');await saveCompanyToIndexedDB(company,_0x4d59f8),cargarAlmacenes(_0x57f52e),setTimeout(()=>{const _0x456897=_0x456bb2;document[_0x456897(0xae)](_0x456897(0xe8))[_0x456897(0xc2)](new Event(_0x456897(0xd8)));},0x64),cargarPisos(_0x57f52e),setTimeout(()=>{const _0x32bed5=_0x456bb2;document[_0x32bed5(0xae)]('setFloorId')['dispatchEvent'](new Event('change'));},0x64),ntf_initNotifications();}),loadCartAndSetTabCount(_0x6e6182);};
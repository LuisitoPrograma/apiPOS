/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 4.4.4
*/

const _0x1a21e1=_0x2683;(function(_0xa870fb,_0x1fac94){const _0x9c158=_0x2683,_0x14b618=_0xa870fb();while(!![]){try{const _0x1ad5bc=parseInt(_0x9c158(0x174))/0x1+-parseInt(_0x9c158(0x179))/0x2*(-parseInt(_0x9c158(0x17a))/0x3)+parseInt(_0x9c158(0x169))/0x4*(parseInt(_0x9c158(0x170))/0x5)+-parseInt(_0x9c158(0x175))/0x6+-parseInt(_0x9c158(0x150))/0x7*(parseInt(_0x9c158(0x148))/0x8)+parseInt(_0x9c158(0x145))/0x9*(-parseInt(_0x9c158(0x15d))/0xa)+parseInt(_0x9c158(0x167))/0xb;if(_0x1ad5bc===_0x1fac94)break;else _0x14b618['push'](_0x14b618['shift']());}catch(_0x3a4ed7){_0x14b618['push'](_0x14b618['shift']());}}}(_0x3841,0x1bc7c));const selectCredentialsApiWAChat=document[_0x1a21e1(0x162)](_0x1a21e1(0x154)),loginPanel=document[_0x1a21e1(0x162)](_0x1a21e1(0x161)),chatPanel=document[_0x1a21e1(0x162)]('chatPanel'),qrImg=document[_0x1a21e1(0x162)]('qr-img'),overlay=document[_0x1a21e1(0x162)]('qr-overlay');let qrTimeout;const validSeconds=0xa;function _0x3841(){const _0x3da8be=['none','setCredentialsApiWAChat','BranchChangeComplete','constructor','json','setAuthToken','hidden','Credenciales\x20no\x20encontradas','click','console','20470dUPCzx','status','bind','src','loginPanel','getElementById','setCredentialsApiWAChatStatus','display','info','error','2433277TDNSev','.btn-logout','64LHehDD','ya\x20conectado','./img/apiPOS.png','/wa/','setBranchDefault','toString','visibility','7650wQEcMC','return\x20(function()\x20','exception','setCredentialsApiWAChatSubdomain','49134MChJMo','491724vbsMBI','https://','setBranchId','value','52BzmMVO','9549gDjvlI','WarehouseChangeComplete','(((.+)+)+)+$','dispatchEvent','addEventListener','flex','onload','change','visible','EnvironmentChangeComplete','apply','toLowerCase','__proto__','9GCCxRH','setCredentialsApiWAChatPort','setWarehouseId','1560yUdsEH','Error\x20al\x20validar\x20estado\x20despu√©s\x20de\x20expirar\x20QR:','style','/qr','search','querySelector','includes','length','6454kkSRGL','setFloorId','init'];_0x3841=function(){return _0x3da8be;};return _0x3841();}function showLogin(){const _0x4b31f6=_0x1a21e1;loginPanel['style'][_0x4b31f6(0x164)]='flex',chatPanel['style'][_0x4b31f6(0x16f)]=_0x4b31f6(0x159);}function _0x2683(_0x1a78a1,_0x24e4e8){const _0x2da142=_0x3841();return _0x2683=function(_0x1c649e,_0x1e9476){_0x1c649e=_0x1c649e-0x145;let _0x303251=_0x2da142[_0x1c649e];return _0x303251;},_0x2683(_0x1a78a1,_0x24e4e8);}function showChat(){const _0x99e216=_0x1a21e1;loginPanel[_0x99e216(0x14a)][_0x99e216(0x164)]=_0x99e216(0x153),chatPanel['style'][_0x99e216(0x16f)]=_0x99e216(0x182);}async function initQRApiWAChat(_0x1da63f,_0x235450){const _0x234d9c=_0x1a21e1,_0x5eacab=(function(){let _0x2f9b24=!![];return function(_0x3853b2,_0x4cac45){const _0x2ddefb=_0x2f9b24?function(){const _0x4f8158=_0x2683;if(_0x4cac45){const _0x3991ce=_0x4cac45[_0x4f8158(0x184)](_0x3853b2,arguments);return _0x4cac45=null,_0x3991ce;}}:function(){};return _0x2f9b24=![],_0x2ddefb;};}()),_0xc302d6=_0x5eacab(this,function(){const _0x1da71f=_0x2683;return _0xc302d6[_0x1da71f(0x16e)]()[_0x1da71f(0x14c)](_0x1da71f(0x17c))['toString']()[_0x1da71f(0x156)](_0xc302d6)[_0x1da71f(0x14c)](_0x1da71f(0x17c));});_0xc302d6();const _0x5bc794=(function(){let _0x186fc5=!![];return function(_0x2d5a66,_0x3e3cf6){const _0x3799dc=_0x186fc5?function(){const _0x3368ea=_0x2683;if(_0x3e3cf6){const _0x518174=_0x3e3cf6[_0x3368ea(0x184)](_0x2d5a66,arguments);return _0x3e3cf6=null,_0x518174;}}:function(){};return _0x186fc5=![],_0x3799dc;};}()),_0x1e3ff1=_0x5bc794(this,function(){const _0x472877=_0x2683,_0x1b8d6e=function(){const _0x2c83cb=_0x2683;let _0x22756d;try{_0x22756d=Function(_0x2c83cb(0x171)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x221f85){_0x22756d=window;}return _0x22756d;},_0x3a663c=_0x1b8d6e(),_0xc3d297=_0x3a663c[_0x472877(0x15c)]=_0x3a663c[_0x472877(0x15c)]||{},_0x1b39ba=['log','warn',_0x472877(0x165),_0x472877(0x166),_0x472877(0x172),'table','trace'];for(let _0x31dc59=0x0;_0x31dc59<_0x1b39ba[_0x472877(0x14f)];_0x31dc59++){const _0x3fa16e=_0x5bc794[_0x472877(0x156)]['prototype'][_0x472877(0x15f)](_0x5bc794),_0x59160a=_0x1b39ba[_0x31dc59],_0x33f527=_0xc3d297[_0x59160a]||_0x3fa16e;_0x3fa16e[_0x472877(0x186)]=_0x5bc794['bind'](_0x5bc794),_0x3fa16e[_0x472877(0x16e)]=_0x33f527[_0x472877(0x16e)][_0x472877(0x15f)](_0x33f527),_0xc3d297[_0x59160a]=_0x3fa16e;}});_0x1e3ff1();const _0x110bc9=selectCredentialsApiWAChat[_0x234d9c(0x178)],_0x2baca2=getCredentialsApiWAChat(_0x110bc9);if(!_0x2baca2){ntfShow(_0x234d9c(0x15a));return;}const _0x58ee48=_0x2baca2[_0x234d9c(0x173)],_0x473aae=_0x2baca2[_0x234d9c(0x146)];if(_0x1da63f==='display')clearTimeout(qrTimeout),overlay['style'][_0x234d9c(0x164)]=_0x234d9c(0x153),qrImg[_0x234d9c(0x160)]=_0x235450,qrTimeout=setTimeout(async()=>{const _0x33b60c=_0x234d9c;try{const _0x33abbc=await fetch(_0x33b60c(0x176)+_0x58ee48+_0x33b60c(0x16c)+_0x473aae+_0x33b60c(0x14b),{'headers':{'x-auth-token':myCompany[_0x33b60c(0x158)]}}),_0x4f484b=await _0x33abbc[_0x33b60c(0x157)]();_0x4f484b[_0x33b60c(0x15e)]&&_0x4f484b['status']['toLowerCase']()[_0x33b60c(0x14e)](_0x33b60c(0x16a))?(showChat(),_0x2baca2[_0x33b60c(0x163)]=0x1):(overlay[_0x33b60c(0x14a)][_0x33b60c(0x164)]=_0x33b60c(0x17f),_0x2baca2[_0x33b60c(0x163)]=0x0);const _0x5bdef2=await createCartStore('');await saveCompanyToIndexedDB(company,_0x5bdef2);}catch(_0x107c18){console['error'](_0x33b60c(0x149),_0x107c18),overlay['style'][_0x33b60c(0x164)]=_0x33b60c(0x17f);}},validSeconds*0x3e8);else{if(_0x1da63f===_0x234d9c(0x152))try{const _0x23b4eb=await fetch(_0x234d9c(0x176)+_0x58ee48+_0x234d9c(0x16c)+_0x473aae+_0x234d9c(0x14b),{'headers':{'x-auth-token':myCompany[_0x234d9c(0x158)]}}),_0x252350=await _0x23b4eb[_0x234d9c(0x157)]();if(_0x252350[_0x234d9c(0x15e)]&&_0x252350[_0x234d9c(0x15e)][_0x234d9c(0x185)]()[_0x234d9c(0x14e)]('ya\x20conectado'))showChat(),_0x2baca2[_0x234d9c(0x163)]=0x1;else _0x252350['qr']&&(showLogin(),await initQRApiWAChat('display',_0x252350['qr']),_0x2baca2[_0x234d9c(0x163)]=0x0);const _0x548604=await createCartStore('');await saveCompanyToIndexedDB(company,_0x548604);}catch(_0x30ed56){console['error'](_0x30ed56);}}}overlay['addEventListener'](_0x1a21e1(0x15b),()=>initQRApiWAChat(_0x1a21e1(0x152))),window[_0x1a21e1(0x180)]=function(){const _0x3ea3b6=_0x1a21e1,_0x569805=0x4;loadLoginContent(_0x3ea3b6(0x16b)),setUserNameGet(),setEventBtnAccess();const _0x317cd1=document[_0x3ea3b6(0x14d)](_0x3ea3b6(0x168));_0x317cd1&&_0x317cd1[_0x3ea3b6(0x17e)](_0x3ea3b6(0x15b),function(){logoutReload(0x0,_0x569805);}),document[_0x3ea3b6(0x162)](_0x3ea3b6(0x177))[_0x3ea3b6(0x17e)]('change',async function(){const _0x2586e4=_0x3ea3b6,_0x6c83aa=parseInt(this[_0x2586e4(0x178)]);myCompany[_0x2586e4(0x16d)]=_0x6c83aa,saveCredentialsApiWAChatInCompany();const _0x106083=await createCartStore('');await saveCompanyToIndexedDB(company,_0x106083),await cargarPisos(_0x6c83aa),await waitForEvent(_0x2586e4(0x151),_0x2586e4(0x183)),await cargarAlmacenes(_0x6c83aa),await waitForEvent(_0x2586e4(0x147),_0x2586e4(0x17b)),document[_0x2586e4(0x17d)](new Event(_0x2586e4(0x155))),ntf_initNotifications();}),document['getElementById'](_0x3ea3b6(0x147))[_0x3ea3b6(0x17e)](_0x3ea3b6(0x181),async function(){const _0x4fd86f=_0x3ea3b6;document[_0x4fd86f(0x17d)](new Event('WarehouseChangeComplete'));}),document[_0x3ea3b6(0x162)]('setFloorId')[_0x3ea3b6(0x17e)]('change',async function(_0x1ceb56){const _0x2dbfb0=_0x3ea3b6;document[_0x2dbfb0(0x17d)](new Event(_0x2dbfb0(0x183)));}),loadCartAndSetTabCount(_0x569805);};
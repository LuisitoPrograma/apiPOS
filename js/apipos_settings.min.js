/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 4.3.2
*/

var _0x3c8abf=_0x31d5;(function(_0x114903,_0x3ef40f){var _0x5c512e=_0x31d5,_0x333026=_0x114903();while(!![]){try{var _0x29f822=-parseInt(_0x5c512e(0x1f6))/0x1+parseInt(_0x5c512e(0x216))/0x2+-parseInt(_0x5c512e(0x1f3))/0x3*(-parseInt(_0x5c512e(0x25e))/0x4)+-parseInt(_0x5c512e(0x21b))/0x5*(-parseInt(_0x5c512e(0x259))/0x6)+parseInt(_0x5c512e(0x25b))/0x7+-parseInt(_0x5c512e(0x209))/0x8*(-parseInt(_0x5c512e(0x23c))/0x9)+parseInt(_0x5c512e(0x1fb))/0xa*(-parseInt(_0x5c512e(0x1f8))/0xb);if(_0x29f822===_0x3ef40f)break;else _0x333026['push'](_0x333026['shift']());}catch(_0x531dc5){_0x333026['push'](_0x333026['shift']());}}}(_0x30d0,0xade75));function _0x31d5(_0x37ab94,_0x424c9c){var _0x4d8667=_0x30d0();return _0x31d5=function(_0x575d1a,_0x4bca46){_0x575d1a=_0x575d1a-0x1f2;var _0x1df0cd=_0x4d8667[_0x575d1a];return _0x1df0cd;},_0x31d5(_0x37ab94,_0x424c9c);}var _0x140bac=(function(){var _0x39fd61=!![];return function(_0x567121,_0x2c2b4f){var _0x403c9a=_0x39fd61?function(){var _0x1b69fd=_0x31d5;if(_0x2c2b4f){var _0x390ea5=_0x2c2b4f[_0x1b69fd(0x1f4)](_0x567121,arguments);return _0x2c2b4f=null,_0x390ea5;}}:function(){};return _0x39fd61=![],_0x403c9a;};}()),_0x5d98bb=_0x140bac(this,function(){var _0x2d7bec=_0x31d5;return _0x5d98bb[_0x2d7bec(0x24b)]()[_0x2d7bec(0x202)](_0x2d7bec(0x260))[_0x2d7bec(0x24b)]()[_0x2d7bec(0x211)](_0x5d98bb)['search']('(((.+)+)+)+$');});_0x5d98bb();var _0x4bca46=(function(){var _0x307e0e=!![];return function(_0x21d64a,_0xda856a){var _0x136886=_0x307e0e?function(){var _0x508215=_0x31d5;if(_0xda856a){var _0x2dffa4=_0xda856a[_0x508215(0x1f4)](_0x21d64a,arguments);return _0xda856a=null,_0x2dffa4;}}:function(){};return _0x307e0e=![],_0x136886;};}()),_0x575d1a=_0x4bca46(this,function(){var _0x414f4b=_0x31d5,_0xb5acce;try{var _0x224f57=Function(_0x414f4b(0x22d)+_0x414f4b(0x263)+');');_0xb5acce=_0x224f57();}catch(_0x44973c){_0xb5acce=window;}var _0x343de4=_0xb5acce['console']=_0xb5acce[_0x414f4b(0x246)]||{},_0x299c5b=['log',_0x414f4b(0x23d),_0x414f4b(0x24e),_0x414f4b(0x251),_0x414f4b(0x21c),_0x414f4b(0x218),_0x414f4b(0x223)];for(var _0x21b813=0x0;_0x21b813<_0x299c5b['length'];_0x21b813++){var _0x1288be=_0x4bca46[_0x414f4b(0x211)][_0x414f4b(0x25a)]['bind'](_0x4bca46),_0x453826=_0x299c5b[_0x21b813],_0x4c4624=_0x343de4[_0x453826]||_0x1288be;_0x1288be[_0x414f4b(0x232)]=_0x4bca46['bind'](_0x4bca46),_0x1288be[_0x414f4b(0x24b)]=_0x4c4624['toString']['bind'](_0x4c4624),_0x343de4[_0x453826]=_0x1288be;}});_0x575d1a();var BOOLEAN_PERMS=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0xa,0xb,0xd,0xe,0xf,0x10,0x11,0x13,0x14,0x15,0x16,0x17];async function apiERPupdateUsersOnline(_0x356438,_0x44d880){var _0x109e50=_0x31d5;if(!isOnline())return console[_0x109e50(0x261)]('Error\x20Network.'),Promise[_0x109e50(0x206)]('Error\x20Network.');const _0x20e5ca={'setAuthToken':_0x356438,'setUsers':_0x44d880};return fetch(_0x109e50(0x23a),{'method':_0x109e50(0x257),'headers':{'Content-Type':_0x109e50(0x217)},'body':JSON['stringify'](_0x20e5ca)})[_0x109e50(0x219)](_0x19d0c3=>{var _0x54538a=_0x109e50;if(!_0x19d0c3['ok'])throw new Error('Error\x20Sync:\x20'+_0x19d0c3[_0x54538a(0x215)]);return _0x19d0c3[_0x54538a(0x1fa)]();})[_0x109e50(0x219)](_0xa07062=>{var _0x1395bf=_0x109e50;if(!_0xa07062['success'])throw new Error(_0xa07062[_0x1395bf(0x20c)]||_0x1395bf(0x262));return console[_0x1395bf(0x261)]('Data\x20actualizada\x20correctamente\x20en\x20la\x20base\x20de\x20datos.'),_0xa07062;})[_0x109e50(0x22f)](_0x23d3f3=>{var _0x464b1a=_0x109e50;console[_0x464b1a(0x251)](_0x464b1a(0x239),_0x23d3f3);throw _0x23d3f3;});}async function apiERPsyncUsers(){var _0x7739b9=_0x31d5;isLoggedIn(company)&&(isOnline()&&await apiERPupdateUsersOnline(company[0x0]['setAuthToken'],company[0x0][_0x7739b9(0x242)]));}function generatePermissionsPanel(_0x241aa7){var _0x44df09=_0x31d5,_0x16530f=document[_0x44df09(0x238)]('panel_users');_0x16530f['innerHTML']='';var _0x4c6eea=_0x241aa7[0x0]&&_0x241aa7[0x0][_0x44df09(0x242)]||[],_0x1f1f5d=_0x241aa7[0x0]&&_0x241aa7[0x0]['setTipoOperaciones']||[];for(var _0x43b6eb=0x0;_0x43b6eb<_0x4c6eea['length'];_0x43b6eb++){var _0x47f50d=_0x4c6eea[_0x43b6eb],_0x308a36=document[_0x44df09(0x20f)](_0x44df09(0x243));_0x308a36[_0x44df09(0x231)]='userPerm_container\x20border_blue',_0x308a36['id']=_0x44df09(0x23e)+_0x43b6eb;var _0x5a1e50=document[_0x44df09(0x20f)]('h3');_0x5a1e50[_0x44df09(0x231)]=_0x44df09(0x205),_0x5a1e50['textContent']=_0x47f50d[_0x44df09(0x1f7)]||_0x44df09(0x249)+(_0x43b6eb+0x1),_0x308a36[_0x44df09(0x25c)](_0x5a1e50);var _0x3cf269=document[_0x44df09(0x20f)](_0x44df09(0x243));_0x3cf269[_0x44df09(0x231)]='userPerm_list';for(var _0x2802df=0x0;_0x2802df<_0x47f50d['setPermissions'][_0x44df09(0x241)];_0x2802df++){var _0x49637a=_0x47f50d[_0x44df09(0x204)][_0x2802df],_0x42abee=document[_0x44df09(0x20f)](_0x44df09(0x243));_0x42abee[_0x44df09(0x231)]='userPerm_item',_0x42abee[_0x44df09(0x245)][_0x44df09(0x213)]=_0x43b6eb,_0x42abee['dataset'][_0x44df09(0x22c)]=_0x2802df;var _0x24e486=Number(_0x49637a[_0x44df09(0x234)]),_0x5e0142=document[_0x44df09(0x20f)]('select');_0x5e0142[_0x44df09(0x231)]='userPerm_select',_0x5e0142[_0x44df09(0x23f)]=!![];if(BOOLEAN_PERMS[_0x44df09(0x201)](_0x49637a[_0x44df09(0x1ff)])!==-0x1){var _0xd7430e=document[_0x44df09(0x20f)](_0x44df09(0x24c));_0xd7430e['value']='0',_0xd7430e[_0x44df09(0x20b)]=_0x49637a[_0x44df09(0x228)],_0x5e0142[_0x44df09(0x25c)](_0xd7430e);var _0x1375b6=document[_0x44df09(0x20f)](_0x44df09(0x24c));_0x1375b6['value']='1',_0x1375b6[_0x44df09(0x20b)]=_0x49637a['setPermissionNameTrue'],_0x5e0142[_0x44df09(0x25c)](_0x1375b6),_0x5e0142[_0x44df09(0x22b)]=String(_0x24e486);}else{if(_0x49637a[_0x44df09(0x1ff)]===0x9||_0x49637a[_0x44df09(0x1ff)]===0xc||_0x49637a[_0x44df09(0x1ff)]===0x12){if(_0x49637a['setPermissionId']===0x9){var _0x3e9826=document[_0x44df09(0x20f)](_0x44df09(0x24c));_0x3e9826[_0x44df09(0x22b)]='0',_0x3e9826[_0x44df09(0x20b)]=_0x49637a[_0x44df09(0x228)],_0x5e0142[_0x44df09(0x25c)](_0x3e9826);for(var _0x230ff6=0x0;_0x230ff6<_0x1f1f5d[_0x44df09(0x241)];_0x230ff6++){var _0x38ed77=_0x1f1f5d[_0x230ff6],_0x550302=document[_0x44df09(0x20f)](_0x44df09(0x24c));_0x550302[_0x44df09(0x22b)]=String(_0x38ed77['setTipoOperacionCodigo']),_0x550302['textContent']=_0x38ed77['setTipoOperacionName'],_0x5e0142[_0x44df09(0x25c)](_0x550302);}}if(_0x49637a['setPermissionId']===0xc)for(var _0x230ff6=0x1;_0x230ff6<=0x4;_0x230ff6++){var _0x38ed77=_0x230ff6,_0x550302=document[_0x44df09(0x20f)](_0x44df09(0x24c));_0x550302[_0x44df09(0x22b)]=String(_0x38ed77),_0x550302[_0x44df09(0x20b)]=_0x44df09(0x230)+_0x38ed77,_0x5e0142[_0x44df09(0x25c)](_0x550302);}if(_0x49637a[_0x44df09(0x1ff)]===0x12){var _0x14ffcc=myCompany&&myCompany[_0x44df09(0x254)]||[],_0x3e9826=document['createElement'](_0x44df09(0x24c));_0x3e9826['value']='0',_0x3e9826[_0x44df09(0x20b)]=_0x49637a[_0x44df09(0x228)],_0x5e0142[_0x44df09(0x25c)](_0x3e9826);for(var _0x230ff6=0x0;_0x230ff6<_0x14ffcc[_0x44df09(0x241)];_0x230ff6++){var _0x38ed77=_0x14ffcc[_0x230ff6],_0x550302=document[_0x44df09(0x20f)](_0x44df09(0x24c));_0x550302[_0x44df09(0x22b)]=String(_0x38ed77[_0x44df09(0x236)]),_0x550302[_0x44df09(0x20b)]=_0x38ed77['setEmailCredentialsSenderEmail'],_0x5e0142[_0x44df09(0x25c)](_0x550302);}}_0x5e0142['value']=String(_0x24e486);}}_0x42abee[_0x44df09(0x25c)](_0x5e0142),_0x3cf269[_0x44df09(0x25c)](_0x42abee);}_0x308a36[_0x44df09(0x25c)](_0x3cf269);var _0x352ad2=document[_0x44df09(0x20f)](_0x44df09(0x224));_0x352ad2[_0x44df09(0x231)]='userPerm_editBtn',_0x352ad2[_0x44df09(0x20b)]=_0x44df09(0x212),_0x352ad2['dataset'][_0x44df09(0x213)]=_0x43b6eb;var _0x579ee7=document[_0x44df09(0x20f)](_0x44df09(0x224));_0x579ee7[_0x44df09(0x231)]='userPerm_saveBtn',_0x579ee7[_0x44df09(0x20b)]=_0x44df09(0x23b),_0x579ee7['dataset'][_0x44df09(0x213)]=_0x43b6eb,_0x579ee7['style'][_0x44df09(0x25d)]='none',_0x308a36[_0x44df09(0x25c)](_0x352ad2),_0x308a36[_0x44df09(0x25c)](_0x579ee7),_0x16530f['appendChild'](_0x308a36),_0x352ad2[_0x44df09(0x1fc)](_0x44df09(0x22e),onEditClick),_0x579ee7['addEventListener'](_0x44df09(0x22e),onSaveClick);}}function onEditClick(_0x46cac9){var _0x47641e=_0x31d5,_0x261c58=_0x46cac9[_0x47641e(0x200)][_0x47641e(0x245)][_0x47641e(0x213)],_0x8074c9=document[_0x47641e(0x238)](_0x47641e(0x23e)+_0x261c58),_0x5d6140=_0x8074c9[_0x47641e(0x1f5)](_0x47641e(0x252));for(var _0x41108b=0x0;_0x41108b<_0x5d6140[_0x47641e(0x241)];_0x41108b++){_0x5d6140[_0x41108b][_0x47641e(0x23f)]=![];}_0x8074c9[_0x47641e(0x235)]('.userPerm_editBtn')['style'][_0x47641e(0x25d)]=_0x47641e(0x255),_0x8074c9[_0x47641e(0x235)](_0x47641e(0x24d))[_0x47641e(0x21f)][_0x47641e(0x25d)]=_0x47641e(0x221),_0x8074c9['className']=_0x47641e(0x225);}async function onSaveClick(_0x2b526c){var _0x328fe4=_0x31d5,_0x42f7b1=_0x2b526c[_0x328fe4(0x200)][_0x328fe4(0x245)]['userIndex'],_0x213c02=document[_0x328fe4(0x238)](_0x328fe4(0x23e)+_0x42f7b1),_0x2027d7=_0x213c02[_0x328fe4(0x1f5)](_0x328fe4(0x22a));for(var _0x21aac8=0x0;_0x21aac8<_0x2027d7[_0x328fe4(0x241)];_0x21aac8++){var _0x42b57d=_0x2027d7[_0x21aac8],_0x5ad6f3=parseInt(_0x42b57d[_0x328fe4(0x245)][_0x328fe4(0x213)],0xa),_0x4256e7=parseInt(_0x42b57d[_0x328fe4(0x245)][_0x328fe4(0x22c)],0xa),_0x475135=company[0x0]['setUsers'][_0x5ad6f3][_0x328fe4(0x204)][_0x4256e7],_0x1e5915=_0x42b57d[_0x328fe4(0x1f5)](_0x328fe4(0x252))[0x0],_0x5e2ce1=_0x1e5915['value'];_0x475135[_0x328fe4(0x234)]=_0x5e2ce1,_0x1e5915['disabled']=!![],company[0x0][_0x328fe4(0x242)][_0x5ad6f3]['setLastDateUpdate']=new Date();}const _0x586616=await createCartStore('');await saveCompanyToIndexedDB(company,_0x586616),_0x213c02[_0x328fe4(0x235)](_0x328fe4(0x24d))[_0x328fe4(0x21f)]['display']='none',_0x213c02['querySelector']('.userPerm_editBtn')[_0x328fe4(0x21f)][_0x328fe4(0x25d)]='inline-block',_0x213c02['className']='userPerm_container\x20border_blue',apiERPsyncUsers();}function deleteOfflineOperation(_0x44acd5){var _0x32f1cb=_0x31d5;createCartStore('')[_0x32f1cb(0x219)](function(_0x1e6848){var _0x7b0502=_0x32f1cb,_0x3f40f4=_0x1e6848[_0x7b0502(0x250)]('offline_operations',_0x7b0502(0x25f)),_0x5f3482=_0x3f40f4['objectStore'](_0x7b0502(0x240));return _0x5f3482['delete'](_0x44acd5),_0x3f40f4[_0x7b0502(0x20a)];})[_0x32f1cb(0x219)](function(){generateOfflineOperationsTable();})['catch'](function(_0x136826){var _0x242a37=_0x32f1cb;console[_0x242a37(0x251)]('Error\x20eliminando\x20operación:',_0x136826);});}function _0x30d0(){var _0x4897d0=['getElementById','Error\x20al\x20actualizar\x20data\x20online:','https://apierp.dev/api/users/update/','Guardar','90369HQPPaS','warn','userPerm_container_','disabled','offline_operations','length','setUsers','div','¿Estás\x20seguro\x20de\x20que\x20deseas\x20eliminar\x20esta\x20operación?','dataset','console','setBranchId','.btn-logout','Usuario\x20','Correlativo','toString','option','.userPerm_saveBtn','info','setFloorId','transaction','error','userPerm_select','setSerie','setEmailCredentials','none','dispatchEvent','POST','apiPOSsendOffline','610092juLxJn','prototype','6669733rGvnwp','appendChild','display','412TeJjjZ','readwrite','(((.+)+)+)+$','log','Error\x20desconocido\x20al\x20actualizar\x20Data.','{}.constructor(\x22return\x20this\x22)(\x20)','onload','Tipo','6513CxtQIm','apply','getElementsByClassName','548419hlQAlU','setUserFullName','16291bGLDGz','Acciones','json','11970ZOqFfn','addEventListener','forEach','setTipoOperacion','setPermissionId','target','indexOf','search','result','setPermissions','userPerm_header','reject','change','readonly','376QBmicz','complete','textContent','message','panel_operations','getAll','createElement','offlineOps_table','constructor','Editar','userIndex','setWarehouseId','statusText','1956796hRWwkg','application/json','table','then','setFechaHora','20ZtJWJi','exception','onsuccess','Error\x20leyendo\x20operaciones:','style','Fecha','block','Error\x20cargando\x20operaciones.','trace','button','userPerm_container\x20border_orange','onerror','innerHTML','setPermissionNameFalse','setMessage','userPerm_item','value','permIndex','return\x20(function()\x20','click','catch','Número\x20de\x20Decimales:\x20','className','__proto__','No\x20hay\x20operaciones\x20pendientes.','setPermissionValue','querySelector','setEmailCredentialsId','thead'];_0x30d0=function(){return _0x4897d0;};return _0x30d0();}function generateOfflineOperationsTable(){var _0x5c0ec6=_0x31d5,_0x20c031=document[_0x5c0ec6(0x238)](_0x5c0ec6(0x20d));return _0x20c031[_0x5c0ec6(0x227)]='',createCartStore('')[_0x5c0ec6(0x219)](function(_0x3a47ae){var _0x1c9052=_0x5c0ec6,_0x4d36f3=_0x3a47ae[_0x1c9052(0x250)]('offline_operations',_0x1c9052(0x208)),_0x296c3d=_0x4d36f3['objectStore'](_0x1c9052(0x240));return new Promise(function(_0x425467,_0x2c1d3f){var _0x472428=_0x1c9052,_0x5c63c1=_0x296c3d[_0x472428(0x20e)]();_0x5c63c1[_0x472428(0x21d)]=function(){var _0x1c3711=_0x472428;_0x425467(_0x5c63c1[_0x1c3711(0x203)]);},_0x5c63c1[_0x472428(0x226)]=function(){var _0x56b885=_0x472428;_0x2c1d3f(_0x5c63c1[_0x56b885(0x251)]);};});})[_0x5c0ec6(0x219)](function(_0x5b71a2){var _0xff5f48=_0x5c0ec6,_0x54c770=[];for(var _0x473f23=0x0;_0x473f23<_0x5b71a2['length'];_0x473f23++){_0x5b71a2[_0x473f23][_0xff5f48(0x258)]==0x1&&_0x54c770['push'](_0x5b71a2[_0x473f23]);}if(_0x54c770[_0xff5f48(0x241)]===0x0){_0x20c031[_0xff5f48(0x20b)]=_0xff5f48(0x233);return;}var _0x13e54e=document['createElement'](_0xff5f48(0x218));_0x13e54e['className']=_0xff5f48(0x210);var _0x1cbb11=document[_0xff5f48(0x20f)](_0xff5f48(0x237)),_0x183dcf=document['createElement']('tr');[_0xff5f48(0x1f2),'Serie',_0xff5f48(0x24a),_0xff5f48(0x220),'Motivo',_0xff5f48(0x1f9)][_0xff5f48(0x1fd)](function(_0x51d1e3){var _0x3a1b5b=_0xff5f48,_0x2ebc04=document['createElement']('th');_0x2ebc04['textContent']=_0x51d1e3,_0x183dcf[_0x3a1b5b(0x25c)](_0x2ebc04);}),_0x1cbb11[_0xff5f48(0x25c)](_0x183dcf),_0x13e54e[_0xff5f48(0x25c)](_0x1cbb11);var _0x46434c=document[_0xff5f48(0x20f)]('tbody');_0x54c770[_0xff5f48(0x1fd)](function(_0x1c7612){var _0x2bab93=_0xff5f48,_0x564c7c=document['createElement']('tr'),_0x20995c=[_0x1c7612[_0x2bab93(0x1fe)],_0x1c7612[_0x2bab93(0x253)],_0x1c7612['setCorrelativo'],_0x1c7612[_0x2bab93(0x21a)],_0x1c7612[_0x2bab93(0x229)]||''];_0x20995c[_0x2bab93(0x1fd)](function(_0x25e1d0){var _0x259a37=_0x2bab93,_0x1bcbfe=document[_0x259a37(0x20f)]('td');_0x1bcbfe[_0x259a37(0x20b)]=_0x25e1d0,_0x564c7c[_0x259a37(0x25c)](_0x1bcbfe);});var _0x2e46bb=document['createElement']('td'),_0x4f3826=document[_0x2bab93(0x20f)](_0x2bab93(0x224));_0x4f3826[_0x2bab93(0x20b)]='Eliminar',_0x4f3826[_0x2bab93(0x1fc)](_0x2bab93(0x22e),function(){var _0xb4ba08=_0x2bab93;confirm(_0xb4ba08(0x244))&&deleteOfflineOperation(_0x1c7612['id']);}),_0x2e46bb[_0x2bab93(0x25c)](_0x4f3826),_0x564c7c['appendChild'](_0x2e46bb),_0x46434c['appendChild'](_0x564c7c);}),_0x13e54e[_0xff5f48(0x25c)](_0x46434c),_0x20c031['appendChild'](_0x13e54e);})['catch'](function(_0x553598){var _0x2630bb=_0x5c0ec6;console[_0x2630bb(0x251)](_0x2630bb(0x21e),_0x553598),_0x20c031['textContent']=_0x2630bb(0x222);});}window[_0x3c8abf(0x264)]=function(){var _0x4d3c8a=_0x3c8abf;const _0x1ade34=0x2;loadLoginContent('./img/apiPOS.png'),setUserNameGet(),setEventBtnAccess();const _0x207732=document[_0x4d3c8a(0x235)](_0x4d3c8a(0x248));_0x207732&&_0x207732['addEventListener']('click',function(){logoutReload(0x0,_0x1ade34);}),document[_0x4d3c8a(0x238)](_0x4d3c8a(0x247))['addEventListener'](_0x4d3c8a(0x207),async function(){const _0x1424f6=parseInt(this['value']);company[0x0]['setBranchDefault']=_0x1424f6;const _0x503679=await createCartStore('');await saveCompanyToIndexedDB(company,_0x503679),cargarAlmacenes(_0x1424f6),setTimeout(()=>{var _0x3e2b62=_0x31d5;document['getElementById'](_0x3e2b62(0x214))[_0x3e2b62(0x256)](new Event(_0x3e2b62(0x207)));},0x64),cargarPisos(_0x1424f6),setTimeout(()=>{var _0x124d7f=_0x31d5;document[_0x124d7f(0x238)](_0x124d7f(0x24f))[_0x124d7f(0x256)](new Event(_0x124d7f(0x207)));},0x64),ntf_initNotifications();}),loadCartAndSetTabCount(_0x1ade34);};
/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 4.1.8
*/

function _0x317a(_0x838dc9,_0x3cdce8){var _0xf22289=_0x373b();return _0x317a=function(_0x2bd462,_0x46db4f){_0x2bd462=_0x2bd462-0x14a;var _0x4f5e4b=_0xf22289[_0x2bd462];return _0x4f5e4b;},_0x317a(_0x838dc9,_0x3cdce8);}var _0x17312f=_0x317a;(function(_0x28bb2c,_0x2f4d0f){var _0x30add1=_0x317a,_0x124c04=_0x28bb2c();while(!![]){try{var _0x56d187=parseInt(_0x30add1(0x185))/0x1+-parseInt(_0x30add1(0x14e))/0x2*(-parseInt(_0x30add1(0x1b6))/0x3)+parseInt(_0x30add1(0x151))/0x4*(-parseInt(_0x30add1(0x1b4))/0x5)+parseInt(_0x30add1(0x1aa))/0x6+parseInt(_0x30add1(0x178))/0x7+parseInt(_0x30add1(0x170))/0x8*(parseInt(_0x30add1(0x19b))/0x9)+-parseInt(_0x30add1(0x187))/0xa;if(_0x56d187===_0x2f4d0f)break;else _0x124c04['push'](_0x124c04['shift']());}catch(_0x53c2e4){_0x124c04['push'](_0x124c04['shift']());}}}(_0x373b,0x1aefb));var _0x5b96b9=(function(){var _0x41e651=!![];return function(_0x3ca32f,_0x348182){var _0x45b3c4=_0x41e651?function(){var _0x40a3f8=_0x317a;if(_0x348182){var _0x1ef395=_0x348182[_0x40a3f8(0x172)](_0x3ca32f,arguments);return _0x348182=null,_0x1ef395;}}:function(){};return _0x41e651=![],_0x45b3c4;};}()),_0x56c019=_0x5b96b9(this,function(){var _0x141a67=_0x317a;return _0x56c019[_0x141a67(0x192)]()['search'](_0x141a67(0x193))[_0x141a67(0x192)]()[_0x141a67(0x1b2)](_0x56c019)['search'](_0x141a67(0x193));});_0x56c019();var _0x46db4f=(function(){var _0x4e815=!![];return function(_0x4afedc,_0x20ea84){var _0x32f0d1=_0x4e815?function(){if(_0x20ea84){var _0x3c1e9b=_0x20ea84['apply'](_0x4afedc,arguments);return _0x20ea84=null,_0x3c1e9b;}}:function(){};return _0x4e815=![],_0x32f0d1;};}()),_0x2bd462=_0x46db4f(this,function(){var _0xd579f2=_0x317a,_0x213802=function(){var _0x2b76f7=_0x317a,_0x12f9c0;try{_0x12f9c0=Function(_0x2b76f7(0x1a8)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x509d47){_0x12f9c0=window;}return _0x12f9c0;},_0x6720ad=_0x213802(),_0x56ce3e=_0x6720ad[_0xd579f2(0x16a)]=_0x6720ad[_0xd579f2(0x16a)]||{},_0x2a4792=[_0xd579f2(0x14f),_0xd579f2(0x166),_0xd579f2(0x179),_0xd579f2(0x191),_0xd579f2(0x17f),_0xd579f2(0x1a7),_0xd579f2(0x17a)];for(var _0x5dd939=0x0;_0x5dd939<_0x2a4792[_0xd579f2(0x18b)];_0x5dd939++){var _0x14fadf=_0x46db4f[_0xd579f2(0x1b2)][_0xd579f2(0x1b3)][_0xd579f2(0x15c)](_0x46db4f),_0x44c1aa=_0x2a4792[_0x5dd939],_0x5b96c0=_0x56ce3e[_0x44c1aa]||_0x14fadf;_0x14fadf[_0xd579f2(0x157)]=_0x46db4f[_0xd579f2(0x15c)](_0x46db4f),_0x14fadf[_0xd579f2(0x192)]=_0x5b96c0[_0xd579f2(0x192)]['bind'](_0x5b96c0),_0x56ce3e[_0x44c1aa]=_0x14fadf;}});_0x2bd462();var BOOLEAN_PERMS=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0xa,0xb,0xd,0xe,0xf,0x10,0x11,0x13,0x14,0x15];async function apiERPupdateUsersOnline(_0x4bf4f7,_0x504a6d){var _0x47d65a=_0x317a;if(!isOnline())return console[_0x47d65a(0x14f)](_0x47d65a(0x155)),Promise[_0x47d65a(0x16c)]('Error\x20Network.');const _0x1c8f93={'setAuthToken':_0x4bf4f7,'setUsers':_0x504a6d};return fetch(_0x47d65a(0x184),{'method':_0x47d65a(0x19a),'headers':{'Content-Type':'application/json'},'body':JSON[_0x47d65a(0x1bc)](_0x1c8f93)})[_0x47d65a(0x16d)](_0x4d0267=>{var _0x49fa04=_0x47d65a;if(!_0x4d0267['ok'])throw new Error(_0x49fa04(0x1b5)+_0x4d0267['statusText']);return _0x4d0267[_0x49fa04(0x16e)]();})[_0x47d65a(0x16d)](_0x32c444=>{var _0x326279=_0x47d65a;if(!_0x32c444[_0x326279(0x1a1)])throw new Error(_0x32c444[_0x326279(0x1a3)]||_0x326279(0x14b));return console['log'](_0x326279(0x17e)),_0x32c444;})[_0x47d65a(0x171)](_0x2211cd=>{var _0x337729=_0x47d65a;console[_0x337729(0x191)]('Error\x20al\x20actualizar\x20data\x20online:',_0x2211cd);throw _0x2211cd;});}async function apiERPsyncUsers(){var _0x454bde=_0x317a;isLoggedIn(company)&&(isOnline()&&await apiERPupdateUsersOnline(company[0x0]['setAuthToken'],company[0x0][_0x454bde(0x16f)]));}function _0x373b(){var _0x2a624f=['select','userPerm_item','className','bind','objectStore','Motivo','setFloorId','push','createElement','Error\x20cargando\x20operaciones.','setFechaHora','setUserFullName','getAll','warn','userPerm_container_','addEventListener','appendChild','console','setTipoOperaciones','reject','then','json','setUsers','8JHQAre','catch','apply','userIndex','dataset','setBranchId','onsuccess','innerHTML','1131830iCsbAp','info','trace','value','transaction','setEmailCredentialsId','Data\x20actualizada\x20correctamente\x20en\x20la\x20base\x20de\x20datos.','exception','apiPOSsendOffline','option','div','Correlativo','https://apierp.dev/api/users/update/','100932BIeNVE','thead','1962570HiufOw','querySelector','setWarehouseId','setPermissionNameFalse','length','onload','setTipoOperacionCodigo','onerror','.userPerm_saveBtn','block','error','toString','(((.+)+)+)+$','Tipo','change','button','forEach','permIndex','setLastDateUpdate','POST','421101JfEgHY','Guardar','setPermissionValue','click','Error\x20leyendo\x20operaciones:','setSerie','success','userPerm_editBtn','message','Editar','setEmailCredentialsSenderEmail','target','table','return\x20(function()\x20','tbody','208482cynjBQ','textContent','Fecha','dispatchEvent','setPermissionId','.userPerm_editBtn','Serie','style','constructor','prototype','5tkUsiK','Error\x20Sync:\x20','75SIFdKx','disabled','display','.btn-logout','NÃºmero\x20de\x20Decimales:\x20','userPerm_header','stringify','getElementById','Error\x20desconocido\x20al\x20actualizar\x20Data.','setCorrelativo','none','6722kTIVOy','log','indexOf','486380yxbhrl','userPerm_select','getElementsByClassName','setPermissions','Error\x20Network.','offlineOps_table','__proto__','setTipoOperacion'];_0x373b=function(){return _0x2a624f;};return _0x373b();}function generatePermissionsPanel(_0x2696f1){var _0x3699e0=_0x317a,_0x376d70=document['getElementById']('panel_users');_0x376d70[_0x3699e0(0x177)]='';var _0x4a08cf=_0x2696f1[0x0]&&_0x2696f1[0x0][_0x3699e0(0x16f)]||[],_0x1f03fc=_0x2696f1[0x0]&&_0x2696f1[0x0][_0x3699e0(0x16b)]||[];for(var _0x3136ed=0x0;_0x3136ed<_0x4a08cf[_0x3699e0(0x18b)];_0x3136ed++){var _0x454cc1=_0x4a08cf[_0x3136ed],_0x217981=document[_0x3699e0(0x161)](_0x3699e0(0x182));_0x217981[_0x3699e0(0x15b)]='userPerm_container\x20border_blue',_0x217981['id']='userPerm_container_'+_0x3136ed;var _0x39f868=document[_0x3699e0(0x161)]('h3');_0x39f868[_0x3699e0(0x15b)]=_0x3699e0(0x1bb),_0x39f868[_0x3699e0(0x1ab)]=_0x454cc1[_0x3699e0(0x164)]||'Usuario\x20'+(_0x3136ed+0x1),_0x217981['appendChild'](_0x39f868);var _0x261d74=document[_0x3699e0(0x161)](_0x3699e0(0x182));_0x261d74[_0x3699e0(0x15b)]='userPerm_list';for(var _0x29929e=0x0;_0x29929e<_0x454cc1[_0x3699e0(0x154)][_0x3699e0(0x18b)];_0x29929e++){var _0x5d70ef=_0x454cc1['setPermissions'][_0x29929e],_0x56a28b=document['createElement'](_0x3699e0(0x182));_0x56a28b[_0x3699e0(0x15b)]=_0x3699e0(0x15a),_0x56a28b['dataset']['userIndex']=_0x3136ed,_0x56a28b[_0x3699e0(0x174)][_0x3699e0(0x198)]=_0x29929e;var _0x440120=Number(_0x5d70ef[_0x3699e0(0x19d)]),_0x43311e=document['createElement'](_0x3699e0(0x159));_0x43311e[_0x3699e0(0x15b)]=_0x3699e0(0x152),_0x43311e[_0x3699e0(0x1b7)]=!![];if(BOOLEAN_PERMS[_0x3699e0(0x150)](_0x5d70ef[_0x3699e0(0x1ae)])!==-0x1){var _0x3c2fcc=document['createElement'](_0x3699e0(0x181));_0x3c2fcc[_0x3699e0(0x17b)]='0',_0x3c2fcc['textContent']=_0x5d70ef[_0x3699e0(0x18a)],_0x43311e[_0x3699e0(0x169)](_0x3c2fcc);var _0x455642=document[_0x3699e0(0x161)](_0x3699e0(0x181));_0x455642[_0x3699e0(0x17b)]='1',_0x455642[_0x3699e0(0x1ab)]=_0x5d70ef['setPermissionNameTrue'],_0x43311e[_0x3699e0(0x169)](_0x455642),_0x43311e[_0x3699e0(0x17b)]=String(_0x440120);}else{if(_0x5d70ef[_0x3699e0(0x1ae)]===0x9||_0x5d70ef[_0x3699e0(0x1ae)]===0xc||_0x5d70ef[_0x3699e0(0x1ae)]===0x12){if(_0x5d70ef[_0x3699e0(0x1ae)]===0x9){var _0x3aff1a=document[_0x3699e0(0x161)]('option');_0x3aff1a['value']='0',_0x3aff1a[_0x3699e0(0x1ab)]=_0x5d70ef['setPermissionNameFalse'],_0x43311e[_0x3699e0(0x169)](_0x3aff1a);for(var _0x15b6ec=0x0;_0x15b6ec<_0x1f03fc[_0x3699e0(0x18b)];_0x15b6ec++){var _0x14e040=_0x1f03fc[_0x15b6ec],_0x24b51a=document[_0x3699e0(0x161)](_0x3699e0(0x181));_0x24b51a[_0x3699e0(0x17b)]=String(_0x14e040[_0x3699e0(0x18d)]),_0x24b51a['textContent']=_0x14e040['setTipoOperacionName'],_0x43311e[_0x3699e0(0x169)](_0x24b51a);}}if(_0x5d70ef[_0x3699e0(0x1ae)]===0xc)for(var _0x15b6ec=0x1;_0x15b6ec<=0x4;_0x15b6ec++){var _0x14e040=_0x15b6ec,_0x24b51a=document[_0x3699e0(0x161)](_0x3699e0(0x181));_0x24b51a[_0x3699e0(0x17b)]=String(_0x14e040),_0x24b51a[_0x3699e0(0x1ab)]=_0x3699e0(0x1ba)+_0x14e040,_0x43311e[_0x3699e0(0x169)](_0x24b51a);}if(_0x5d70ef[_0x3699e0(0x1ae)]===0x12){var _0x447c3b=myCompany&&myCompany['setEmailCredentials']||[],_0x3aff1a=document[_0x3699e0(0x161)](_0x3699e0(0x181));_0x3aff1a['value']='0',_0x3aff1a[_0x3699e0(0x1ab)]=_0x5d70ef[_0x3699e0(0x18a)],_0x43311e[_0x3699e0(0x169)](_0x3aff1a);for(var _0x15b6ec=0x0;_0x15b6ec<_0x447c3b[_0x3699e0(0x18b)];_0x15b6ec++){var _0x14e040=_0x447c3b[_0x15b6ec],_0x24b51a=document['createElement'](_0x3699e0(0x181));_0x24b51a['value']=String(_0x14e040[_0x3699e0(0x17d)]),_0x24b51a[_0x3699e0(0x1ab)]=_0x14e040[_0x3699e0(0x1a5)],_0x43311e[_0x3699e0(0x169)](_0x24b51a);}}_0x43311e[_0x3699e0(0x17b)]=String(_0x440120);}}_0x56a28b[_0x3699e0(0x169)](_0x43311e),_0x261d74[_0x3699e0(0x169)](_0x56a28b);}_0x217981[_0x3699e0(0x169)](_0x261d74);var _0x474666=document['createElement'](_0x3699e0(0x196));_0x474666['className']=_0x3699e0(0x1a2),_0x474666[_0x3699e0(0x1ab)]=_0x3699e0(0x1a4),_0x474666[_0x3699e0(0x174)][_0x3699e0(0x173)]=_0x3136ed;var _0x4fbdff=document['createElement'](_0x3699e0(0x196));_0x4fbdff['className']='userPerm_saveBtn',_0x4fbdff[_0x3699e0(0x1ab)]=_0x3699e0(0x19c),_0x4fbdff[_0x3699e0(0x174)]['userIndex']=_0x3136ed,_0x4fbdff['style'][_0x3699e0(0x1b8)]='none',_0x217981['appendChild'](_0x474666),_0x217981[_0x3699e0(0x169)](_0x4fbdff),_0x376d70['appendChild'](_0x217981),_0x474666['addEventListener'](_0x3699e0(0x19e),onEditClick),_0x4fbdff['addEventListener'](_0x3699e0(0x19e),onSaveClick);}}function onEditClick(_0x20a405){var _0x2f1327=_0x317a,_0x327555=_0x20a405['target'][_0x2f1327(0x174)][_0x2f1327(0x173)],_0x24f2dd=document[_0x2f1327(0x14a)](_0x2f1327(0x167)+_0x327555),_0x399d9c=_0x24f2dd[_0x2f1327(0x153)](_0x2f1327(0x152));for(var _0x52dd95=0x0;_0x52dd95<_0x399d9c[_0x2f1327(0x18b)];_0x52dd95++){_0x399d9c[_0x52dd95][_0x2f1327(0x1b7)]=![];}_0x24f2dd[_0x2f1327(0x188)](_0x2f1327(0x1af))[_0x2f1327(0x1b1)][_0x2f1327(0x1b8)]=_0x2f1327(0x14d),_0x24f2dd[_0x2f1327(0x188)](_0x2f1327(0x18f))['style'][_0x2f1327(0x1b8)]=_0x2f1327(0x190),_0x24f2dd[_0x2f1327(0x15b)]='userPerm_container\x20border_orange';}async function onSaveClick(_0x3f9538){var _0x520de7=_0x317a,_0x48af4f=_0x3f9538[_0x520de7(0x1a6)][_0x520de7(0x174)][_0x520de7(0x173)],_0x1cb60e=document[_0x520de7(0x14a)]('userPerm_container_'+_0x48af4f),_0x8335af=_0x1cb60e['getElementsByClassName'](_0x520de7(0x15a));for(var _0x3ca4a1=0x0;_0x3ca4a1<_0x8335af[_0x520de7(0x18b)];_0x3ca4a1++){var _0x4621f9=_0x8335af[_0x3ca4a1],_0x44dd5d=parseInt(_0x4621f9[_0x520de7(0x174)][_0x520de7(0x173)],0xa),_0x527d03=parseInt(_0x4621f9[_0x520de7(0x174)][_0x520de7(0x198)],0xa),_0x3ad744=company[0x0]['setUsers'][_0x44dd5d]['setPermissions'][_0x527d03],_0x958cc1=_0x4621f9['getElementsByClassName'](_0x520de7(0x152))[0x0],_0xb6612e=_0x958cc1[_0x520de7(0x17b)];_0x3ad744[_0x520de7(0x19d)]=_0xb6612e,_0x958cc1[_0x520de7(0x1b7)]=!![],company[0x0][_0x520de7(0x16f)][_0x44dd5d][_0x520de7(0x199)]=new Date();}const _0x247562=await createCartStore('');await saveCompanyToIndexedDB(company,_0x247562),_0x1cb60e[_0x520de7(0x188)](_0x520de7(0x18f))['style']['display']=_0x520de7(0x14d),_0x1cb60e[_0x520de7(0x188)](_0x520de7(0x1af))[_0x520de7(0x1b1)][_0x520de7(0x1b8)]='inline-block',_0x1cb60e['className']='userPerm_container\x20border_blue',apiERPsyncUsers();}function generateOfflineOperationsTable(){var _0x23a756=_0x317a,_0xa75f22=document[_0x23a756(0x14a)]('panel_operations');return _0xa75f22[_0x23a756(0x177)]='',createCartStore('')[_0x23a756(0x16d)](function(_0x5a3fc6){var _0x12e34f=_0x23a756,_0xece334=_0x5a3fc6[_0x12e34f(0x17c)]('offline_operations','readonly'),_0x4ad533=_0xece334[_0x12e34f(0x15d)]('offline_operations');return new Promise(function(_0x56a997,_0x985e9a){var _0x8df50d=_0x12e34f,_0x589feb=_0x4ad533[_0x8df50d(0x165)]();_0x589feb[_0x8df50d(0x176)]=function(){_0x56a997(_0x589feb['result']);},_0x589feb[_0x8df50d(0x18e)]=function(){var _0x142e44=_0x8df50d;_0x985e9a(_0x589feb[_0x142e44(0x191)]);};});})[_0x23a756(0x16d)](function(_0x53fd2e){var _0x41a9c3=_0x23a756,_0x223a76=[];for(var _0x4a2a2d=0x0;_0x4a2a2d<_0x53fd2e[_0x41a9c3(0x18b)];_0x4a2a2d++){_0x53fd2e[_0x4a2a2d][_0x41a9c3(0x180)]==0x1&&_0x223a76[_0x41a9c3(0x160)](_0x53fd2e[_0x4a2a2d]);}if(_0x223a76['length']===0x0){_0xa75f22[_0x41a9c3(0x1ab)]='No\x20hay\x20operaciones\x20pendientes.';return;}var _0x24bc9e=document['createElement'](_0x41a9c3(0x1a7));_0x24bc9e[_0x41a9c3(0x15b)]=_0x41a9c3(0x156);var _0x511cc5=document['createElement'](_0x41a9c3(0x186)),_0x5c85a9=document[_0x41a9c3(0x161)]('tr');[_0x41a9c3(0x194),_0x41a9c3(0x1b0),_0x41a9c3(0x183),_0x41a9c3(0x1ac),_0x41a9c3(0x15e)][_0x41a9c3(0x197)](function(_0x4ccbff){var _0x5923b2=_0x41a9c3,_0x512969=document[_0x5923b2(0x161)]('th');_0x512969[_0x5923b2(0x1ab)]=_0x4ccbff,_0x5c85a9['appendChild'](_0x512969);}),_0x511cc5[_0x41a9c3(0x169)](_0x5c85a9),_0x24bc9e['appendChild'](_0x511cc5);var _0x2dfbdf=document['createElement'](_0x41a9c3(0x1a9));_0x223a76[_0x41a9c3(0x197)](function(_0x48ec23){var _0x31fe4b=_0x41a9c3,_0x5c77a6=document[_0x31fe4b(0x161)]('tr'),_0x5093ad=[_0x48ec23[_0x31fe4b(0x158)],_0x48ec23[_0x31fe4b(0x1a0)],_0x48ec23[_0x31fe4b(0x14c)],_0x48ec23[_0x31fe4b(0x163)],_0x48ec23['setMessage']||''];_0x5093ad[_0x31fe4b(0x197)](function(_0x1ed95a){var _0x1021a7=_0x31fe4b,_0x3f65ad=document[_0x1021a7(0x161)]('td');_0x3f65ad[_0x1021a7(0x1ab)]=_0x1ed95a,_0x5c77a6['appendChild'](_0x3f65ad);}),_0x2dfbdf[_0x31fe4b(0x169)](_0x5c77a6);}),_0x24bc9e[_0x41a9c3(0x169)](_0x2dfbdf),_0xa75f22[_0x41a9c3(0x169)](_0x24bc9e);})[_0x23a756(0x171)](function(_0x48d278){var _0x37e34f=_0x23a756;console[_0x37e34f(0x191)](_0x37e34f(0x19f),_0x48d278),_0xa75f22[_0x37e34f(0x1ab)]=_0x37e34f(0x162);});}window[_0x17312f(0x18c)]=function(){var _0xe0c4a1=_0x17312f;const _0x3b281e=0x2;loadLoginContent('./img/apiPOS.png'),setUserNameGet(),setEventBtnAccess();const _0xcb8de2=document['querySelector'](_0xe0c4a1(0x1b9));_0xcb8de2&&_0xcb8de2[_0xe0c4a1(0x168)](_0xe0c4a1(0x19e),function(){logoutReload(0x0,_0x3b281e);}),document[_0xe0c4a1(0x14a)](_0xe0c4a1(0x175))[_0xe0c4a1(0x168)]('change',async function(){const _0x104235=parseInt(this['value']);company[0x0]['setBranchDefault']=_0x104235;const _0x26d8a4=await createCartStore('');await saveCompanyToIndexedDB(company,_0x26d8a4),cargarAlmacenes(_0x104235),setTimeout(()=>{var _0x4b1d70=_0x317a;document[_0x4b1d70(0x14a)](_0x4b1d70(0x189))[_0x4b1d70(0x1ad)](new Event(_0x4b1d70(0x195)));},0x64),cargarPisos(_0x104235),setTimeout(()=>{var _0x36eb4c=_0x317a;document[_0x36eb4c(0x14a)](_0x36eb4c(0x15f))[_0x36eb4c(0x1ad)](new Event(_0x36eb4c(0x195)));},0x64),ntf_initNotifications();}),loadCartAndSetTabCount(_0x3b281e);};
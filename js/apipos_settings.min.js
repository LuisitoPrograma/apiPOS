/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 4.1.3
*/

function _0x545c(_0x576e05,_0x48d33f){var _0x1da106=_0x5769();return _0x545c=function(_0x1e51fc,_0x181dcb){_0x1e51fc=_0x1e51fc-0xdb;var _0x2b2370=_0x1da106[_0x1e51fc];return _0x2b2370;},_0x545c(_0x576e05,_0x48d33f);}var _0x31997a=_0x545c;(function(_0x4f8847,_0x304d9b){var _0x525cb2=_0x545c,_0x5b9adf=_0x4f8847();while(!![]){try{var _0xf99573=parseInt(_0x525cb2(0xdb))/0x1+parseInt(_0x525cb2(0x145))/0x2*(parseInt(_0x525cb2(0x130))/0x3)+-parseInt(_0x525cb2(0x13e))/0x4*(parseInt(_0x525cb2(0x133))/0x5)+parseInt(_0x525cb2(0xff))/0x6+parseInt(_0x525cb2(0x111))/0x7+parseInt(_0x525cb2(0xee))/0x8*(-parseInt(_0x525cb2(0x10b))/0x9)+-parseInt(_0x525cb2(0xde))/0xa*(-parseInt(_0x525cb2(0xdd))/0xb);if(_0xf99573===_0x304d9b)break;else _0x5b9adf['push'](_0x5b9adf['shift']());}catch(_0x57a6a0){_0x5b9adf['push'](_0x5b9adf['shift']());}}}(_0x5769,0x82220));var _0x5e34ff=(function(){var _0x331491=!![];return function(_0x41fa87,_0x145d0a){var _0x148be4=_0x331491?function(){var _0x4a739b=_0x545c;if(_0x145d0a){var _0x5047a7=_0x145d0a[_0x4a739b(0x106)](_0x41fa87,arguments);return _0x145d0a=null,_0x5047a7;}}:function(){};return _0x331491=![],_0x148be4;};}()),_0x1607c1=_0x5e34ff(this,function(){var _0x447aa5=_0x545c;return _0x1607c1[_0x447aa5(0x104)]()[_0x447aa5(0x12e)](_0x447aa5(0xe3))[_0x447aa5(0x104)]()[_0x447aa5(0x14d)](_0x1607c1)['search'](_0x447aa5(0xe3));});function _0x5769(){var _0x3af5a8=['getElementById','forEach','textContent','Error\x20leyendo\x20operaciones:','table','userPerm_select','result','onload','userPerm_list','div','Error\x20Network.','./img/apiPOS.png','setPermissionNameTrue','__proto__','error','Correlativo','style','userPerm_header','disabled','search','message','249123VQYami','userPerm_container_','display','136820RzpWqD','setPermissionNameFalse','catch','.userPerm_saveBtn','userPerm_container\x20border_blue','stringify','appendChild','log','POST','panel_users','.btn-logout','80QlEpcH','exception','return\x20(function()\x20','Guardar','prototype','thead','Error\x20al\x20actualizar\x20data\x20online:','2SWUJSI','trace','Error\x20Sync:\x20','inline-block','setCorrelativo','https://apierp.dev/api/users/update/','innerHTML','apiPOSsendOffline','constructor','setPermissionValue','setEmailCredentialsSenderEmail','No\x20hay\x20operaciones\x20pendientes.','408814oUVceQ','getElementsByClassName','606122ioJUqh','30DvgnNQ','addEventListener','indexOf','className','console','(((.+)+)+)+$','setTipoOperaciones','length','offline_operations','json','setUsers','Motivo','onerror','reject','tbody','NÃºmero\x20de\x20Decimales:\x20','21392fOBSXx','Serie','setLastDateUpdate','createElement','setFloorId','querySelector','target','Data\x20actualizada\x20correctamente\x20en\x20la\x20base\x20de\x20datos.','value','setUserFullName','setEmailCredentialsId','setBranchId','change','userPerm_saveBtn','then','objectStore','userPerm_container\x20border_orange','1934760EjrNpb','Editar','button','readonly','panel_operations','toString','setFechaHora','apply','.userPerm_editBtn','select','warn','info','648NXGNbL','statusText','dispatchEvent','Tipo','setPermissionId','setPermissions','2052477hDKOYr','userPerm_item','dataset','permIndex','option','none','block','Usuario\x20','userIndex','getAll'];_0x5769=function(){return _0x3af5a8;};return _0x5769();}_0x1607c1();var _0x181dcb=(function(){var _0x34e650=!![];return function(_0x75a584,_0x1a861d){var _0xe5d157=_0x34e650?function(){var _0x3364ac=_0x545c;if(_0x1a861d){var _0xe18b72=_0x1a861d[_0x3364ac(0x106)](_0x75a584,arguments);return _0x1a861d=null,_0xe18b72;}}:function(){};return _0x34e650=![],_0xe5d157;};}()),_0x1e51fc=_0x181dcb(this,function(){var _0x43b78b=_0x545c,_0x53e303;try{var _0x16baf7=Function(_0x43b78b(0x140)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x53e303=_0x16baf7();}catch(_0x29bedd){_0x53e303=window;}var _0x433216=_0x53e303['console']=_0x53e303[_0x43b78b(0xe2)]||{},_0x369af3=['log',_0x43b78b(0x109),_0x43b78b(0x10a),_0x43b78b(0x129),_0x43b78b(0x13f),'table',_0x43b78b(0x146)];for(var _0x599a97=0x0;_0x599a97<_0x369af3[_0x43b78b(0xe5)];_0x599a97++){var _0x5264c5=_0x181dcb['constructor'][_0x43b78b(0x142)]['bind'](_0x181dcb),_0x30f9cb=_0x369af3[_0x599a97],_0x52d4e0=_0x433216[_0x30f9cb]||_0x5264c5;_0x5264c5[_0x43b78b(0x128)]=_0x181dcb['bind'](_0x181dcb),_0x5264c5[_0x43b78b(0x104)]=_0x52d4e0[_0x43b78b(0x104)]['bind'](_0x52d4e0),_0x433216[_0x30f9cb]=_0x5264c5;}});_0x1e51fc();var BOOLEAN_PERMS=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0xa,0xb,0xd,0xe,0xf,0x10,0x11,0x13,0x14];async function apiERPupdateUsersOnline(_0x44832a,_0x4c111c){var _0xca37b4=_0x545c;if(!isOnline())return console[_0xca37b4(0x13a)]('Error\x20Network.'),Promise[_0xca37b4(0xeb)](_0xca37b4(0x125));const _0x1e2b63={'setAuthToken':_0x44832a,'setUsers':_0x4c111c};return fetch(_0xca37b4(0x14a),{'method':_0xca37b4(0x13b),'headers':{'Content-Type':'application/json'},'body':JSON[_0xca37b4(0x138)](_0x1e2b63)})[_0xca37b4(0xfc)](_0x4a2d0c=>{var _0x178e42=_0xca37b4;if(!_0x4a2d0c['ok'])throw new Error(_0x178e42(0x147)+_0x4a2d0c[_0x178e42(0x10c)]);return _0x4a2d0c[_0x178e42(0xe7)]();})[_0xca37b4(0xfc)](_0xcd5bb8=>{var _0x523ca9=_0xca37b4;if(!_0xcd5bb8['success'])throw new Error(_0xcd5bb8[_0x523ca9(0x12f)]||'Error\x20desconocido\x20al\x20actualizar\x20Data.');return console[_0x523ca9(0x13a)](_0x523ca9(0xf5)),_0xcd5bb8;})[_0xca37b4(0x135)](_0x27171c=>{var _0x2c6072=_0xca37b4;console['error'](_0x2c6072(0x144),_0x27171c);throw _0x27171c;});}async function apiERPsyncUsers(){isLoggedIn(company)&&(isOnline()&&await apiERPupdateUsersOnline(company[0x0]['setAuthToken'],company[0x0]['setUsers']));}function generatePermissionsPanel(_0x20a347){var _0x388c9c=_0x545c,_0x26cbf0=document['getElementById'](_0x388c9c(0x13c));_0x26cbf0[_0x388c9c(0x14b)]='';var _0x9a147b=_0x20a347[0x0]&&_0x20a347[0x0][_0x388c9c(0xe8)]||[],_0x21702e=_0x20a347[0x0]&&_0x20a347[0x0][_0x388c9c(0xe4)]||[];for(var _0x165870=0x0;_0x165870<_0x9a147b[_0x388c9c(0xe5)];_0x165870++){var _0x3257d1=_0x9a147b[_0x165870],_0x502aae=document['createElement']('div');_0x502aae[_0x388c9c(0xe1)]='userPerm_container\x20border_blue',_0x502aae['id']=_0x388c9c(0x131)+_0x165870;var _0xc69fcf=document[_0x388c9c(0xf1)]('h3');_0xc69fcf[_0x388c9c(0xe1)]=_0x388c9c(0x12c),_0xc69fcf['textContent']=_0x3257d1[_0x388c9c(0xf7)]||_0x388c9c(0x118)+(_0x165870+0x1),_0x502aae['appendChild'](_0xc69fcf);var _0x265804=document['createElement'](_0x388c9c(0x124));_0x265804[_0x388c9c(0xe1)]=_0x388c9c(0x123);for(var _0x361594=0x0;_0x361594<_0x3257d1[_0x388c9c(0x110)]['length'];_0x361594++){var _0x39490a=_0x3257d1[_0x388c9c(0x110)][_0x361594],_0x3f8b3c=document[_0x388c9c(0xf1)](_0x388c9c(0x124));_0x3f8b3c[_0x388c9c(0xe1)]='userPerm_item',_0x3f8b3c[_0x388c9c(0x113)]['userIndex']=_0x165870,_0x3f8b3c[_0x388c9c(0x113)][_0x388c9c(0x114)]=_0x361594;var _0x4bfd89=Number(_0x39490a[_0x388c9c(0x14e)]),_0x476312=document[_0x388c9c(0xf1)](_0x388c9c(0x108));_0x476312[_0x388c9c(0xe1)]='userPerm_select',_0x476312[_0x388c9c(0x12d)]=!![];if(BOOLEAN_PERMS[_0x388c9c(0xe0)](_0x39490a[_0x388c9c(0x10f)])!==-0x1){var _0x59225a=document['createElement']('option');_0x59225a[_0x388c9c(0xf6)]='0',_0x59225a[_0x388c9c(0x11d)]=_0x39490a[_0x388c9c(0x134)],_0x476312['appendChild'](_0x59225a);var _0x2996c5=document[_0x388c9c(0xf1)]('option');_0x2996c5[_0x388c9c(0xf6)]='1',_0x2996c5[_0x388c9c(0x11d)]=_0x39490a[_0x388c9c(0x127)],_0x476312[_0x388c9c(0x139)](_0x2996c5),_0x476312[_0x388c9c(0xf6)]=String(_0x4bfd89);}else{if(_0x39490a[_0x388c9c(0x10f)]===0x9||_0x39490a[_0x388c9c(0x10f)]===0xc||_0x39490a[_0x388c9c(0x10f)]===0x12){if(_0x39490a[_0x388c9c(0x10f)]===0x9){var _0x460471=document['createElement'](_0x388c9c(0x115));_0x460471[_0x388c9c(0xf6)]='0',_0x460471[_0x388c9c(0x11d)]=_0x39490a[_0x388c9c(0x134)],_0x476312[_0x388c9c(0x139)](_0x460471);for(var _0x412b16=0x0;_0x412b16<_0x21702e[_0x388c9c(0xe5)];_0x412b16++){var _0x12f1e3=_0x21702e[_0x412b16],_0x28d85a=document[_0x388c9c(0xf1)](_0x388c9c(0x115));_0x28d85a[_0x388c9c(0xf6)]=String(_0x12f1e3['setTipoOperacionCodigo']),_0x28d85a['textContent']=_0x12f1e3['setTipoOperacionName'],_0x476312[_0x388c9c(0x139)](_0x28d85a);}}if(_0x39490a[_0x388c9c(0x10f)]===0xc)for(var _0x412b16=0x1;_0x412b16<=0x4;_0x412b16++){var _0x12f1e3=_0x412b16,_0x28d85a=document['createElement'](_0x388c9c(0x115));_0x28d85a[_0x388c9c(0xf6)]=String(_0x12f1e3),_0x28d85a[_0x388c9c(0x11d)]=_0x388c9c(0xed)+_0x12f1e3,_0x476312['appendChild'](_0x28d85a);}if(_0x39490a[_0x388c9c(0x10f)]===0x12){var _0x2874e6=myCompany&&myCompany['setEmailCredentials']||[],_0x460471=document[_0x388c9c(0xf1)](_0x388c9c(0x115));_0x460471[_0x388c9c(0xf6)]='0',_0x460471[_0x388c9c(0x11d)]=_0x39490a[_0x388c9c(0x134)],_0x476312[_0x388c9c(0x139)](_0x460471);for(var _0x412b16=0x0;_0x412b16<_0x2874e6[_0x388c9c(0xe5)];_0x412b16++){var _0x12f1e3=_0x2874e6[_0x412b16],_0x28d85a=document['createElement'](_0x388c9c(0x115));_0x28d85a[_0x388c9c(0xf6)]=String(_0x12f1e3[_0x388c9c(0xf8)]),_0x28d85a['textContent']=_0x12f1e3[_0x388c9c(0x14f)],_0x476312[_0x388c9c(0x139)](_0x28d85a);}}_0x476312[_0x388c9c(0xf6)]=String(_0x4bfd89);}}_0x3f8b3c[_0x388c9c(0x139)](_0x476312),_0x265804[_0x388c9c(0x139)](_0x3f8b3c);}_0x502aae[_0x388c9c(0x139)](_0x265804);var _0x3366bc=document[_0x388c9c(0xf1)](_0x388c9c(0x101));_0x3366bc[_0x388c9c(0xe1)]='userPerm_editBtn',_0x3366bc[_0x388c9c(0x11d)]=_0x388c9c(0x100),_0x3366bc[_0x388c9c(0x113)][_0x388c9c(0x119)]=_0x165870;var _0x43066a=document[_0x388c9c(0xf1)](_0x388c9c(0x101));_0x43066a['className']=_0x388c9c(0xfb),_0x43066a[_0x388c9c(0x11d)]=_0x388c9c(0x141),_0x43066a[_0x388c9c(0x113)][_0x388c9c(0x119)]=_0x165870,_0x43066a[_0x388c9c(0x12b)][_0x388c9c(0x132)]='none',_0x502aae[_0x388c9c(0x139)](_0x3366bc),_0x502aae[_0x388c9c(0x139)](_0x43066a),_0x26cbf0[_0x388c9c(0x139)](_0x502aae),_0x3366bc['addEventListener']('click',onEditClick),_0x43066a[_0x388c9c(0xdf)]('click',onSaveClick);}}function onEditClick(_0x4e0f36){var _0x25e3e1=_0x545c,_0xcbb8bf=_0x4e0f36[_0x25e3e1(0xf4)]['dataset']['userIndex'],_0x4796fe=document[_0x25e3e1(0x11b)](_0x25e3e1(0x131)+_0xcbb8bf),_0x45c39c=_0x4796fe[_0x25e3e1(0xdc)](_0x25e3e1(0x120));for(var _0x58f974=0x0;_0x58f974<_0x45c39c['length'];_0x58f974++){_0x45c39c[_0x58f974][_0x25e3e1(0x12d)]=![];}_0x4796fe[_0x25e3e1(0xf3)](_0x25e3e1(0x107))[_0x25e3e1(0x12b)][_0x25e3e1(0x132)]=_0x25e3e1(0x116),_0x4796fe['querySelector'](_0x25e3e1(0x136))[_0x25e3e1(0x12b)][_0x25e3e1(0x132)]=_0x25e3e1(0x117),_0x4796fe[_0x25e3e1(0xe1)]=_0x25e3e1(0xfe);}async function onSaveClick(_0x545aeb){var _0x437109=_0x545c,_0x24187c=_0x545aeb[_0x437109(0xf4)][_0x437109(0x113)][_0x437109(0x119)],_0x444d54=document[_0x437109(0x11b)](_0x437109(0x131)+_0x24187c),_0x10aa1c=_0x444d54[_0x437109(0xdc)](_0x437109(0x112));for(var _0x1fc54c=0x0;_0x1fc54c<_0x10aa1c[_0x437109(0xe5)];_0x1fc54c++){var _0xea5493=_0x10aa1c[_0x1fc54c],_0x48c7ee=parseInt(_0xea5493[_0x437109(0x113)][_0x437109(0x119)],0xa),_0x19edf0=parseInt(_0xea5493['dataset'][_0x437109(0x114)],0xa),_0xdfd2a0=company[0x0][_0x437109(0xe8)][_0x48c7ee][_0x437109(0x110)][_0x19edf0],_0x65d11f=_0xea5493['getElementsByClassName'](_0x437109(0x120))[0x0],_0x9e7f3b=_0x65d11f['value'];_0xdfd2a0[_0x437109(0x14e)]=_0x9e7f3b,_0x65d11f['disabled']=!![],company[0x0][_0x437109(0xe8)][_0x48c7ee][_0x437109(0xf0)]=new Date();}const _0x8ee4e5=await createCartStore('');await saveCompanyToIndexedDB(company,_0x8ee4e5),_0x444d54[_0x437109(0xf3)](_0x437109(0x136))['style']['display']='none',_0x444d54[_0x437109(0xf3)](_0x437109(0x107))[_0x437109(0x12b)][_0x437109(0x132)]=_0x437109(0x148),_0x444d54[_0x437109(0xe1)]=_0x437109(0x137),apiERPsyncUsers();}function generateOfflineOperationsTable(){var _0x100e65=_0x545c,_0x1ad133=document[_0x100e65(0x11b)](_0x100e65(0x103));return _0x1ad133[_0x100e65(0x14b)]='',createCartStore('')[_0x100e65(0xfc)](function(_0x31b40a){var _0x5bda5e=_0x100e65,_0x3dd243=_0x31b40a['transaction'](_0x5bda5e(0xe6),_0x5bda5e(0x102)),_0x3b16c2=_0x3dd243[_0x5bda5e(0xfd)]('offline_operations');return new Promise(function(_0x2c8b1a,_0x3c2534){var _0x202394=_0x5bda5e,_0x5a7060=_0x3b16c2[_0x202394(0x11a)]();_0x5a7060['onsuccess']=function(){var _0x20fa7e=_0x202394;_0x2c8b1a(_0x5a7060[_0x20fa7e(0x121)]);},_0x5a7060[_0x202394(0xea)]=function(){_0x3c2534(_0x5a7060['error']);};});})['then'](function(_0x43bcbb){var _0x2654aa=_0x100e65,_0x488bd3=[];for(var _0x9efa97=0x0;_0x9efa97<_0x43bcbb[_0x2654aa(0xe5)];_0x9efa97++){_0x43bcbb[_0x9efa97][_0x2654aa(0x14c)]==0x1&&_0x488bd3['push'](_0x43bcbb[_0x9efa97]);}if(_0x488bd3[_0x2654aa(0xe5)]===0x0){_0x1ad133['textContent']=_0x2654aa(0x150);return;}var _0x572097=document[_0x2654aa(0xf1)](_0x2654aa(0x11f));_0x572097[_0x2654aa(0xe1)]='offlineOps_table';var _0x1d8704=document['createElement'](_0x2654aa(0x143)),_0x40446b=document[_0x2654aa(0xf1)]('tr');[_0x2654aa(0x10e),_0x2654aa(0xef),_0x2654aa(0x12a),'Fecha',_0x2654aa(0xe9)][_0x2654aa(0x11c)](function(_0x5c5f57){var _0x2438d4=_0x2654aa,_0xea6e03=document['createElement']('th');_0xea6e03[_0x2438d4(0x11d)]=_0x5c5f57,_0x40446b[_0x2438d4(0x139)](_0xea6e03);}),_0x1d8704[_0x2654aa(0x139)](_0x40446b),_0x572097[_0x2654aa(0x139)](_0x1d8704);var _0x4cf002=document[_0x2654aa(0xf1)](_0x2654aa(0xec));_0x488bd3[_0x2654aa(0x11c)](function(_0x4b923e){var _0xd6d307=_0x2654aa,_0x13bf5b=document[_0xd6d307(0xf1)]('tr'),_0x3c0444=[_0x4b923e['setTipoOperacion'],_0x4b923e['setSerie'],_0x4b923e[_0xd6d307(0x149)],_0x4b923e[_0xd6d307(0x105)],_0x4b923e['setMessage']||''];_0x3c0444[_0xd6d307(0x11c)](function(_0x5d44e3){var _0x1d8c88=_0xd6d307,_0x2a8a78=document[_0x1d8c88(0xf1)]('td');_0x2a8a78[_0x1d8c88(0x11d)]=_0x5d44e3,_0x13bf5b[_0x1d8c88(0x139)](_0x2a8a78);}),_0x4cf002['appendChild'](_0x13bf5b);}),_0x572097[_0x2654aa(0x139)](_0x4cf002),_0x1ad133[_0x2654aa(0x139)](_0x572097);})[_0x100e65(0x135)](function(_0x6d6683){var _0x41dd58=_0x100e65;console[_0x41dd58(0x129)](_0x41dd58(0x11e),_0x6d6683),_0x1ad133['textContent']='Error\x20cargando\x20operaciones.';});}window[_0x31997a(0x122)]=function(){var _0x12e9d8=_0x31997a;const _0x4ac6ea=0x2;loadLoginContent(_0x12e9d8(0x126)),setUserNameGet(),setEventBtnAccess();const _0x41b071=document['querySelector'](_0x12e9d8(0x13d));_0x41b071&&_0x41b071[_0x12e9d8(0xdf)]('click',function(){logoutReload(0x0,_0x4ac6ea);}),document[_0x12e9d8(0x11b)](_0x12e9d8(0xf9))[_0x12e9d8(0xdf)]('change',async function(){const _0x298c2c=parseInt(this['value']);company[0x0]['setBranchDefault']=_0x298c2c;const _0x477e38=await createCartStore('');await saveCompanyToIndexedDB(company,_0x477e38),cargarAlmacenes(_0x298c2c),setTimeout(()=>{var _0x5aa497=_0x545c;document[_0x5aa497(0x11b)]('setWarehouseId')[_0x5aa497(0x10d)](new Event('change'));},0x64),cargarPisos(_0x298c2c),setTimeout(()=>{var _0x3bb45e=_0x545c;document[_0x3bb45e(0x11b)](_0x3bb45e(0xf2))['dispatchEvent'](new Event(_0x3bb45e(0xfa)));},0x64),ntf_initNotifications();}),loadCartAndSetTabCount(_0x4ac6ea);};
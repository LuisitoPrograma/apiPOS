/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 4.4.2
*/

var _0x122ff9=_0x157d;(function(_0xc02472,_0x4af2fa){var _0x1efab4=_0x157d,_0x1d0e68=_0xc02472();while(!![]){try{var _0x4fb748=parseInt(_0x1efab4(0x194))/0x1+-parseInt(_0x1efab4(0x130))/0x2+-parseInt(_0x1efab4(0x18a))/0x3+parseInt(_0x1efab4(0x150))/0x4+parseInt(_0x1efab4(0x17e))/0x5+-parseInt(_0x1efab4(0x183))/0x6*(parseInt(_0x1efab4(0x191))/0x7)+parseInt(_0x1efab4(0x193))/0x8*(parseInt(_0x1efab4(0x164))/0x9);if(_0x4fb748===_0x4af2fa)break;else _0x1d0e68['push'](_0x1d0e68['shift']());}catch(_0x4616cb){_0x1d0e68['push'](_0x1d0e68['shift']());}}}(_0x1159,0x62cfb));var _0x595c94=(function(){var _0x3b3851=!![];return function(_0x3442c8,_0x47a3e9){var _0x496440=_0x3b3851?function(){var _0x216014=_0x157d;if(_0x47a3e9){var _0x5877b7=_0x47a3e9[_0x216014(0x15d)](_0x3442c8,arguments);return _0x47a3e9=null,_0x5877b7;}}:function(){};return _0x3b3851=![],_0x496440;};}()),_0x357736=_0x595c94(this,function(){var _0x5a8393=_0x157d;return _0x357736[_0x5a8393(0x14d)]()[_0x5a8393(0x149)](_0x5a8393(0x19c))['toString']()['constructor'](_0x357736)[_0x5a8393(0x149)]('(((.+)+)+)+$');});_0x357736();function _0x157d(_0x10f879,_0x4e1c8e){var _0x1afbcc=_0x1159();return _0x157d=function(_0x183bad,_0x14c65c){_0x183bad=_0x183bad-0x121;var _0x1217e4=_0x1afbcc[_0x183bad];return _0x1217e4;},_0x157d(_0x10f879,_0x4e1c8e);}var _0x14c65c=(function(){var _0x462a31=!![];return function(_0x3962cf,_0x51809f){var _0x47c6b3=_0x462a31?function(){if(_0x51809f){var _0x5558ea=_0x51809f['apply'](_0x3962cf,arguments);return _0x51809f=null,_0x5558ea;}}:function(){};return _0x462a31=![],_0x47c6b3;};}()),_0x183bad=_0x14c65c(this,function(){var _0x3811d5=_0x157d,_0xd311df;try{var _0x42e839=Function(_0x3811d5(0x142)+_0x3811d5(0x170)+');');_0xd311df=_0x42e839();}catch(_0x4fff6e){_0xd311df=window;}var _0x34ee35=_0xd311df['console']=_0xd311df[_0x3811d5(0x16e)]||{},_0x42303e=['log','warn',_0x3811d5(0x177),_0x3811d5(0x15b),_0x3811d5(0x132),_0x3811d5(0x166),_0x3811d5(0x14b)];for(var _0x4bfb06=0x0;_0x4bfb06<_0x42303e[_0x3811d5(0x17b)];_0x4bfb06++){var _0x1ee888=_0x14c65c[_0x3811d5(0x124)]['prototype']['bind'](_0x14c65c),_0x4822dc=_0x42303e[_0x4bfb06],_0x5279b7=_0x34ee35[_0x4822dc]||_0x1ee888;_0x1ee888[_0x3811d5(0x126)]=_0x14c65c[_0x3811d5(0x17a)](_0x14c65c),_0x1ee888['toString']=_0x5279b7['toString']['bind'](_0x5279b7),_0x34ee35[_0x4822dc]=_0x1ee888;}});_0x183bad();var BOOLEAN_PERMS=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0xa,0xb,0xd,0xe,0xf,0x10,0x11,0x13,0x14,0x15,0x16,0x17,0x18];async function apiERPupdateUsersOnline(_0x476eeb,_0x1c52f3){var _0x5e5a4d=_0x157d;if(!isOnline())return console[_0x5e5a4d(0x18d)](_0x5e5a4d(0x185)),Promise[_0x5e5a4d(0x187)](_0x5e5a4d(0x185));const _0x4e37bc={'setAuthToken':_0x476eeb,'setUsers':_0x1c52f3};return fetch('https://apierp.dev/api/users/update/',{'method':'POST','headers':{'Content-Type':'application/json'},'body':JSON[_0x5e5a4d(0x161)](_0x4e37bc)})['then'](_0x45a141=>{var _0x3732f7=_0x5e5a4d;if(!_0x45a141['ok'])throw new Error(_0x3732f7(0x14c)+_0x45a141[_0x3732f7(0x140)]);return _0x45a141[_0x3732f7(0x197)]();})[_0x5e5a4d(0x184)](_0x5e47e0=>{var _0x36f296=_0x5e5a4d;if(!_0x5e47e0[_0x36f296(0x192)])throw new Error(_0x5e47e0[_0x36f296(0x136)]||_0x36f296(0x144));return console[_0x36f296(0x18d)](_0x36f296(0x13b)),_0x5e47e0;})[_0x5e5a4d(0x12e)](_0x563360=>{var _0x582dc7=_0x5e5a4d;console['error'](_0x582dc7(0x15e),_0x563360);throw _0x563360;});}async function apiERPsyncUsers(){var _0x4ef169=_0x157d;isLoggedIn(company)&&(isOnline()&&await apiERPupdateUsersOnline(company[0x0][_0x4ef169(0x12a)],company[0x0][_0x4ef169(0x121)]));}function _0x1159(){var _0x46725d=['setUsers','transaction','setTipoOperacionName','constructor','panel_operations','__proto__','¿Estás\x20seguro\x20de\x20que\x20deseas\x20eliminar\x20esta\x20operación?','click','select','setAuthToken','No\x20hay\x20operaciones\x20pendientes.','getAll','setTipoOperacion','catch','setBranchId','1600868SltjCO','setPermissionId','exception','userIndex','setUserFullName','panel_users','message','Correlativo','disabled','result','userPerm_container_','Data\x20actualizada\x20correctamente\x20en\x20la\x20base\x20de\x20datos.','.userPerm_editBtn','offlineOps_table','value','setPermissions','statusText','setWarehouseId','return\x20(function()\x20','onload','Error\x20desconocido\x20al\x20actualizar\x20Data.','onsuccess','thead','createElement','./img/apiPOS.png','search','setEmailCredentialsId','trace','Error\x20Sync:\x20','toString','Error\x20leyendo\x20operaciones:','Motivo','414160tdoZfA','setLastDateUpdate','style','dispatchEvent','inline-block','option','WarehouseChangeComplete','change','none','getElementsByClassName','setSerie','error','setFloorId','apply','Error\x20al\x20actualizar\x20data\x20online:','setPermissionNameFalse','button','stringify','indexOf','setEmailCredentials','1667673JRpzYp','Acciones','table','apiPOSsendOffline','complete','appendChild','textContent','userPerm_item','getElementById','Tipo','console','setEmailCredentialsSenderEmail','{}.constructor(\x22return\x20this\x22)(\x20)','push','Número\x20de\x20Decimales:\x20','Fecha','setTipoOperaciones','setTipoOperacionCodigo','readwrite','info','userPerm_select','setMessage','bind','length','dataset','querySelector','1709565biYgui','setBranchDefault','onerror','setFechaHora','userPerm_editBtn','816IwzorW','then','Error\x20Network.','offline_operations','reject','Eliminar','permIndex','2142852IlsRPn','.userPerm_saveBtn','Guardar','log','target','addEventListener','className','2443xaLCPs','success','40dTGGwZ','594975BMWXGD','div','userPerm_container\x20border_blue','json','.btn-logout','userPerm_list','setPermissionValue','display','(((.+)+)+)+$','forEach','userPerm_header'];_0x1159=function(){return _0x46725d;};return _0x1159();}function generatePermissionsPanel(_0x4015b8){var _0x2672ba=_0x157d,_0x2328eb=document[_0x2672ba(0x16c)](_0x2672ba(0x135));_0x2328eb['innerHTML']='';var _0x58bcf3=_0x4015b8[0x0]&&_0x4015b8[0x0][_0x2672ba(0x121)]||[],_0x432350=_0x4015b8[0x0]&&_0x4015b8[0x0][_0x2672ba(0x174)]||[];for(var _0x151851=0x0;_0x151851<_0x58bcf3[_0x2672ba(0x17b)];_0x151851++){var _0x1b5f1b=_0x58bcf3[_0x151851],_0x123fe3=document['createElement'](_0x2672ba(0x195));_0x123fe3[_0x2672ba(0x190)]='userPerm_container\x20border_blue',_0x123fe3['id']=_0x2672ba(0x13a)+_0x151851;var _0x7351b3=document['createElement']('h3');_0x7351b3['className']=_0x2672ba(0x19e),_0x7351b3['textContent']=_0x1b5f1b[_0x2672ba(0x134)]||'Usuario\x20'+(_0x151851+0x1),_0x123fe3[_0x2672ba(0x169)](_0x7351b3);var _0x4d84b0=document[_0x2672ba(0x147)]('div');_0x4d84b0[_0x2672ba(0x190)]=_0x2672ba(0x199);for(var _0x940f4e=0x0;_0x940f4e<_0x1b5f1b[_0x2672ba(0x13f)]['length'];_0x940f4e++){var _0x5e1a86=_0x1b5f1b[_0x2672ba(0x13f)][_0x940f4e],_0x362d02=document[_0x2672ba(0x147)](_0x2672ba(0x195));_0x362d02[_0x2672ba(0x190)]='userPerm_item',_0x362d02[_0x2672ba(0x17c)][_0x2672ba(0x133)]=_0x151851,_0x362d02[_0x2672ba(0x17c)][_0x2672ba(0x189)]=_0x940f4e;var _0x229f1b=Number(_0x5e1a86['setPermissionValue']),_0x48bb8e=document['createElement'](_0x2672ba(0x129));_0x48bb8e[_0x2672ba(0x190)]=_0x2672ba(0x178),_0x48bb8e['disabled']=!![];if(BOOLEAN_PERMS[_0x2672ba(0x162)](_0x5e1a86['setPermissionId'])!==-0x1){var _0x4d6eab=document['createElement'](_0x2672ba(0x155));_0x4d6eab[_0x2672ba(0x13e)]='0',_0x4d6eab['textContent']=_0x5e1a86['setPermissionNameFalse'],_0x48bb8e[_0x2672ba(0x169)](_0x4d6eab);var _0x2b3861=document[_0x2672ba(0x147)]('option');_0x2b3861['value']='1',_0x2b3861[_0x2672ba(0x16a)]=_0x5e1a86['setPermissionNameTrue'],_0x48bb8e[_0x2672ba(0x169)](_0x2b3861),_0x48bb8e['value']=String(_0x229f1b);}else{if(_0x5e1a86[_0x2672ba(0x131)]===0x9||_0x5e1a86[_0x2672ba(0x131)]===0xc||_0x5e1a86[_0x2672ba(0x131)]===0x12){if(_0x5e1a86[_0x2672ba(0x131)]===0x9){var _0xc5d850=document['createElement'](_0x2672ba(0x155));_0xc5d850[_0x2672ba(0x13e)]='0',_0xc5d850[_0x2672ba(0x16a)]=_0x5e1a86[_0x2672ba(0x15f)],_0x48bb8e[_0x2672ba(0x169)](_0xc5d850);for(var _0x49d1b9=0x0;_0x49d1b9<_0x432350[_0x2672ba(0x17b)];_0x49d1b9++){var _0x1b7c6f=_0x432350[_0x49d1b9],_0x208057=document['createElement']('option');_0x208057['value']=String(_0x1b7c6f[_0x2672ba(0x175)]),_0x208057[_0x2672ba(0x16a)]=_0x1b7c6f[_0x2672ba(0x123)],_0x48bb8e[_0x2672ba(0x169)](_0x208057);}}if(_0x5e1a86[_0x2672ba(0x131)]===0xc)for(var _0x49d1b9=0x1;_0x49d1b9<=0x4;_0x49d1b9++){var _0x1b7c6f=_0x49d1b9,_0x208057=document[_0x2672ba(0x147)](_0x2672ba(0x155));_0x208057[_0x2672ba(0x13e)]=String(_0x1b7c6f),_0x208057[_0x2672ba(0x16a)]=_0x2672ba(0x172)+_0x1b7c6f,_0x48bb8e[_0x2672ba(0x169)](_0x208057);}if(_0x5e1a86[_0x2672ba(0x131)]===0x12){var _0x372ff1=myCompany&&myCompany[_0x2672ba(0x163)]||[],_0xc5d850=document['createElement'](_0x2672ba(0x155));_0xc5d850[_0x2672ba(0x13e)]='0',_0xc5d850['textContent']=_0x5e1a86[_0x2672ba(0x15f)],_0x48bb8e[_0x2672ba(0x169)](_0xc5d850);for(var _0x49d1b9=0x0;_0x49d1b9<_0x372ff1[_0x2672ba(0x17b)];_0x49d1b9++){var _0x1b7c6f=_0x372ff1[_0x49d1b9],_0x208057=document[_0x2672ba(0x147)](_0x2672ba(0x155));_0x208057[_0x2672ba(0x13e)]=String(_0x1b7c6f[_0x2672ba(0x14a)]),_0x208057[_0x2672ba(0x16a)]=_0x1b7c6f[_0x2672ba(0x16f)],_0x48bb8e[_0x2672ba(0x169)](_0x208057);}}_0x48bb8e[_0x2672ba(0x13e)]=String(_0x229f1b);}}_0x362d02['appendChild'](_0x48bb8e),_0x4d84b0[_0x2672ba(0x169)](_0x362d02);}_0x123fe3['appendChild'](_0x4d84b0);var _0x5ba2ba=document[_0x2672ba(0x147)](_0x2672ba(0x160));_0x5ba2ba[_0x2672ba(0x190)]=_0x2672ba(0x182),_0x5ba2ba[_0x2672ba(0x16a)]='Editar',_0x5ba2ba[_0x2672ba(0x17c)]['userIndex']=_0x151851;var _0x25a0d8=document[_0x2672ba(0x147)]('button');_0x25a0d8['className']='userPerm_saveBtn',_0x25a0d8[_0x2672ba(0x16a)]=_0x2672ba(0x18c),_0x25a0d8['dataset']['userIndex']=_0x151851,_0x25a0d8[_0x2672ba(0x152)][_0x2672ba(0x19b)]=_0x2672ba(0x158),_0x123fe3[_0x2672ba(0x169)](_0x5ba2ba),_0x123fe3[_0x2672ba(0x169)](_0x25a0d8),_0x2328eb[_0x2672ba(0x169)](_0x123fe3),_0x5ba2ba[_0x2672ba(0x18f)](_0x2672ba(0x128),onEditClick),_0x25a0d8[_0x2672ba(0x18f)](_0x2672ba(0x128),onSaveClick);}}function onEditClick(_0x5f0f18){var _0x1fa748=_0x157d,_0x1291df=_0x5f0f18[_0x1fa748(0x18e)]['dataset']['userIndex'],_0x2f29b9=document['getElementById'](_0x1fa748(0x13a)+_0x1291df),_0x55bfc9=_0x2f29b9[_0x1fa748(0x159)](_0x1fa748(0x178));for(var _0xa8f040=0x0;_0xa8f040<_0x55bfc9['length'];_0xa8f040++){_0x55bfc9[_0xa8f040][_0x1fa748(0x138)]=![];}_0x2f29b9[_0x1fa748(0x17d)](_0x1fa748(0x13c))[_0x1fa748(0x152)][_0x1fa748(0x19b)]=_0x1fa748(0x158),_0x2f29b9[_0x1fa748(0x17d)]('.userPerm_saveBtn')[_0x1fa748(0x152)][_0x1fa748(0x19b)]='block',_0x2f29b9[_0x1fa748(0x190)]='userPerm_container\x20border_orange';}async function onSaveClick(_0x16971b){var _0xbc2a3b=_0x157d,_0x2e288b=_0x16971b[_0xbc2a3b(0x18e)]['dataset'][_0xbc2a3b(0x133)],_0x4b1fb7=document[_0xbc2a3b(0x16c)](_0xbc2a3b(0x13a)+_0x2e288b),_0xc6e051=_0x4b1fb7[_0xbc2a3b(0x159)](_0xbc2a3b(0x16b));for(var _0x1cf5cc=0x0;_0x1cf5cc<_0xc6e051[_0xbc2a3b(0x17b)];_0x1cf5cc++){var _0x543ee8=_0xc6e051[_0x1cf5cc],_0x2efc2e=parseInt(_0x543ee8[_0xbc2a3b(0x17c)][_0xbc2a3b(0x133)],0xa),_0x3b45a5=parseInt(_0x543ee8[_0xbc2a3b(0x17c)]['permIndex'],0xa),_0xd8f5e4=company[0x0][_0xbc2a3b(0x121)][_0x2efc2e]['setPermissions'][_0x3b45a5],_0x8aa834=_0x543ee8[_0xbc2a3b(0x159)](_0xbc2a3b(0x178))[0x0],_0x2563c0=_0x8aa834[_0xbc2a3b(0x13e)];_0xd8f5e4[_0xbc2a3b(0x19a)]=_0x2563c0,_0x8aa834[_0xbc2a3b(0x138)]=!![],company[0x0][_0xbc2a3b(0x121)][_0x2efc2e][_0xbc2a3b(0x151)]=new Date();}const _0x75efce=await createCartStore('');await saveCompanyToIndexedDB(company,_0x75efce),_0x4b1fb7[_0xbc2a3b(0x17d)](_0xbc2a3b(0x18b))[_0xbc2a3b(0x152)][_0xbc2a3b(0x19b)]=_0xbc2a3b(0x158),_0x4b1fb7[_0xbc2a3b(0x17d)]('.userPerm_editBtn')[_0xbc2a3b(0x152)]['display']=_0xbc2a3b(0x154),_0x4b1fb7[_0xbc2a3b(0x190)]=_0xbc2a3b(0x196),apiERPsyncUsers();}async function deleteOfflineOperation(_0x465193){var _0x3d8edb=_0x157d;try{var _0x255fc7=await createCartStore(''),_0x48cad2=_0x255fc7['transaction'](_0x3d8edb(0x186),_0x3d8edb(0x176)),_0x505ce0=_0x48cad2['objectStore'](_0x3d8edb(0x186));_0x505ce0['delete'](_0x465193),await _0x48cad2[_0x3d8edb(0x168)],await generateOfflineOperationsTable();}catch(_0x2f0dcf){console[_0x3d8edb(0x15b)]('Error\x20eliminando\x20operación:',_0x2f0dcf);}}async function generateOfflineOperationsTable(){var _0x32775d=_0x157d,_0x3501f4=document[_0x32775d(0x16c)](_0x32775d(0x125));_0x3501f4['innerHTML']='';try{var _0x44d995=await createCartStore(''),_0x295940=_0x44d995[_0x32775d(0x122)](_0x32775d(0x186),'readonly'),_0x10daa4=_0x295940['objectStore']('offline_operations'),_0x46e21d=await new Promise(function(_0x1103fe,_0x333b12){var _0x5e49c9=_0x32775d,_0xb4a13=_0x10daa4[_0x5e49c9(0x12c)]();_0xb4a13[_0x5e49c9(0x145)]=function(){var _0x163d75=_0x5e49c9;_0x1103fe(_0xb4a13[_0x163d75(0x139)]);},_0xb4a13[_0x5e49c9(0x180)]=function(){var _0x19dfe8=_0x5e49c9;_0x333b12(_0xb4a13[_0x19dfe8(0x15b)]);};}),_0xf4ae96=[];for(var _0x27a401=0x0;_0x27a401<_0x46e21d[_0x32775d(0x17b)];_0x27a401++){_0x46e21d[_0x27a401][_0x32775d(0x167)]==0x1&&_0xf4ae96[_0x32775d(0x171)](_0x46e21d[_0x27a401]);}if(_0xf4ae96[_0x32775d(0x17b)]===0x0){_0x3501f4[_0x32775d(0x16a)]=_0x32775d(0x12b);return;}var _0x2f1679=document[_0x32775d(0x147)](_0x32775d(0x166));_0x2f1679[_0x32775d(0x190)]=_0x32775d(0x13d);var _0x22109f=document['createElement'](_0x32775d(0x146)),_0x50eb31=document['createElement']('tr');[_0x32775d(0x16d),'Serie',_0x32775d(0x137),_0x32775d(0x173),_0x32775d(0x14f),_0x32775d(0x165)][_0x32775d(0x19d)](function(_0x5a730f){var _0x3d2174=_0x32775d,_0x472d61=document[_0x3d2174(0x147)]('th');_0x472d61[_0x3d2174(0x16a)]=_0x5a730f,_0x50eb31[_0x3d2174(0x169)](_0x472d61);}),_0x22109f[_0x32775d(0x169)](_0x50eb31),_0x2f1679[_0x32775d(0x169)](_0x22109f);var _0x276754=document[_0x32775d(0x147)]('tbody');_0xf4ae96[_0x32775d(0x19d)](function(_0x388f78){var _0x150254=_0x32775d,_0x4d52e3=document[_0x150254(0x147)]('tr'),_0xcc41b0=[_0x388f78[_0x150254(0x12d)],_0x388f78[_0x150254(0x15a)],_0x388f78['setCorrelativo'],_0x388f78[_0x150254(0x181)],_0x388f78[_0x150254(0x179)]||''];_0xcc41b0[_0x150254(0x19d)](function(_0x206967){var _0x37f5c2=_0x150254,_0x2ce47b=document[_0x37f5c2(0x147)]('td');_0x2ce47b[_0x37f5c2(0x16a)]=_0x206967,_0x4d52e3[_0x37f5c2(0x169)](_0x2ce47b);});var _0xc23028=document['createElement']('td'),_0x3fe682=document['createElement'](_0x150254(0x160));_0x3fe682['textContent']=_0x150254(0x188),_0x3fe682[_0x150254(0x18f)](_0x150254(0x128),function(){var _0x5cfa96=_0x150254;confirm(_0x5cfa96(0x127))&&deleteOfflineOperation(_0x388f78['id']);}),_0xc23028['appendChild'](_0x3fe682),_0x4d52e3[_0x150254(0x169)](_0xc23028),_0x276754['appendChild'](_0x4d52e3);}),_0x2f1679[_0x32775d(0x169)](_0x276754),_0x3501f4[_0x32775d(0x169)](_0x2f1679);}catch(_0x29b613){console['error'](_0x32775d(0x14e),_0x29b613),_0x3501f4[_0x32775d(0x16a)]='Error\x20cargando\x20operaciones.';}}window[_0x122ff9(0x143)]=function(){var _0x222d29=_0x122ff9;const _0x5e6797=0x2;loadLoginContent(_0x222d29(0x148)),setUserNameGet(),setEventBtnAccess();const _0x2468dc=document[_0x222d29(0x17d)](_0x222d29(0x198));_0x2468dc&&_0x2468dc[_0x222d29(0x18f)](_0x222d29(0x128),function(){logoutReload(0x0,_0x5e6797);}),document[_0x222d29(0x16c)](_0x222d29(0x12f))['addEventListener'](_0x222d29(0x157),async function(){var _0x4327ab=_0x222d29;const _0x54612c=parseInt(this[_0x4327ab(0x13e)]);company[0x0][_0x4327ab(0x17f)]=_0x54612c;const _0x1dcd24=await createCartStore('');await saveCompanyToIndexedDB(company,_0x1dcd24),await cargarPisos(_0x54612c),await waitForEvent('setFloorId','EnvironmentChangeComplete'),await cargarAlmacenes(_0x54612c),await waitForEvent(_0x4327ab(0x141),'WarehouseChangeComplete'),document[_0x4327ab(0x153)](new Event('BranchChangeComplete')),ntf_initNotifications();}),document[_0x222d29(0x16c)](_0x222d29(0x141))['addEventListener'](_0x222d29(0x157),async function(){var _0x256a57=_0x222d29;document[_0x256a57(0x153)](new Event(_0x256a57(0x156)));}),document[_0x222d29(0x16c)](_0x222d29(0x15c))[_0x222d29(0x18f)]('change',async function(_0xcbfe4b){var _0x4f34d5=_0x222d29;document[_0x4f34d5(0x153)](new Event('EnvironmentChangeComplete'));}),loadCartAndSetTabCount(_0x5e6797);};
/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 5.2.5
*/

function _0x47d9(){const _0x18ae2f=['setAuthToken','status','setCredentialsApiWAChat','https://','json','table','qr-overlay','3SIevaP','22185790LlEoSu','includes','__proto__','visible','display','ya\x20conectado','querySelector','dispatchEvent','search','{}.constructor(\x22return\x20this\x22)(\x20)','style','getElementById','none','setWarehouseId','chatPanel','1820651lMaluM','bind','console','5708322HDqENX','EnvironmentChangeComplete','change','.btn-logout','13ASqfyO','WarehouseChangeComplete','(((.+)+)+)+$','toLowerCase','/wa/','visibility','constructor','init','setBranchDefault','toString','flex','BranchChangeComplete','click','loginPanel','hidden','setCredentialsApiWAChatSubdomain','setFloorId','onload','4006805VVooCH','addEventListener','prototype','value','8ggNSCP','117662mmoTPb','apply','setCredentialsApiWAChatPort','warn','error','2144796FtwYTX','2842764gYaUCO','setCredentialsApiWAChatStatus','10RmCyqS','length'];_0x47d9=function(){return _0x18ae2f;};return _0x47d9();}const _0x2170a3=_0x38eb;(function(_0x33da61,_0x385f34){const _0x350af8=_0x38eb,_0x46d578=_0x33da61();while(!![]){try{const _0x53751a=parseInt(_0x350af8(0x139))/0x1*(-parseInt(_0x350af8(0x111))/0x2)+parseInt(_0x350af8(0x122))/0x3*(parseInt(_0x350af8(0x117))/0x4)+-parseInt(_0x350af8(0x10c))/0x5+-parseInt(_0x350af8(0x116))/0x6+-parseInt(_0x350af8(0x132))/0x7*(-parseInt(_0x350af8(0x110))/0x8)+-parseInt(_0x350af8(0x135))/0x9+-parseInt(_0x350af8(0x119))/0xa*(-parseInt(_0x350af8(0x123))/0xb);if(_0x53751a===_0x385f34)break;else _0x46d578['push'](_0x46d578['shift']());}catch(_0x5cfd24){_0x46d578['push'](_0x46d578['shift']());}}}(_0x47d9,0x68eda));const selectCredentialsApiWAChat=document[_0x2170a3(0x12e)](_0x2170a3(0x11d)),loginPanel=document[_0x2170a3(0x12e)](_0x2170a3(0x146)),chatPanel=document['getElementById'](_0x2170a3(0x131)),qrImg=document['getElementById']('qr-img'),overlay=document[_0x2170a3(0x12e)](_0x2170a3(0x121));function _0x38eb(_0x17730d,_0x10a2d8){const _0x414c2e=_0x47d9();return _0x38eb=function(_0x2c316a,_0x3a7908){_0x2c316a=_0x2c316a-0x109;let _0x1163ab=_0x414c2e[_0x2c316a];return _0x1163ab;},_0x38eb(_0x17730d,_0x10a2d8);}let qrTimeout;const validSeconds=0xa;function showLogin(){const _0x34caf7=_0x2170a3;loginPanel['style']['display']=_0x34caf7(0x143),chatPanel['style'][_0x34caf7(0x13e)]=_0x34caf7(0x147);}function showChat(){const _0x426750=_0x2170a3;loginPanel[_0x426750(0x12d)][_0x426750(0x127)]='none',chatPanel[_0x426750(0x12d)][_0x426750(0x13e)]=_0x426750(0x126);}async function initQRApiWAChat(_0x55dca0,_0x173f48){const _0x4ae63e=_0x2170a3,_0x2011e1=(function(){let _0x29823a=!![];return function(_0x304277,_0x5d846a){const _0x52028e=_0x29823a?function(){const _0x1b52c9=_0x38eb;if(_0x5d846a){const _0x39c660=_0x5d846a[_0x1b52c9(0x112)](_0x304277,arguments);return _0x5d846a=null,_0x39c660;}}:function(){};return _0x29823a=![],_0x52028e;};}()),_0x2fd4d6=_0x2011e1(this,function(){const _0xe273c9=_0x38eb;return _0x2fd4d6[_0xe273c9(0x142)]()[_0xe273c9(0x12b)](_0xe273c9(0x13b))[_0xe273c9(0x142)]()[_0xe273c9(0x13f)](_0x2fd4d6)[_0xe273c9(0x12b)](_0xe273c9(0x13b));});_0x2fd4d6();const _0x5647fc=(function(){let _0x55b13f=!![];return function(_0x434431,_0x3cb696){const _0x4afb9e=_0x55b13f?function(){const _0x2194ea=_0x38eb;if(_0x3cb696){const _0x539562=_0x3cb696[_0x2194ea(0x112)](_0x434431,arguments);return _0x3cb696=null,_0x539562;}}:function(){};return _0x55b13f=![],_0x4afb9e;};}()),_0x48f2af=_0x5647fc(this,function(){const _0x4d147f=_0x38eb;let _0x2d7ab8;try{const _0x4502fb=Function('return\x20(function()\x20'+_0x4d147f(0x12c)+');');_0x2d7ab8=_0x4502fb();}catch(_0x27f9b6){_0x2d7ab8=window;}const _0xc7b53a=_0x2d7ab8[_0x4d147f(0x134)]=_0x2d7ab8[_0x4d147f(0x134)]||{},_0x2123c6=['log',_0x4d147f(0x114),'info',_0x4d147f(0x115),'exception',_0x4d147f(0x120),'trace'];for(let _0x4ce64c=0x0;_0x4ce64c<_0x2123c6[_0x4d147f(0x11a)];_0x4ce64c++){const _0x274274=_0x5647fc[_0x4d147f(0x13f)][_0x4d147f(0x10e)][_0x4d147f(0x133)](_0x5647fc),_0x2ffa13=_0x2123c6[_0x4ce64c],_0x37762e=_0xc7b53a[_0x2ffa13]||_0x274274;_0x274274[_0x4d147f(0x125)]=_0x5647fc[_0x4d147f(0x133)](_0x5647fc),_0x274274[_0x4d147f(0x142)]=_0x37762e[_0x4d147f(0x142)]['bind'](_0x37762e),_0xc7b53a[_0x2ffa13]=_0x274274;}});_0x48f2af();const _0x32723a=selectCredentialsApiWAChat[_0x4ae63e(0x10f)],_0x5a3735=getCredentialsApiWAChat(_0x32723a);if(!_0x5a3735){ntfShow('Credenciales\x20no\x20encontradas');return;}const _0x57f7e4=_0x5a3735[_0x4ae63e(0x109)],_0x215f92=_0x5a3735[_0x4ae63e(0x113)];if(_0x55dca0===_0x4ae63e(0x127))clearTimeout(qrTimeout),overlay[_0x4ae63e(0x12d)][_0x4ae63e(0x127)]=_0x4ae63e(0x12f),qrImg['src']=_0x173f48,qrTimeout=setTimeout(async()=>{const _0xb10341=_0x4ae63e;try{const _0x45dc70=await fetch(_0xb10341(0x11e)+_0x57f7e4+_0xb10341(0x13d)+_0x215f92+'/qr',{'headers':{'x-auth-token':myCompany[_0xb10341(0x11b)]}}),_0x266b9f=await _0x45dc70[_0xb10341(0x11f)]();_0x266b9f[_0xb10341(0x11c)]&&_0x266b9f['status'][_0xb10341(0x13c)]()[_0xb10341(0x124)](_0xb10341(0x128))?(showChat(),_0x5a3735[_0xb10341(0x118)]=0x1):(overlay[_0xb10341(0x12d)][_0xb10341(0x127)]=_0xb10341(0x143),_0x5a3735[_0xb10341(0x118)]=0x0);const _0xf57b1f=await createCartStore('');await saveCompanyToIndexedDB(company,_0xf57b1f);}catch(_0x5668c4){console[_0xb10341(0x115)]('Error\x20al\x20validar\x20estado\x20despuÃ©s\x20de\x20expirar\x20QR:',_0x5668c4),overlay['style']['display']='flex';}},validSeconds*0x3e8);else{if(_0x55dca0===_0x4ae63e(0x140))try{const _0x171b9d=await fetch(_0x4ae63e(0x11e)+_0x57f7e4+'/wa/'+_0x215f92+'/qr',{'headers':{'x-auth-token':myCompany['setAuthToken']}}),_0x539400=await _0x171b9d[_0x4ae63e(0x11f)]();if(_0x539400[_0x4ae63e(0x11c)]&&_0x539400[_0x4ae63e(0x11c)]['toLowerCase']()[_0x4ae63e(0x124)](_0x4ae63e(0x128)))showChat(),_0x5a3735[_0x4ae63e(0x118)]=0x1;else _0x539400['qr']&&(showLogin(),await initQRApiWAChat(_0x4ae63e(0x127),_0x539400['qr']),_0x5a3735[_0x4ae63e(0x118)]=0x0);const _0x4ca451=await createCartStore('');await saveCompanyToIndexedDB(company,_0x4ca451);}catch(_0x3553e0){console[_0x4ae63e(0x115)](_0x3553e0);}}}overlay[_0x2170a3(0x10d)](_0x2170a3(0x145),()=>initQRApiWAChat(_0x2170a3(0x140))),window[_0x2170a3(0x10b)]=function(){const _0x40a073=_0x2170a3,_0x441661=0x4;loadLoginContent(),setUserNameGet(),setEventBtnAccess();const _0x3f6279=document[_0x40a073(0x129)](_0x40a073(0x138));_0x3f6279&&_0x3f6279[_0x40a073(0x10d)](_0x40a073(0x145),function(){logoutReload(0x0,_0x441661);}),document[_0x40a073(0x12e)](_0x40a073(0x11d))[_0x40a073(0x10d)](_0x40a073(0x137),async function(){saveCredentialsApiWAChatInCompany();const _0x44718a=await createCartStore('');await saveCompanyToIndexedDB(company,_0x44718a),location['reload']();}),document[_0x40a073(0x12e)]('setBranchId')[_0x40a073(0x10d)](_0x40a073(0x137),async function(){const _0x412585=_0x40a073,_0x47e210=parseInt(this[_0x412585(0x10f)]);myCompany[_0x412585(0x141)]=_0x47e210,saveCredentialsApiWAChatInCompany();const _0x521381=await createCartStore('');await saveCompanyToIndexedDB(company,_0x521381),await cargarPisos(_0x47e210),await waitForEvent(_0x412585(0x10a),_0x412585(0x136)),await cargarAlmacenes(_0x47e210),await waitForEvent(_0x412585(0x130),_0x412585(0x13a)),document[_0x412585(0x12a)](new Event(_0x412585(0x144))),ntf_initNotifications();}),document[_0x40a073(0x12e)](_0x40a073(0x130))[_0x40a073(0x10d)](_0x40a073(0x137),async function(){const _0x4c7c64=_0x40a073;document[_0x4c7c64(0x12a)](new Event(_0x4c7c64(0x13a)));}),document[_0x40a073(0x12e)](_0x40a073(0x10a))[_0x40a073(0x10d)](_0x40a073(0x137),async function(_0x3bea5e){const _0x3ebc88=_0x40a073;document['dispatchEvent'](new Event(_0x3ebc88(0x136)));}),loadCartAndSetTabCount(_0x441661);};
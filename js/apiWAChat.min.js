/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 4.4.5
*/

const _0x37f99a=_0x2fcf;(function(_0x2b434a,_0x1dd01c){const _0x25bf97=_0x2fcf,_0x11c16d=_0x2b434a();while(!![]){try{const _0x371935=parseInt(_0x25bf97(0x196))/0x1*(-parseInt(_0x25bf97(0x199))/0x2)+parseInt(_0x25bf97(0x17f))/0x3+-parseInt(_0x25bf97(0x1ac))/0x4*(-parseInt(_0x25bf97(0x1a6))/0x5)+-parseInt(_0x25bf97(0x172))/0x6+-parseInt(_0x25bf97(0x192))/0x7+-parseInt(_0x25bf97(0x1a9))/0x8*(parseInt(_0x25bf97(0x1a8))/0x9)+parseInt(_0x25bf97(0x193))/0xa*(parseInt(_0x25bf97(0x18f))/0xb);if(_0x371935===_0x1dd01c)break;else _0x11c16d['push'](_0x11c16d['shift']());}catch(_0x24b60d){_0x11c16d['push'](_0x11c16d['shift']());}}}(_0x2d38,0x71453));function _0x2d38(){const _0x2cc9cc=['error','Error\x20al\x20validar\x20estado\x20despu√©s\x20de\x20expirar\x20QR:','length','setAuthToken','visible','display','console','Credenciales\x20no\x20encontradas','{}.constructor(\x22return\x20this\x22)(\x20)','178233ADZoFm','setWarehouseId','change','1752604KeopzZ','750nRJsWw','visibility','exception','924245VMtfso','includes','src','2xOhcKG','loginPanel','search','bind','setFloorId','getElementById','json','style','./img/apiPOS.png','dispatchEvent','flex','addEventListener','setCredentialsApiWAChatSubdomain','21110BngJgh','/qr','180UUggvY','187912AgsICp','https://','(((.+)+)+)+$','556DpwQJi','init','setCredentialsApiWAChatPort','info','qr-img','warn','/wa/','1975278SapDqk','BranchChangeComplete','setCredentialsApiWAChat','return\x20(function()\x20','status','__proto__','toLowerCase','setCredentialsApiWAChatStatus','click','value','ya\x20conectado','prototype','.btn-logout','1906446jdCkwP','trace','toString','none','EnvironmentChangeComplete','setBranchId','constructor'];_0x2d38=function(){return _0x2cc9cc;};return _0x2d38();}function _0x2fcf(_0x1041dc,_0x11a906){const _0x22203f=_0x2d38();return _0x2fcf=function(_0x295105,_0x7c0e6a){_0x295105=_0x295105-0x16e;let _0x2ee507=_0x22203f[_0x295105];return _0x2ee507;},_0x2fcf(_0x1041dc,_0x11a906);}const selectCredentialsApiWAChat=document[_0x37f99a(0x19e)](_0x37f99a(0x174)),loginPanel=document['getElementById'](_0x37f99a(0x19a)),chatPanel=document[_0x37f99a(0x19e)]('chatPanel'),qrImg=document['getElementById'](_0x37f99a(0x16f)),overlay=document[_0x37f99a(0x19e)]('qr-overlay');let qrTimeout;const validSeconds=0xa;function showLogin(){const _0x8aeacf=_0x37f99a;loginPanel[_0x8aeacf(0x1a0)][_0x8aeacf(0x18b)]=_0x8aeacf(0x1a3),chatPanel[_0x8aeacf(0x1a0)][_0x8aeacf(0x194)]='hidden';}function showChat(){const _0x4f5a2a=_0x37f99a;loginPanel['style'][_0x4f5a2a(0x18b)]=_0x4f5a2a(0x182),chatPanel[_0x4f5a2a(0x1a0)][_0x4f5a2a(0x194)]=_0x4f5a2a(0x18a);}async function initQRApiWAChat(_0x34aee7,_0x72648f){const _0x4478de=_0x37f99a,_0xfe35de=(function(){let _0x3f610d=!![];return function(_0x1039bb,_0x4f548d){const _0x4dc381=_0x3f610d?function(){if(_0x4f548d){const _0x33842a=_0x4f548d['apply'](_0x1039bb,arguments);return _0x4f548d=null,_0x33842a;}}:function(){};return _0x3f610d=![],_0x4dc381;};}()),_0x8c797f=_0xfe35de(this,function(){const _0xa18b28=_0x2fcf;return _0x8c797f['toString']()[_0xa18b28(0x19b)](_0xa18b28(0x1ab))[_0xa18b28(0x181)]()[_0xa18b28(0x185)](_0x8c797f)[_0xa18b28(0x19b)](_0xa18b28(0x1ab));});_0x8c797f();const _0x5e6d82=(function(){let _0x328fb6=!![];return function(_0xd55892,_0x279e82){const _0x433a2e=_0x328fb6?function(){if(_0x279e82){const _0x4c0dd1=_0x279e82['apply'](_0xd55892,arguments);return _0x279e82=null,_0x4c0dd1;}}:function(){};return _0x328fb6=![],_0x433a2e;};}()),_0x26fe65=_0x5e6d82(this,function(){const _0x276f64=_0x2fcf;let _0x553d56;try{const _0x444737=Function(_0x276f64(0x175)+_0x276f64(0x18e)+');');_0x553d56=_0x444737();}catch(_0x52ab74){_0x553d56=window;}const _0xf9bfc0=_0x553d56[_0x276f64(0x18c)]=_0x553d56[_0x276f64(0x18c)]||{},_0x182583=['log',_0x276f64(0x170),_0x276f64(0x16e),'error',_0x276f64(0x195),'table',_0x276f64(0x180)];for(let _0x3ba3da=0x0;_0x3ba3da<_0x182583[_0x276f64(0x188)];_0x3ba3da++){const _0x55bf86=_0x5e6d82['constructor'][_0x276f64(0x17d)]['bind'](_0x5e6d82),_0x414652=_0x182583[_0x3ba3da],_0x3ff123=_0xf9bfc0[_0x414652]||_0x55bf86;_0x55bf86[_0x276f64(0x177)]=_0x5e6d82[_0x276f64(0x19c)](_0x5e6d82),_0x55bf86[_0x276f64(0x181)]=_0x3ff123[_0x276f64(0x181)][_0x276f64(0x19c)](_0x3ff123),_0xf9bfc0[_0x414652]=_0x55bf86;}});_0x26fe65();const _0x83f89e=selectCredentialsApiWAChat[_0x4478de(0x17b)],_0x18137d=getCredentialsApiWAChat(_0x83f89e);if(!_0x18137d){ntfShow(_0x4478de(0x18d));return;}const _0x121d51=_0x18137d[_0x4478de(0x1a5)],_0x1e138c=_0x18137d[_0x4478de(0x1ae)];if(_0x34aee7===_0x4478de(0x18b))clearTimeout(qrTimeout),overlay[_0x4478de(0x1a0)][_0x4478de(0x18b)]=_0x4478de(0x182),qrImg[_0x4478de(0x198)]=_0x72648f,qrTimeout=setTimeout(async()=>{const _0x22de3b=_0x4478de;try{const _0x2225ec=await fetch(_0x22de3b(0x1aa)+_0x121d51+_0x22de3b(0x171)+_0x1e138c+_0x22de3b(0x1a7),{'headers':{'x-auth-token':myCompany[_0x22de3b(0x189)]}}),_0x23eae2=await _0x2225ec[_0x22de3b(0x19f)]();_0x23eae2[_0x22de3b(0x176)]&&_0x23eae2[_0x22de3b(0x176)][_0x22de3b(0x178)]()[_0x22de3b(0x197)](_0x22de3b(0x17c))?(showChat(),_0x18137d[_0x22de3b(0x179)]=0x1):(overlay[_0x22de3b(0x1a0)][_0x22de3b(0x18b)]=_0x22de3b(0x1a3),_0x18137d['setCredentialsApiWAChatStatus']=0x0);const _0x57ec49=await createCartStore('');await saveCompanyToIndexedDB(company,_0x57ec49);}catch(_0x2955da){console[_0x22de3b(0x186)](_0x22de3b(0x187),_0x2955da),overlay[_0x22de3b(0x1a0)][_0x22de3b(0x18b)]=_0x22de3b(0x1a3);}},validSeconds*0x3e8);else{if(_0x34aee7===_0x4478de(0x1ad))try{const _0x39151e=await fetch(_0x4478de(0x1aa)+_0x121d51+_0x4478de(0x171)+_0x1e138c+_0x4478de(0x1a7),{'headers':{'x-auth-token':myCompany[_0x4478de(0x189)]}}),_0x39ace7=await _0x39151e[_0x4478de(0x19f)]();if(_0x39ace7['status']&&_0x39ace7[_0x4478de(0x176)]['toLowerCase']()[_0x4478de(0x197)](_0x4478de(0x17c)))showChat(),_0x18137d[_0x4478de(0x179)]=0x1;else _0x39ace7['qr']&&(showLogin(),await initQRApiWAChat(_0x4478de(0x18b),_0x39ace7['qr']),_0x18137d['setCredentialsApiWAChatStatus']=0x0);const _0x1ee427=await createCartStore('');await saveCompanyToIndexedDB(company,_0x1ee427);}catch(_0x20dc42){console[_0x4478de(0x186)](_0x20dc42);}}}overlay['addEventListener'](_0x37f99a(0x17a),()=>initQRApiWAChat(_0x37f99a(0x1ad))),window['onload']=function(){const _0x189497=_0x37f99a,_0x1e30c4=0x4;loadLoginContent(_0x189497(0x1a1)),setUserNameGet(),setEventBtnAccess();const _0x4625cd=document['querySelector'](_0x189497(0x17e));_0x4625cd&&_0x4625cd[_0x189497(0x1a4)](_0x189497(0x17a),function(){logoutReload(0x0,_0x1e30c4);}),document['getElementById'](_0x189497(0x174))['addEventListener'](_0x189497(0x191),async function(){saveCredentialsApiWAChatInCompany();const _0x2128be=await createCartStore('');await saveCompanyToIndexedDB(company,_0x2128be),location['reload']();}),document['getElementById'](_0x189497(0x184))[_0x189497(0x1a4)](_0x189497(0x191),async function(){const _0xd810ad=_0x189497,_0x2a3a2c=parseInt(this[_0xd810ad(0x17b)]);myCompany['setBranchDefault']=_0x2a3a2c,saveCredentialsApiWAChatInCompany();const _0x51f9ca=await createCartStore('');await saveCompanyToIndexedDB(company,_0x51f9ca),await cargarPisos(_0x2a3a2c),await waitForEvent(_0xd810ad(0x19d),_0xd810ad(0x183)),await cargarAlmacenes(_0x2a3a2c),await waitForEvent(_0xd810ad(0x190),'WarehouseChangeComplete'),document[_0xd810ad(0x1a2)](new Event(_0xd810ad(0x173))),ntf_initNotifications();}),document[_0x189497(0x19e)](_0x189497(0x190))[_0x189497(0x1a4)](_0x189497(0x191),async function(){document['dispatchEvent'](new Event('WarehouseChangeComplete'));}),document[_0x189497(0x19e)](_0x189497(0x19d))[_0x189497(0x1a4)](_0x189497(0x191),async function(_0x283155){const _0x3ddfff=_0x189497;document[_0x3ddfff(0x1a2)](new Event(_0x3ddfff(0x183)));}),loadCartAndSetTabCount(_0x1e30c4);};
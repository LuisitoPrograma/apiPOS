/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 4.2.2
*/

const _0x4acdfc=_0x4e6b;(function(_0xf7fea2,_0x23c69e){const _0x2e6072=_0x4e6b,_0x1de9a8=_0xf7fea2();while(!![]){try{const _0x330cf3=-parseInt(_0x2e6072(0x1d9))/0x1*(-parseInt(_0x2e6072(0x1f2))/0x2)+parseInt(_0x2e6072(0x1fa))/0x3*(parseInt(_0x2e6072(0x1db))/0x4)+-parseInt(_0x2e6072(0x20c))/0x5*(-parseInt(_0x2e6072(0x200))/0x6)+parseInt(_0x2e6072(0x1e7))/0x7*(parseInt(_0x2e6072(0x205))/0x8)+parseInt(_0x2e6072(0x1d3))/0x9*(parseInt(_0x2e6072(0x1d6))/0xa)+-parseInt(_0x2e6072(0x201))/0xb+-parseInt(_0x2e6072(0x1f0))/0xc;if(_0x330cf3===_0x23c69e)break;else _0x1de9a8['push'](_0x1de9a8['shift']());}catch(_0x4db9e8){_0x1de9a8['push'](_0x1de9a8['shift']());}}}(_0x2fc2,0x5faba));const _0x348131=(function(){let _0x13ea80=!![];return function(_0x3af0f9,_0x496e71){const _0x130fee=_0x13ea80?function(){const _0x1b05a7=_0x4e6b;if(_0x496e71){const _0xe3b473=_0x496e71[_0x1b05a7(0x1f8)](_0x3af0f9,arguments);return _0x496e71=null,_0xe3b473;}}:function(){};return _0x13ea80=![],_0x130fee;};}()),_0x607494=_0x348131(this,function(){const _0x3c7af9=_0x4e6b;return _0x607494['toString']()[_0x3c7af9(0x1e1)](_0x3c7af9(0x1fc))[_0x3c7af9(0x1da)]()['constructor'](_0x607494)[_0x3c7af9(0x1e1)](_0x3c7af9(0x1fc));});function _0x2fc2(){const _0x1ab6d6=['setCredentialsApiWAChatStatus','then','change','table','flex','search','visibility','console','/wa/','log','hidden','1923082YeDSuJ','toLowerCase','value','none','status','setCredentialsApiWAChatSubdomain','constructor','__proto__','prototype','10048824YbYHbb','loginPanel','2njySFH','.btn-logout','setAuthToken','ya\x20conectado','length','return\x20(function()\x20','apply','style','11202YCpNjZ','setWarehouseId','(((.+)+)+)+$','getElementById','setCredentialsApiWAChat','catch','10446xrtAKp','5246208ebxvot','trace','src','addEventListener','8Uqpthv','display','setBranchId','./img/apiPOS.png','dispatchEvent','/qr','includes','1030IPCRMn','info','qr-img','chatPanel','click','setCredentialsApiWAChatPort','Error\x20al\x20validar\x20estado\x20despu√©s\x20de\x20expirar\x20QR:','https://','Credenciales\x20no\x20encontradas','4282911aAoCwt','setBranchDefault','error','10vUXNWQ','visible','bind','25643OESynD','toString','612Lqtfwe'];_0x2fc2=function(){return _0x1ab6d6;};return _0x2fc2();}_0x607494();function _0x4e6b(_0x4594a3,_0x2a0bc3){const _0x422b30=_0x2fc2();return _0x4e6b=function(_0x3929e9,_0x49d143){_0x3929e9=_0x3929e9-0x1d0;let _0x1cac19=_0x422b30[_0x3929e9];return _0x1cac19;},_0x4e6b(_0x4594a3,_0x2a0bc3);}const _0x49d143=(function(){let _0x4a38dd=!![];return function(_0x160cdd,_0x32a252){const _0x1a509f=_0x4a38dd?function(){const _0x4ee943=_0x4e6b;if(_0x32a252){const _0x177e50=_0x32a252[_0x4ee943(0x1f8)](_0x160cdd,arguments);return _0x32a252=null,_0x177e50;}}:function(){};return _0x4a38dd=![],_0x1a509f;};}()),_0x3929e9=_0x49d143(this,function(){const _0x2ac029=_0x4e6b;let _0x2af015;try{const _0x1de575=Function(_0x2ac029(0x1f7)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x2af015=_0x1de575();}catch(_0x3125b8){_0x2af015=window;}const _0x920b86=_0x2af015['console']=_0x2af015[_0x2ac029(0x1e3)]||{},_0x1c80a7=[_0x2ac029(0x1e5),'warn',_0x2ac029(0x20d),_0x2ac029(0x1d5),'exception',_0x2ac029(0x1df),_0x2ac029(0x202)];for(let _0x4c4be2=0x0;_0x4c4be2<_0x1c80a7[_0x2ac029(0x1f6)];_0x4c4be2++){const _0x39f5ae=_0x49d143[_0x2ac029(0x1ed)][_0x2ac029(0x1ef)][_0x2ac029(0x1d8)](_0x49d143),_0xc40e73=_0x1c80a7[_0x4c4be2],_0xe60b5=_0x920b86[_0xc40e73]||_0x39f5ae;_0x39f5ae[_0x2ac029(0x1ee)]=_0x49d143['bind'](_0x49d143),_0x39f5ae['toString']=_0xe60b5[_0x2ac029(0x1da)]['bind'](_0xe60b5),_0x920b86[_0xc40e73]=_0x39f5ae;}});_0x3929e9();const selectCredentialsApiWAChat=document[_0x4acdfc(0x1fd)](_0x4acdfc(0x1fe)),loginPanel=document[_0x4acdfc(0x1fd)](_0x4acdfc(0x1f1)),chatPanel=document[_0x4acdfc(0x1fd)](_0x4acdfc(0x20f)),qrImg=document[_0x4acdfc(0x1fd)](_0x4acdfc(0x20e)),overlay=document['getElementById']('qr-overlay');let qrTimeout;const validSeconds=0xa;function showLogin(){const _0x342485=_0x4acdfc;loginPanel[_0x342485(0x1f9)][_0x342485(0x206)]='flex',chatPanel[_0x342485(0x1f9)][_0x342485(0x1e2)]=_0x342485(0x1e6);}function showChat(){const _0x279ea2=_0x4acdfc;loginPanel['style'][_0x279ea2(0x206)]='none',chatPanel['style'][_0x279ea2(0x1e2)]=_0x279ea2(0x1d7);}async function displayQR(_0x1abf31){const _0x16fa94=_0x4acdfc,_0x4765f0=selectCredentialsApiWAChat[_0x16fa94(0x1e9)],_0x54c8a1=getCredentialsApiWAChat(_0x4765f0);if(_0x54c8a1){const _0xd19a8a=_0x54c8a1[_0x16fa94(0x1ec)],_0x3344c3=_0x54c8a1['setCredentialsApiWAChatPort'];clearTimeout(qrTimeout),overlay[_0x16fa94(0x1f9)][_0x16fa94(0x206)]=_0x16fa94(0x1ea),qrImg[_0x16fa94(0x203)]=_0x1abf31,qrTimeout=setTimeout(()=>{const _0x30cfe7=_0x16fa94;fetch('https://'+_0xd19a8a+'/wa/'+_0x3344c3+_0x30cfe7(0x20a),{'headers':{'x-auth-token':myCompany[_0x30cfe7(0x1f4)]}})['then'](async _0x36f986=>_0x36f986['json']())[_0x30cfe7(0x1dd)](async _0x3bcb35=>{const _0x274e59=_0x30cfe7;_0x3bcb35[_0x274e59(0x1eb)]&&_0x3bcb35[_0x274e59(0x1eb)][_0x274e59(0x1e8)]()[_0x274e59(0x20b)](_0x274e59(0x1f5))?(showChat(),_0x54c8a1[_0x274e59(0x1dc)]=0x1):(overlay[_0x274e59(0x1f9)][_0x274e59(0x206)]='flex',_0x54c8a1['setCredentialsApiWAChatStatus']=0x0);const _0x4fb25f=await createCartStore('');await saveCompanyToIndexedDB(company,_0x4fb25f);})['catch'](_0xa6130e=>{const _0x3a40a5=_0x30cfe7;console[_0x3a40a5(0x1d5)](_0x3a40a5(0x1d0),_0xa6130e),overlay[_0x3a40a5(0x1f9)][_0x3a40a5(0x206)]=_0x3a40a5(0x1e0);});},validSeconds*0x3e8);}else ntfShow('Credenciales\x20no\x20encontradas');}async function init(){const _0xb1ec1d=_0x4acdfc,_0x20ea2b=selectCredentialsApiWAChat[_0xb1ec1d(0x1e9)],_0x5b82b3=getCredentialsApiWAChat(_0x20ea2b);if(_0x5b82b3){const _0x371f67=_0x5b82b3[_0xb1ec1d(0x1ec)],_0x435de1=_0x5b82b3[_0xb1ec1d(0x211)];fetch(_0xb1ec1d(0x1d1)+_0x371f67+_0xb1ec1d(0x1e4)+_0x435de1+_0xb1ec1d(0x20a),{'headers':{'x-auth-token':myCompany[_0xb1ec1d(0x1f4)]}})['then'](async _0x1150f5=>_0x1150f5['json']())['then'](async _0x1fd199=>{const _0x3827f9=_0xb1ec1d;if(_0x1fd199[_0x3827f9(0x1eb)]&&_0x1fd199['status'][_0x3827f9(0x1e8)]()[_0x3827f9(0x20b)]('ya\x20conectado'))showChat(),_0x5b82b3[_0x3827f9(0x1dc)]=0x1;else _0x1fd199['qr']&&(showLogin(),displayQR(_0x1fd199['qr']),_0x5b82b3[_0x3827f9(0x1dc)]=0x0);const _0x57bf98=await createCartStore('');await saveCompanyToIndexedDB(company,_0x57bf98);})[_0xb1ec1d(0x1ff)](console[_0xb1ec1d(0x1d5)]);}else ntfShow(_0xb1ec1d(0x1d2));}overlay[_0x4acdfc(0x204)](_0x4acdfc(0x210),init),window['onload']=function(){const _0x2dba80=_0x4acdfc,_0x24b0c4=0x4;loadLoginContent(_0x2dba80(0x208)),setUserNameGet(),setEventBtnAccess();const _0x59fb2f=document['querySelector'](_0x2dba80(0x1f3));_0x59fb2f&&_0x59fb2f[_0x2dba80(0x204)](_0x2dba80(0x210),function(){logoutReload(0x0,_0x24b0c4);}),document[_0x2dba80(0x1fd)](_0x2dba80(0x207))[_0x2dba80(0x204)](_0x2dba80(0x1de),async function(){const _0x36303c=_0x2dba80,_0x13d695=parseInt(this[_0x36303c(0x1e9)]);myCompany[_0x36303c(0x1d4)]=_0x13d695,saveCredentialsApiWAChatInCompany();const _0x2e03af=await createCartStore('');await saveCompanyToIndexedDB(company,_0x2e03af),cargarAlmacenes(_0x13d695),setTimeout(()=>{const _0x1297c9=_0x36303c;document[_0x1297c9(0x1fd)](_0x1297c9(0x1fb))[_0x1297c9(0x209)](new Event(_0x1297c9(0x1de)));},0x64),cargarPisos(_0x13d695),setTimeout(()=>{const _0x5dcf00=_0x36303c;document[_0x5dcf00(0x1fd)]('setFloorId')[_0x5dcf00(0x209)](new Event(_0x5dcf00(0x1de)));},0x64),ntf_initNotifications();}),loadCartAndSetTabCount(_0x24b0c4);};
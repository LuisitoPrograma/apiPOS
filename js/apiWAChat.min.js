/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 5.0.0
*/

const _0x1d380c=_0x3da8;(function(_0x5b0498,_0x44b348){const _0xe64800=_0x3da8,_0x190d9e=_0x5b0498();while(!![]){try{const _0x551b89=-parseInt(_0xe64800(0x219))/0x1*(-parseInt(_0xe64800(0x1fa))/0x2)+-parseInt(_0xe64800(0x217))/0x3*(-parseInt(_0xe64800(0x215))/0x4)+-parseInt(_0xe64800(0x1fe))/0x5*(-parseInt(_0xe64800(0x1f9))/0x6)+-parseInt(_0xe64800(0x205))/0x7*(-parseInt(_0xe64800(0x21a))/0x8)+-parseInt(_0xe64800(0x213))/0x9+-parseInt(_0xe64800(0x21f))/0xa+-parseInt(_0xe64800(0x218))/0xb;if(_0x551b89===_0x44b348)break;else _0x190d9e['push'](_0x190d9e['shift']());}catch(_0x16d61b){_0x190d9e['push'](_0x190d9e['shift']());}}}(_0x34f3,0x298f1));const selectCredentialsApiWAChat=document[_0x1d380c(0x1f2)](_0x1d380c(0x207)),loginPanel=document[_0x1d380c(0x1f2)](_0x1d380c(0x1eb)),chatPanel=document[_0x1d380c(0x1f2)](_0x1d380c(0x228)),qrImg=document[_0x1d380c(0x1f2)]('qr-img'),overlay=document['getElementById'](_0x1d380c(0x209));let qrTimeout;const validSeconds=0xa;function showLogin(){const _0x182871=_0x1d380c;loginPanel[_0x182871(0x224)][_0x182871(0x20e)]='flex',chatPanel[_0x182871(0x224)][_0x182871(0x20a)]=_0x182871(0x211);}function showChat(){const _0x3760e3=_0x1d380c;loginPanel[_0x3760e3(0x224)][_0x3760e3(0x20e)]=_0x3760e3(0x214),chatPanel['style']['visibility']=_0x3760e3(0x206);}function _0x34f3(){const _0x58f5c1=['bind','apply','getElementById','exception','setCredentialsApiWAChatStatus','BranchChangeComplete','toString','table','click','1718658JSCoaC','2jZtfZN','toLowerCase','WarehouseChangeComplete','search','5oAbTqS','log','error','ya\x20conectado','length','setAuthToken','EnvironmentChangeComplete','184597zSgvxv','visible','setCredentialsApiWAChat','onload','qr-overlay','visibility','includes','json','querySelector','display','setWarehouseId','dispatchEvent','hidden','flex','540189uUmtAk','none','4hAYDnv','change','377292FPnyDd','1468005ezRikV','111601MmCUfC','8LCaHPV','addEventListener','init','.btn-logout','setCredentialsApiWAChatSubdomain','1864780wRLUOp','/qr','setCredentialsApiWAChatPort','Error\x20al\x20validar\x20estado\x20despu√©s\x20de\x20expirar\x20QR:','value','style','(((.+)+)+)+$','src','info','chatPanel','./img/apiPOS.png','setFloorId','status','loginPanel','constructor','return\x20(function()\x20','console','https://'];_0x34f3=function(){return _0x58f5c1;};return _0x34f3();}async function initQRApiWAChat(_0x1953b0,_0x2b8362){const _0xca2628=_0x1d380c,_0x2dd5f=(function(){let _0x3449fa=!![];return function(_0x26477d,_0x24e90f){const _0x533854=_0x3449fa?function(){if(_0x24e90f){const _0x2a17a1=_0x24e90f['apply'](_0x26477d,arguments);return _0x24e90f=null,_0x2a17a1;}}:function(){};return _0x3449fa=![],_0x533854;};}()),_0x171689=_0x2dd5f(this,function(){const _0x142c40=_0x3da8;return _0x171689[_0x142c40(0x1f6)]()[_0x142c40(0x1fd)]('(((.+)+)+)+$')[_0x142c40(0x1f6)]()[_0x142c40(0x1ec)](_0x171689)[_0x142c40(0x1fd)](_0x142c40(0x225));});_0x171689();const _0x465498=(function(){let _0x3a8bc4=!![];return function(_0x2f2749,_0x4b5144){const _0x543461=_0x3a8bc4?function(){const _0x5c7617=_0x3da8;if(_0x4b5144){const _0x4f5f5f=_0x4b5144[_0x5c7617(0x1f1)](_0x2f2749,arguments);return _0x4b5144=null,_0x4f5f5f;}}:function(){};return _0x3a8bc4=![],_0x543461;};}()),_0x922ed=_0x465498(this,function(){const _0x2c348a=_0x3da8,_0x2eb204=function(){const _0x314057=_0x3da8;let _0x40e339;try{_0x40e339=Function(_0x314057(0x1ed)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x315f1d){_0x40e339=window;}return _0x40e339;},_0x46d23a=_0x2eb204(),_0x19ffd2=_0x46d23a[_0x2c348a(0x1ee)]=_0x46d23a[_0x2c348a(0x1ee)]||{},_0x4cbe02=[_0x2c348a(0x1ff),'warn',_0x2c348a(0x227),_0x2c348a(0x200),_0x2c348a(0x1f3),_0x2c348a(0x1f7),'trace'];for(let _0x18e2f0=0x0;_0x18e2f0<_0x4cbe02[_0x2c348a(0x202)];_0x18e2f0++){const _0x1d42d1=_0x465498[_0x2c348a(0x1ec)]['prototype'][_0x2c348a(0x1f0)](_0x465498),_0x4b13c5=_0x4cbe02[_0x18e2f0],_0x315f42=_0x19ffd2[_0x4b13c5]||_0x1d42d1;_0x1d42d1['__proto__']=_0x465498[_0x2c348a(0x1f0)](_0x465498),_0x1d42d1[_0x2c348a(0x1f6)]=_0x315f42['toString'][_0x2c348a(0x1f0)](_0x315f42),_0x19ffd2[_0x4b13c5]=_0x1d42d1;}});_0x922ed();const _0x28156f=selectCredentialsApiWAChat[_0xca2628(0x223)],_0x5a6f3a=getCredentialsApiWAChat(_0x28156f);if(!_0x5a6f3a){ntfShow('Credenciales\x20no\x20encontradas');return;}const _0x459483=_0x5a6f3a[_0xca2628(0x21e)],_0x5edbbc=_0x5a6f3a[_0xca2628(0x221)];if(_0x1953b0===_0xca2628(0x20e))clearTimeout(qrTimeout),overlay['style'][_0xca2628(0x20e)]=_0xca2628(0x214),qrImg[_0xca2628(0x226)]=_0x2b8362,qrTimeout=setTimeout(async()=>{const _0x293125=_0xca2628;try{const _0x2202a4=await fetch(_0x293125(0x1ef)+_0x459483+'/wa/'+_0x5edbbc+_0x293125(0x220),{'headers':{'x-auth-token':myCompany[_0x293125(0x203)]}}),_0x50ba4f=await _0x2202a4[_0x293125(0x20c)]();_0x50ba4f[_0x293125(0x22b)]&&_0x50ba4f['status'][_0x293125(0x1fb)]()[_0x293125(0x20b)](_0x293125(0x201))?(showChat(),_0x5a6f3a[_0x293125(0x1f4)]=0x1):(overlay[_0x293125(0x224)][_0x293125(0x20e)]='flex',_0x5a6f3a[_0x293125(0x1f4)]=0x0);const _0x5994fd=await createCartStore('');await saveCompanyToIndexedDB(company,_0x5994fd);}catch(_0x47a120){console['error'](_0x293125(0x222),_0x47a120),overlay[_0x293125(0x224)][_0x293125(0x20e)]=_0x293125(0x212);}},validSeconds*0x3e8);else{if(_0x1953b0===_0xca2628(0x21c))try{const _0xaaca8d=await fetch(_0xca2628(0x1ef)+_0x459483+'/wa/'+_0x5edbbc+_0xca2628(0x220),{'headers':{'x-auth-token':myCompany[_0xca2628(0x203)]}}),_0x3264e6=await _0xaaca8d[_0xca2628(0x20c)]();if(_0x3264e6['status']&&_0x3264e6['status'][_0xca2628(0x1fb)]()[_0xca2628(0x20b)]('ya\x20conectado'))showChat(),_0x5a6f3a[_0xca2628(0x1f4)]=0x1;else _0x3264e6['qr']&&(showLogin(),await initQRApiWAChat('display',_0x3264e6['qr']),_0x5a6f3a[_0xca2628(0x1f4)]=0x0);const _0x214151=await createCartStore('');await saveCompanyToIndexedDB(company,_0x214151);}catch(_0x37929b){console[_0xca2628(0x200)](_0x37929b);}}}function _0x3da8(_0xe70b04,_0x5c8b19){const _0x40a7f1=_0x34f3();return _0x3da8=function(_0x31e6bd,_0x220df1){_0x31e6bd=_0x31e6bd-0x1eb;let _0x3d227e=_0x40a7f1[_0x31e6bd];return _0x3d227e;},_0x3da8(_0xe70b04,_0x5c8b19);}overlay['addEventListener'](_0x1d380c(0x1f8),()=>initQRApiWAChat('init')),window[_0x1d380c(0x208)]=function(){const _0x7797b5=_0x1d380c,_0x1877ad=0x4;loadLoginContent(_0x7797b5(0x229)),setUserNameGet(),setEventBtnAccess();const _0x439271=document[_0x7797b5(0x20d)](_0x7797b5(0x21d));_0x439271&&_0x439271[_0x7797b5(0x21b)](_0x7797b5(0x1f8),function(){logoutReload(0x0,_0x1877ad);}),document['getElementById'](_0x7797b5(0x207))[_0x7797b5(0x21b)](_0x7797b5(0x216),async function(){saveCredentialsApiWAChatInCompany();const _0x14d7d1=await createCartStore('');await saveCompanyToIndexedDB(company,_0x14d7d1),location['reload']();}),document[_0x7797b5(0x1f2)]('setBranchId')[_0x7797b5(0x21b)](_0x7797b5(0x216),async function(){const _0x22ad5a=_0x7797b5,_0x20c8e1=parseInt(this[_0x22ad5a(0x223)]);myCompany['setBranchDefault']=_0x20c8e1,saveCredentialsApiWAChatInCompany();const _0x46d9f3=await createCartStore('');await saveCompanyToIndexedDB(company,_0x46d9f3),await cargarPisos(_0x20c8e1),await waitForEvent(_0x22ad5a(0x22a),_0x22ad5a(0x204)),await cargarAlmacenes(_0x20c8e1),await waitForEvent(_0x22ad5a(0x20f),_0x22ad5a(0x1fc)),document[_0x22ad5a(0x210)](new Event(_0x22ad5a(0x1f5))),ntf_initNotifications();}),document[_0x7797b5(0x1f2)](_0x7797b5(0x20f))['addEventListener']('change',async function(){const _0x54cbd3=_0x7797b5;document[_0x54cbd3(0x210)](new Event(_0x54cbd3(0x1fc)));}),document['getElementById'](_0x7797b5(0x22a))[_0x7797b5(0x21b)](_0x7797b5(0x216),async function(_0x14456c){document['dispatchEvent'](new Event('EnvironmentChangeComplete'));}),loadCartAndSetTabCount(_0x1877ad);};
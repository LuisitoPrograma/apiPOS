/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 5.0.1
*/

function _0xee0f(_0x3e40a8,_0x131ce5){const _0x40fe81=_0x16cb();return _0xee0f=function(_0x1591db,_0x1dbae3){_0x1591db=_0x1591db-0x14c;let _0xd0ff34=_0x40fe81[_0x1591db];return _0xd0ff34;},_0xee0f(_0x3e40a8,_0x131ce5);}const _0x16a3ac=_0xee0f;(function(_0x1087e6,_0x24327d){const _0x290119=_0xee0f,_0x14ea56=_0x1087e6();while(!![]){try{const _0xf2648d=-parseInt(_0x290119(0x168))/0x1*(parseInt(_0x290119(0x164))/0x2)+parseInt(_0x290119(0x170))/0x3*(parseInt(_0x290119(0x17a))/0x4)+parseInt(_0x290119(0x17b))/0x5*(parseInt(_0x290119(0x184))/0x6)+-parseInt(_0x290119(0x163))/0x7*(-parseInt(_0x290119(0x173))/0x8)+parseInt(_0x290119(0x166))/0x9*(-parseInt(_0x290119(0x16b))/0xa)+parseInt(_0x290119(0x167))/0xb+-parseInt(_0x290119(0x17c))/0xc;if(_0xf2648d===_0x24327d)break;else _0x14ea56['push'](_0x14ea56['shift']());}catch(_0x398d82){_0x14ea56['push'](_0x14ea56['shift']());}}}(_0x16cb,0xdb4df));const selectCredentialsApiWAChat=document[_0x16a3ac(0x188)](_0x16a3ac(0x16c)),loginPanel=document[_0x16a3ac(0x188)]('loginPanel'),chatPanel=document[_0x16a3ac(0x188)]('chatPanel'),qrImg=document['getElementById'](_0x16a3ac(0x155)),overlay=document[_0x16a3ac(0x188)](_0x16a3ac(0x16f));let qrTimeout;function _0x16cb(){const _0x457d15=['/wa/','qr-overlay','1317qwSbYp','setWarehouseId','BranchChangeComplete','8pGpQbh','return\x20(function()\x20','constructor','setCredentialsApiWAChatStatus','style','./img/apiPOS.png','ya\x20conectado','2692aqBXXF','105xgXVIG','23535396BcZygO','bind','.btn-logout','hidden','toLowerCase','EnvironmentChangeComplete','json','Error\x20al\x20validar\x20estado\x20despu√©s\x20de\x20expirar\x20QR:','399702ebJKkX','/qr','addEventListener','change','getElementById','console','error','none','visibility','Credenciales\x20no\x20encontradas','click','init','https://','status','qr-img','flex','toString','search','display','__proto__','log','setAuthToken','setCredentialsApiWAChatSubdomain','setFloorId','exception','warn','value','{}.constructor(\x22return\x20this\x22)(\x20)','8368262OZsnmU','4HgTGwA','prototype','117mYerte','13854720bbOXIu','164334scFvgh','includes','src','739360bHNAeZ','setCredentialsApiWAChat','dispatchEvent'];_0x16cb=function(){return _0x457d15;};return _0x16cb();}const validSeconds=0xa;function showLogin(){const _0xe307f9=_0x16a3ac;loginPanel[_0xe307f9(0x177)][_0xe307f9(0x159)]=_0xe307f9(0x156),chatPanel[_0xe307f9(0x177)][_0xe307f9(0x14f)]=_0xe307f9(0x17f);}function showChat(){const _0x3a8903=_0x16a3ac;loginPanel[_0x3a8903(0x177)]['display']=_0x3a8903(0x14e),chatPanel[_0x3a8903(0x177)][_0x3a8903(0x14f)]='visible';}async function initQRApiWAChat(_0x90ec2a,_0x4fc72b){const _0x1ba2c6=_0x16a3ac,_0x7bba01=(function(){let _0x7d9a93=!![];return function(_0x5ad9a1,_0x2ba223){const _0x31e7ef=_0x7d9a93?function(){if(_0x2ba223){const _0x3f70a3=_0x2ba223['apply'](_0x5ad9a1,arguments);return _0x2ba223=null,_0x3f70a3;}}:function(){};return _0x7d9a93=![],_0x31e7ef;};}()),_0x518f52=_0x7bba01(this,function(){const _0x2aed4c=_0xee0f;return _0x518f52[_0x2aed4c(0x157)]()[_0x2aed4c(0x158)]('(((.+)+)+)+$')[_0x2aed4c(0x157)]()[_0x2aed4c(0x175)](_0x518f52)[_0x2aed4c(0x158)]('(((.+)+)+)+$');});_0x518f52();const _0xfb9dcb=(function(){let _0x3ee69a=!![];return function(_0x153fa3,_0x3e5cc8){const _0x4a6f56=_0x3ee69a?function(){if(_0x3e5cc8){const _0x3dea2c=_0x3e5cc8['apply'](_0x153fa3,arguments);return _0x3e5cc8=null,_0x3dea2c;}}:function(){};return _0x3ee69a=![],_0x4a6f56;};}()),_0x2d62f5=_0xfb9dcb(this,function(){const _0x5b1540=_0xee0f;let _0x5ec151;try{const _0x2cd6be=Function(_0x5b1540(0x174)+_0x5b1540(0x162)+');');_0x5ec151=_0x2cd6be();}catch(_0xc71182){_0x5ec151=window;}const _0x26f3ec=_0x5ec151[_0x5b1540(0x14c)]=_0x5ec151[_0x5b1540(0x14c)]||{},_0x39ef3c=[_0x5b1540(0x15b),_0x5b1540(0x160),'info',_0x5b1540(0x14d),_0x5b1540(0x15f),'table','trace'];for(let _0x2a5eb8=0x0;_0x2a5eb8<_0x39ef3c['length'];_0x2a5eb8++){const _0x2503f4=_0xfb9dcb[_0x5b1540(0x175)][_0x5b1540(0x165)]['bind'](_0xfb9dcb),_0xae3bd1=_0x39ef3c[_0x2a5eb8],_0x3d0f4f=_0x26f3ec[_0xae3bd1]||_0x2503f4;_0x2503f4[_0x5b1540(0x15a)]=_0xfb9dcb[_0x5b1540(0x17d)](_0xfb9dcb),_0x2503f4[_0x5b1540(0x157)]=_0x3d0f4f[_0x5b1540(0x157)][_0x5b1540(0x17d)](_0x3d0f4f),_0x26f3ec[_0xae3bd1]=_0x2503f4;}});_0x2d62f5();const _0x1cd339=selectCredentialsApiWAChat[_0x1ba2c6(0x161)],_0x9d48c3=getCredentialsApiWAChat(_0x1cd339);if(!_0x9d48c3){ntfShow(_0x1ba2c6(0x150));return;}const _0x5f53d1=_0x9d48c3[_0x1ba2c6(0x15d)],_0x40ed70=_0x9d48c3['setCredentialsApiWAChatPort'];if(_0x90ec2a===_0x1ba2c6(0x159))clearTimeout(qrTimeout),overlay['style'][_0x1ba2c6(0x159)]=_0x1ba2c6(0x14e),qrImg[_0x1ba2c6(0x16a)]=_0x4fc72b,qrTimeout=setTimeout(async()=>{const _0x14df9b=_0x1ba2c6;try{const _0x44c09a=await fetch(_0x14df9b(0x153)+_0x5f53d1+'/wa/'+_0x40ed70+_0x14df9b(0x185),{'headers':{'x-auth-token':myCompany['setAuthToken']}}),_0x5b0f43=await _0x44c09a[_0x14df9b(0x182)]();_0x5b0f43[_0x14df9b(0x154)]&&_0x5b0f43[_0x14df9b(0x154)][_0x14df9b(0x180)]()['includes'](_0x14df9b(0x179))?(showChat(),_0x9d48c3[_0x14df9b(0x176)]=0x1):(overlay[_0x14df9b(0x177)]['display']=_0x14df9b(0x156),_0x9d48c3[_0x14df9b(0x176)]=0x0);const _0x1923e2=await createCartStore('');await saveCompanyToIndexedDB(company,_0x1923e2);}catch(_0x218fde){console[_0x14df9b(0x14d)](_0x14df9b(0x183),_0x218fde),overlay[_0x14df9b(0x177)][_0x14df9b(0x159)]=_0x14df9b(0x156);}},validSeconds*0x3e8);else{if(_0x90ec2a==='init')try{const _0x3cba09=await fetch(_0x1ba2c6(0x153)+_0x5f53d1+_0x1ba2c6(0x16e)+_0x40ed70+_0x1ba2c6(0x185),{'headers':{'x-auth-token':myCompany[_0x1ba2c6(0x15c)]}}),_0x47ec17=await _0x3cba09[_0x1ba2c6(0x182)]();if(_0x47ec17[_0x1ba2c6(0x154)]&&_0x47ec17[_0x1ba2c6(0x154)]['toLowerCase']()[_0x1ba2c6(0x169)](_0x1ba2c6(0x179)))showChat(),_0x9d48c3[_0x1ba2c6(0x176)]=0x1;else _0x47ec17['qr']&&(showLogin(),await initQRApiWAChat('display',_0x47ec17['qr']),_0x9d48c3[_0x1ba2c6(0x176)]=0x0);const _0xcec486=await createCartStore('');await saveCompanyToIndexedDB(company,_0xcec486);}catch(_0x1b5a2b){console['error'](_0x1b5a2b);}}}overlay[_0x16a3ac(0x186)](_0x16a3ac(0x151),()=>initQRApiWAChat(_0x16a3ac(0x152))),window['onload']=function(){const _0x298de4=_0x16a3ac,_0x19eb24=0x4;loadLoginContent(_0x298de4(0x178)),setUserNameGet(),setEventBtnAccess();const _0x10184a=document['querySelector'](_0x298de4(0x17e));_0x10184a&&_0x10184a[_0x298de4(0x186)](_0x298de4(0x151),function(){logoutReload(0x0,_0x19eb24);}),document['getElementById'](_0x298de4(0x16c))[_0x298de4(0x186)](_0x298de4(0x187),async function(){saveCredentialsApiWAChatInCompany();const _0x70775d=await createCartStore('');await saveCompanyToIndexedDB(company,_0x70775d),location['reload']();}),document[_0x298de4(0x188)]('setBranchId')[_0x298de4(0x186)]('change',async function(){const _0x5aa56d=_0x298de4,_0x18bae1=parseInt(this[_0x5aa56d(0x161)]);myCompany['setBranchDefault']=_0x18bae1,saveCredentialsApiWAChatInCompany();const _0x2050ba=await createCartStore('');await saveCompanyToIndexedDB(company,_0x2050ba),await cargarPisos(_0x18bae1),await waitForEvent(_0x5aa56d(0x15e),_0x5aa56d(0x181)),await cargarAlmacenes(_0x18bae1),await waitForEvent(_0x5aa56d(0x171),'WarehouseChangeComplete'),document[_0x5aa56d(0x16d)](new Event(_0x5aa56d(0x172))),ntf_initNotifications();}),document[_0x298de4(0x188)](_0x298de4(0x171))[_0x298de4(0x186)](_0x298de4(0x187),async function(){const _0x25abf8=_0x298de4;document[_0x25abf8(0x16d)](new Event('WarehouseChangeComplete'));}),document[_0x298de4(0x188)](_0x298de4(0x15e))[_0x298de4(0x186)](_0x298de4(0x187),async function(_0x46716a){const _0x2de016=_0x298de4;document['dispatchEvent'](new Event(_0x2de016(0x181)));}),loadCartAndSetTabCount(_0x19eb24);};
/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 4.3.3
*/

(function(_0x39ac2a,_0x459c25){var _0x7779c3=_0x1268,_0x3bb6ef=_0x39ac2a();while(!![]){try{var _0x42b6b3=parseInt(_0x7779c3(0x133))/0x1*(-parseInt(_0x7779c3(0x131))/0x2)+parseInt(_0x7779c3(0x169))/0x3+-parseInt(_0x7779c3(0x137))/0x4+-parseInt(_0x7779c3(0x171))/0x5+parseInt(_0x7779c3(0x13d))/0x6+parseInt(_0x7779c3(0x168))/0x7*(-parseInt(_0x7779c3(0x12c))/0x8)+parseInt(_0x7779c3(0x187))/0x9;if(_0x42b6b3===_0x459c25)break;else _0x3bb6ef['push'](_0x3bb6ef['shift']());}catch(_0x36183d){_0x3bb6ef['push'](_0x3bb6ef['shift']());}}}(_0x19a0,0x66aeb));var _0x4acc86=(function(){var _0x30a4a5=!![];return function(_0x2dfec8,_0x52b604){var _0x38e3a2=_0x30a4a5?function(){if(_0x52b604){var _0x187cb4=_0x52b604['apply'](_0x2dfec8,arguments);return _0x52b604=null,_0x187cb4;}}:function(){};return _0x30a4a5=![],_0x38e3a2;};}()),_0x370ba6=_0x4acc86(this,function(){var _0x1e12fd=_0x1268;return _0x370ba6['toString']()[_0x1e12fd(0x17e)](_0x1e12fd(0x190))[_0x1e12fd(0x14b)]()['constructor'](_0x370ba6)[_0x1e12fd(0x17e)](_0x1e12fd(0x190));});_0x370ba6();var _0x3a6d85=(function(){var _0x577dba=!![];return function(_0x547181,_0x26d77c){var _0xc4f050=_0x577dba?function(){var _0x38aba2=_0x1268;if(_0x26d77c){var _0x27a1d2=_0x26d77c[_0x38aba2(0x145)](_0x547181,arguments);return _0x26d77c=null,_0x27a1d2;}}:function(){};return _0x577dba=![],_0xc4f050;};}()),_0x32a455=_0x3a6d85(this,function(){var _0x322a2a=_0x1268,_0x43dbb1=function(){var _0x280588=_0x1268,_0x1c320c;try{_0x1c320c=Function(_0x280588(0x15f)+_0x280588(0x143)+');')();}catch(_0x5885f0){_0x1c320c=window;}return _0x1c320c;},_0x18f342=_0x43dbb1(),_0x19b160=_0x18f342[_0x322a2a(0x183)]=_0x18f342['console']||{},_0x49eb36=[_0x322a2a(0x192),_0x322a2a(0x19c),'info',_0x322a2a(0x153),_0x322a2a(0x154),_0x322a2a(0x185),_0x322a2a(0x195)];for(var _0x486bf4=0x0;_0x486bf4<_0x49eb36[_0x322a2a(0x188)];_0x486bf4++){var _0x134988=_0x3a6d85[_0x322a2a(0x140)][_0x322a2a(0x19b)][_0x322a2a(0x17d)](_0x3a6d85),_0x493c91=_0x49eb36[_0x486bf4],_0x1e7b3f=_0x19b160[_0x493c91]||_0x134988;_0x134988['__proto__']=_0x3a6d85[_0x322a2a(0x17d)](_0x3a6d85),_0x134988[_0x322a2a(0x14b)]=_0x1e7b3f[_0x322a2a(0x14b)][_0x322a2a(0x17d)](_0x1e7b3f),_0x19b160[_0x493c91]=_0x134988;}});_0x32a455();var BOOLEAN_PERMS=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0xa,0xb,0xd,0xe,0xf,0x10,0x11,0x13,0x14,0x15,0x16,0x17];async function apiERPupdateUsersOnline(_0x170458,_0x466992){var _0x59f562=_0x1268;if(!isOnline())return console[_0x59f562(0x192)](_0x59f562(0x15d)),Promise[_0x59f562(0x182)](_0x59f562(0x15d));const _0x2274a4={'setAuthToken':_0x170458,'setUsers':_0x466992};return fetch(_0x59f562(0x179),{'method':_0x59f562(0x13e),'headers':{'Content-Type':_0x59f562(0x19f)},'body':JSON[_0x59f562(0x15b)](_0x2274a4)})[_0x59f562(0x126)](_0x9f5eef=>{var _0x284034=_0x59f562;if(!_0x9f5eef['ok'])throw new Error(_0x284034(0x139)+_0x9f5eef[_0x284034(0x18a)]);return _0x9f5eef[_0x284034(0x197)]();})[_0x59f562(0x126)](_0xd4cb3b=>{var _0x3dce1b=_0x59f562;if(!_0xd4cb3b[_0x3dce1b(0x16f)])throw new Error(_0xd4cb3b[_0x3dce1b(0x198)]||'Error\x20desconocido\x20al\x20actualizar\x20Data.');return console[_0x3dce1b(0x192)]('Data\x20actualizada\x20correctamente\x20en\x20la\x20base\x20de\x20datos.'),_0xd4cb3b;})[_0x59f562(0x151)](_0x44f749=>{var _0xa8a1b8=_0x59f562;console[_0xa8a1b8(0x153)](_0xa8a1b8(0x177),_0x44f749);throw _0x44f749;});}async function apiERPsyncUsers(){var _0xac1946=_0x1268;isLoggedIn(company)&&(isOnline()&&await apiERPupdateUsersOnline(company[0x0][_0xac1946(0x19a)],company[0x0][_0xac1946(0x14f)]));}function generatePermissionsPanel(_0x2cd726){var _0x50fe33=_0x1268,_0x5d94a4=document[_0x50fe33(0x12d)](_0x50fe33(0x19e));_0x5d94a4[_0x50fe33(0x174)]='';var _0x2e8287=_0x2cd726[0x0]&&_0x2cd726[0x0]['setUsers']||[],_0x118eec=_0x2cd726[0x0]&&_0x2cd726[0x0]['setTipoOperaciones']||[];for(var _0x1f6b40=0x0;_0x1f6b40<_0x2e8287[_0x50fe33(0x188)];_0x1f6b40++){var _0x217b66=_0x2e8287[_0x1f6b40],_0x578f9f=document[_0x50fe33(0x146)](_0x50fe33(0x16a));_0x578f9f[_0x50fe33(0x13b)]=_0x50fe33(0x156),_0x578f9f['id']=_0x50fe33(0x150)+_0x1f6b40;var _0x1979a3=document[_0x50fe33(0x146)]('h3');_0x1979a3[_0x50fe33(0x13b)]=_0x50fe33(0x199),_0x1979a3[_0x50fe33(0x12a)]=_0x217b66[_0x50fe33(0x18b)]||'Usuario\x20'+(_0x1f6b40+0x1),_0x578f9f[_0x50fe33(0x164)](_0x1979a3);var _0x569206=document['createElement']('div');_0x569206['className']='userPerm_list';for(var _0x369830=0x0;_0x369830<_0x217b66[_0x50fe33(0x13c)][_0x50fe33(0x188)];_0x369830++){var _0x387a2d=_0x217b66[_0x50fe33(0x13c)][_0x369830],_0x38d907=document[_0x50fe33(0x146)](_0x50fe33(0x16a));_0x38d907[_0x50fe33(0x13b)]='userPerm_item',_0x38d907['dataset'][_0x50fe33(0x163)]=_0x1f6b40,_0x38d907[_0x50fe33(0x184)][_0x50fe33(0x147)]=_0x369830;var _0xc1ca3=Number(_0x387a2d[_0x50fe33(0x175)]),_0x4b34bf=document[_0x50fe33(0x146)]('select');_0x4b34bf[_0x50fe33(0x13b)]=_0x50fe33(0x15c),_0x4b34bf['disabled']=!![];if(BOOLEAN_PERMS['indexOf'](_0x387a2d[_0x50fe33(0x15a)])!==-0x1){var _0x562ec4=document[_0x50fe33(0x146)](_0x50fe33(0x16e));_0x562ec4[_0x50fe33(0x148)]='0',_0x562ec4[_0x50fe33(0x12a)]=_0x387a2d[_0x50fe33(0x127)],_0x4b34bf['appendChild'](_0x562ec4);var _0x1b07b9=document[_0x50fe33(0x146)](_0x50fe33(0x16e));_0x1b07b9[_0x50fe33(0x148)]='1',_0x1b07b9[_0x50fe33(0x12a)]=_0x387a2d[_0x50fe33(0x14e)],_0x4b34bf[_0x50fe33(0x164)](_0x1b07b9),_0x4b34bf[_0x50fe33(0x148)]=String(_0xc1ca3);}else{if(_0x387a2d[_0x50fe33(0x15a)]===0x9||_0x387a2d[_0x50fe33(0x15a)]===0xc||_0x387a2d[_0x50fe33(0x15a)]===0x12){if(_0x387a2d['setPermissionId']===0x9){var _0x415e13=document['createElement']('option');_0x415e13[_0x50fe33(0x148)]='0',_0x415e13['textContent']=_0x387a2d[_0x50fe33(0x127)],_0x4b34bf[_0x50fe33(0x164)](_0x415e13);for(var _0x192405=0x0;_0x192405<_0x118eec[_0x50fe33(0x188)];_0x192405++){var _0x42bcd8=_0x118eec[_0x192405],_0x29d39f=document['createElement'](_0x50fe33(0x16e));_0x29d39f['value']=String(_0x42bcd8['setTipoOperacionCodigo']),_0x29d39f['textContent']=_0x42bcd8[_0x50fe33(0x136)],_0x4b34bf[_0x50fe33(0x164)](_0x29d39f);}}if(_0x387a2d[_0x50fe33(0x15a)]===0xc)for(var _0x192405=0x1;_0x192405<=0x4;_0x192405++){var _0x42bcd8=_0x192405,_0x29d39f=document[_0x50fe33(0x146)](_0x50fe33(0x16e));_0x29d39f[_0x50fe33(0x148)]=String(_0x42bcd8),_0x29d39f['textContent']=_0x50fe33(0x12b)+_0x42bcd8,_0x4b34bf[_0x50fe33(0x164)](_0x29d39f);}if(_0x387a2d['setPermissionId']===0x12){var _0x54f7ec=myCompany&&myCompany[_0x50fe33(0x160)]||[],_0x415e13=document[_0x50fe33(0x146)](_0x50fe33(0x16e));_0x415e13[_0x50fe33(0x148)]='0',_0x415e13[_0x50fe33(0x12a)]=_0x387a2d[_0x50fe33(0x127)],_0x4b34bf[_0x50fe33(0x164)](_0x415e13);for(var _0x192405=0x0;_0x192405<_0x54f7ec[_0x50fe33(0x188)];_0x192405++){var _0x42bcd8=_0x54f7ec[_0x192405],_0x29d39f=document[_0x50fe33(0x146)](_0x50fe33(0x16e));_0x29d39f['value']=String(_0x42bcd8['setEmailCredentialsId']),_0x29d39f['textContent']=_0x42bcd8[_0x50fe33(0x152)],_0x4b34bf[_0x50fe33(0x164)](_0x29d39f);}}_0x4b34bf[_0x50fe33(0x148)]=String(_0xc1ca3);}}_0x38d907[_0x50fe33(0x164)](_0x4b34bf),_0x569206[_0x50fe33(0x164)](_0x38d907);}_0x578f9f[_0x50fe33(0x164)](_0x569206);var _0x26ed25=document[_0x50fe33(0x146)](_0x50fe33(0x13a));_0x26ed25[_0x50fe33(0x13b)]=_0x50fe33(0x14a),_0x26ed25[_0x50fe33(0x12a)]=_0x50fe33(0x138),_0x26ed25[_0x50fe33(0x184)][_0x50fe33(0x163)]=_0x1f6b40;var _0xf51357=document['createElement'](_0x50fe33(0x13a));_0xf51357[_0x50fe33(0x13b)]=_0x50fe33(0x189),_0xf51357['textContent']=_0x50fe33(0x16d),_0xf51357[_0x50fe33(0x184)][_0x50fe33(0x163)]=_0x1f6b40,_0xf51357[_0x50fe33(0x134)]['display']=_0x50fe33(0x155),_0x578f9f[_0x50fe33(0x164)](_0x26ed25),_0x578f9f[_0x50fe33(0x164)](_0xf51357),_0x5d94a4[_0x50fe33(0x164)](_0x578f9f),_0x26ed25[_0x50fe33(0x181)](_0x50fe33(0x18f),onEditClick),_0xf51357['addEventListener'](_0x50fe33(0x18f),onSaveClick);}}function onEditClick(_0x2b6d2a){var _0x6c4250=_0x1268,_0x47e273=_0x2b6d2a['target'][_0x6c4250(0x184)][_0x6c4250(0x163)],_0x245df9=document[_0x6c4250(0x12d)](_0x6c4250(0x150)+_0x47e273),_0x58e842=_0x245df9[_0x6c4250(0x17c)](_0x6c4250(0x15c));for(var _0x2f18dc=0x0;_0x2f18dc<_0x58e842[_0x6c4250(0x188)];_0x2f18dc++){_0x58e842[_0x2f18dc]['disabled']=![];}_0x245df9[_0x6c4250(0x170)](_0x6c4250(0x158))[_0x6c4250(0x134)][_0x6c4250(0x16c)]=_0x6c4250(0x155),_0x245df9['querySelector'](_0x6c4250(0x14d))['style'][_0x6c4250(0x16c)]=_0x6c4250(0x17b),_0x245df9[_0x6c4250(0x13b)]=_0x6c4250(0x141);}function _0x1268(_0x5d43dc,_0x4f3e2c){var _0x333880=_0x19a0();return _0x1268=function(_0x32a455,_0x3a6d85){_0x32a455=_0x32a455-0x126;var _0x3569f8=_0x333880[_0x32a455];return _0x3569f8;},_0x1268(_0x5d43dc,_0x4f3e2c);}async function onSaveClick(_0x48a09b){var _0x3d1452=_0x1268,_0x3435b5=_0x48a09b['target']['dataset'][_0x3d1452(0x163)],_0x134ad7=document['getElementById'](_0x3d1452(0x150)+_0x3435b5),_0x1263f2=_0x134ad7[_0x3d1452(0x17c)](_0x3d1452(0x173));for(var _0x1e59c8=0x0;_0x1e59c8<_0x1263f2['length'];_0x1e59c8++){var _0xd57d34=_0x1263f2[_0x1e59c8],_0x4fcd6f=parseInt(_0xd57d34[_0x3d1452(0x184)][_0x3d1452(0x163)],0xa),_0x159dcb=parseInt(_0xd57d34[_0x3d1452(0x184)][_0x3d1452(0x147)],0xa),_0x518e9d=company[0x0][_0x3d1452(0x14f)][_0x4fcd6f]['setPermissions'][_0x159dcb],_0x3c0757=_0xd57d34[_0x3d1452(0x17c)](_0x3d1452(0x15c))[0x0],_0xb1efa9=_0x3c0757['value'];_0x518e9d['setPermissionValue']=_0xb1efa9,_0x3c0757['disabled']=!![],company[0x0]['setUsers'][_0x4fcd6f][_0x3d1452(0x144)]=new Date();}const _0x1a0de5=await createCartStore('');await saveCompanyToIndexedDB(company,_0x1a0de5),_0x134ad7[_0x3d1452(0x170)]('.userPerm_saveBtn')['style']['display']=_0x3d1452(0x155),_0x134ad7['querySelector'](_0x3d1452(0x158))[_0x3d1452(0x134)][_0x3d1452(0x16c)]=_0x3d1452(0x191),_0x134ad7[_0x3d1452(0x13b)]=_0x3d1452(0x156),apiERPsyncUsers();}function _0x19a0(){var _0x39deec=['offline_operations','json','message','userPerm_header','setAuthToken','prototype','warn','Acciones','panel_users','application/json','then','setPermissionNameFalse','change','Error\x20eliminando\x20operación:','textContent','Número\x20de\x20Decimales:\x20','875048DylAWq','getElementById','Correlativo','Serie','panel_operations','2qUXvCC','./img/apiPOS.png','344637cPylnW','style','dispatchEvent','setTipoOperacionName','1508608eCsgIo','Editar','Error\x20Sync:\x20','button','className','setPermissions','2520534uEoTOl','POST','push','constructor','userPerm_container\x20border_orange','objectStore','{}.constructor(\x22return\x20this\x22)(\x20)','setLastDateUpdate','apply','createElement','permIndex','value','setWarehouseId','userPerm_editBtn','toString','thead','.userPerm_saveBtn','setPermissionNameTrue','setUsers','userPerm_container_','catch','setEmailCredentialsSenderEmail','error','exception','none','userPerm_container\x20border_blue','readwrite','.userPerm_editBtn','forEach','setPermissionId','stringify','userPerm_select','Error\x20Network.','offlineOps_table','return\x20(function()\x20','setEmailCredentials','readonly','setMessage','userIndex','appendChild','onerror','result','Error\x20cargando\x20operaciones.','35dFRtRP','1345413jUbZeH','div','onsuccess','display','Guardar','option','success','querySelector','2093245qgQIVY','transaction','userPerm_item','innerHTML','setPermissionValue','Motivo','Error\x20al\x20actualizar\x20data\x20online:','setFloorId','https://apierp.dev/api/users/update/','No\x20hay\x20operaciones\x20pendientes.','block','getElementsByClassName','bind','search','setCorrelativo','Fecha','addEventListener','reject','console','dataset','table','delete','11154330yIPAlC','length','userPerm_saveBtn','statusText','setUserFullName','setFechaHora','Tipo','complete','click','(((.+)+)+)+$','inline-block','log','.btn-logout','setSerie','trace'];_0x19a0=function(){return _0x39deec;};return _0x19a0();}function deleteOfflineOperation(_0xe63b9a){var _0x41a577=_0x1268;createCartStore('')[_0x41a577(0x126)](function(_0x1d1191){var _0x2c8a05=_0x41a577,_0x23b917=_0x1d1191[_0x2c8a05(0x172)](_0x2c8a05(0x196),_0x2c8a05(0x157)),_0x5ec970=_0x23b917[_0x2c8a05(0x142)]('offline_operations');return _0x5ec970[_0x2c8a05(0x186)](_0xe63b9a),_0x23b917[_0x2c8a05(0x18e)];})['then'](function(){generateOfflineOperationsTable();})[_0x41a577(0x151)](function(_0x389164){var _0x5862c2=_0x41a577;console[_0x5862c2(0x153)](_0x5862c2(0x129),_0x389164);});}function generateOfflineOperationsTable(){var _0x24e5f6=_0x1268,_0x4bfe64=document['getElementById'](_0x24e5f6(0x130));return _0x4bfe64[_0x24e5f6(0x174)]='',createCartStore('')[_0x24e5f6(0x126)](function(_0x13aab3){var _0x2473d0=_0x24e5f6,_0x4927ad=_0x13aab3[_0x2473d0(0x172)](_0x2473d0(0x196),_0x2473d0(0x161)),_0x7a68ee=_0x4927ad[_0x2473d0(0x142)]('offline_operations');return new Promise(function(_0x26ee3b,_0x55491e){var _0x5c851b=_0x2473d0,_0x347461=_0x7a68ee['getAll']();_0x347461[_0x5c851b(0x16b)]=function(){var _0x559f8=_0x5c851b;_0x26ee3b(_0x347461[_0x559f8(0x166)]);},_0x347461[_0x5c851b(0x165)]=function(){var _0x15fa4b=_0x5c851b;_0x55491e(_0x347461[_0x15fa4b(0x153)]);};});})[_0x24e5f6(0x126)](function(_0x165e94){var _0x1c5ad6=_0x24e5f6,_0x36a9e5=[];for(var _0x13ae5a=0x0;_0x13ae5a<_0x165e94[_0x1c5ad6(0x188)];_0x13ae5a++){_0x165e94[_0x13ae5a]['apiPOSsendOffline']==0x1&&_0x36a9e5[_0x1c5ad6(0x13f)](_0x165e94[_0x13ae5a]);}if(_0x36a9e5['length']===0x0){_0x4bfe64[_0x1c5ad6(0x12a)]=_0x1c5ad6(0x17a);return;}var _0x39c0f7=document['createElement']('table');_0x39c0f7[_0x1c5ad6(0x13b)]=_0x1c5ad6(0x15e);var _0x412247=document[_0x1c5ad6(0x146)](_0x1c5ad6(0x14c)),_0x1a7bd3=document[_0x1c5ad6(0x146)]('tr');[_0x1c5ad6(0x18d),_0x1c5ad6(0x12f),_0x1c5ad6(0x12e),_0x1c5ad6(0x180),_0x1c5ad6(0x176),_0x1c5ad6(0x19d)]['forEach'](function(_0x1e86fe){var _0x598fa8=document['createElement']('th');_0x598fa8['textContent']=_0x1e86fe,_0x1a7bd3['appendChild'](_0x598fa8);}),_0x412247[_0x1c5ad6(0x164)](_0x1a7bd3),_0x39c0f7[_0x1c5ad6(0x164)](_0x412247);var _0x586833=document[_0x1c5ad6(0x146)]('tbody');_0x36a9e5[_0x1c5ad6(0x159)](function(_0x862288){var _0x4d649e=_0x1c5ad6,_0x26b604=document['createElement']('tr'),_0x382144=[_0x862288['setTipoOperacion'],_0x862288[_0x4d649e(0x194)],_0x862288[_0x4d649e(0x17f)],_0x862288[_0x4d649e(0x18c)],_0x862288[_0x4d649e(0x162)]||''];_0x382144['forEach'](function(_0xc231ba){var _0x5e63c5=_0x4d649e,_0x207f58=document[_0x5e63c5(0x146)]('td');_0x207f58[_0x5e63c5(0x12a)]=_0xc231ba,_0x26b604[_0x5e63c5(0x164)](_0x207f58);});var _0x424706=document[_0x4d649e(0x146)]('td'),_0x4aa234=document[_0x4d649e(0x146)](_0x4d649e(0x13a));_0x4aa234['textContent']='Eliminar',_0x4aa234[_0x4d649e(0x181)](_0x4d649e(0x18f),function(){confirm('¿Estás\x20seguro\x20de\x20que\x20deseas\x20eliminar\x20esta\x20operación?')&&deleteOfflineOperation(_0x862288['id']);}),_0x424706['appendChild'](_0x4aa234),_0x26b604[_0x4d649e(0x164)](_0x424706),_0x586833[_0x4d649e(0x164)](_0x26b604);}),_0x39c0f7['appendChild'](_0x586833),_0x4bfe64[_0x1c5ad6(0x164)](_0x39c0f7);})[_0x24e5f6(0x151)](function(_0x4efeb9){var _0x4eb4a0=_0x24e5f6;console[_0x4eb4a0(0x153)]('Error\x20leyendo\x20operaciones:',_0x4efeb9),_0x4bfe64[_0x4eb4a0(0x12a)]=_0x4eb4a0(0x167);});}window['onload']=function(){var _0x31a3a9=_0x1268;const _0x464a2a=0x2;loadLoginContent(_0x31a3a9(0x132)),setUserNameGet(),setEventBtnAccess();const _0x48b4c0=document['querySelector'](_0x31a3a9(0x193));_0x48b4c0&&_0x48b4c0[_0x31a3a9(0x181)](_0x31a3a9(0x18f),function(){logoutReload(0x0,_0x464a2a);}),document[_0x31a3a9(0x12d)]('setBranchId')[_0x31a3a9(0x181)]('change',async function(){var _0x2c0da8=_0x31a3a9;const _0x4ff6d7=parseInt(this[_0x2c0da8(0x148)]);company[0x0]['setBranchDefault']=_0x4ff6d7;const _0x195fd8=await createCartStore('');await saveCompanyToIndexedDB(company,_0x195fd8),cargarAlmacenes(_0x4ff6d7),setTimeout(()=>{var _0x52ced9=_0x2c0da8;document[_0x52ced9(0x12d)](_0x52ced9(0x149))[_0x52ced9(0x135)](new Event(_0x52ced9(0x128)));},0x64),cargarPisos(_0x4ff6d7),setTimeout(()=>{var _0x476b8b=_0x2c0da8;document[_0x476b8b(0x12d)](_0x476b8b(0x178))[_0x476b8b(0x135)](new Event(_0x476b8b(0x128)));},0x64),ntf_initNotifications();}),loadCartAndSetTabCount(_0x464a2a);};
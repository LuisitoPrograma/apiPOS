/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 4.0.5
*/

var _0x3b7bed=_0x1603;(function(_0x4b8bf7,_0x4f0dad){var _0x5f061f=_0x1603,_0x33dd25=_0x4b8bf7();while(!![]){try{var _0x121bac=-parseInt(_0x5f061f(0x8d))/0x1*(-parseInt(_0x5f061f(0xa0))/0x2)+parseInt(_0x5f061f(0x96))/0x3*(-parseInt(_0x5f061f(0xd8))/0x4)+parseInt(_0x5f061f(0xbc))/0x5*(parseInt(_0x5f061f(0x9f))/0x6)+parseInt(_0x5f061f(0xe8))/0x7+-parseInt(_0x5f061f(0xfa))/0x8*(parseInt(_0x5f061f(0x93))/0x9)+parseInt(_0x5f061f(0xf7))/0xa*(parseInt(_0x5f061f(0xb1))/0xb)+parseInt(_0x5f061f(0xe5))/0xc*(-parseInt(_0x5f061f(0xcd))/0xd);if(_0x121bac===_0x4f0dad)break;else _0x33dd25['push'](_0x33dd25['shift']());}catch(_0x593f92){_0x33dd25['push'](_0x33dd25['shift']());}}}(_0x43b2,0x6f80c));var _0x4f19fe=(function(){var _0x315169=!![];return function(_0x1b0b79,_0x41af5b){var _0x3b0d1e=_0x315169?function(){var _0x5da82f=_0x1603;if(_0x41af5b){var _0x143f8a=_0x41af5b[_0x5da82f(0xaa)](_0x1b0b79,arguments);return _0x41af5b=null,_0x143f8a;}}:function(){};return _0x315169=![],_0x3b0d1e;};}()),_0x41f5ab=_0x4f19fe(this,function(){var _0x40ccf2=_0x1603;return _0x41f5ab[_0x40ccf2(0x9c)]()[_0x40ccf2(0xd3)](_0x40ccf2(0x9e))[_0x40ccf2(0x9c)]()['constructor'](_0x41f5ab)[_0x40ccf2(0xd3)](_0x40ccf2(0x9e));});_0x41f5ab();var _0x11591c=(function(){var _0x5dd049=!![];return function(_0x102a3b,_0x3ac987){var _0x441776=_0x5dd049?function(){var _0x275977=_0x1603;if(_0x3ac987){var _0x17a2f1=_0x3ac987[_0x275977(0xaa)](_0x102a3b,arguments);return _0x3ac987=null,_0x17a2f1;}}:function(){};return _0x5dd049=![],_0x441776;};}()),_0x42d0b4=_0x11591c(this,function(){var _0x34f5e9=_0x1603,_0x3e0c8e;try{var _0x34a3b3=Function(_0x34f5e9(0xa2)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x3e0c8e=_0x34a3b3();}catch(_0x3fa90b){_0x3e0c8e=window;}var _0x21d162=_0x3e0c8e[_0x34f5e9(0xb9)]=_0x3e0c8e[_0x34f5e9(0xb9)]||{},_0x5eada8=['log',_0x34f5e9(0xdf),_0x34f5e9(0xef),_0x34f5e9(0x8b),'exception','table',_0x34f5e9(0xe2)];for(var _0x1e19a1=0x0;_0x1e19a1<_0x5eada8['length'];_0x1e19a1++){var _0x33fe14=_0x11591c[_0x34f5e9(0xe3)]['prototype'][_0x34f5e9(0x92)](_0x11591c),_0x25edbe=_0x5eada8[_0x1e19a1],_0x5c3d74=_0x21d162[_0x25edbe]||_0x33fe14;_0x33fe14[_0x34f5e9(0xc6)]=_0x11591c[_0x34f5e9(0x92)](_0x11591c),_0x33fe14[_0x34f5e9(0x9c)]=_0x5c3d74['toString'][_0x34f5e9(0x92)](_0x5c3d74),_0x21d162[_0x25edbe]=_0x33fe14;}});_0x42d0b4();var BOOLEAN_PERMS=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0xa,0xb,0xd,0xe,0xf,0x10,0x11];async function apiERPupdateUsersOnline(_0x65207c,_0xf201e9){var _0x2db2a6=_0x1603;if(!isOnline())return console['log'](_0x2db2a6(0xea)),Promise['reject'](_0x2db2a6(0xea));const _0x54b4bb={'setAuthToken':_0x65207c,'setUsers':_0xf201e9};return fetch(_0x2db2a6(0xeb),{'method':'POST','headers':{'Content-Type':'application/json'},'body':JSON[_0x2db2a6(0xd5)](_0x54b4bb)})['then'](_0x2b81e6=>{var _0x5447c6=_0x2db2a6;if(!_0x2b81e6['ok'])throw new Error(_0x5447c6(0xb8)+_0x2b81e6['statusText']);return _0x2b81e6[_0x5447c6(0xca)]();})[_0x2db2a6(0xd6)](_0x115b1f=>{var _0x217eba=_0x2db2a6;if(!_0x115b1f[_0x217eba(0x8e)])throw new Error(_0x115b1f[_0x217eba(0xc0)]||_0x217eba(0xbb));return console[_0x217eba(0xf4)](_0x217eba(0xfc)),_0x115b1f;})[_0x2db2a6(0x89)](_0x20a91f=>{var _0x5d1ff1=_0x2db2a6;console['error'](_0x5d1ff1(0xe1),_0x20a91f);throw _0x20a91f;});}async function apiERPsyncUsers(){var _0x3c17ac=_0x1603;isLoggedIn(company)&&(isOnline()&&await apiERPupdateUsersOnline(company[0x0][_0x3c17ac(0xc2)],company[0x0][_0x3c17ac(0xf2)]));}function generatePermissionsPanel(_0x42ddba){var _0x548aa4=_0x1603,_0x4f85cd=document['getElementById']('panel_users');_0x4f85cd[_0x548aa4(0xcc)]='';var _0x1f0837=_0x42ddba[0x0]&&_0x42ddba[0x0][_0x548aa4(0xf2)]||[],_0x35e9aa=_0x42ddba[0x0]&&_0x42ddba[0x0]['setTipoOperaciones']||[];for(var _0x4cf1a4=0x0;_0x4cf1a4<_0x1f0837[_0x548aa4(0xae)];_0x4cf1a4++){var _0x5c6a1b=_0x1f0837[_0x4cf1a4],_0x58fdd1=document[_0x548aa4(0xa1)](_0x548aa4(0xd4));_0x58fdd1['className']='userPerm_container\x20border_blue',_0x58fdd1['id']=_0x548aa4(0xc9)+_0x4cf1a4;var _0x56fa01=document[_0x548aa4(0xa1)]('h3');_0x56fa01[_0x548aa4(0xa8)]='userPerm_header',_0x56fa01[_0x548aa4(0xde)]=_0x5c6a1b['setUserFullName']||'Usuario\x20'+(_0x4cf1a4+0x1),_0x58fdd1[_0x548aa4(0xab)](_0x56fa01);var _0x5af549=document[_0x548aa4(0xa1)](_0x548aa4(0xd4));_0x5af549['className']=_0x548aa4(0xec);for(var _0x2b2014=0x0;_0x2b2014<_0x5c6a1b[_0x548aa4(0xbf)][_0x548aa4(0xae)];_0x2b2014++){var _0x2dd46c=_0x5c6a1b[_0x548aa4(0xbf)][_0x2b2014],_0x249a20=document[_0x548aa4(0xa1)](_0x548aa4(0xd4));_0x249a20[_0x548aa4(0xa8)]='userPerm_item',_0x249a20[_0x548aa4(0x8f)][_0x548aa4(0x90)]=_0x4cf1a4,_0x249a20[_0x548aa4(0x8f)][_0x548aa4(0xd2)]=_0x2b2014;var _0x15390d=Number(_0x2dd46c['setPermissionValue']),_0x54a2af=document[_0x548aa4(0xa1)](_0x548aa4(0x88));_0x54a2af[_0x548aa4(0xa8)]=_0x548aa4(0x95),_0x54a2af['disabled']=!![];if(BOOLEAN_PERMS['indexOf'](_0x2dd46c[_0x548aa4(0x9b)])!==-0x1){var _0x36322d=document[_0x548aa4(0xa1)](_0x548aa4(0x9a));_0x36322d['value']='0',_0x36322d[_0x548aa4(0xde)]=_0x2dd46c[_0x548aa4(0xb0)],_0x54a2af['appendChild'](_0x36322d);var _0x32497e=document[_0x548aa4(0xa1)]('option');_0x32497e[_0x548aa4(0xc1)]='1',_0x32497e[_0x548aa4(0xde)]=_0x2dd46c[_0x548aa4(0xb3)],_0x54a2af[_0x548aa4(0xab)](_0x32497e),_0x54a2af[_0x548aa4(0xc1)]=String(_0x15390d);}else{if(_0x2dd46c[_0x548aa4(0x9b)]===0x9||_0x2dd46c[_0x548aa4(0x9b)]===0xc||_0x2dd46c['setPermissionId']===0x12){if(_0x2dd46c['setPermissionId']===0x9){var _0x2b202f=document[_0x548aa4(0xa1)](_0x548aa4(0x9a));_0x2b202f[_0x548aa4(0xc1)]='0',_0x2b202f[_0x548aa4(0xde)]=_0x2dd46c['setPermissionNameFalse'],_0x54a2af['appendChild'](_0x2b202f);for(var _0x158643=0x0;_0x158643<_0x35e9aa[_0x548aa4(0xae)];_0x158643++){var _0xe0c177=_0x35e9aa[_0x158643],_0x54d017=document['createElement'](_0x548aa4(0x9a));_0x54d017[_0x548aa4(0xc1)]=String(_0xe0c177[_0x548aa4(0xf1)]),_0x54d017[_0x548aa4(0xde)]=_0xe0c177['setTipoOperacionName'],_0x54a2af[_0x548aa4(0xab)](_0x54d017);}}if(_0x2dd46c['setPermissionId']===0xc)for(var _0x158643=0x1;_0x158643<=0x4;_0x158643++){var _0xe0c177=_0x158643,_0x54d017=document[_0x548aa4(0xa1)](_0x548aa4(0x9a));_0x54d017[_0x548aa4(0xc1)]=String(_0xe0c177),_0x54d017['textContent']=_0x548aa4(0x8a)+_0xe0c177,_0x54a2af['appendChild'](_0x54d017);}if(_0x2dd46c[_0x548aa4(0x9b)]===0x12){var _0x1ccf3b=myCompany&&myCompany[_0x548aa4(0x98)]||[],_0x2b202f=document[_0x548aa4(0xa1)]('option');_0x2b202f['value']='0',_0x2b202f['textContent']=_0x2dd46c[_0x548aa4(0xb0)],_0x54a2af[_0x548aa4(0xab)](_0x2b202f);for(var _0x158643=0x0;_0x158643<_0x1ccf3b[_0x548aa4(0xae)];_0x158643++){var _0xe0c177=_0x1ccf3b[_0x158643],_0x54d017=document[_0x548aa4(0xa1)]('option');_0x54d017[_0x548aa4(0xc1)]=String(_0xe0c177[_0x548aa4(0x9d)]),_0x54d017['textContent']=_0xe0c177[_0x548aa4(0xdd)],_0x54a2af[_0x548aa4(0xab)](_0x54d017);}}_0x54a2af['value']=String(_0x15390d);}}_0x249a20[_0x548aa4(0xab)](_0x54a2af),_0x5af549[_0x548aa4(0xab)](_0x249a20);}_0x58fdd1[_0x548aa4(0xab)](_0x5af549);var _0x2d6387=document[_0x548aa4(0xa1)]('button');_0x2d6387['className']=_0x548aa4(0xa4),_0x2d6387[_0x548aa4(0xde)]='Editar',_0x2d6387[_0x548aa4(0x8f)][_0x548aa4(0x90)]=_0x4cf1a4;var _0x55e2e0=document[_0x548aa4(0xa1)](_0x548aa4(0xcb));_0x55e2e0[_0x548aa4(0xa8)]=_0x548aa4(0xb7),_0x55e2e0[_0x548aa4(0xde)]=_0x548aa4(0xdc),_0x55e2e0['dataset'][_0x548aa4(0x90)]=_0x4cf1a4,_0x55e2e0[_0x548aa4(0xad)][_0x548aa4(0xa5)]='none',_0x58fdd1[_0x548aa4(0xab)](_0x2d6387),_0x58fdd1[_0x548aa4(0xab)](_0x55e2e0),_0x4f85cd[_0x548aa4(0xab)](_0x58fdd1),_0x2d6387[_0x548aa4(0xc3)](_0x548aa4(0xaf),onEditClick),_0x55e2e0[_0x548aa4(0xc3)](_0x548aa4(0xaf),onSaveClick);}}function onEditClick(_0x10f89f){var _0x57c9e3=_0x1603,_0x107e4f=_0x10f89f[_0x57c9e3(0xce)][_0x57c9e3(0x8f)][_0x57c9e3(0x90)],_0x297de0=document[_0x57c9e3(0xf3)](_0x57c9e3(0xc9)+_0x107e4f),_0x3a096f=_0x297de0[_0x57c9e3(0xfb)](_0x57c9e3(0x95));for(var _0x455185=0x0;_0x455185<_0x3a096f[_0x57c9e3(0xae)];_0x455185++){_0x3a096f[_0x455185][_0x57c9e3(0xbe)]=![];}_0x297de0[_0x57c9e3(0xb5)](_0x57c9e3(0xa6))[_0x57c9e3(0xad)][_0x57c9e3(0xa5)]=_0x57c9e3(0xd9),_0x297de0[_0x57c9e3(0xb5)](_0x57c9e3(0xd7))[_0x57c9e3(0xad)][_0x57c9e3(0xa5)]=_0x57c9e3(0xa7),_0x297de0[_0x57c9e3(0xa8)]=_0x57c9e3(0xac);}async function onSaveClick(_0x575652){var _0x4e3cb1=_0x1603,_0xff30f5=_0x575652[_0x4e3cb1(0xce)][_0x4e3cb1(0x8f)]['userIndex'],_0x52d346=document[_0x4e3cb1(0xf3)](_0x4e3cb1(0xc9)+_0xff30f5),_0x2e7ab0=_0x52d346['getElementsByClassName']('userPerm_item');for(var _0x301c72=0x0;_0x301c72<_0x2e7ab0[_0x4e3cb1(0xae)];_0x301c72++){var _0x33182b=_0x2e7ab0[_0x301c72],_0x2e13b1=parseInt(_0x33182b[_0x4e3cb1(0x8f)][_0x4e3cb1(0x90)],0xa),_0x11185e=parseInt(_0x33182b['dataset'][_0x4e3cb1(0xd2)],0xa),_0x3942d1=company[0x0]['setUsers'][_0x2e13b1][_0x4e3cb1(0xbf)][_0x11185e],_0x42b37f=_0x33182b[_0x4e3cb1(0xfb)](_0x4e3cb1(0x95))[0x0],_0x5262d3=_0x42b37f['value'];_0x3942d1[_0x4e3cb1(0xbd)]=_0x5262d3,_0x42b37f[_0x4e3cb1(0xbe)]=!![],company[0x0][_0x4e3cb1(0xf2)][_0x2e13b1][_0x4e3cb1(0x94)]=new Date();}const _0x17e328=await createCartStore('');await saveCompanyToIndexedDB(company,_0x17e328),_0x52d346['querySelector'](_0x4e3cb1(0xd7))['style']['display']=_0x4e3cb1(0xd9),_0x52d346[_0x4e3cb1(0xb5)]('.userPerm_editBtn')[_0x4e3cb1(0xad)][_0x4e3cb1(0xa5)]='inline-block',_0x52d346[_0x4e3cb1(0xa8)]=_0x4e3cb1(0xd0),apiERPsyncUsers();}function _0x1603(_0xdc54fe,_0xa19888){var _0x509060=_0x43b2();return _0x1603=function(_0x42d0b4,_0x11591c){_0x42d0b4=_0x42d0b4-0x88;var _0x11a73e=_0x509060[_0x42d0b4];return _0x11a73e;},_0x1603(_0xdc54fe,_0xa19888);}function _0x43b2(){var _0x501a82=['setPermissionValue','disabled','setPermissions','message','value','setAuthToken','addEventListener','.btn-logout','readonly','__proto__','push','setWarehouseId','userPerm_container_','json','button','innerHTML','13jnGoSg','target','setMessage','userPerm_container\x20border_blue','onsuccess','permIndex','search','div','stringify','then','.userPerm_saveBtn','376984JMWlhE','none','setSerie','setFechaHora','Guardar','setEmailCredentialsSenderEmail','textContent','warn','offlineOps_table','Error\x20al\x20actualizar\x20data\x20online:','trace','constructor','setBranchId','8237868ZoLJFU','offline_operations','No\x20hay\x20operaciones\x20pendientes.','2093056AhTyqr','setTipoOperacion','Error\x20Network.','https://apierp.dev/api/users/update/','userPerm_list','table','forEach','info','onerror','setTipoOperacionCodigo','setUsers','getElementById','log','result','Error\x20leyendo\x20operaciones:','4054370HoTwOv','change','Tipo','4041632OtWtYq','getElementsByClassName','Data\x20actualizada\x20correctamente\x20en\x20la\x20base\x20de\x20datos.','select','catch','Número\x20de\x20Decimales:\x20','error','apiPOSsendOffline','291tVPAhS','success','dataset','userIndex','setBranchDefault','bind','9NjrJpB','setLastDateUpdate','userPerm_select','9hOUrUr','Serie','setEmailCredentials','Error\x20cargando\x20operaciones.','option','setPermissionId','toString','setEmailCredentialsId','(((.+)+)+)+$','78gnYJUy','4330ITuNEo','createElement','return\x20(function()\x20','tbody','userPerm_editBtn','display','.userPerm_editBtn','block','className','onload','apply','appendChild','userPerm_container\x20border_orange','style','length','click','setPermissionNameFalse','11NlcpmE','getAll','setPermissionNameTrue','dispatchEvent','querySelector','Fecha','userPerm_saveBtn','Error\x20Sync:\x20','console','thead','Error\x20desconocido\x20al\x20actualizar\x20Data.','229495MPljdS'];_0x43b2=function(){return _0x501a82;};return _0x43b2();}function generateOfflineOperationsTable(){var _0x497fc0=_0x1603,_0x5ce361=document[_0x497fc0(0xf3)]('panel_operations');return _0x5ce361['innerHTML']='',createCartStore('')['then'](function(_0x8f25d2){var _0x10cf4c=_0x497fc0,_0x2fac8c=_0x8f25d2['transaction']('offline_operations',_0x10cf4c(0xc5)),_0x3b8610=_0x2fac8c['objectStore'](_0x10cf4c(0xe6));return new Promise(function(_0x29092f,_0x57de32){var _0x1eae71=_0x10cf4c,_0x1f7b2d=_0x3b8610[_0x1eae71(0xb2)]();_0x1f7b2d[_0x1eae71(0xd1)]=function(){var _0x2c6ad2=_0x1eae71;_0x29092f(_0x1f7b2d[_0x2c6ad2(0xf5)]);},_0x1f7b2d[_0x1eae71(0xf0)]=function(){var _0x5324ac=_0x1eae71;_0x57de32(_0x1f7b2d[_0x5324ac(0x8b)]);};});})[_0x497fc0(0xd6)](function(_0x1946b7){var _0x3e81a2=_0x497fc0,_0x2a744c=[];for(var _0x2311a8=0x0;_0x2311a8<_0x1946b7[_0x3e81a2(0xae)];_0x2311a8++){_0x1946b7[_0x2311a8][_0x3e81a2(0x8c)]==0x1&&_0x2a744c[_0x3e81a2(0xc7)](_0x1946b7[_0x2311a8]);}if(_0x2a744c[_0x3e81a2(0xae)]===0x0){_0x5ce361[_0x3e81a2(0xde)]=_0x3e81a2(0xe7);return;}var _0x3dc31d=document[_0x3e81a2(0xa1)](_0x3e81a2(0xed));_0x3dc31d[_0x3e81a2(0xa8)]=_0x3e81a2(0xe0);var _0x380dd8=document[_0x3e81a2(0xa1)](_0x3e81a2(0xba)),_0x202073=document[_0x3e81a2(0xa1)]('tr');[_0x3e81a2(0xf9),_0x3e81a2(0x97),'Correlativo',_0x3e81a2(0xb6),'Motivo'][_0x3e81a2(0xee)](function(_0x2829e7){var _0x2061d9=_0x3e81a2,_0x47f44c=document[_0x2061d9(0xa1)]('th');_0x47f44c[_0x2061d9(0xde)]=_0x2829e7,_0x202073[_0x2061d9(0xab)](_0x47f44c);}),_0x380dd8[_0x3e81a2(0xab)](_0x202073),_0x3dc31d['appendChild'](_0x380dd8);var _0x488cca=document['createElement'](_0x3e81a2(0xa3));_0x2a744c[_0x3e81a2(0xee)](function(_0x37d98b){var _0xb6c772=_0x3e81a2,_0x36ee7c=document['createElement']('tr'),_0xee61cb=[_0x37d98b[_0xb6c772(0xe9)],_0x37d98b[_0xb6c772(0xda)],_0x37d98b['setCorrelativo'],_0x37d98b[_0xb6c772(0xdb)],_0x37d98b[_0xb6c772(0xcf)]||''];_0xee61cb[_0xb6c772(0xee)](function(_0x34dacc){var _0xa809a6=_0xb6c772,_0x368bc0=document[_0xa809a6(0xa1)]('td');_0x368bc0['textContent']=_0x34dacc,_0x36ee7c['appendChild'](_0x368bc0);}),_0x488cca[_0xb6c772(0xab)](_0x36ee7c);}),_0x3dc31d[_0x3e81a2(0xab)](_0x488cca),_0x5ce361[_0x3e81a2(0xab)](_0x3dc31d);})[_0x497fc0(0x89)](function(_0x163e0d){var _0x5019e4=_0x497fc0;console[_0x5019e4(0x8b)](_0x5019e4(0xf6),_0x163e0d),_0x5ce361[_0x5019e4(0xde)]=_0x5019e4(0x99);});}window[_0x3b7bed(0xa9)]=function(){var _0x1cbe0c=_0x3b7bed;const _0x24827b=0x2;loadLoginContent('./img/apiPOS.png'),setUserNameGet(),setEventBtnAccess();const _0xfca8a4=document[_0x1cbe0c(0xb5)](_0x1cbe0c(0xc4));_0xfca8a4&&_0xfca8a4['addEventListener']('click',function(){logoutReload(0x0,_0x24827b);}),document['getElementById'](_0x1cbe0c(0xe4))['addEventListener'](_0x1cbe0c(0xf8),async function(){var _0x288e5b=_0x1cbe0c;const _0x2e61fa=parseInt(this['value']);company[0x0][_0x288e5b(0x91)]=_0x2e61fa;const _0x26979e=await createCartStore('');await saveCompanyToIndexedDB(company,_0x26979e),cargarAlmacenes(_0x2e61fa),setTimeout(()=>{var _0x98f6f7=_0x288e5b;document[_0x98f6f7(0xf3)](_0x98f6f7(0xc8))[_0x98f6f7(0xb4)](new Event('change'));},0x64),cargarPisos(_0x2e61fa),setTimeout(()=>{var _0x47ce8d=_0x288e5b;document[_0x47ce8d(0xf3)]('setFloorId')[_0x47ce8d(0xb4)](new Event(_0x47ce8d(0xf8)));},0x64),ntf_initNotifications();}),loadCartAndSetTabCount(_0x24827b);};
/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 4.2.4
*/

const _0x8137b0=_0x641d;function _0x641d(_0x14a2f9,_0x1f9583){const _0x5cc692=_0x3365();return _0x641d=function(_0x5891b2,_0x2b6af2){_0x5891b2=_0x5891b2-0x1de;let _0x132347=_0x5cc692[_0x5891b2];return _0x132347;},_0x641d(_0x14a2f9,_0x1f9583);}(function(_0x47b8d4,_0x25f351){const _0x185a04=_0x641d,_0x360f15=_0x47b8d4();while(!![]){try{const _0x2fb505=-parseInt(_0x185a04(0x20e))/0x1*(parseInt(_0x185a04(0x1e5))/0x2)+-parseInt(_0x185a04(0x218))/0x3+-parseInt(_0x185a04(0x213))/0x4*(-parseInt(_0x185a04(0x20f))/0x5)+-parseInt(_0x185a04(0x1fd))/0x6+parseInt(_0x185a04(0x1f2))/0x7+-parseInt(_0x185a04(0x207))/0x8+parseInt(_0x185a04(0x1ef))/0x9;if(_0x2fb505===_0x25f351)break;else _0x360f15['push'](_0x360f15['shift']());}catch(_0x1a043f){_0x360f15['push'](_0x360f15['shift']());}}}(_0x3365,0x8ed16));const _0x26ee8f=(function(){let _0x9b1aec=!![];return function(_0x3522da,_0x4d0551){const _0x367b97=_0x9b1aec?function(){const _0xc80345=_0x641d;if(_0x4d0551){const _0x44e36d=_0x4d0551[_0xc80345(0x1f5)](_0x3522da,arguments);return _0x4d0551=null,_0x44e36d;}}:function(){};return _0x9b1aec=![],_0x367b97;};}()),_0x107b98=_0x26ee8f(this,function(){const _0x14fa3c=_0x641d;return _0x107b98[_0x14fa3c(0x217)]()[_0x14fa3c(0x208)]('(((.+)+)+)+$')[_0x14fa3c(0x217)]()[_0x14fa3c(0x200)](_0x107b98)[_0x14fa3c(0x208)]('(((.+)+)+)+$');});_0x107b98();const _0x2b6af2=(function(){let _0x2e2790=!![];return function(_0x5d5483,_0x4209ea){const _0x2a12b4=_0x2e2790?function(){const _0x362246=_0x641d;if(_0x4209ea){const _0x1c21bd=_0x4209ea[_0x362246(0x1f5)](_0x5d5483,arguments);return _0x4209ea=null,_0x1c21bd;}}:function(){};return _0x2e2790=![],_0x2a12b4;};}()),_0x5891b2=_0x2b6af2(this,function(){const _0x345463=_0x641d;let _0x5e3c1f;try{const _0x2db75c=Function(_0x345463(0x212)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x5e3c1f=_0x2db75c();}catch(_0x1f376c){_0x5e3c1f=window;}const _0x52bbc9=_0x5e3c1f[_0x345463(0x1ed)]=_0x5e3c1f[_0x345463(0x1ed)]||{},_0xe2d1c0=[_0x345463(0x21b),'warn','info',_0x345463(0x1ea),_0x345463(0x1de),'table',_0x345463(0x1e7)];for(let _0x400f01=0x0;_0x400f01<_0xe2d1c0[_0x345463(0x1f8)];_0x400f01++){const _0x58943c=_0x2b6af2['constructor'][_0x345463(0x206)][_0x345463(0x205)](_0x2b6af2),_0x3cfd2d=_0xe2d1c0[_0x400f01],_0x34b606=_0x52bbc9[_0x3cfd2d]||_0x58943c;_0x58943c[_0x345463(0x20a)]=_0x2b6af2[_0x345463(0x205)](_0x2b6af2),_0x58943c[_0x345463(0x217)]=_0x34b606[_0x345463(0x217)][_0x345463(0x205)](_0x34b606),_0x52bbc9[_0x3cfd2d]=_0x58943c;}});function _0x3365(){const _0x2c82dd=['hidden','6486240jZTosv','flex','none','constructor','change','addEventListener','setCredentialsApiWAChatSubdomain','qr-img','bind','prototype','6330136nSPqbY','search','getElementById','__proto__','./img/apiPOS.png','visibility','display','274337eftaMl','185DyxEZW','toLowerCase','chatPanel','return\x20(function()\x20','108432ntildV','setCredentialsApiWAChat','onload','setWarehouseId','toString','2075802yMfykj','click','style','log','exception','/qr','json','dispatchEvent','then','/wa/','ya\x20conectado','2uyGRcc','setCredentialsApiWAChatStatus','trace','setBranchDefault','includes','error','setCredentialsApiWAChatPort','qr-overlay','console','Error\x20al\x20validar\x20estado\x20despuÃ©s\x20de\x20expirar\x20QR:','21014082VAhzsu','setAuthToken','status','599662WhrUQc','value','visible','apply','Credenciales\x20no\x20encontradas','src','length','catch','.btn-logout','https://'];_0x3365=function(){return _0x2c82dd;};return _0x3365();}_0x5891b2();const selectCredentialsApiWAChat=document['getElementById'](_0x8137b0(0x214)),loginPanel=document[_0x8137b0(0x209)]('loginPanel'),chatPanel=document[_0x8137b0(0x209)](_0x8137b0(0x211)),qrImg=document[_0x8137b0(0x209)](_0x8137b0(0x204)),overlay=document[_0x8137b0(0x209)](_0x8137b0(0x1ec));let qrTimeout;const validSeconds=0xa;function showLogin(){const _0x2cf926=_0x8137b0;loginPanel[_0x2cf926(0x21a)][_0x2cf926(0x20d)]=_0x2cf926(0x1fe),chatPanel[_0x2cf926(0x21a)][_0x2cf926(0x20c)]=_0x2cf926(0x1fc);}function showChat(){const _0xd8945a=_0x8137b0;loginPanel['style'][_0xd8945a(0x20d)]=_0xd8945a(0x1ff),chatPanel[_0xd8945a(0x21a)][_0xd8945a(0x20c)]=_0xd8945a(0x1f4);}async function displayQR(_0x254c17){const _0x57ebaa=_0x8137b0,_0x41a073=selectCredentialsApiWAChat['value'],_0x3c656f=getCredentialsApiWAChat(_0x41a073);if(_0x3c656f){const _0x375f85=_0x3c656f[_0x57ebaa(0x203)],_0x5b5cb3=_0x3c656f[_0x57ebaa(0x1eb)];clearTimeout(qrTimeout),overlay[_0x57ebaa(0x21a)][_0x57ebaa(0x20d)]=_0x57ebaa(0x1ff),qrImg[_0x57ebaa(0x1f7)]=_0x254c17,qrTimeout=setTimeout(()=>{const _0x4d6573=_0x57ebaa;fetch(_0x4d6573(0x1fb)+_0x375f85+_0x4d6573(0x1e3)+_0x5b5cb3+'/qr',{'headers':{'x-auth-token':myCompany[_0x4d6573(0x1f0)]}})['then'](async _0x2da4e6=>_0x2da4e6[_0x4d6573(0x1e0)]())[_0x4d6573(0x1e2)](async _0x218533=>{const _0x585fb2=_0x4d6573;_0x218533[_0x585fb2(0x1f1)]&&_0x218533[_0x585fb2(0x1f1)]['toLowerCase']()[_0x585fb2(0x1e9)](_0x585fb2(0x1e4))?(showChat(),_0x3c656f[_0x585fb2(0x1e6)]=0x1):(overlay[_0x585fb2(0x21a)]['display']=_0x585fb2(0x1fe),_0x3c656f['setCredentialsApiWAChatStatus']=0x0);const _0x34c7f5=await createCartStore('');await saveCompanyToIndexedDB(company,_0x34c7f5);})['catch'](_0x2b3247=>{const _0x2dcec2=_0x4d6573;console['error'](_0x2dcec2(0x1ee),_0x2b3247),overlay[_0x2dcec2(0x21a)][_0x2dcec2(0x20d)]='flex';});},validSeconds*0x3e8);}else ntfShow(_0x57ebaa(0x1f6));}async function init(){const _0x2cd06f=_0x8137b0,_0x34914f=selectCredentialsApiWAChat[_0x2cd06f(0x1f3)],_0x496708=getCredentialsApiWAChat(_0x34914f);if(_0x496708){const _0x3a5213=_0x496708['setCredentialsApiWAChatSubdomain'],_0x2ff5e4=_0x496708['setCredentialsApiWAChatPort'];fetch('https://'+_0x3a5213+_0x2cd06f(0x1e3)+_0x2ff5e4+_0x2cd06f(0x1df),{'headers':{'x-auth-token':myCompany[_0x2cd06f(0x1f0)]}})['then'](async _0x9213cb=>_0x9213cb['json']())['then'](async _0x59f5f=>{const _0xb0f937=_0x2cd06f;if(_0x59f5f[_0xb0f937(0x1f1)]&&_0x59f5f[_0xb0f937(0x1f1)][_0xb0f937(0x210)]()[_0xb0f937(0x1e9)](_0xb0f937(0x1e4)))showChat(),_0x496708[_0xb0f937(0x1e6)]=0x1;else _0x59f5f['qr']&&(showLogin(),displayQR(_0x59f5f['qr']),_0x496708[_0xb0f937(0x1e6)]=0x0);const _0x2e2c47=await createCartStore('');await saveCompanyToIndexedDB(company,_0x2e2c47);})[_0x2cd06f(0x1f9)](console[_0x2cd06f(0x1ea)]);}else ntfShow(_0x2cd06f(0x1f6));}overlay[_0x8137b0(0x202)](_0x8137b0(0x219),init),window[_0x8137b0(0x215)]=function(){const _0xa08bd=_0x8137b0,_0x5185e4=0x4;loadLoginContent(_0xa08bd(0x20b)),setUserNameGet(),setEventBtnAccess();const _0x1aab3e=document['querySelector'](_0xa08bd(0x1fa));_0x1aab3e&&_0x1aab3e[_0xa08bd(0x202)]('click',function(){logoutReload(0x0,_0x5185e4);}),document[_0xa08bd(0x209)]('setBranchId')[_0xa08bd(0x202)](_0xa08bd(0x201),async function(){const _0x3acf66=_0xa08bd,_0x14aab9=parseInt(this['value']);myCompany[_0x3acf66(0x1e8)]=_0x14aab9,saveCredentialsApiWAChatInCompany();const _0x51d422=await createCartStore('');await saveCompanyToIndexedDB(company,_0x51d422),cargarAlmacenes(_0x14aab9),setTimeout(()=>{const _0x539529=_0x3acf66;document['getElementById'](_0x539529(0x216))[_0x539529(0x1e1)](new Event(_0x539529(0x201)));},0x64),cargarPisos(_0x14aab9),setTimeout(()=>{const _0x4a1023=_0x3acf66;document[_0x4a1023(0x209)]('setFloorId')[_0x4a1023(0x1e1)](new Event('change'));},0x64),ntf_initNotifications();}),loadCartAndSetTabCount(_0x5185e4);};
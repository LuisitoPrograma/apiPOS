/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 4.1.7
*/

const _0x54e8fd=_0x1f76;(function(_0x2638ff,_0x1062b8){const _0x179bc6=_0x1f76,_0x1e357f=_0x2638ff();while(!![]){try{const _0x50ee77=-parseInt(_0x179bc6(0x90))/0x1+parseInt(_0x179bc6(0x8b))/0x2+parseInt(_0x179bc6(0xa1))/0x3+-parseInt(_0x179bc6(0x75))/0x4+parseInt(_0x179bc6(0x85))/0x5*(-parseInt(_0x179bc6(0xa3))/0x6)+parseInt(_0x179bc6(0x9c))/0x7*(-parseInt(_0x179bc6(0x7e))/0x8)+parseInt(_0x179bc6(0x78))/0x9*(parseInt(_0x179bc6(0xa5))/0xa);if(_0x50ee77===_0x1062b8)break;else _0x1e357f['push'](_0x1e357f['shift']());}catch(_0x1891a2){_0x1e357f['push'](_0x1e357f['shift']());}}}(_0x5673,0xbe897));const _0x1f130b=(function(){let _0x58ac20=!![];return function(_0x57abd5,_0x23795){const _0x1c2277=_0x58ac20?function(){if(_0x23795){const _0x307913=_0x23795['apply'](_0x57abd5,arguments);return _0x23795=null,_0x307913;}}:function(){};return _0x58ac20=![],_0x1c2277;};}()),_0x329bdc=_0x1f130b(this,function(){const _0x33074b=_0x1f76;return _0x329bdc[_0x33074b(0xaa)]()[_0x33074b(0x8f)](_0x33074b(0x84))['toString']()['constructor'](_0x329bdc)[_0x33074b(0x8f)]('(((.+)+)+)+$');});_0x329bdc();const _0x131bd5=(function(){let _0x1f819f=!![];return function(_0x370c4d,_0x983f4c){const _0x35ccf9=_0x1f819f?function(){if(_0x983f4c){const _0x4c15a6=_0x983f4c['apply'](_0x370c4d,arguments);return _0x983f4c=null,_0x4c15a6;}}:function(){};return _0x1f819f=![],_0x35ccf9;};}()),_0x462a90=_0x131bd5(this,function(){const _0x344867=_0x1f76;let _0x51e026;try{const _0x3d7bb8=Function(_0x344867(0x73)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x51e026=_0x3d7bb8();}catch(_0x45ad65){_0x51e026=window;}const _0x265555=_0x51e026[_0x344867(0x7a)]=_0x51e026[_0x344867(0x7a)]||{},_0x13bd43=[_0x344867(0xa2),_0x344867(0x9f),_0x344867(0x80),_0x344867(0x91),'exception',_0x344867(0x9d),_0x344867(0xa9)];for(let _0x4d8608=0x0;_0x4d8608<_0x13bd43['length'];_0x4d8608++){const _0x4aec4c=_0x131bd5[_0x344867(0xa4)]['prototype']['bind'](_0x131bd5),_0x1b88f0=_0x13bd43[_0x4d8608],_0x51d10e=_0x265555[_0x1b88f0]||_0x4aec4c;_0x4aec4c[_0x344867(0xa7)]=_0x131bd5[_0x344867(0xa0)](_0x131bd5),_0x4aec4c[_0x344867(0xaa)]=_0x51d10e['toString'][_0x344867(0xa0)](_0x51d10e),_0x265555[_0x1b88f0]=_0x4aec4c;}});_0x462a90();function _0x1f76(_0x1a7b97,_0x17310e){const _0x531e11=_0x5673();return _0x1f76=function(_0x462a90,_0x131bd5){_0x462a90=_0x462a90-0x72;let _0xe16ba4=_0x531e11[_0x462a90];return _0xe16ba4;},_0x1f76(_0x1a7b97,_0x17310e);}function _0x5673(){const _0x24fc4c=['constructor','34973630OfIMCH','setBranchId','__proto__','querySelector','trace','toString','flex','value','then','ya\x20conectado','style','return\x20(function()\x20','/qr','3785476zIRljD','visibility','includes','9YrGMPE','catch','console','qr-img','json','status','75632oEJBXI','setWarehouseId','info','display','https://','visible','(((.+)+)+)+$','1356445SskGia','chatPanel','/wa/','getElementById','./img/apiPOS.png','Credenciales\x20no\x20encontradas','1967482Fvawrs','Error\x20al\x20validar\x20estado\x20despuÃ©s\x20de\x20expirar\x20QR:','setCredentialsApiWAChatSubdomain','addEventListener','search','381775wlPoYC','error','qr-overlay','setAuthToken','click','src','dispatchEvent','setBranchDefault','toLowerCase','loginPanel','none','setCredentialsApiWAChatStatus','1022hJmJLt','table','setCredentialsApiWAChat','warn','bind','278757nvhcUI','log','24FALURr'];_0x5673=function(){return _0x24fc4c;};return _0x5673();}const selectCredentialsApiWAChat=document[_0x54e8fd(0x88)](_0x54e8fd(0x9e)),loginPanel=document[_0x54e8fd(0x88)](_0x54e8fd(0x99)),chatPanel=document[_0x54e8fd(0x88)](_0x54e8fd(0x86)),qrImg=document[_0x54e8fd(0x88)](_0x54e8fd(0x7b)),overlay=document[_0x54e8fd(0x88)](_0x54e8fd(0x92));let qrTimeout;const validSeconds=0xa;function showLogin(){const _0x568e9f=_0x54e8fd;loginPanel[_0x568e9f(0x72)][_0x568e9f(0x81)]=_0x568e9f(0xab),chatPanel[_0x568e9f(0x72)][_0x568e9f(0x76)]='hidden';}function showChat(){const _0x36a617=_0x54e8fd;loginPanel['style'][_0x36a617(0x81)]=_0x36a617(0x9a),chatPanel[_0x36a617(0x72)][_0x36a617(0x76)]=_0x36a617(0x83);}async function displayQR(_0x2ddf88){const _0x23211d=_0x54e8fd,_0x57d6af=selectCredentialsApiWAChat[_0x23211d(0xac)],_0x4a8ab7=getCredentialsApiWAChat(_0x57d6af);if(_0x4a8ab7){const _0x4a20a8=_0x4a8ab7[_0x23211d(0x8d)],_0x88ac38=_0x4a8ab7['setCredentialsApiWAChatPort'];clearTimeout(qrTimeout),overlay[_0x23211d(0x72)][_0x23211d(0x81)]=_0x23211d(0x9a),qrImg[_0x23211d(0x95)]=_0x2ddf88,qrTimeout=setTimeout(()=>{const _0x37aaab=_0x23211d;fetch('https://'+_0x4a20a8+_0x37aaab(0x87)+_0x88ac38+'/qr',{'headers':{'x-auth-token':myCompany[_0x37aaab(0x93)]}})[_0x37aaab(0xad)](async _0x13d9c9=>_0x13d9c9[_0x37aaab(0x7c)]())[_0x37aaab(0xad)](async _0x347ab9=>{const _0x39e17c=_0x37aaab;_0x347ab9[_0x39e17c(0x7d)]&&_0x347ab9[_0x39e17c(0x7d)][_0x39e17c(0x98)]()[_0x39e17c(0x77)](_0x39e17c(0xae))?(showChat(),_0x4a8ab7[_0x39e17c(0x9b)]=0x1):(overlay[_0x39e17c(0x72)]['display']='flex',_0x4a8ab7[_0x39e17c(0x9b)]=0x0);const _0x2eaa35=await createCartStore('');await saveCompanyToIndexedDB(company,_0x2eaa35);})[_0x37aaab(0x79)](_0xac6650=>{const _0x251e7f=_0x37aaab;console['error'](_0x251e7f(0x8c),_0xac6650),overlay[_0x251e7f(0x72)]['display']='flex';});},validSeconds*0x3e8);}else ntfShow(_0x23211d(0x8a));}async function init(){const _0x2ceeab=_0x54e8fd,_0x5937cc=selectCredentialsApiWAChat['value'],_0x4f80d0=getCredentialsApiWAChat(_0x5937cc);if(_0x4f80d0){const _0x664f73=_0x4f80d0[_0x2ceeab(0x8d)],_0x3e79d6=_0x4f80d0['setCredentialsApiWAChatPort'];fetch(_0x2ceeab(0x82)+_0x664f73+_0x2ceeab(0x87)+_0x3e79d6+_0x2ceeab(0x74),{'headers':{'x-auth-token':myCompany[_0x2ceeab(0x93)]}})[_0x2ceeab(0xad)](async _0x10651f=>_0x10651f[_0x2ceeab(0x7c)]())[_0x2ceeab(0xad)](async _0x2b99fe=>{const _0x283f26=_0x2ceeab;if(_0x2b99fe[_0x283f26(0x7d)]&&_0x2b99fe['status'][_0x283f26(0x98)]()[_0x283f26(0x77)]('ya\x20conectado'))showChat(),_0x4f80d0['setCredentialsApiWAChatStatus']=0x1;else _0x2b99fe['qr']&&(showLogin(),displayQR(_0x2b99fe['qr']),_0x4f80d0['setCredentialsApiWAChatStatus']=0x0);const _0x2fc6db=await createCartStore('');await saveCompanyToIndexedDB(company,_0x2fc6db);})[_0x2ceeab(0x79)](console['error']);}else ntfShow(_0x2ceeab(0x8a));}overlay[_0x54e8fd(0x8e)](_0x54e8fd(0x94),init),window['onload']=function(){const _0x4079cb=_0x54e8fd,_0x259e6b=0x4;loadLoginContent(_0x4079cb(0x89)),setUserNameGet(),setEventBtnAccess();const _0x2213c7=document[_0x4079cb(0xa8)]('.btn-logout');_0x2213c7&&_0x2213c7[_0x4079cb(0x8e)](_0x4079cb(0x94),function(){logoutReload(0x0,_0x259e6b);}),document[_0x4079cb(0x88)](_0x4079cb(0xa6))[_0x4079cb(0x8e)]('change',async function(){const _0xe2642=_0x4079cb,_0x41539e=parseInt(this[_0xe2642(0xac)]);myCompany[_0xe2642(0x97)]=_0x41539e,saveCredentialsApiWAChatInCompany();const _0x1dae13=await createCartStore('');await saveCompanyToIndexedDB(company,_0x1dae13),cargarAlmacenes(_0x41539e),setTimeout(()=>{const _0x57962a=_0xe2642;document[_0x57962a(0x88)](_0x57962a(0x7f))[_0x57962a(0x96)](new Event('change'));},0x64),cargarPisos(_0x41539e),setTimeout(()=>{const _0x5b2531=_0xe2642;document[_0x5b2531(0x88)]('setFloorId')['dispatchEvent'](new Event('change'));},0x64),ntf_initNotifications();}),loadCartAndSetTabCount(_0x259e6b);};
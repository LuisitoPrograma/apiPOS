/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 4.0.1
*/

var _0x1a53ca=_0x477e;(function(_0x356bf5,_0x296544){var _0x57a76e=_0x477e,_0x575bf4=_0x356bf5();while(!![]){try{var _0x8a5a13=-parseInt(_0x57a76e(0xdb))/0x1*(-parseInt(_0x57a76e(0xbc))/0x2)+-parseInt(_0x57a76e(0xf7))/0x3*(parseInt(_0x57a76e(0xd0))/0x4)+parseInt(_0x57a76e(0x11d))/0x5*(-parseInt(_0x57a76e(0xc6))/0x6)+parseInt(_0x57a76e(0x11f))/0x7*(parseInt(_0x57a76e(0xe5))/0x8)+parseInt(_0x57a76e(0xbb))/0x9+parseInt(_0x57a76e(0xf2))/0xa+-parseInt(_0x57a76e(0xb7))/0xb;if(_0x8a5a13===_0x296544)break;else _0x575bf4['push'](_0x575bf4['shift']());}catch(_0x243868){_0x575bf4['push'](_0x575bf4['shift']());}}}(_0x3885,0x1926b));var _0x3c2ade=(function(){var _0x2f3420=!![];return function(_0x23a126,_0x13f823){var _0x1dcac8=_0x2f3420?function(){var _0x2e5843=_0x477e;if(_0x13f823){var _0x2ca331=_0x13f823[_0x2e5843(0x10c)](_0x23a126,arguments);return _0x13f823=null,_0x2ca331;}}:function(){};return _0x2f3420=![],_0x1dcac8;};}()),_0x5673d9=_0x3c2ade(this,function(){var _0x4c429b=_0x477e;return _0x5673d9['toString']()[_0x4c429b(0xc3)](_0x4c429b(0x10f))['toString']()[_0x4c429b(0xb5)](_0x5673d9)[_0x4c429b(0xc3)](_0x4c429b(0x10f));});function _0x3885(){var _0x38e1c0=['setBranchId','success','objectStore','25475vFYaGz','userPerm_select','991396uRHfkN','click','console','.userPerm_editBtn','__proto__','toString','table','setPermissionValue','transaction','result','value','statusText','none','indexOf','Fecha','trace','setPermissionNameTrue','constructor','getElementById','1095501cDpIfR','forEach','style','setPermissionNameFalse','984366lPkVur','104298znhDHt','setTipoOperacion','error','userPerm_item','setMessage','setWarehouseId','userPerm_container_','search','getElementsByClassName','catch','156Vmuvkj','NÃºmero\x20de\x20Decimales:\x20','display','select','Error\x20Sync:\x20','dispatchEvent','setSerie','Editar','log','panel_operations','1036Vurckp','userPerm_list','.userPerm_saveBtn','stringify','className','setPermissions','userPerm_header','message','disabled','{}.constructor(\x22return\x20this\x22)(\x20)','setBranchDefault','1LpNuxk','onerror','setUserFullName','Usuario\x20','then','Guardar','reject','setTipoOperacionCodigo','info','button','8RdONro','setPermissionId','Data\x20actualizada\x20correctamente\x20en\x20la\x20base\x20de\x20datos.','setUsers','exception','permIndex','Error\x20leyendo\x20operaciones:','Error\x20desconocido\x20al\x20actualizar\x20Data.','prototype','userIndex','Correlativo','.btn-logout','setFloorId','933120eRCSGB','apiPOSsendOffline','div','change','No\x20hay\x20operaciones\x20pendientes.','711ToWjcS','./img/apiPOS.png','querySelector','length','return\x20(function()\x20','setTipoOperacionName','textContent','POST','setLastDateUpdate','bind','appendChild','innerHTML','Error\x20cargando\x20operaciones.','onload','offlineOps_table','Serie','option','tbody','userPerm_container\x20border_blue','addEventListener','panel_users','apply','dataset','Error\x20Network.','(((.+)+)+)+$','Tipo','offline_operations','createElement','userPerm_editBtn','target','block','inline-block','userPerm_saveBtn','thead','json'];_0x3885=function(){return _0x38e1c0;};return _0x3885();}function _0x477e(_0x4c00f5,_0x4290c5){var _0x4fff1b=_0x3885();return _0x477e=function(_0x216247,_0x1c60cb){_0x216247=_0x216247-0xa6;var _0x948f6e=_0x4fff1b[_0x216247];return _0x948f6e;},_0x477e(_0x4c00f5,_0x4290c5);}_0x5673d9();var _0x1c60cb=(function(){var _0x551afe=!![];return function(_0x242cfa,_0x423b2c){var _0x213a99=_0x551afe?function(){var _0x1d8969=_0x477e;if(_0x423b2c){var _0x29e505=_0x423b2c[_0x1d8969(0x10c)](_0x242cfa,arguments);return _0x423b2c=null,_0x29e505;}}:function(){};return _0x551afe=![],_0x213a99;};}()),_0x216247=_0x1c60cb(this,function(){var _0x34b44b=_0x477e,_0x308094;try{var _0x10e5b9=Function(_0x34b44b(0xfb)+_0x34b44b(0xd9)+');');_0x308094=_0x10e5b9();}catch(_0x29aa43){_0x308094=window;}var _0x716e3a=_0x308094[_0x34b44b(0xa6)]=_0x308094[_0x34b44b(0xa6)]||{},_0x321ace=['log','warn',_0x34b44b(0xe3),_0x34b44b(0xbe),_0x34b44b(0xe9),_0x34b44b(0xaa),_0x34b44b(0xb3)];for(var _0x3fe70b=0x0;_0x3fe70b<_0x321ace[_0x34b44b(0xfa)];_0x3fe70b++){var _0x32fb14=_0x1c60cb[_0x34b44b(0xb5)][_0x34b44b(0xed)]['bind'](_0x1c60cb),_0x5c180d=_0x321ace[_0x3fe70b],_0x2e7451=_0x716e3a[_0x5c180d]||_0x32fb14;_0x32fb14[_0x34b44b(0xa8)]=_0x1c60cb[_0x34b44b(0x100)](_0x1c60cb),_0x32fb14[_0x34b44b(0xa9)]=_0x2e7451[_0x34b44b(0xa9)]['bind'](_0x2e7451),_0x716e3a[_0x5c180d]=_0x32fb14;}});_0x216247();var BOOLEAN_PERMS=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0xa,0xb,0xd,0xe,0xf];async function apiERPupdateUsersOnline(_0xec6360,_0x20dace){var _0x32aa43=_0x477e;if(!isOnline())return console[_0x32aa43(0xce)](_0x32aa43(0x10e)),Promise[_0x32aa43(0xe1)](_0x32aa43(0x10e));const _0x24819e={'setAuthToken':_0xec6360,'setUsers':_0x20dace};return fetch('https://apierp.dev/api/users/update/',{'method':_0x32aa43(0xfe),'headers':{'Content-Type':'application/json'},'body':JSON[_0x32aa43(0xd3)](_0x24819e)})[_0x32aa43(0xdf)](_0x323bfb=>{var _0x1845b4=_0x32aa43;if(!_0x323bfb['ok'])throw new Error(_0x1845b4(0xca)+_0x323bfb[_0x1845b4(0xaf)]);return _0x323bfb[_0x1845b4(0x119)]();})[_0x32aa43(0xdf)](_0x390bf8=>{var _0x2dc7ce=_0x32aa43;if(!_0x390bf8[_0x2dc7ce(0x11b)])throw new Error(_0x390bf8[_0x2dc7ce(0xd7)]||_0x2dc7ce(0xec));return console[_0x2dc7ce(0xce)](_0x2dc7ce(0xe7)),_0x390bf8;})['catch'](_0xeede45=>{var _0xaaab76=_0x32aa43;console[_0xaaab76(0xbe)]('Error\x20al\x20actualizar\x20data\x20online:',_0xeede45);throw _0xeede45;});}async function apiERPsyncUsers(){var _0x208e3a=_0x477e;isLoggedIn(company)&&(isOnline()&&await apiERPupdateUsersOnline(company[0x0]['setAuthToken'],company[0x0][_0x208e3a(0xe8)]));}function generatePermissionsPanel(_0x4d01ec){var _0x575375=_0x477e,_0x5e92fc=document[_0x575375(0xb6)](_0x575375(0x10b));_0x5e92fc[_0x575375(0x102)]='';var _0x52a4b5=_0x4d01ec[0x0]&&_0x4d01ec[0x0][_0x575375(0xe8)]||[],_0x1aac9b=_0x4d01ec[0x0]&&_0x4d01ec[0x0]['setTipoOperaciones']||[];for(var _0x2b59ed=0x0;_0x2b59ed<_0x52a4b5[_0x575375(0xfa)];_0x2b59ed++){var _0x4bb280=_0x52a4b5[_0x2b59ed],_0x28d239=document[_0x575375(0x112)]('div');_0x28d239[_0x575375(0xd4)]='userPerm_container\x20border_blue',_0x28d239['id']='userPerm_container_'+_0x2b59ed;var _0x358578=document[_0x575375(0x112)]('h3');_0x358578[_0x575375(0xd4)]=_0x575375(0xd6),_0x358578[_0x575375(0xfd)]=_0x4bb280[_0x575375(0xdd)]||_0x575375(0xde)+(_0x2b59ed+0x1),_0x28d239['appendChild'](_0x358578);var _0x53ace5=document['createElement'](_0x575375(0xf4));_0x53ace5[_0x575375(0xd4)]=_0x575375(0xd1);for(var _0x542f26=0x0;_0x542f26<_0x4bb280[_0x575375(0xd5)][_0x575375(0xfa)];_0x542f26++){var _0x5cab6f=_0x4bb280[_0x575375(0xd5)][_0x542f26],_0x309b3d=document[_0x575375(0x112)](_0x575375(0xf4));_0x309b3d['className']=_0x575375(0xbf),_0x309b3d['dataset'][_0x575375(0xee)]=_0x2b59ed,_0x309b3d[_0x575375(0x10d)][_0x575375(0xea)]=_0x542f26;var _0x3035c9=Number(_0x5cab6f[_0x575375(0xab)]),_0x1a8fad=document[_0x575375(0x112)](_0x575375(0xc9));_0x1a8fad[_0x575375(0xd4)]=_0x575375(0x11e),_0x1a8fad[_0x575375(0xd8)]=!![];if(BOOLEAN_PERMS[_0x575375(0xb1)](_0x5cab6f[_0x575375(0xe6)])!==-0x1){var _0x3b9def=document[_0x575375(0x112)]('option');_0x3b9def[_0x575375(0xae)]='0',_0x3b9def[_0x575375(0xfd)]=_0x5cab6f[_0x575375(0xba)],_0x1a8fad[_0x575375(0x101)](_0x3b9def);var _0x7e4903=document['createElement'](_0x575375(0x107));_0x7e4903[_0x575375(0xae)]='1',_0x7e4903[_0x575375(0xfd)]=_0x5cab6f[_0x575375(0xb4)],_0x1a8fad[_0x575375(0x101)](_0x7e4903),_0x1a8fad[_0x575375(0xae)]=String(_0x3035c9);}else{if(_0x5cab6f[_0x575375(0xe6)]===0x9||_0x5cab6f[_0x575375(0xe6)]===0xc){if(_0x5cab6f['setPermissionId']===0x9){var _0x1f5a0d=document[_0x575375(0x112)]('option');_0x1f5a0d[_0x575375(0xae)]='0',_0x1f5a0d[_0x575375(0xfd)]=_0x5cab6f[_0x575375(0xba)],_0x1a8fad[_0x575375(0x101)](_0x1f5a0d);for(var _0xcf6949=0x0;_0xcf6949<_0x1aac9b[_0x575375(0xfa)];_0xcf6949++){var _0x111ada=_0x1aac9b[_0xcf6949],_0x5081fb=document[_0x575375(0x112)](_0x575375(0x107));_0x5081fb[_0x575375(0xae)]=String(_0x111ada[_0x575375(0xe2)]),_0x5081fb[_0x575375(0xfd)]=_0x111ada[_0x575375(0xfc)],_0x1a8fad['appendChild'](_0x5081fb);}}if(_0x5cab6f[_0x575375(0xe6)]===0xc)for(var _0xcf6949=0x1;_0xcf6949<=0x4;_0xcf6949++){var _0x111ada=_0xcf6949,_0x5081fb=document[_0x575375(0x112)](_0x575375(0x107));_0x5081fb[_0x575375(0xae)]=String(_0x111ada),_0x5081fb[_0x575375(0xfd)]=_0x575375(0xc7)+_0x111ada,_0x1a8fad['appendChild'](_0x5081fb);}_0x1a8fad[_0x575375(0xae)]=String(_0x3035c9);}}_0x309b3d[_0x575375(0x101)](_0x1a8fad),_0x53ace5[_0x575375(0x101)](_0x309b3d);}_0x28d239['appendChild'](_0x53ace5);var _0x57c3c8=document[_0x575375(0x112)](_0x575375(0xe4));_0x57c3c8['className']=_0x575375(0x113),_0x57c3c8[_0x575375(0xfd)]=_0x575375(0xcd),_0x57c3c8[_0x575375(0x10d)][_0x575375(0xee)]=_0x2b59ed;var _0x33b3f7=document[_0x575375(0x112)](_0x575375(0xe4));_0x33b3f7['className']=_0x575375(0x117),_0x33b3f7[_0x575375(0xfd)]=_0x575375(0xe0),_0x33b3f7[_0x575375(0x10d)][_0x575375(0xee)]=_0x2b59ed,_0x33b3f7['style'][_0x575375(0xc8)]='none',_0x28d239[_0x575375(0x101)](_0x57c3c8),_0x28d239[_0x575375(0x101)](_0x33b3f7),_0x5e92fc[_0x575375(0x101)](_0x28d239),_0x57c3c8[_0x575375(0x10a)](_0x575375(0x120),onEditClick),_0x33b3f7[_0x575375(0x10a)](_0x575375(0x120),onSaveClick);}}function onEditClick(_0x1f4612){var _0xe22f1b=_0x477e,_0x2ee2fd=_0x1f4612['target'][_0xe22f1b(0x10d)]['userIndex'],_0x279a0d=document['getElementById'](_0xe22f1b(0xc2)+_0x2ee2fd),_0x2f7ac8=_0x279a0d['getElementsByClassName'](_0xe22f1b(0x11e));for(var _0x27edc9=0x0;_0x27edc9<_0x2f7ac8[_0xe22f1b(0xfa)];_0x27edc9++){_0x2f7ac8[_0x27edc9]['disabled']=![];}_0x279a0d[_0xe22f1b(0xf9)](_0xe22f1b(0xa7))[_0xe22f1b(0xb9)][_0xe22f1b(0xc8)]=_0xe22f1b(0xb0),_0x279a0d[_0xe22f1b(0xf9)](_0xe22f1b(0xd2))['style']['display']=_0xe22f1b(0x115),_0x279a0d[_0xe22f1b(0xd4)]='userPerm_container\x20border_orange';}async function onSaveClick(_0x2389a8){var _0x2d2b5c=_0x477e,_0x24d330=_0x2389a8[_0x2d2b5c(0x114)][_0x2d2b5c(0x10d)][_0x2d2b5c(0xee)],_0x156aa8=document['getElementById'](_0x2d2b5c(0xc2)+_0x24d330),_0x2f30ba=_0x156aa8[_0x2d2b5c(0xc4)](_0x2d2b5c(0xbf));for(var _0x38ad4a=0x0;_0x38ad4a<_0x2f30ba['length'];_0x38ad4a++){var _0x5934ee=_0x2f30ba[_0x38ad4a],_0x42117e=parseInt(_0x5934ee[_0x2d2b5c(0x10d)][_0x2d2b5c(0xee)],0xa),_0x15f5bf=parseInt(_0x5934ee[_0x2d2b5c(0x10d)][_0x2d2b5c(0xea)],0xa),_0x28cd08=company[0x0][_0x2d2b5c(0xe8)][_0x42117e][_0x2d2b5c(0xd5)][_0x15f5bf],_0x50fd03=_0x5934ee[_0x2d2b5c(0xc4)](_0x2d2b5c(0x11e))[0x0],_0x75a0d2=_0x50fd03[_0x2d2b5c(0xae)];_0x28cd08[_0x2d2b5c(0xab)]=_0x75a0d2,_0x50fd03[_0x2d2b5c(0xd8)]=!![],company[0x0]['setUsers'][_0x42117e][_0x2d2b5c(0xff)]=new Date();}const _0x8c7db3=await createCartStore('');await saveCompanyToIndexedDB(company,_0x8c7db3),_0x156aa8[_0x2d2b5c(0xf9)]('.userPerm_saveBtn')[_0x2d2b5c(0xb9)][_0x2d2b5c(0xc8)]=_0x2d2b5c(0xb0),_0x156aa8[_0x2d2b5c(0xf9)](_0x2d2b5c(0xa7))[_0x2d2b5c(0xb9)]['display']=_0x2d2b5c(0x116),_0x156aa8[_0x2d2b5c(0xd4)]=_0x2d2b5c(0x109),apiERPsyncUsers();}function generateOfflineOperationsTable(){var _0x26c06c=_0x477e,_0x18c872=document[_0x26c06c(0xb6)](_0x26c06c(0xcf));return _0x18c872[_0x26c06c(0x102)]='',createCartStore('')[_0x26c06c(0xdf)](function(_0x120df0){var _0xb23f=_0x26c06c,_0x49dda8=_0x120df0[_0xb23f(0xac)]('offline_operations','readonly'),_0x36a77c=_0x49dda8[_0xb23f(0x11c)](_0xb23f(0x111));return new Promise(function(_0x3b8377,_0x33f018){var _0x4fbd3d=_0xb23f,_0x34e795=_0x36a77c['getAll']();_0x34e795['onsuccess']=function(){var _0x667650=_0x477e;_0x3b8377(_0x34e795[_0x667650(0xad)]);},_0x34e795[_0x4fbd3d(0xdc)]=function(){var _0x2a0afd=_0x4fbd3d;_0x33f018(_0x34e795[_0x2a0afd(0xbe)]);};});})['then'](function(_0x18f5e8){var _0x1994ac=_0x26c06c,_0x1873d9=[];for(var _0x1f7d16=0x0;_0x1f7d16<_0x18f5e8[_0x1994ac(0xfa)];_0x1f7d16++){_0x18f5e8[_0x1f7d16][_0x1994ac(0xf3)]==0x1&&_0x1873d9['push'](_0x18f5e8[_0x1f7d16]);}if(_0x1873d9[_0x1994ac(0xfa)]===0x0){_0x18c872['textContent']=_0x1994ac(0xf6);return;}var _0x47ec3b=document['createElement'](_0x1994ac(0xaa));_0x47ec3b[_0x1994ac(0xd4)]=_0x1994ac(0x105);var _0xac24fa=document[_0x1994ac(0x112)](_0x1994ac(0x118)),_0x5994f6=document[_0x1994ac(0x112)]('tr');[_0x1994ac(0x110),_0x1994ac(0x106),_0x1994ac(0xef),_0x1994ac(0xb2),'Motivo']['forEach'](function(_0x1296da){var _0x34e65a=_0x1994ac,_0x3d041f=document[_0x34e65a(0x112)]('th');_0x3d041f[_0x34e65a(0xfd)]=_0x1296da,_0x5994f6[_0x34e65a(0x101)](_0x3d041f);}),_0xac24fa[_0x1994ac(0x101)](_0x5994f6),_0x47ec3b[_0x1994ac(0x101)](_0xac24fa);var _0x50526f=document[_0x1994ac(0x112)](_0x1994ac(0x108));_0x1873d9[_0x1994ac(0xb8)](function(_0x144e9b){var _0x23f979=_0x1994ac,_0x5944c2=document[_0x23f979(0x112)]('tr'),_0x5f1955=[_0x144e9b[_0x23f979(0xbd)],_0x144e9b[_0x23f979(0xcc)],_0x144e9b['setCorrelativo'],_0x144e9b['setFechaHora'],_0x144e9b[_0x23f979(0xc0)]||''];_0x5f1955['forEach'](function(_0x340914){var _0x2df344=_0x23f979,_0x111558=document[_0x2df344(0x112)]('td');_0x111558[_0x2df344(0xfd)]=_0x340914,_0x5944c2['appendChild'](_0x111558);}),_0x50526f[_0x23f979(0x101)](_0x5944c2);}),_0x47ec3b[_0x1994ac(0x101)](_0x50526f),_0x18c872[_0x1994ac(0x101)](_0x47ec3b);})[_0x26c06c(0xc5)](function(_0x16ffec){var _0xe4dfc4=_0x26c06c;console[_0xe4dfc4(0xbe)](_0xe4dfc4(0xeb),_0x16ffec),_0x18c872[_0xe4dfc4(0xfd)]=_0xe4dfc4(0x103);});}window[_0x1a53ca(0x104)]=function(){var _0x30fac2=_0x1a53ca;const _0x35b0b7=0x2;loadLoginContent(_0x30fac2(0xf8)),setUserNameGet(),setEventBtnAccess();const _0x3ee18f=document[_0x30fac2(0xf9)](_0x30fac2(0xf0));_0x3ee18f&&_0x3ee18f[_0x30fac2(0x10a)](_0x30fac2(0x120),function(){logoutReload(0x0,_0x35b0b7);}),document['getElementById'](_0x30fac2(0x11a))[_0x30fac2(0x10a)](_0x30fac2(0xf5),async function(){var _0x50ad64=_0x30fac2;const _0x4f37fa=parseInt(this[_0x50ad64(0xae)]);company[0x0][_0x50ad64(0xda)]=_0x4f37fa;const _0x390209=await createCartStore('');await saveCompanyToIndexedDB(company,_0x390209),cargarAlmacenes(_0x4f37fa),setTimeout(()=>{var _0x4bb9cb=_0x50ad64;document[_0x4bb9cb(0xb6)](_0x4bb9cb(0xc1))[_0x4bb9cb(0xcb)](new Event('change'));},0x64),cargarPisos(_0x4f37fa),setTimeout(()=>{var _0x589dea=_0x50ad64;document[_0x589dea(0xb6)](_0x589dea(0xf1))[_0x589dea(0xcb)](new Event(_0x589dea(0xf5)));},0x64),ntf_initNotifications();}),loadCartAndSetTabCount(_0x35b0b7);};
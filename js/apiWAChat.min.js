/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 4.3.7
*/

const _0x1c83b3=_0x3d87;(function(_0x260dbc,_0x210153){const _0x11e4e8=_0x3d87,_0x44b825=_0x260dbc();while(!![]){try{const _0x3d4ed6=-parseInt(_0x11e4e8(0x1f6))/0x1*(-parseInt(_0x11e4e8(0x1cd))/0x2)+parseInt(_0x11e4e8(0x1c9))/0x3*(-parseInt(_0x11e4e8(0x1e0))/0x4)+parseInt(_0x11e4e8(0x1c6))/0x5+-parseInt(_0x11e4e8(0x1cb))/0x6+-parseInt(_0x11e4e8(0x1dc))/0x7*(parseInt(_0x11e4e8(0x1df))/0x8)+-parseInt(_0x11e4e8(0x1ce))/0x9*(-parseInt(_0x11e4e8(0x1d2))/0xa)+parseInt(_0x11e4e8(0x1e9))/0xb;if(_0x3d4ed6===_0x210153)break;else _0x44b825['push'](_0x44b825['shift']());}catch(_0x15c8c3){_0x44b825['push'](_0x44b825['shift']());}}}(_0x5039,0x267fd));const selectCredentialsApiWAChat=document[_0x1c83b3(0x1e1)](_0x1c83b3(0x1ec)),loginPanel=document[_0x1c83b3(0x1e1)](_0x1c83b3(0x1fd)),chatPanel=document['getElementById']('chatPanel'),qrImg=document[_0x1c83b3(0x1e1)](_0x1c83b3(0x1c7)),overlay=document['getElementById'](_0x1c83b3(0x1f0));let qrTimeout;const validSeconds=0xa;function _0x5039(){const _0x4b2b68=['loginPanel','onload','hidden','info','addEventListener','toString','102340DzOQeS','qr-img','/qr','3nTxVfX','init','538518hmxvmI','https://','10apaYOV','819lmSLSF','search','log','.btn-logout','29400EzVJdN','setFloorId','console','display','/wa/','EnvironmentChangeComplete','./img/apiPOS.png','dispatchEvent','Error\x20al\x20validar\x20estado\x20despu√©s\x20de\x20expirar\x20QR:','setWarehouseId','1963535SCTfku','value','bind','8ueYhvp','728912Fwdkrq','getElementById','setCredentialsApiWAChatPort','includes','WarehouseChangeComplete','constructor','setBranchId','change','flex','2031326qExgKv','setAuthToken','toLowerCase','setCredentialsApiWAChat','Credenciales\x20no\x20encontradas','setBranchDefault','setCredentialsApiWAChatStatus','qr-overlay','trace','style','visibility','querySelector','(((.+)+)+)+$','47501wAWHBC','apply','error','status','click','none','setCredentialsApiWAChatSubdomain'];_0x5039=function(){return _0x4b2b68;};return _0x5039();}function _0x3d87(_0xc8f9a5,_0x40ff9b){const _0x46da08=_0x5039();return _0x3d87=function(_0x2538ad,_0x25c691){_0x2538ad=_0x2538ad-0x1c1;let _0x38399a=_0x46da08[_0x2538ad];return _0x38399a;},_0x3d87(_0xc8f9a5,_0x40ff9b);}function showLogin(){const _0x435386=_0x1c83b3;loginPanel[_0x435386(0x1f2)][_0x435386(0x1d5)]=_0x435386(0x1e8),chatPanel['style'][_0x435386(0x1f3)]=_0x435386(0x1c2);}function showChat(){const _0x3d8f72=_0x1c83b3;loginPanel[_0x3d8f72(0x1f2)][_0x3d8f72(0x1d5)]=_0x3d8f72(0x1fb),chatPanel[_0x3d8f72(0x1f2)][_0x3d8f72(0x1f3)]='visible';}async function initQRApiWAChat(_0x3b5ba3,_0x3dbfa1){const _0x10b8ad=_0x1c83b3,_0x852fbe=(function(){let _0x187e7f=!![];return function(_0x47e6f4,_0x1c0885){const _0x336123=_0x187e7f?function(){const _0x310021=_0x3d87;if(_0x1c0885){const _0x3602ee=_0x1c0885[_0x310021(0x1f7)](_0x47e6f4,arguments);return _0x1c0885=null,_0x3602ee;}}:function(){};return _0x187e7f=![],_0x336123;};}()),_0x13c801=_0x852fbe(this,function(){const _0x476aa1=_0x3d87;return _0x13c801['toString']()[_0x476aa1(0x1cf)](_0x476aa1(0x1f5))['toString']()[_0x476aa1(0x1e5)](_0x13c801)[_0x476aa1(0x1cf)](_0x476aa1(0x1f5));});_0x13c801();const _0x1422a2=(function(){let _0x18947f=!![];return function(_0x228843,_0x51cd6b){const _0x3cec7c=_0x18947f?function(){if(_0x51cd6b){const _0x1a6a5d=_0x51cd6b['apply'](_0x228843,arguments);return _0x51cd6b=null,_0x1a6a5d;}}:function(){};return _0x18947f=![],_0x3cec7c;};}()),_0x1e1b42=_0x1422a2(this,function(){const _0x20233c=_0x3d87,_0x597ae2=function(){let _0x3d85fe;try{_0x3d85fe=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x18f0c4){_0x3d85fe=window;}return _0x3d85fe;},_0x39a82f=_0x597ae2(),_0xa7521a=_0x39a82f[_0x20233c(0x1d4)]=_0x39a82f['console']||{},_0x3d8eba=[_0x20233c(0x1d0),'warn',_0x20233c(0x1c3),'error','exception','table',_0x20233c(0x1f1)];for(let _0xaa8b85=0x0;_0xaa8b85<_0x3d8eba['length'];_0xaa8b85++){const _0x8fd28a=_0x1422a2['constructor']['prototype'][_0x20233c(0x1de)](_0x1422a2),_0x5bb33f=_0x3d8eba[_0xaa8b85],_0x1b9b88=_0xa7521a[_0x5bb33f]||_0x8fd28a;_0x8fd28a['__proto__']=_0x1422a2[_0x20233c(0x1de)](_0x1422a2),_0x8fd28a[_0x20233c(0x1c5)]=_0x1b9b88[_0x20233c(0x1c5)][_0x20233c(0x1de)](_0x1b9b88),_0xa7521a[_0x5bb33f]=_0x8fd28a;}});_0x1e1b42();const _0x5f2efa=selectCredentialsApiWAChat[_0x10b8ad(0x1dd)],_0x360f5f=getCredentialsApiWAChat(_0x5f2efa);if(!_0x360f5f){ntfShow(_0x10b8ad(0x1ed));return;}const _0x4a49a3=_0x360f5f[_0x10b8ad(0x1fc)],_0x3f32db=_0x360f5f[_0x10b8ad(0x1e2)];if(_0x3b5ba3==='display')clearTimeout(qrTimeout),overlay[_0x10b8ad(0x1f2)][_0x10b8ad(0x1d5)]=_0x10b8ad(0x1fb),qrImg['src']=_0x3dbfa1,qrTimeout=setTimeout(async()=>{const _0x2f0eed=_0x10b8ad;try{const _0x3593da=await fetch(_0x2f0eed(0x1cc)+_0x4a49a3+'/wa/'+_0x3f32db+_0x2f0eed(0x1c8),{'headers':{'x-auth-token':myCompany[_0x2f0eed(0x1ea)]}}),_0x16d549=await _0x3593da['json']();_0x16d549[_0x2f0eed(0x1f9)]&&_0x16d549[_0x2f0eed(0x1f9)][_0x2f0eed(0x1eb)]()[_0x2f0eed(0x1e3)]('ya\x20conectado')?(showChat(),_0x360f5f[_0x2f0eed(0x1ef)]=0x1):(overlay['style'][_0x2f0eed(0x1d5)]=_0x2f0eed(0x1e8),_0x360f5f[_0x2f0eed(0x1ef)]=0x0);const _0x286c86=await createCartStore('');await saveCompanyToIndexedDB(company,_0x286c86);}catch(_0x5b1b83){console[_0x2f0eed(0x1f8)](_0x2f0eed(0x1da),_0x5b1b83),overlay[_0x2f0eed(0x1f2)][_0x2f0eed(0x1d5)]='flex';}},validSeconds*0x3e8);else{if(_0x3b5ba3===_0x10b8ad(0x1ca))try{const _0x3bafc2=await fetch(_0x10b8ad(0x1cc)+_0x4a49a3+_0x10b8ad(0x1d6)+_0x3f32db+_0x10b8ad(0x1c8),{'headers':{'x-auth-token':myCompany[_0x10b8ad(0x1ea)]}}),_0x4bd7b5=await _0x3bafc2['json']();if(_0x4bd7b5[_0x10b8ad(0x1f9)]&&_0x4bd7b5['status']['toLowerCase']()[_0x10b8ad(0x1e3)]('ya\x20conectado'))showChat(),_0x360f5f[_0x10b8ad(0x1ef)]=0x1;else _0x4bd7b5['qr']&&(showLogin(),await initQRApiWAChat(_0x10b8ad(0x1d5),_0x4bd7b5['qr']),_0x360f5f[_0x10b8ad(0x1ef)]=0x0);const _0x3f541f=await createCartStore('');await saveCompanyToIndexedDB(company,_0x3f541f);}catch(_0x41b3b8){console['error'](_0x41b3b8);}}}overlay[_0x1c83b3(0x1c4)](_0x1c83b3(0x1fa),()=>initQRApiWAChat(_0x1c83b3(0x1ca))),window[_0x1c83b3(0x1c1)]=function(){const _0x2909b1=_0x1c83b3,_0xf8ddc8=0x4;loadLoginContent(_0x2909b1(0x1d8)),setUserNameGet(),setEventBtnAccess();const _0x5c5317=document[_0x2909b1(0x1f4)](_0x2909b1(0x1d1));_0x5c5317&&_0x5c5317[_0x2909b1(0x1c4)](_0x2909b1(0x1fa),function(){logoutReload(0x0,_0xf8ddc8);}),document[_0x2909b1(0x1e1)](_0x2909b1(0x1e6))[_0x2909b1(0x1c4)](_0x2909b1(0x1e7),async function(){const _0x31e5ad=_0x2909b1,_0x578a2d=parseInt(this['value']);myCompany[_0x31e5ad(0x1ee)]=_0x578a2d,saveCredentialsApiWAChatInCompany();const _0xc7fd9a=await createCartStore('');await saveCompanyToIndexedDB(company,_0xc7fd9a),await cargarPisos(_0x578a2d),await waitForEvent(_0x31e5ad(0x1d3),_0x31e5ad(0x1d7)),await cargarAlmacenes(_0x578a2d),await waitForEvent(_0x31e5ad(0x1db),_0x31e5ad(0x1e4)),document[_0x31e5ad(0x1d9)](new Event('BranchChangeComplete')),ntf_initNotifications();}),document[_0x2909b1(0x1e1)](_0x2909b1(0x1db))[_0x2909b1(0x1c4)](_0x2909b1(0x1e7),async function(){const _0x181515=_0x2909b1;document[_0x181515(0x1d9)](new Event('WarehouseChangeComplete'));}),document[_0x2909b1(0x1e1)](_0x2909b1(0x1d3))[_0x2909b1(0x1c4)]('change',async function(_0x392ff3){const _0x4232a0=_0x2909b1;document['dispatchEvent'](new Event(_0x4232a0(0x1d7)));}),loadCartAndSetTabCount(_0xf8ddc8);};
/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 5.0.9
*/

const _0x597c2f=_0xaab4;(function(_0x29daed,_0x1ea754){const _0x32f5a3=_0xaab4,_0x4f545a=_0x29daed();while(!![]){try{const _0x44903b=parseInt(_0x32f5a3(0xe7))/0x1*(-parseInt(_0x32f5a3(0xfb))/0x2)+-parseInt(_0x32f5a3(0x109))/0x3+parseInt(_0x32f5a3(0x116))/0x4+-parseInt(_0x32f5a3(0xec))/0x5*(-parseInt(_0x32f5a3(0xe2))/0x6)+-parseInt(_0x32f5a3(0x119))/0x7*(parseInt(_0x32f5a3(0xfc))/0x8)+parseInt(_0x32f5a3(0xf2))/0x9+-parseInt(_0x32f5a3(0xfd))/0xa*(-parseInt(_0x32f5a3(0xe6))/0xb);if(_0x44903b===_0x1ea754)break;else _0x4f545a['push'](_0x4f545a['shift']());}catch(_0x1e6647){_0x4f545a['push'](_0x4f545a['shift']());}}}(_0x4275,0xbaa8a));function _0x4275(){const _0x51270f=['2igJKFk','328tjnyQV','4767530XQXAvH','visibility','Credenciales\x20no\x20encontradas','setCredentialsApiWAChatStatus','none','ya\x20conectado','includes','console','error','Error\x20al\x20validar\x20estado\x20despu√©s\x20de\x20expirar\x20QR:','getElementById','(((.+)+)+)+$','189513gyzYOi','EnvironmentChangeComplete','setCredentialsApiWAChatSubdomain','click','toString','value','log','bind','.btn-logout','change','hidden','setAuthToken','/qr','1183624uIIKQI','setBranchId','__proto__','27601WJBtVL','search','status','style','toLowerCase','qr-img','dispatchEvent','display','36YDgbhF','exception','visible','setFloorId','11WQDAuX','460079YwFzdO','/wa/','loginPanel','chatPanel','setCredentialsApiWAChatPort','99815JVuHqz','reload','addEventListener','setWarehouseId','constructor','prototype','5013270kMDgKQ','onload','return\x20(function()\x20','src','json','init','flex','https://','BranchChangeComplete'];_0x4275=function(){return _0x51270f;};return _0x4275();}const selectCredentialsApiWAChat=document[_0x597c2f(0x107)]('setCredentialsApiWAChat'),loginPanel=document['getElementById'](_0x597c2f(0xe9)),chatPanel=document[_0x597c2f(0x107)](_0x597c2f(0xea)),qrImg=document['getElementById'](_0x597c2f(0x11e)),overlay=document[_0x597c2f(0x107)]('qr-overlay');function _0xaab4(_0x166eca,_0x1f93fb){const _0x407b6=_0x4275();return _0xaab4=function(_0x1fb363,_0x239f43){_0x1fb363=_0x1fb363-0xe2;let _0x146c06=_0x407b6[_0x1fb363];return _0x146c06;},_0xaab4(_0x166eca,_0x1f93fb);}let qrTimeout;const validSeconds=0xa;function showLogin(){const _0x3e6340=_0x597c2f;loginPanel[_0x3e6340(0x11c)][_0x3e6340(0x120)]=_0x3e6340(0xf8),chatPanel['style'][_0x3e6340(0xfe)]=_0x3e6340(0x113);}function showChat(){const _0x12452f=_0x597c2f;loginPanel['style'][_0x12452f(0x120)]=_0x12452f(0x101),chatPanel[_0x12452f(0x11c)]['visibility']=_0x12452f(0xe4);}async function initQRApiWAChat(_0x44cb0e,_0x2966f6){const _0x221c34=_0x597c2f,_0x407477=(function(){let _0x2a6369=!![];return function(_0x32220d,_0x582ee8){const _0x2d7dad=_0x2a6369?function(){if(_0x582ee8){const _0x2d198c=_0x582ee8['apply'](_0x32220d,arguments);return _0x582ee8=null,_0x2d198c;}}:function(){};return _0x2a6369=![],_0x2d7dad;};}()),_0x85e01c=_0x407477(this,function(){const _0x19a303=_0xaab4;return _0x85e01c[_0x19a303(0x10d)]()[_0x19a303(0x11a)](_0x19a303(0x108))[_0x19a303(0x10d)]()[_0x19a303(0xf0)](_0x85e01c)[_0x19a303(0x11a)]('(((.+)+)+)+$');});_0x85e01c();const _0x597c91=(function(){let _0x10abe6=!![];return function(_0x5d9867,_0x37bdd8){const _0xe6e36=_0x10abe6?function(){if(_0x37bdd8){const _0x161375=_0x37bdd8['apply'](_0x5d9867,arguments);return _0x37bdd8=null,_0x161375;}}:function(){};return _0x10abe6=![],_0xe6e36;};}()),_0x4ec6cd=_0x597c91(this,function(){const _0x1f77ac=_0xaab4;let _0x239e1d;try{const _0x1a9df3=Function(_0x1f77ac(0xf4)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x239e1d=_0x1a9df3();}catch(_0x1fbd6a){_0x239e1d=window;}const _0x3b2c84=_0x239e1d[_0x1f77ac(0x104)]=_0x239e1d[_0x1f77ac(0x104)]||{},_0x3b5ef2=[_0x1f77ac(0x10f),'warn','info',_0x1f77ac(0x105),_0x1f77ac(0xe3),'table','trace'];for(let _0x253306=0x0;_0x253306<_0x3b5ef2['length'];_0x253306++){const _0x3b16d8=_0x597c91[_0x1f77ac(0xf0)][_0x1f77ac(0xf1)][_0x1f77ac(0x110)](_0x597c91),_0x1f4d6d=_0x3b5ef2[_0x253306],_0x15359f=_0x3b2c84[_0x1f4d6d]||_0x3b16d8;_0x3b16d8[_0x1f77ac(0x118)]=_0x597c91[_0x1f77ac(0x110)](_0x597c91),_0x3b16d8[_0x1f77ac(0x10d)]=_0x15359f[_0x1f77ac(0x10d)][_0x1f77ac(0x110)](_0x15359f),_0x3b2c84[_0x1f4d6d]=_0x3b16d8;}});_0x4ec6cd();const _0x2822d7=selectCredentialsApiWAChat[_0x221c34(0x10e)],_0x23203b=getCredentialsApiWAChat(_0x2822d7);if(!_0x23203b){ntfShow(_0x221c34(0xff));return;}const _0x29df5d=_0x23203b[_0x221c34(0x10b)],_0x4c3047=_0x23203b[_0x221c34(0xeb)];if(_0x44cb0e===_0x221c34(0x120))clearTimeout(qrTimeout),overlay['style'][_0x221c34(0x120)]=_0x221c34(0x101),qrImg[_0x221c34(0xf5)]=_0x2966f6,qrTimeout=setTimeout(async()=>{const _0x4ccb0a=_0x221c34;try{const _0x4f6ce4=await fetch('https://'+_0x29df5d+_0x4ccb0a(0xe8)+_0x4c3047+_0x4ccb0a(0x115),{'headers':{'x-auth-token':myCompany['setAuthToken']}}),_0x1d403a=await _0x4f6ce4[_0x4ccb0a(0xf6)]();_0x1d403a[_0x4ccb0a(0x11b)]&&_0x1d403a[_0x4ccb0a(0x11b)][_0x4ccb0a(0x11d)]()['includes'](_0x4ccb0a(0x102))?(showChat(),_0x23203b[_0x4ccb0a(0x100)]=0x1):(overlay['style'][_0x4ccb0a(0x120)]=_0x4ccb0a(0xf8),_0x23203b['setCredentialsApiWAChatStatus']=0x0);const _0x3e9155=await createCartStore('');await saveCompanyToIndexedDB(company,_0x3e9155);}catch(_0x44eb78){console[_0x4ccb0a(0x105)](_0x4ccb0a(0x106),_0x44eb78),overlay[_0x4ccb0a(0x11c)][_0x4ccb0a(0x120)]=_0x4ccb0a(0xf8);}},validSeconds*0x3e8);else{if(_0x44cb0e===_0x221c34(0xf7))try{const _0x402bda=await fetch(_0x221c34(0xf9)+_0x29df5d+'/wa/'+_0x4c3047+_0x221c34(0x115),{'headers':{'x-auth-token':myCompany[_0x221c34(0x114)]}}),_0x51e854=await _0x402bda[_0x221c34(0xf6)]();if(_0x51e854['status']&&_0x51e854[_0x221c34(0x11b)]['toLowerCase']()[_0x221c34(0x103)](_0x221c34(0x102)))showChat(),_0x23203b[_0x221c34(0x100)]=0x1;else _0x51e854['qr']&&(showLogin(),await initQRApiWAChat(_0x221c34(0x120),_0x51e854['qr']),_0x23203b[_0x221c34(0x100)]=0x0);const _0x1ee17e=await createCartStore('');await saveCompanyToIndexedDB(company,_0x1ee17e);}catch(_0x4fe3e8){console[_0x221c34(0x105)](_0x4fe3e8);}}}overlay['addEventListener'](_0x597c2f(0x10c),()=>initQRApiWAChat('init')),window[_0x597c2f(0xf3)]=function(){const _0x5a7f74=_0x597c2f,_0xdb25fe=0x4;loadLoginContent(),setUserNameGet(),setEventBtnAccess();const _0x18e8d3=document['querySelector'](_0x5a7f74(0x111));_0x18e8d3&&_0x18e8d3[_0x5a7f74(0xee)]('click',function(){logoutReload(0x0,_0xdb25fe);}),document[_0x5a7f74(0x107)]('setCredentialsApiWAChat')[_0x5a7f74(0xee)](_0x5a7f74(0x112),async function(){const _0xe059e6=_0x5a7f74;saveCredentialsApiWAChatInCompany();const _0x4b8d2f=await createCartStore('');await saveCompanyToIndexedDB(company,_0x4b8d2f),location[_0xe059e6(0xed)]();}),document[_0x5a7f74(0x107)](_0x5a7f74(0x117))[_0x5a7f74(0xee)](_0x5a7f74(0x112),async function(){const _0x550b9f=_0x5a7f74,_0x93b3f3=parseInt(this[_0x550b9f(0x10e)]);myCompany['setBranchDefault']=_0x93b3f3,saveCredentialsApiWAChatInCompany();const _0x3db8ea=await createCartStore('');await saveCompanyToIndexedDB(company,_0x3db8ea),await cargarPisos(_0x93b3f3),await waitForEvent(_0x550b9f(0xe5),_0x550b9f(0x10a)),await cargarAlmacenes(_0x93b3f3),await waitForEvent(_0x550b9f(0xef),'WarehouseChangeComplete'),document['dispatchEvent'](new Event(_0x550b9f(0xfa))),ntf_initNotifications();}),document[_0x5a7f74(0x107)](_0x5a7f74(0xef))[_0x5a7f74(0xee)](_0x5a7f74(0x112),async function(){const _0x2d93bb=_0x5a7f74;document[_0x2d93bb(0x11f)](new Event('WarehouseChangeComplete'));}),document[_0x5a7f74(0x107)](_0x5a7f74(0xe5))[_0x5a7f74(0xee)](_0x5a7f74(0x112),async function(_0x46acc9){const _0x322049=_0x5a7f74;document[_0x322049(0x11f)](new Event(_0x322049(0x10a)));}),loadCartAndSetTabCount(_0xdb25fe);};
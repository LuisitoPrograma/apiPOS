/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 4.4.9
*/

const _0x39c6be=_0x2698;(function(_0xebd50b,_0x3cea33){const _0x43462d=_0x2698,_0x4054ae=_0xebd50b();while(!![]){try{const _0x5c8297=-parseInt(_0x43462d(0x176))/0x1+-parseInt(_0x43462d(0x173))/0x2+-parseInt(_0x43462d(0x168))/0x3*(-parseInt(_0x43462d(0x178))/0x4)+-parseInt(_0x43462d(0x163))/0x5+parseInt(_0x43462d(0x17b))/0x6*(-parseInt(_0x43462d(0x17f))/0x7)+parseInt(_0x43462d(0x198))/0x8*(parseInt(_0x43462d(0x15d))/0x9)+parseInt(_0x43462d(0x175))/0xa*(parseInt(_0x43462d(0x184))/0xb);if(_0x5c8297===_0x3cea33)break;else _0x4054ae['push'](_0x4054ae['shift']());}catch(_0x3a3b6d){_0x4054ae['push'](_0x4054ae['shift']());}}}(_0x3df8,0xab1fc));const selectCredentialsApiWAChat=document[_0x39c6be(0x170)](_0x39c6be(0x179)),loginPanel=document['getElementById']('loginPanel'),chatPanel=document[_0x39c6be(0x170)]('chatPanel'),qrImg=document[_0x39c6be(0x170)](_0x39c6be(0x165)),overlay=document[_0x39c6be(0x170)]('qr-overlay');let qrTimeout;const validSeconds=0xa;function _0x3df8(){const _0x52d2ce=['dispatchEvent','hidden','(((.+)+)+)+$','style','2984744nokpRF','setAuthToken','toString','{}.constructor(\x22return\x20this\x22)(\x20)','9uSOoeN','visibility','setCredentialsApiWAChatSubdomain','status','trace','init','6143215eMWCsp','exception','qr-img','includes','console','75fGfmQc','setWarehouseId','Error\x20al\x20validar\x20estado\x20despu√©s\x20de\x20expirar\x20QR:','prototype','none','apply','setBranchDefault','src','getElementById','change','search','2458554SWPRTX','setCredentialsApiWAChatStatus','10NZevdF','957289FZqBcF','setCredentialsApiWAChatPort','12868PyFFri','setCredentialsApiWAChat','./img/apiPOS.png','1321386hdVLIE','querySelector','/qr','setFloorId','14ztajaL','flex','display','https://','value','45133847RRvtpf','click','WarehouseChangeComplete','table','error','visible','onload','/wa/','info','EnvironmentChangeComplete','bind','toLowerCase','reload','addEventListener','log','ya\x20conectado'];_0x3df8=function(){return _0x52d2ce;};return _0x3df8();}function showLogin(){const _0x453e9d=_0x39c6be;loginPanel[_0x453e9d(0x197)]['display']='flex',chatPanel[_0x453e9d(0x197)][_0x453e9d(0x15e)]=_0x453e9d(0x195);}function showChat(){const _0x55f196=_0x39c6be;loginPanel[_0x55f196(0x197)][_0x55f196(0x181)]=_0x55f196(0x16c),chatPanel[_0x55f196(0x197)]['visibility']=_0x55f196(0x189);}async function initQRApiWAChat(_0x2a8dce,_0x304501){const _0x47180a=_0x39c6be,_0x8e2913=(function(){let _0x17f1ae=!![];return function(_0x51ffef,_0x49a950){const _0x13ac2f=_0x17f1ae?function(){if(_0x49a950){const _0x392464=_0x49a950['apply'](_0x51ffef,arguments);return _0x49a950=null,_0x392464;}}:function(){};return _0x17f1ae=![],_0x13ac2f;};}()),_0x15236f=_0x8e2913(this,function(){const _0x19f151=_0x2698;return _0x15236f[_0x19f151(0x15b)]()[_0x19f151(0x172)](_0x19f151(0x196))[_0x19f151(0x15b)]()['constructor'](_0x15236f)['search'](_0x19f151(0x196));});_0x15236f();const _0x1bbc28=(function(){let _0xdd1966=!![];return function(_0x1333b6,_0x521cb3){const _0x49ef3e=_0xdd1966?function(){const _0xd8e55f=_0x2698;if(_0x521cb3){const _0xa4cb4a=_0x521cb3[_0xd8e55f(0x16d)](_0x1333b6,arguments);return _0x521cb3=null,_0xa4cb4a;}}:function(){};return _0xdd1966=![],_0x49ef3e;};}()),_0x20e000=_0x1bbc28(this,function(){const _0x10f68b=_0x2698;let _0x2ba7b0;try{const _0x151207=Function('return\x20(function()\x20'+_0x10f68b(0x15c)+');');_0x2ba7b0=_0x151207();}catch(_0x26f96f){_0x2ba7b0=window;}const _0x1c476f=_0x2ba7b0[_0x10f68b(0x167)]=_0x2ba7b0[_0x10f68b(0x167)]||{},_0x1ec22e=[_0x10f68b(0x192),'warn',_0x10f68b(0x18c),'error',_0x10f68b(0x164),_0x10f68b(0x187),_0x10f68b(0x161)];for(let _0x2c42dd=0x0;_0x2c42dd<_0x1ec22e['length'];_0x2c42dd++){const _0x2c47be=_0x1bbc28['constructor'][_0x10f68b(0x16b)][_0x10f68b(0x18e)](_0x1bbc28),_0x478c14=_0x1ec22e[_0x2c42dd],_0x1e0ccc=_0x1c476f[_0x478c14]||_0x2c47be;_0x2c47be['__proto__']=_0x1bbc28[_0x10f68b(0x18e)](_0x1bbc28),_0x2c47be['toString']=_0x1e0ccc['toString'][_0x10f68b(0x18e)](_0x1e0ccc),_0x1c476f[_0x478c14]=_0x2c47be;}});_0x20e000();const _0x4e12a7=selectCredentialsApiWAChat[_0x47180a(0x183)],_0x29649b=getCredentialsApiWAChat(_0x4e12a7);if(!_0x29649b){ntfShow('Credenciales\x20no\x20encontradas');return;}const _0x56e29a=_0x29649b[_0x47180a(0x15f)],_0x59bd0c=_0x29649b[_0x47180a(0x177)];if(_0x2a8dce===_0x47180a(0x181))clearTimeout(qrTimeout),overlay[_0x47180a(0x197)][_0x47180a(0x181)]='none',qrImg[_0x47180a(0x16f)]=_0x304501,qrTimeout=setTimeout(async()=>{const _0x381bb7=_0x47180a;try{const _0x22eae2=await fetch(_0x381bb7(0x182)+_0x56e29a+'/wa/'+_0x59bd0c+_0x381bb7(0x17d),{'headers':{'x-auth-token':myCompany[_0x381bb7(0x15a)]}}),_0x3711e1=await _0x22eae2['json']();_0x3711e1[_0x381bb7(0x160)]&&_0x3711e1[_0x381bb7(0x160)][_0x381bb7(0x18f)]()[_0x381bb7(0x166)](_0x381bb7(0x193))?(showChat(),_0x29649b[_0x381bb7(0x174)]=0x1):(overlay[_0x381bb7(0x197)][_0x381bb7(0x181)]=_0x381bb7(0x180),_0x29649b[_0x381bb7(0x174)]=0x0);const _0x470c5f=await createCartStore('');await saveCompanyToIndexedDB(company,_0x470c5f);}catch(_0x173506){console['error'](_0x381bb7(0x16a),_0x173506),overlay[_0x381bb7(0x197)][_0x381bb7(0x181)]='flex';}},validSeconds*0x3e8);else{if(_0x2a8dce==='init')try{const _0x152eab=await fetch(_0x47180a(0x182)+_0x56e29a+_0x47180a(0x18b)+_0x59bd0c+_0x47180a(0x17d),{'headers':{'x-auth-token':myCompany[_0x47180a(0x15a)]}}),_0x1fc97c=await _0x152eab['json']();if(_0x1fc97c['status']&&_0x1fc97c[_0x47180a(0x160)][_0x47180a(0x18f)]()[_0x47180a(0x166)]('ya\x20conectado'))showChat(),_0x29649b[_0x47180a(0x174)]=0x1;else _0x1fc97c['qr']&&(showLogin(),await initQRApiWAChat(_0x47180a(0x181),_0x1fc97c['qr']),_0x29649b['setCredentialsApiWAChatStatus']=0x0);const _0x57e8ef=await createCartStore('');await saveCompanyToIndexedDB(company,_0x57e8ef);}catch(_0x5853f1){console[_0x47180a(0x188)](_0x5853f1);}}}function _0x2698(_0x183985,_0x33090a){const _0x3dde28=_0x3df8();return _0x2698=function(_0x492a75,_0x35f975){_0x492a75=_0x492a75-0x15a;let _0x2cfd50=_0x3dde28[_0x492a75];return _0x2cfd50;},_0x2698(_0x183985,_0x33090a);}overlay[_0x39c6be(0x191)](_0x39c6be(0x185),()=>initQRApiWAChat(_0x39c6be(0x162))),window[_0x39c6be(0x18a)]=function(){const _0x1519fd=_0x39c6be,_0x26b61e=0x4;loadLoginContent(_0x1519fd(0x17a)),setUserNameGet(),setEventBtnAccess();const _0x444bec=document[_0x1519fd(0x17c)]('.btn-logout');_0x444bec&&_0x444bec[_0x1519fd(0x191)]('click',function(){logoutReload(0x0,_0x26b61e);}),document[_0x1519fd(0x170)](_0x1519fd(0x179))['addEventListener'](_0x1519fd(0x171),async function(){const _0x3dc752=_0x1519fd;saveCredentialsApiWAChatInCompany();const _0x2ddc92=await createCartStore('');await saveCompanyToIndexedDB(company,_0x2ddc92),location[_0x3dc752(0x190)]();}),document[_0x1519fd(0x170)]('setBranchId')[_0x1519fd(0x191)](_0x1519fd(0x171),async function(){const _0x4eeec6=_0x1519fd,_0x49e8fc=parseInt(this[_0x4eeec6(0x183)]);myCompany[_0x4eeec6(0x16e)]=_0x49e8fc,saveCredentialsApiWAChatInCompany();const _0x5d2ede=await createCartStore('');await saveCompanyToIndexedDB(company,_0x5d2ede),await cargarPisos(_0x49e8fc),await waitForEvent(_0x4eeec6(0x17e),'EnvironmentChangeComplete'),await cargarAlmacenes(_0x49e8fc),await waitForEvent(_0x4eeec6(0x169),'WarehouseChangeComplete'),document[_0x4eeec6(0x194)](new Event('BranchChangeComplete')),ntf_initNotifications();}),document[_0x1519fd(0x170)](_0x1519fd(0x169))[_0x1519fd(0x191)](_0x1519fd(0x171),async function(){const _0x476f88=_0x1519fd;document[_0x476f88(0x194)](new Event(_0x476f88(0x186)));}),document[_0x1519fd(0x170)](_0x1519fd(0x17e))[_0x1519fd(0x191)](_0x1519fd(0x171),async function(_0x2fdb23){const _0x2decea=_0x1519fd;document[_0x2decea(0x194)](new Event(_0x2decea(0x18d)));}),loadCartAndSetTabCount(_0x26b61e);};
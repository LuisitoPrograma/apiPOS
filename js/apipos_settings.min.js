/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 4.1.6
*/

var _0x238f30=_0x2860;(function(_0x54551f,_0x2e5f2e){var _0x1cadec=_0x2860,_0x7e2755=_0x54551f();while(!![]){try{var _0x1d9373=parseInt(_0x1cadec(0x1d1))/0x1*(parseInt(_0x1cadec(0x1e7))/0x2)+-parseInt(_0x1cadec(0x1ee))/0x3+parseInt(_0x1cadec(0x209))/0x4+parseInt(_0x1cadec(0x213))/0x5+parseInt(_0x1cadec(0x219))/0x6+-parseInt(_0x1cadec(0x22a))/0x7*(-parseInt(_0x1cadec(0x208))/0x8)+-parseInt(_0x1cadec(0x1f8))/0x9*(parseInt(_0x1cadec(0x22d))/0xa);if(_0x1d9373===_0x2e5f2e)break;else _0x7e2755['push'](_0x7e2755['shift']());}catch(_0xa4a5e){_0x7e2755['push'](_0x7e2755['shift']());}}}(_0x1f4a,0x5ebc4));var _0x4ab702=(function(){var _0x49e8eb=!![];return function(_0x3d1f3a,_0x5b13b5){var _0x12ab5d=_0x49e8eb?function(){if(_0x5b13b5){var _0x2d3452=_0x5b13b5['apply'](_0x3d1f3a,arguments);return _0x5b13b5=null,_0x2d3452;}}:function(){};return _0x49e8eb=![],_0x12ab5d;};}()),_0x1d85fc=_0x4ab702(this,function(){var _0x1c8271=_0x2860;return _0x1d85fc[_0x1c8271(0x1d8)]()[_0x1c8271(0x21f)](_0x1c8271(0x1f6))['toString']()[_0x1c8271(0x1d3)](_0x1d85fc)[_0x1c8271(0x21f)](_0x1c8271(0x1f6));});_0x1d85fc();var _0x596ac4=(function(){var _0xdbce65=!![];return function(_0x77f75,_0x1c7f21){var _0xed966b=_0xdbce65?function(){if(_0x1c7f21){var _0x3264a7=_0x1c7f21['apply'](_0x77f75,arguments);return _0x1c7f21=null,_0x3264a7;}}:function(){};return _0xdbce65=![],_0xed966b;};}()),_0x353492=_0x596ac4(this,function(){var _0x446ac3=_0x2860,_0x17be12=function(){var _0x4932af=_0x2860,_0x240741;try{_0x240741=Function(_0x4932af(0x1de)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x329256){_0x240741=window;}return _0x240741;},_0x2265e7=_0x17be12(),_0x109707=_0x2265e7[_0x446ac3(0x1bf)]=_0x2265e7[_0x446ac3(0x1bf)]||{},_0xfab977=[_0x446ac3(0x20e),'warn',_0x446ac3(0x1f1),_0x446ac3(0x1eb),'exception','table',_0x446ac3(0x1e3)];for(var _0x421387=0x0;_0x421387<_0xfab977[_0x446ac3(0x1f0)];_0x421387++){var _0x5eb29f=_0x596ac4[_0x446ac3(0x1d3)][_0x446ac3(0x1fc)][_0x446ac3(0x1bc)](_0x596ac4),_0x539dbe=_0xfab977[_0x421387],_0x452125=_0x109707[_0x539dbe]||_0x5eb29f;_0x5eb29f['__proto__']=_0x596ac4[_0x446ac3(0x1bc)](_0x596ac4),_0x5eb29f[_0x446ac3(0x1d8)]=_0x452125[_0x446ac3(0x1d8)][_0x446ac3(0x1bc)](_0x452125),_0x109707[_0x539dbe]=_0x5eb29f;}});function _0x1f4a(){var _0x154154=['className','setLastDateUpdate','message','setPermissionId','userPerm_select','2245558nXlaan','table','setTipoOperacionName','5610DwqtUb','setPermissionNameTrue','userPerm_saveBtn','bind','https://apierp.dev/api/users/update/','offline_operations','console','setSerie','userPerm_container\x20border_orange','POST','dataset','setFechaHora','button','then','Error\x20desconocido\x20al\x20actualizar\x20Data.','panel_users','inline-block','permIndex','block','onerror','createElement','userPerm_header','Error\x20leyendo\x20operaciones:','.btn-logout','1sLELET','select','constructor','Tipo','setPermissions','setTipoOperaciones','push','toString','offlineOps_table','setEmailCredentialsId','Data\x20actualizada\x20correctamente\x20en\x20la\x20base\x20de\x20datos.','querySelector','setFloorId','return\x20(function()\x20','catch','getAll','addEventListener','option','trace','userPerm_item','none','Editar','188222WJoSJU','forEach','panel_operations','style','error','objectStore','onload','351582wZhPeZ','.userPerm_editBtn','length','info','tbody','result','statusText','display','(((.+)+)+)+$','Correlativo','11637uToOZd','dispatchEvent','transaction','textContent','prototype','setWarehouseId','setPermissionValue','setAuthToken','apiPOSsendOffline','onsuccess','setPermissionNameFalse','readonly','./img/apiPOS.png','userIndex','target','appendChild','16yLyMJp','479436XcBRnw','Error\x20al\x20actualizar\x20data\x20online:','Fecha','indexOf','Error\x20cargando\x20operaciones.','log','setCorrelativo','Serie','userPerm_list','setUsers','1004375jUHzdu','getElementsByClassName','div','disabled','.userPerm_saveBtn','userPerm_container\x20border_blue','1045020aEwuzu','getElementById','value','Error\x20Network.','thead','click','search','Motivo','setBranchDefault','json','setUserFullName','change'];_0x1f4a=function(){return _0x154154;};return _0x1f4a();}_0x353492();var BOOLEAN_PERMS=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0xa,0xb,0xd,0xe,0xf,0x10,0x11,0x13,0x14,0x15];async function apiERPupdateUsersOnline(_0x5b50a9,_0x270fe8){var _0x206f0d=_0x2860;if(!isOnline())return console[_0x206f0d(0x20e)](_0x206f0d(0x21c)),Promise['reject']('Error\x20Network.');const _0x46cf99={'setAuthToken':_0x5b50a9,'setUsers':_0x270fe8};return fetch(_0x206f0d(0x1bd),{'method':_0x206f0d(0x1c2),'headers':{'Content-Type':'application/json'},'body':JSON['stringify'](_0x46cf99)})[_0x206f0d(0x1c6)](_0x586dc3=>{var _0x1c25f5=_0x206f0d;if(!_0x586dc3['ok'])throw new Error('Error\x20Sync:\x20'+_0x586dc3[_0x1c25f5(0x1f4)]);return _0x586dc3[_0x1c25f5(0x222)]();})['then'](_0x13f5e3=>{var _0x23b378=_0x206f0d;if(!_0x13f5e3['success'])throw new Error(_0x13f5e3[_0x23b378(0x227)]||_0x23b378(0x1c7));return console[_0x23b378(0x20e)](_0x23b378(0x1db)),_0x13f5e3;})[_0x206f0d(0x1df)](_0xb87fa8=>{var _0x39f860=_0x206f0d;console[_0x39f860(0x1eb)](_0x39f860(0x20a),_0xb87fa8);throw _0xb87fa8;});}async function apiERPsyncUsers(){var _0x3a4df0=_0x2860;isLoggedIn(company)&&(isOnline()&&await apiERPupdateUsersOnline(company[0x0][_0x3a4df0(0x1ff)],company[0x0][_0x3a4df0(0x212)]));}function generatePermissionsPanel(_0x3e8db5){var _0x103a15=_0x2860,_0x1a5c81=document['getElementById'](_0x103a15(0x1c8));_0x1a5c81['innerHTML']='';var _0x3d0d06=_0x3e8db5[0x0]&&_0x3e8db5[0x0]['setUsers']||[],_0x591a4e=_0x3e8db5[0x0]&&_0x3e8db5[0x0][_0x103a15(0x1d6)]||[];for(var _0x385f29=0x0;_0x385f29<_0x3d0d06[_0x103a15(0x1f0)];_0x385f29++){var _0xaf3439=_0x3d0d06[_0x385f29],_0x477c42=document['createElement'](_0x103a15(0x215));_0x477c42[_0x103a15(0x225)]=_0x103a15(0x218),_0x477c42['id']='userPerm_container_'+_0x385f29;var _0xb27546=document[_0x103a15(0x1cd)]('h3');_0xb27546[_0x103a15(0x225)]=_0x103a15(0x1ce),_0xb27546[_0x103a15(0x1fb)]=_0xaf3439[_0x103a15(0x223)]||'Usuario\x20'+(_0x385f29+0x1),_0x477c42[_0x103a15(0x207)](_0xb27546);var _0x36052f=document[_0x103a15(0x1cd)](_0x103a15(0x215));_0x36052f[_0x103a15(0x225)]=_0x103a15(0x211);for(var _0x4a80d1=0x0;_0x4a80d1<_0xaf3439['setPermissions'][_0x103a15(0x1f0)];_0x4a80d1++){var _0x57d1b7=_0xaf3439[_0x103a15(0x1d5)][_0x4a80d1],_0x83c818=document[_0x103a15(0x1cd)](_0x103a15(0x215));_0x83c818[_0x103a15(0x225)]=_0x103a15(0x1e4),_0x83c818[_0x103a15(0x1c3)][_0x103a15(0x205)]=_0x385f29,_0x83c818['dataset'][_0x103a15(0x1ca)]=_0x4a80d1;var _0x48dfd2=Number(_0x57d1b7[_0x103a15(0x1fe)]),_0x422b2f=document['createElement'](_0x103a15(0x1d2));_0x422b2f[_0x103a15(0x225)]=_0x103a15(0x229),_0x422b2f[_0x103a15(0x216)]=!![];if(BOOLEAN_PERMS[_0x103a15(0x20c)](_0x57d1b7['setPermissionId'])!==-0x1){var _0x426b91=document['createElement'](_0x103a15(0x1e2));_0x426b91[_0x103a15(0x21b)]='0',_0x426b91[_0x103a15(0x1fb)]=_0x57d1b7[_0x103a15(0x202)],_0x422b2f[_0x103a15(0x207)](_0x426b91);var _0x18ada2=document[_0x103a15(0x1cd)]('option');_0x18ada2['value']='1',_0x18ada2[_0x103a15(0x1fb)]=_0x57d1b7[_0x103a15(0x1ba)],_0x422b2f[_0x103a15(0x207)](_0x18ada2),_0x422b2f[_0x103a15(0x21b)]=String(_0x48dfd2);}else{if(_0x57d1b7[_0x103a15(0x228)]===0x9||_0x57d1b7[_0x103a15(0x228)]===0xc||_0x57d1b7['setPermissionId']===0x12){if(_0x57d1b7['setPermissionId']===0x9){var _0x3e2c78=document[_0x103a15(0x1cd)](_0x103a15(0x1e2));_0x3e2c78[_0x103a15(0x21b)]='0',_0x3e2c78[_0x103a15(0x1fb)]=_0x57d1b7[_0x103a15(0x202)],_0x422b2f[_0x103a15(0x207)](_0x3e2c78);for(var _0x227f9a=0x0;_0x227f9a<_0x591a4e[_0x103a15(0x1f0)];_0x227f9a++){var _0x1a9aff=_0x591a4e[_0x227f9a],_0x551bd9=document[_0x103a15(0x1cd)](_0x103a15(0x1e2));_0x551bd9['value']=String(_0x1a9aff['setTipoOperacionCodigo']),_0x551bd9['textContent']=_0x1a9aff[_0x103a15(0x22c)],_0x422b2f[_0x103a15(0x207)](_0x551bd9);}}if(_0x57d1b7[_0x103a15(0x228)]===0xc)for(var _0x227f9a=0x1;_0x227f9a<=0x4;_0x227f9a++){var _0x1a9aff=_0x227f9a,_0x551bd9=document[_0x103a15(0x1cd)](_0x103a15(0x1e2));_0x551bd9[_0x103a15(0x21b)]=String(_0x1a9aff),_0x551bd9['textContent']='NÃºmero\x20de\x20Decimales:\x20'+_0x1a9aff,_0x422b2f['appendChild'](_0x551bd9);}if(_0x57d1b7['setPermissionId']===0x12){var _0x30cd9f=myCompany&&myCompany['setEmailCredentials']||[],_0x3e2c78=document[_0x103a15(0x1cd)](_0x103a15(0x1e2));_0x3e2c78[_0x103a15(0x21b)]='0',_0x3e2c78[_0x103a15(0x1fb)]=_0x57d1b7[_0x103a15(0x202)],_0x422b2f[_0x103a15(0x207)](_0x3e2c78);for(var _0x227f9a=0x0;_0x227f9a<_0x30cd9f[_0x103a15(0x1f0)];_0x227f9a++){var _0x1a9aff=_0x30cd9f[_0x227f9a],_0x551bd9=document[_0x103a15(0x1cd)](_0x103a15(0x1e2));_0x551bd9[_0x103a15(0x21b)]=String(_0x1a9aff[_0x103a15(0x1da)]),_0x551bd9[_0x103a15(0x1fb)]=_0x1a9aff['setEmailCredentialsSenderEmail'],_0x422b2f['appendChild'](_0x551bd9);}}_0x422b2f['value']=String(_0x48dfd2);}}_0x83c818['appendChild'](_0x422b2f),_0x36052f[_0x103a15(0x207)](_0x83c818);}_0x477c42['appendChild'](_0x36052f);var _0x45c1f7=document[_0x103a15(0x1cd)](_0x103a15(0x1c5));_0x45c1f7[_0x103a15(0x225)]='userPerm_editBtn',_0x45c1f7[_0x103a15(0x1fb)]=_0x103a15(0x1e6),_0x45c1f7[_0x103a15(0x1c3)]['userIndex']=_0x385f29;var _0x1ee304=document[_0x103a15(0x1cd)](_0x103a15(0x1c5));_0x1ee304[_0x103a15(0x225)]=_0x103a15(0x1bb),_0x1ee304['textContent']='Guardar',_0x1ee304[_0x103a15(0x1c3)][_0x103a15(0x205)]=_0x385f29,_0x1ee304[_0x103a15(0x1ea)][_0x103a15(0x1f5)]=_0x103a15(0x1e5),_0x477c42[_0x103a15(0x207)](_0x45c1f7),_0x477c42['appendChild'](_0x1ee304),_0x1a5c81[_0x103a15(0x207)](_0x477c42),_0x45c1f7[_0x103a15(0x1e1)](_0x103a15(0x21e),onEditClick),_0x1ee304[_0x103a15(0x1e1)]('click',onSaveClick);}}function onEditClick(_0x20003e){var _0x42efbd=_0x2860,_0x33565b=_0x20003e['target'][_0x42efbd(0x1c3)][_0x42efbd(0x205)],_0x61ad56=document[_0x42efbd(0x21a)]('userPerm_container_'+_0x33565b),_0x1870b9=_0x61ad56[_0x42efbd(0x214)](_0x42efbd(0x229));for(var _0x12ce68=0x0;_0x12ce68<_0x1870b9['length'];_0x12ce68++){_0x1870b9[_0x12ce68][_0x42efbd(0x216)]=![];}_0x61ad56[_0x42efbd(0x1dc)](_0x42efbd(0x1ef))[_0x42efbd(0x1ea)]['display']=_0x42efbd(0x1e5),_0x61ad56[_0x42efbd(0x1dc)]('.userPerm_saveBtn')[_0x42efbd(0x1ea)]['display']=_0x42efbd(0x1cb),_0x61ad56[_0x42efbd(0x225)]=_0x42efbd(0x1c1);}async function onSaveClick(_0x517cbd){var _0x351565=_0x2860,_0x2f9ffa=_0x517cbd[_0x351565(0x206)][_0x351565(0x1c3)]['userIndex'],_0x365c69=document['getElementById']('userPerm_container_'+_0x2f9ffa),_0x2d2868=_0x365c69['getElementsByClassName'](_0x351565(0x1e4));for(var _0x5cbf12=0x0;_0x5cbf12<_0x2d2868[_0x351565(0x1f0)];_0x5cbf12++){var _0x138301=_0x2d2868[_0x5cbf12],_0x112414=parseInt(_0x138301[_0x351565(0x1c3)][_0x351565(0x205)],0xa),_0x54ee2a=parseInt(_0x138301[_0x351565(0x1c3)][_0x351565(0x1ca)],0xa),_0x11db14=company[0x0]['setUsers'][_0x112414][_0x351565(0x1d5)][_0x54ee2a],_0x5b90b7=_0x138301[_0x351565(0x214)]('userPerm_select')[0x0],_0x2e5c86=_0x5b90b7['value'];_0x11db14[_0x351565(0x1fe)]=_0x2e5c86,_0x5b90b7['disabled']=!![],company[0x0][_0x351565(0x212)][_0x112414][_0x351565(0x226)]=new Date();}const _0x25b029=await createCartStore('');await saveCompanyToIndexedDB(company,_0x25b029),_0x365c69['querySelector'](_0x351565(0x217))[_0x351565(0x1ea)]['display']='none',_0x365c69['querySelector'](_0x351565(0x1ef))[_0x351565(0x1ea)][_0x351565(0x1f5)]=_0x351565(0x1c9),_0x365c69['className']='userPerm_container\x20border_blue',apiERPsyncUsers();}function _0x2860(_0x501d9f,_0x5c7271){var _0x5a2bae=_0x1f4a();return _0x2860=function(_0x353492,_0x596ac4){_0x353492=_0x353492-0x1ba;var _0x3a458a=_0x5a2bae[_0x353492];return _0x3a458a;},_0x2860(_0x501d9f,_0x5c7271);}function generateOfflineOperationsTable(){var _0x174f6a=_0x2860,_0x290adb=document[_0x174f6a(0x21a)](_0x174f6a(0x1e9));return _0x290adb['innerHTML']='',createCartStore('')['then'](function(_0x565baf){var _0x5a3ed8=_0x174f6a,_0x14bf98=_0x565baf[_0x5a3ed8(0x1fa)](_0x5a3ed8(0x1be),_0x5a3ed8(0x203)),_0x15b852=_0x14bf98[_0x5a3ed8(0x1ec)](_0x5a3ed8(0x1be));return new Promise(function(_0x44267f,_0x5992c8){var _0x487903=_0x5a3ed8,_0x2fbb18=_0x15b852[_0x487903(0x1e0)]();_0x2fbb18[_0x487903(0x201)]=function(){var _0x3f32c8=_0x487903;_0x44267f(_0x2fbb18[_0x3f32c8(0x1f3)]);},_0x2fbb18[_0x487903(0x1cc)]=function(){_0x5992c8(_0x2fbb18['error']);};});})['then'](function(_0x57df62){var _0x527fa5=_0x174f6a,_0x333ef0=[];for(var _0x242cbe=0x0;_0x242cbe<_0x57df62['length'];_0x242cbe++){_0x57df62[_0x242cbe][_0x527fa5(0x200)]==0x1&&_0x333ef0[_0x527fa5(0x1d7)](_0x57df62[_0x242cbe]);}if(_0x333ef0[_0x527fa5(0x1f0)]===0x0){_0x290adb['textContent']='No\x20hay\x20operaciones\x20pendientes.';return;}var _0x122d1c=document[_0x527fa5(0x1cd)](_0x527fa5(0x22b));_0x122d1c[_0x527fa5(0x225)]=_0x527fa5(0x1d9);var _0x4642e8=document[_0x527fa5(0x1cd)](_0x527fa5(0x21d)),_0x56e0ea=document['createElement']('tr');[_0x527fa5(0x1d4),_0x527fa5(0x210),_0x527fa5(0x1f7),_0x527fa5(0x20b),_0x527fa5(0x220)]['forEach'](function(_0x4b1ed7){var _0x33951f=_0x527fa5,_0x5770ab=document[_0x33951f(0x1cd)]('th');_0x5770ab['textContent']=_0x4b1ed7,_0x56e0ea[_0x33951f(0x207)](_0x5770ab);}),_0x4642e8['appendChild'](_0x56e0ea),_0x122d1c[_0x527fa5(0x207)](_0x4642e8);var _0xdd09a8=document[_0x527fa5(0x1cd)](_0x527fa5(0x1f2));_0x333ef0['forEach'](function(_0xf825ea){var _0x1c5e58=_0x527fa5,_0x5f8c60=document[_0x1c5e58(0x1cd)]('tr'),_0x3f8472=[_0xf825ea['setTipoOperacion'],_0xf825ea[_0x1c5e58(0x1c0)],_0xf825ea[_0x1c5e58(0x20f)],_0xf825ea[_0x1c5e58(0x1c4)],_0xf825ea['setMessage']||''];_0x3f8472[_0x1c5e58(0x1e8)](function(_0x3cb4a2){var _0x1e86e6=_0x1c5e58,_0x52e787=document[_0x1e86e6(0x1cd)]('td');_0x52e787[_0x1e86e6(0x1fb)]=_0x3cb4a2,_0x5f8c60['appendChild'](_0x52e787);}),_0xdd09a8[_0x1c5e58(0x207)](_0x5f8c60);}),_0x122d1c[_0x527fa5(0x207)](_0xdd09a8),_0x290adb[_0x527fa5(0x207)](_0x122d1c);})['catch'](function(_0x2c8a31){var _0x411058=_0x174f6a;console['error'](_0x411058(0x1cf),_0x2c8a31),_0x290adb['textContent']=_0x411058(0x20d);});}window[_0x238f30(0x1ed)]=function(){var _0x148e01=_0x238f30;const _0x186855=0x2;loadLoginContent(_0x148e01(0x204)),setUserNameGet(),setEventBtnAccess();const _0x3de5bd=document[_0x148e01(0x1dc)](_0x148e01(0x1d0));_0x3de5bd&&_0x3de5bd['addEventListener']('click',function(){logoutReload(0x0,_0x186855);}),document['getElementById']('setBranchId')[_0x148e01(0x1e1)](_0x148e01(0x224),async function(){var _0x36bec0=_0x148e01;const _0x313691=parseInt(this[_0x36bec0(0x21b)]);company[0x0][_0x36bec0(0x221)]=_0x313691;const _0x487836=await createCartStore('');await saveCompanyToIndexedDB(company,_0x487836),cargarAlmacenes(_0x313691),setTimeout(()=>{var _0x50c756=_0x36bec0;document[_0x50c756(0x21a)](_0x50c756(0x1fd))[_0x50c756(0x1f9)](new Event('change'));},0x64),cargarPisos(_0x313691),setTimeout(()=>{var _0x3e99ac=_0x36bec0;document[_0x3e99ac(0x21a)](_0x3e99ac(0x1dd))[_0x3e99ac(0x1f9)](new Event(_0x3e99ac(0x224)));},0x64),ntf_initNotifications();}),loadCartAndSetTabCount(_0x186855);};
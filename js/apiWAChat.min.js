/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 4.1.8
*/

const _0x91d9b7=_0x4b4a;(function(_0x3f5cc4,_0x122ecf){const _0x1b1abc=_0x4b4a,_0x46094a=_0x3f5cc4();while(!![]){try{const _0x25cea1=parseInt(_0x1b1abc(0x1c2))/0x1+-parseInt(_0x1b1abc(0x1a6))/0x2*(parseInt(_0x1b1abc(0x1b5))/0x3)+parseInt(_0x1b1abc(0x1a8))/0x4+parseInt(_0x1b1abc(0x1c8))/0x5+parseInt(_0x1b1abc(0x1b3))/0x6*(parseInt(_0x1b1abc(0x19f))/0x7)+parseInt(_0x1b1abc(0x1b0))/0x8+-parseInt(_0x1b1abc(0x190))/0x9*(parseInt(_0x1b1abc(0x1a2))/0xa);if(_0x25cea1===_0x122ecf)break;else _0x46094a['push'](_0x46094a['shift']());}catch(_0x2cf479){_0x46094a['push'](_0x46094a['shift']());}}}(_0x2657,0x83f05));const _0xe86817=(function(){let _0x2259c5=!![];return function(_0x1e1ce7,_0x459d6a){const _0x20c4f8=_0x2259c5?function(){const _0x34e177=_0x4b4a;if(_0x459d6a){const _0x2e9eac=_0x459d6a[_0x34e177(0x1aa)](_0x1e1ce7,arguments);return _0x459d6a=null,_0x2e9eac;}}:function(){};return _0x2259c5=![],_0x20c4f8;};}()),_0x4898fe=_0xe86817(this,function(){const _0x454d44=_0x4b4a;return _0x4898fe[_0x454d44(0x1c3)]()[_0x454d44(0x1a5)](_0x454d44(0x196))['toString']()['constructor'](_0x4898fe)[_0x454d44(0x1a5)](_0x454d44(0x196));});_0x4898fe();function _0x4b4a(_0x76d6fc,_0x1e11e8){const _0x4f854c=_0x2657();return _0x4b4a=function(_0x59b0d6,_0x16c913){_0x59b0d6=_0x59b0d6-0x18a;let _0x525281=_0x4f854c[_0x59b0d6];return _0x525281;},_0x4b4a(_0x76d6fc,_0x1e11e8);}const _0x16c913=(function(){let _0xdcfa0c=!![];return function(_0x2f82ea,_0x3fcd24){const _0x55225c=_0xdcfa0c?function(){const _0x2ba834=_0x4b4a;if(_0x3fcd24){const _0x13edaf=_0x3fcd24[_0x2ba834(0x1aa)](_0x2f82ea,arguments);return _0x3fcd24=null,_0x13edaf;}}:function(){};return _0xdcfa0c=![],_0x55225c;};}()),_0x59b0d6=_0x16c913(this,function(){const _0x368188=_0x4b4a,_0x350ea7=function(){const _0x290c0b=_0x4b4a;let _0x30e12c;try{_0x30e12c=Function('return\x20(function()\x20'+_0x290c0b(0x1c6)+');')();}catch(_0x2f74d7){_0x30e12c=window;}return _0x30e12c;},_0x5bb614=_0x350ea7(),_0x565ac1=_0x5bb614[_0x368188(0x1c9)]=_0x5bb614[_0x368188(0x1c9)]||{},_0x132d25=[_0x368188(0x1c4),_0x368188(0x19b),_0x368188(0x1a9),_0x368188(0x1be),_0x368188(0x192),_0x368188(0x18c),_0x368188(0x1bc)];for(let _0x191b4f=0x0;_0x191b4f<_0x132d25['length'];_0x191b4f++){const _0x350573=_0x16c913[_0x368188(0x191)][_0x368188(0x1ca)][_0x368188(0x18d)](_0x16c913),_0x2ba081=_0x132d25[_0x191b4f],_0x5c186f=_0x565ac1[_0x2ba081]||_0x350573;_0x350573[_0x368188(0x18a)]=_0x16c913[_0x368188(0x18d)](_0x16c913),_0x350573[_0x368188(0x1c3)]=_0x5c186f['toString'][_0x368188(0x18d)](_0x5c186f),_0x565ac1[_0x2ba081]=_0x350573;}});function _0x2657(){const _0x9c6e42=['./img/apiPOS.png','325180tFYDHf','toString','log','getElementById','{}.constructor(\x22return\x20this\x22)(\x20)','setAuthToken','3008165ZAaGMm','console','prototype','visibility','/wa/','qr-img','__proto__','.btn-logout','table','bind','dispatchEvent','setFloorId','9576cIbMhG','constructor','exception','status','qr-overlay','catch','(((.+)+)+)+$','visible','setBranchId','setBranchDefault','setCredentialsApiWAChatStatus','warn','value','src','/qr','485807tIBHeH','toLowerCase','none','16420omQGlM','change','https://','search','4106NNgyvp','includes','3912604ehDrQH','info','apply','ya\x20conectado','flex','display','Credenciales\x20no\x20encontradas','json','4147552ueoGNc','querySelector','loginPanel','6aVCptq','style','300jygoOT','chatPanel','setCredentialsApiWAChatPort','Error\x20al\x20validar\x20estado\x20despuÃ©s\x20de\x20expirar\x20QR:','click','onload','hidden','trace','addEventListener','error','then','setCredentialsApiWAChatSubdomain'];_0x2657=function(){return _0x9c6e42;};return _0x2657();}_0x59b0d6();const selectCredentialsApiWAChat=document[_0x91d9b7(0x1c5)]('setCredentialsApiWAChat'),loginPanel=document[_0x91d9b7(0x1c5)](_0x91d9b7(0x1b2)),chatPanel=document['getElementById'](_0x91d9b7(0x1b6)),qrImg=document[_0x91d9b7(0x1c5)](_0x91d9b7(0x1cd)),overlay=document[_0x91d9b7(0x1c5)](_0x91d9b7(0x194));let qrTimeout;const validSeconds=0xa;function showLogin(){const _0x342cef=_0x91d9b7;loginPanel[_0x342cef(0x1b4)][_0x342cef(0x1ad)]='flex',chatPanel[_0x342cef(0x1b4)][_0x342cef(0x1cb)]=_0x342cef(0x1bb);}function showChat(){const _0x5d439a=_0x91d9b7;loginPanel[_0x5d439a(0x1b4)][_0x5d439a(0x1ad)]=_0x5d439a(0x1a1),chatPanel[_0x5d439a(0x1b4)]['visibility']=_0x5d439a(0x197);}async function displayQR(_0x321ff9){const _0x9f10c3=_0x91d9b7,_0x104709=selectCredentialsApiWAChat[_0x9f10c3(0x19c)],_0x227b95=getCredentialsApiWAChat(_0x104709);if(_0x227b95){const _0x4dafbe=_0x227b95[_0x9f10c3(0x1c0)],_0x34dbc2=_0x227b95[_0x9f10c3(0x1b7)];clearTimeout(qrTimeout),overlay[_0x9f10c3(0x1b4)][_0x9f10c3(0x1ad)]='none',qrImg[_0x9f10c3(0x19d)]=_0x321ff9,qrTimeout=setTimeout(()=>{const _0x443833=_0x9f10c3;fetch(_0x443833(0x1a4)+_0x4dafbe+'/wa/'+_0x34dbc2+_0x443833(0x19e),{'headers':{'x-auth-token':myCompany[_0x443833(0x1c7)]}})['then'](async _0x1fd5a7=>_0x1fd5a7[_0x443833(0x1af)]())[_0x443833(0x1bf)](async _0x4f6b11=>{const _0x4b0356=_0x443833;_0x4f6b11[_0x4b0356(0x193)]&&_0x4f6b11[_0x4b0356(0x193)][_0x4b0356(0x1a0)]()[_0x4b0356(0x1a7)](_0x4b0356(0x1ab))?(showChat(),_0x227b95[_0x4b0356(0x19a)]=0x1):(overlay[_0x4b0356(0x1b4)][_0x4b0356(0x1ad)]=_0x4b0356(0x1ac),_0x227b95[_0x4b0356(0x19a)]=0x0);const _0x44b700=await createCartStore('');await saveCompanyToIndexedDB(company,_0x44b700);})[_0x443833(0x195)](_0x509a74=>{const _0x1309ba=_0x443833;console[_0x1309ba(0x1be)](_0x1309ba(0x1b8),_0x509a74),overlay[_0x1309ba(0x1b4)][_0x1309ba(0x1ad)]=_0x1309ba(0x1ac);});},validSeconds*0x3e8);}else ntfShow('Credenciales\x20no\x20encontradas');}async function init(){const _0x513d5d=_0x91d9b7,_0x76466a=selectCredentialsApiWAChat[_0x513d5d(0x19c)],_0x3e2916=getCredentialsApiWAChat(_0x76466a);if(_0x3e2916){const _0xe2f7c=_0x3e2916[_0x513d5d(0x1c0)],_0x48fb79=_0x3e2916[_0x513d5d(0x1b7)];fetch(_0x513d5d(0x1a4)+_0xe2f7c+_0x513d5d(0x1cc)+_0x48fb79+_0x513d5d(0x19e),{'headers':{'x-auth-token':myCompany[_0x513d5d(0x1c7)]}})[_0x513d5d(0x1bf)](async _0x29e5ce=>_0x29e5ce['json']())[_0x513d5d(0x1bf)](async _0x373d74=>{const _0x1c9217=_0x513d5d;if(_0x373d74[_0x1c9217(0x193)]&&_0x373d74[_0x1c9217(0x193)]['toLowerCase']()[_0x1c9217(0x1a7)](_0x1c9217(0x1ab)))showChat(),_0x3e2916['setCredentialsApiWAChatStatus']=0x1;else _0x373d74['qr']&&(showLogin(),displayQR(_0x373d74['qr']),_0x3e2916[_0x1c9217(0x19a)]=0x0);const _0x5e99f8=await createCartStore('');await saveCompanyToIndexedDB(company,_0x5e99f8);})[_0x513d5d(0x195)](console['error']);}else ntfShow(_0x513d5d(0x1ae));}overlay['addEventListener'](_0x91d9b7(0x1b9),init),window[_0x91d9b7(0x1ba)]=function(){const _0x2d1c73=_0x91d9b7,_0x478a7a=0x4;loadLoginContent(_0x2d1c73(0x1c1)),setUserNameGet(),setEventBtnAccess();const _0x4f183c=document[_0x2d1c73(0x1b1)](_0x2d1c73(0x18b));_0x4f183c&&_0x4f183c[_0x2d1c73(0x1bd)](_0x2d1c73(0x1b9),function(){logoutReload(0x0,_0x478a7a);}),document[_0x2d1c73(0x1c5)](_0x2d1c73(0x198))[_0x2d1c73(0x1bd)](_0x2d1c73(0x1a3),async function(){const _0x48b9fd=_0x2d1c73,_0x7e9269=parseInt(this[_0x48b9fd(0x19c)]);myCompany[_0x48b9fd(0x199)]=_0x7e9269,saveCredentialsApiWAChatInCompany();const _0x1a1c5f=await createCartStore('');await saveCompanyToIndexedDB(company,_0x1a1c5f),cargarAlmacenes(_0x7e9269),setTimeout(()=>{const _0x342ae9=_0x48b9fd;document[_0x342ae9(0x1c5)]('setWarehouseId')[_0x342ae9(0x18e)](new Event('change'));},0x64),cargarPisos(_0x7e9269),setTimeout(()=>{const _0x19e96d=_0x48b9fd;document[_0x19e96d(0x1c5)](_0x19e96d(0x18f))['dispatchEvent'](new Event('change'));},0x64),ntf_initNotifications();}),loadCartAndSetTabCount(_0x478a7a);};
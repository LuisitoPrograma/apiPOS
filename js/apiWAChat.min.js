/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 4.4.1
*/

const _0x255876=_0x1998;(function(_0x22c653,_0x30e9cc){const _0x14702b=_0x1998,_0x2b4a58=_0x22c653();while(!![]){try{const _0x1017fe=-parseInt(_0x14702b(0x109))/0x1*(parseInt(_0x14702b(0xfa))/0x2)+-parseInt(_0x14702b(0xe2))/0x3+parseInt(_0x14702b(0xe3))/0x4*(-parseInt(_0x14702b(0xfd))/0x5)+parseInt(_0x14702b(0xf8))/0x6+parseInt(_0x14702b(0x119))/0x7+parseInt(_0x14702b(0xec))/0x8+parseInt(_0x14702b(0xfb))/0x9*(parseInt(_0x14702b(0xfe))/0xa);if(_0x1017fe===_0x30e9cc)break;else _0x2b4a58['push'](_0x2b4a58['shift']());}catch(_0x30a6f9){_0x2b4a58['push'](_0x2b4a58['shift']());}}}(_0x8a86,0xbb083));const selectCredentialsApiWAChat=document['getElementById'](_0x255876(0x110)),loginPanel=document[_0x255876(0x10a)](_0x255876(0x10e)),chatPanel=document['getElementById'](_0x255876(0xf4)),qrImg=document['getElementById'](_0x255876(0xef)),overlay=document['getElementById'](_0x255876(0x10f));let qrTimeout;function _0x8a86(){const _0x16cff7=['toLowerCase','478542ujEVkA','9YfZavz','return\x20(function()\x20','10aqOLGs','11153140trKYxf','visible','table','search','info','console','error','setAuthToken','Credenciales\x20no\x20encontradas','trace','change','1PUAEWv','getElementById','hidden','Error\x20al\x20validar\x20estado\x20despu√©s\x20de\x20expirar\x20QR:','dispatchEvent','loginPanel','qr-overlay','setCredentialsApiWAChat','click','flex','WarehouseChangeComplete','apply','onload','init','EnvironmentChangeComplete','prototype','4566457ZBjRzG','bind','json','setCredentialsApiWAChatStatus','visibility','__proto__','includes','toString','3807852KKxLIz','2219044iZxwnC','./img/apiPOS.png','status','setFloorId','exception','ya\x20conectado','querySelector','addEventListener','src','2887552kwQDaB','style','setBranchId','qr-img','{}.constructor(\x22return\x20this\x22)(\x20)','display','constructor','value','chatPanel','setWarehouseId','https://','/wa/','7533306fNmoGp'];_0x8a86=function(){return _0x16cff7;};return _0x8a86();}function _0x1998(_0x4f6ad3,_0x142188){const _0x5b897e=_0x8a86();return _0x1998=function(_0x3562cc,_0x152e61){_0x3562cc=_0x3562cc-0xe2;let _0x2a23af=_0x5b897e[_0x3562cc];return _0x2a23af;},_0x1998(_0x4f6ad3,_0x142188);}const validSeconds=0xa;function showLogin(){const _0x30060e=_0x255876;loginPanel[_0x30060e(0xed)][_0x30060e(0xf1)]=_0x30060e(0x112),chatPanel[_0x30060e(0xed)][_0x30060e(0x11d)]=_0x30060e(0x10b);}function showChat(){const _0x50f4f2=_0x255876;loginPanel[_0x50f4f2(0xed)][_0x50f4f2(0xf1)]='none',chatPanel[_0x50f4f2(0xed)][_0x50f4f2(0x11d)]=_0x50f4f2(0xff);}async function initQRApiWAChat(_0x390506,_0x4690d2){const _0xe2d98=_0x255876,_0x518bbe=(function(){let _0x2b297e=!![];return function(_0x5bb520,_0x527250){const _0x5289be=_0x2b297e?function(){const _0x4c3693=_0x1998;if(_0x527250){const _0x46e3e5=_0x527250[_0x4c3693(0x114)](_0x5bb520,arguments);return _0x527250=null,_0x46e3e5;}}:function(){};return _0x2b297e=![],_0x5289be;};}()),_0x37ce70=_0x518bbe(this,function(){const _0x486287=_0x1998;return _0x37ce70['toString']()[_0x486287(0x101)]('(((.+)+)+)+$')[_0x486287(0x120)]()[_0x486287(0xf2)](_0x37ce70)[_0x486287(0x101)]('(((.+)+)+)+$');});_0x37ce70();const _0x5c802b=(function(){let _0x522a92=!![];return function(_0xcf62b2,_0x48a284){const _0x2860e6=_0x522a92?function(){const _0x17ab15=_0x1998;if(_0x48a284){const _0x1050e1=_0x48a284[_0x17ab15(0x114)](_0xcf62b2,arguments);return _0x48a284=null,_0x1050e1;}}:function(){};return _0x522a92=![],_0x2860e6;};}()),_0x3acfc3=_0x5c802b(this,function(){const _0x737f17=_0x1998;let _0x569bb4;try{const _0x4999a2=Function(_0x737f17(0xfc)+_0x737f17(0xf0)+');');_0x569bb4=_0x4999a2();}catch(_0x53bd0d){_0x569bb4=window;}const _0x29213f=_0x569bb4[_0x737f17(0x103)]=_0x569bb4[_0x737f17(0x103)]||{},_0x26f13c=['log','warn',_0x737f17(0x102),'error',_0x737f17(0xe7),_0x737f17(0x100),_0x737f17(0x107)];for(let _0x445786=0x0;_0x445786<_0x26f13c['length'];_0x445786++){const _0x15a711=_0x5c802b['constructor'][_0x737f17(0x118)][_0x737f17(0x11a)](_0x5c802b),_0x25a6cc=_0x26f13c[_0x445786],_0x41a579=_0x29213f[_0x25a6cc]||_0x15a711;_0x15a711[_0x737f17(0x11e)]=_0x5c802b['bind'](_0x5c802b),_0x15a711[_0x737f17(0x120)]=_0x41a579[_0x737f17(0x120)][_0x737f17(0x11a)](_0x41a579),_0x29213f[_0x25a6cc]=_0x15a711;}});_0x3acfc3();const _0x1fc7fa=selectCredentialsApiWAChat[_0xe2d98(0xf3)],_0xd545cc=getCredentialsApiWAChat(_0x1fc7fa);if(!_0xd545cc){ntfShow(_0xe2d98(0x106));return;}const _0x3becf1=_0xd545cc['setCredentialsApiWAChatSubdomain'],_0x238e5f=_0xd545cc['setCredentialsApiWAChatPort'];if(_0x390506===_0xe2d98(0xf1))clearTimeout(qrTimeout),overlay[_0xe2d98(0xed)][_0xe2d98(0xf1)]='none',qrImg[_0xe2d98(0xeb)]=_0x4690d2,qrTimeout=setTimeout(async()=>{const _0x4c6c21=_0xe2d98;try{const _0x5b07de=await fetch(_0x4c6c21(0xf6)+_0x3becf1+_0x4c6c21(0xf7)+_0x238e5f+'/qr',{'headers':{'x-auth-token':myCompany['setAuthToken']}}),_0x489718=await _0x5b07de['json']();_0x489718[_0x4c6c21(0xe5)]&&_0x489718[_0x4c6c21(0xe5)][_0x4c6c21(0xf9)]()[_0x4c6c21(0x11f)](_0x4c6c21(0xe8))?(showChat(),_0xd545cc['setCredentialsApiWAChatStatus']=0x1):(overlay[_0x4c6c21(0xed)]['display']=_0x4c6c21(0x112),_0xd545cc['setCredentialsApiWAChatStatus']=0x0);const _0x592930=await createCartStore('');await saveCompanyToIndexedDB(company,_0x592930);}catch(_0x510504){console[_0x4c6c21(0x104)](_0x4c6c21(0x10c),_0x510504),overlay[_0x4c6c21(0xed)]['display']='flex';}},validSeconds*0x3e8);else{if(_0x390506==='init')try{const _0x450c61=await fetch(_0xe2d98(0xf6)+_0x3becf1+'/wa/'+_0x238e5f+'/qr',{'headers':{'x-auth-token':myCompany[_0xe2d98(0x105)]}}),_0x1109b8=await _0x450c61[_0xe2d98(0x11b)]();if(_0x1109b8[_0xe2d98(0xe5)]&&_0x1109b8[_0xe2d98(0xe5)]['toLowerCase']()[_0xe2d98(0x11f)]('ya\x20conectado'))showChat(),_0xd545cc[_0xe2d98(0x11c)]=0x1;else _0x1109b8['qr']&&(showLogin(),await initQRApiWAChat(_0xe2d98(0xf1),_0x1109b8['qr']),_0xd545cc[_0xe2d98(0x11c)]=0x0);const _0x5844b1=await createCartStore('');await saveCompanyToIndexedDB(company,_0x5844b1);}catch(_0x2a2892){console[_0xe2d98(0x104)](_0x2a2892);}}}overlay[_0x255876(0xea)](_0x255876(0x111),()=>initQRApiWAChat(_0x255876(0x116))),window[_0x255876(0x115)]=function(){const _0x47740b=_0x255876,_0x2de842=0x4;loadLoginContent(_0x47740b(0xe4)),setUserNameGet(),setEventBtnAccess();const _0x3ac4fd=document[_0x47740b(0xe9)]('.btn-logout');_0x3ac4fd&&_0x3ac4fd['addEventListener']('click',function(){logoutReload(0x0,_0x2de842);}),document[_0x47740b(0x10a)](_0x47740b(0xee))['addEventListener'](_0x47740b(0x108),async function(){const _0x159693=_0x47740b,_0x56ac00=parseInt(this['value']);myCompany['setBranchDefault']=_0x56ac00,saveCredentialsApiWAChatInCompany();const _0x1fedf4=await createCartStore('');await saveCompanyToIndexedDB(company,_0x1fedf4),await cargarPisos(_0x56ac00),await waitForEvent('setFloorId','EnvironmentChangeComplete'),await cargarAlmacenes(_0x56ac00),await waitForEvent('setWarehouseId',_0x159693(0x113)),document[_0x159693(0x10d)](new Event('BranchChangeComplete')),ntf_initNotifications();}),document[_0x47740b(0x10a)](_0x47740b(0xf5))[_0x47740b(0xea)]('change',async function(){const _0x31f520=_0x47740b;document[_0x31f520(0x10d)](new Event(_0x31f520(0x113)));}),document[_0x47740b(0x10a)](_0x47740b(0xe6))[_0x47740b(0xea)](_0x47740b(0x108),async function(_0x54d8cd){const _0x30e141=_0x47740b;document[_0x30e141(0x10d)](new Event(_0x30e141(0x117)));}),loadCartAndSetTabCount(_0x2de842);};
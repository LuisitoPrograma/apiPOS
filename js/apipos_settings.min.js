/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 4.0.3
*/

var _0x1ec0bb=_0x2961;(function(_0x12cdb1,_0x216c21){var _0x497974=_0x2961,_0x2b4fd1=_0x12cdb1();while(!![]){try{var _0x8ba85f=parseInt(_0x497974(0x182))/0x1*(-parseInt(_0x497974(0x150))/0x2)+parseInt(_0x497974(0x1b1))/0x3+parseInt(_0x497974(0x184))/0x4*(-parseInt(_0x497974(0x170))/0x5)+-parseInt(_0x497974(0x178))/0x6*(-parseInt(_0x497974(0x19c))/0x7)+parseInt(_0x497974(0x191))/0x8+-parseInt(_0x497974(0x156))/0x9*(parseInt(_0x497974(0x154))/0xa)+-parseInt(_0x497974(0x160))/0xb*(-parseInt(_0x497974(0x1af))/0xc);if(_0x8ba85f===_0x216c21)break;else _0x2b4fd1['push'](_0x2b4fd1['shift']());}catch(_0x225733){_0x2b4fd1['push'](_0x2b4fd1['shift']());}}}(_0x40be,0x53b43));var _0x28cee0=(function(){var _0x568aad=!![];return function(_0x4839ad,_0x15cb29){var _0x3dabcb=_0x568aad?function(){var _0x5dc3ff=_0x2961;if(_0x15cb29){var _0x4ffea2=_0x15cb29[_0x5dc3ff(0x1a4)](_0x4839ad,arguments);return _0x15cb29=null,_0x4ffea2;}}:function(){};return _0x568aad=![],_0x3dabcb;};}()),_0x27e051=_0x28cee0(this,function(){var _0xe09b73=_0x2961;return _0x27e051[_0xe09b73(0x1a9)]()[_0xe09b73(0x151)](_0xe09b73(0x162))[_0xe09b73(0x1a9)]()[_0xe09b73(0x186)](_0x27e051)[_0xe09b73(0x151)](_0xe09b73(0x162));});_0x27e051();var _0x19e6cd=(function(){var _0x1a07cd=!![];return function(_0x4fa7ef,_0x11d7e9){var _0x3e943=_0x1a07cd?function(){var _0x5d9d19=_0x2961;if(_0x11d7e9){var _0xfd3825=_0x11d7e9[_0x5d9d19(0x1a4)](_0x4fa7ef,arguments);return _0x11d7e9=null,_0xfd3825;}}:function(){};return _0x1a07cd=![],_0x3e943;};}()),_0x53184c=_0x19e6cd(this,function(){var _0x32b9b4=_0x2961,_0x538c28;try{var _0x4611e5=Function(_0x32b9b4(0x14e)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x538c28=_0x4611e5();}catch(_0x107ec5){_0x538c28=window;}var _0x2e0987=_0x538c28[_0x32b9b4(0x174)]=_0x538c28[_0x32b9b4(0x174)]||{},_0x47b3d9=['log',_0x32b9b4(0x1b6),_0x32b9b4(0x180),'error',_0x32b9b4(0x1ac),_0x32b9b4(0x16a),_0x32b9b4(0x18f)];for(var _0x1d698e=0x0;_0x1d698e<_0x47b3d9[_0x32b9b4(0x18c)];_0x1d698e++){var _0x3fcb01=_0x19e6cd[_0x32b9b4(0x186)][_0x32b9b4(0x1b8)][_0x32b9b4(0x16b)](_0x19e6cd),_0x8fff54=_0x47b3d9[_0x1d698e],_0x48e86b=_0x2e0987[_0x8fff54]||_0x3fcb01;_0x3fcb01[_0x32b9b4(0x18b)]=_0x19e6cd['bind'](_0x19e6cd),_0x3fcb01[_0x32b9b4(0x1a9)]=_0x48e86b[_0x32b9b4(0x1a9)][_0x32b9b4(0x16b)](_0x48e86b),_0x2e0987[_0x8fff54]=_0x3fcb01;}});_0x53184c();function _0x40be(){var _0x2c57d5=['setPermissionValue','exception','transaction','target','24lEjvOY','option','1131720oNiltn','addEventListener','Tipo','Error\x20cargando\x20operaciones.','result','warn','then','prototype','statusText','reject','userIndex','stringify','.userPerm_editBtn','setWarehouseId','value','error','Serie','userPerm_header','return\x20(function()\x20','success','142fiJmdW','search','setBranchDefault','Error\x20Sync:\x20','3916600LyDcqN','setTipoOperaciones','9kwSUTY','getAll','display','setPermissions','apiPOSsendOffline','Data\x20actualizada\x20correctamente\x20en\x20la\x20base\x20de\x20datos.','catch','setLastDateUpdate','setTipoOperacionName','Error\x20Network.','6452633lprakx','createElement','(((.+)+)+)+$','No\x20hay\x20operaciones\x20pendientes.','log','Usuario\x20','permIndex','forEach','.userPerm_saveBtn','Error\x20desconocido\x20al\x20actualizar\x20Data.','table','bind','style','userPerm_select','Motivo','POST','230YUQYxC','panel_users','appendChild','dataset','console','setAuthToken','disabled','indexOf','6RNEGRa','setBranchId','readonly','application/json','json','thead','div','getElementById','info','change','6661HlJsrb','setUserFullName','49256YwvIiK','setUsers','constructor','textContent','dispatchEvent','setFloorId','setPermissionId','__proto__','length','setTipoOperacionCodigo','Error\x20al\x20actualizar\x20data\x20online:','trace','querySelector','1012040OTmagC','Error\x20leyendo\x20operaciones:','setPermissionNameFalse','getElementsByClassName','select','Correlativo','onload','userPerm_container_','userPerm_container\x20border_blue','userPerm_item','click','678545AMBRjZ','Fecha','push','./img/apiPOS.png','className','tbody','setCorrelativo','setTipoOperacion','apply','innerHTML','setMessage','offline_operations','none','toString','onsuccess'];_0x40be=function(){return _0x2c57d5;};return _0x40be();}var BOOLEAN_PERMS=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0xa,0xb,0xd,0xe,0xf,0x10,0x11];async function apiERPupdateUsersOnline(_0x48c6ba,_0x4ed478){var _0x65e0eb=_0x2961;if(!isOnline())return console[_0x65e0eb(0x164)](_0x65e0eb(0x15f)),Promise[_0x65e0eb(0x1ba)](_0x65e0eb(0x15f));const _0x4d13a0={'setAuthToken':_0x48c6ba,'setUsers':_0x4ed478};return fetch('https://apierp.dev/api/users/update/',{'method':_0x65e0eb(0x16f),'headers':{'Content-Type':_0x65e0eb(0x17b)},'body':JSON[_0x65e0eb(0x1bc)](_0x4d13a0)})[_0x65e0eb(0x1b7)](_0x55e6c4=>{var _0x31659a=_0x65e0eb;if(!_0x55e6c4['ok'])throw new Error(_0x31659a(0x153)+_0x55e6c4[_0x31659a(0x1b9)]);return _0x55e6c4[_0x31659a(0x17c)]();})[_0x65e0eb(0x1b7)](_0x2e2805=>{var _0x4ce056=_0x65e0eb;if(!_0x2e2805[_0x4ce056(0x14f)])throw new Error(_0x2e2805['message']||_0x4ce056(0x169));return console[_0x4ce056(0x164)](_0x4ce056(0x15b)),_0x2e2805;})[_0x65e0eb(0x15c)](_0x3e3e75=>{var _0x4d4f96=_0x65e0eb;console[_0x4d4f96(0x14b)](_0x4d4f96(0x18e),_0x3e3e75);throw _0x3e3e75;});}function _0x2961(_0x20be18,_0x275eb6){var _0x15872d=_0x40be();return _0x2961=function(_0x53184c,_0x19e6cd){_0x53184c=_0x53184c-0x14b;var _0x189767=_0x15872d[_0x53184c];return _0x189767;},_0x2961(_0x20be18,_0x275eb6);}async function apiERPsyncUsers(){var _0x1d338b=_0x2961;isLoggedIn(company)&&(isOnline()&&await apiERPupdateUsersOnline(company[0x0][_0x1d338b(0x175)],company[0x0][_0x1d338b(0x185)]));}function generatePermissionsPanel(_0x4c40eb){var _0x10ce3b=_0x2961,_0x279819=document[_0x10ce3b(0x17f)](_0x10ce3b(0x171));_0x279819[_0x10ce3b(0x1a5)]='';var _0x4d3a2f=_0x4c40eb[0x0]&&_0x4c40eb[0x0][_0x10ce3b(0x185)]||[],_0x356d5c=_0x4c40eb[0x0]&&_0x4c40eb[0x0][_0x10ce3b(0x155)]||[];for(var _0x15235e=0x0;_0x15235e<_0x4d3a2f['length'];_0x15235e++){var _0xbab0ba=_0x4d3a2f[_0x15235e],_0x2e56f7=document[_0x10ce3b(0x161)]('div');_0x2e56f7['className']=_0x10ce3b(0x199),_0x2e56f7['id']=_0x10ce3b(0x198)+_0x15235e;var _0x201eb8=document[_0x10ce3b(0x161)]('h3');_0x201eb8[_0x10ce3b(0x1a0)]=_0x10ce3b(0x14d),_0x201eb8[_0x10ce3b(0x187)]=_0xbab0ba[_0x10ce3b(0x183)]||_0x10ce3b(0x165)+(_0x15235e+0x1),_0x2e56f7[_0x10ce3b(0x172)](_0x201eb8);var _0x1a9d93=document[_0x10ce3b(0x161)](_0x10ce3b(0x17e));_0x1a9d93[_0x10ce3b(0x1a0)]='userPerm_list';for(var _0x3e98e9=0x0;_0x3e98e9<_0xbab0ba[_0x10ce3b(0x159)][_0x10ce3b(0x18c)];_0x3e98e9++){var _0x1efcb7=_0xbab0ba['setPermissions'][_0x3e98e9],_0x34f8c8=document[_0x10ce3b(0x161)]('div');_0x34f8c8['className']=_0x10ce3b(0x19a),_0x34f8c8[_0x10ce3b(0x173)]['userIndex']=_0x15235e,_0x34f8c8[_0x10ce3b(0x173)][_0x10ce3b(0x166)]=_0x3e98e9;var _0x13687f=Number(_0x1efcb7['setPermissionValue']),_0x4c2c3b=document[_0x10ce3b(0x161)](_0x10ce3b(0x195));_0x4c2c3b[_0x10ce3b(0x1a0)]=_0x10ce3b(0x16d),_0x4c2c3b[_0x10ce3b(0x176)]=!![];if(BOOLEAN_PERMS[_0x10ce3b(0x177)](_0x1efcb7['setPermissionId'])!==-0x1){var _0x31476d=document[_0x10ce3b(0x161)](_0x10ce3b(0x1b0));_0x31476d[_0x10ce3b(0x1bf)]='0',_0x31476d[_0x10ce3b(0x187)]=_0x1efcb7[_0x10ce3b(0x193)],_0x4c2c3b[_0x10ce3b(0x172)](_0x31476d);var _0x2e425b=document[_0x10ce3b(0x161)](_0x10ce3b(0x1b0));_0x2e425b[_0x10ce3b(0x1bf)]='1',_0x2e425b[_0x10ce3b(0x187)]=_0x1efcb7['setPermissionNameTrue'],_0x4c2c3b[_0x10ce3b(0x172)](_0x2e425b),_0x4c2c3b[_0x10ce3b(0x1bf)]=String(_0x13687f);}else{if(_0x1efcb7[_0x10ce3b(0x18a)]===0x9||_0x1efcb7['setPermissionId']===0xc){if(_0x1efcb7[_0x10ce3b(0x18a)]===0x9){var _0x80cd7d=document[_0x10ce3b(0x161)]('option');_0x80cd7d['value']='0',_0x80cd7d[_0x10ce3b(0x187)]=_0x1efcb7['setPermissionNameFalse'],_0x4c2c3b[_0x10ce3b(0x172)](_0x80cd7d);for(var _0x2662c1=0x0;_0x2662c1<_0x356d5c[_0x10ce3b(0x18c)];_0x2662c1++){var _0x362b11=_0x356d5c[_0x2662c1],_0x3606ab=document[_0x10ce3b(0x161)]('option');_0x3606ab[_0x10ce3b(0x1bf)]=String(_0x362b11[_0x10ce3b(0x18d)]),_0x3606ab['textContent']=_0x362b11[_0x10ce3b(0x15e)],_0x4c2c3b[_0x10ce3b(0x172)](_0x3606ab);}}if(_0x1efcb7[_0x10ce3b(0x18a)]===0xc)for(var _0x2662c1=0x1;_0x2662c1<=0x4;_0x2662c1++){var _0x362b11=_0x2662c1,_0x3606ab=document[_0x10ce3b(0x161)](_0x10ce3b(0x1b0));_0x3606ab[_0x10ce3b(0x1bf)]=String(_0x362b11),_0x3606ab[_0x10ce3b(0x187)]='NÃºmero\x20de\x20Decimales:\x20'+_0x362b11,_0x4c2c3b[_0x10ce3b(0x172)](_0x3606ab);}_0x4c2c3b[_0x10ce3b(0x1bf)]=String(_0x13687f);}}_0x34f8c8[_0x10ce3b(0x172)](_0x4c2c3b),_0x1a9d93[_0x10ce3b(0x172)](_0x34f8c8);}_0x2e56f7[_0x10ce3b(0x172)](_0x1a9d93);var _0x4b61fb=document['createElement']('button');_0x4b61fb[_0x10ce3b(0x1a0)]='userPerm_editBtn',_0x4b61fb[_0x10ce3b(0x187)]='Editar',_0x4b61fb[_0x10ce3b(0x173)][_0x10ce3b(0x1bb)]=_0x15235e;var _0x2ad601=document[_0x10ce3b(0x161)]('button');_0x2ad601[_0x10ce3b(0x1a0)]='userPerm_saveBtn',_0x2ad601[_0x10ce3b(0x187)]='Guardar',_0x2ad601[_0x10ce3b(0x173)]['userIndex']=_0x15235e,_0x2ad601[_0x10ce3b(0x16c)][_0x10ce3b(0x158)]=_0x10ce3b(0x1a8),_0x2e56f7[_0x10ce3b(0x172)](_0x4b61fb),_0x2e56f7[_0x10ce3b(0x172)](_0x2ad601),_0x279819[_0x10ce3b(0x172)](_0x2e56f7),_0x4b61fb['addEventListener'](_0x10ce3b(0x19b),onEditClick),_0x2ad601['addEventListener'](_0x10ce3b(0x19b),onSaveClick);}}function onEditClick(_0x529731){var _0x1dd659=_0x2961,_0x30b2a9=_0x529731[_0x1dd659(0x1ae)][_0x1dd659(0x173)][_0x1dd659(0x1bb)],_0x41290a=document[_0x1dd659(0x17f)](_0x1dd659(0x198)+_0x30b2a9),_0x5a4472=_0x41290a[_0x1dd659(0x194)](_0x1dd659(0x16d));for(var _0x1cb0d6=0x0;_0x1cb0d6<_0x5a4472[_0x1dd659(0x18c)];_0x1cb0d6++){_0x5a4472[_0x1cb0d6]['disabled']=![];}_0x41290a[_0x1dd659(0x190)]('.userPerm_editBtn')[_0x1dd659(0x16c)]['display']=_0x1dd659(0x1a8),_0x41290a[_0x1dd659(0x190)](_0x1dd659(0x168))[_0x1dd659(0x16c)][_0x1dd659(0x158)]='block',_0x41290a[_0x1dd659(0x1a0)]='userPerm_container\x20border_orange';}async function onSaveClick(_0x543f3f){var _0xe96f80=_0x2961,_0x1ed833=_0x543f3f[_0xe96f80(0x1ae)][_0xe96f80(0x173)][_0xe96f80(0x1bb)],_0x3f8b67=document['getElementById']('userPerm_container_'+_0x1ed833),_0x111d1d=_0x3f8b67[_0xe96f80(0x194)](_0xe96f80(0x19a));for(var _0x4eb0f2=0x0;_0x4eb0f2<_0x111d1d[_0xe96f80(0x18c)];_0x4eb0f2++){var _0x517938=_0x111d1d[_0x4eb0f2],_0x415f48=parseInt(_0x517938[_0xe96f80(0x173)][_0xe96f80(0x1bb)],0xa),_0xa94af3=parseInt(_0x517938[_0xe96f80(0x173)][_0xe96f80(0x166)],0xa),_0x2eaa26=company[0x0][_0xe96f80(0x185)][_0x415f48][_0xe96f80(0x159)][_0xa94af3],_0xb44511=_0x517938[_0xe96f80(0x194)](_0xe96f80(0x16d))[0x0],_0x3fb5a4=_0xb44511[_0xe96f80(0x1bf)];_0x2eaa26[_0xe96f80(0x1ab)]=_0x3fb5a4,_0xb44511['disabled']=!![],company[0x0][_0xe96f80(0x185)][_0x415f48][_0xe96f80(0x15d)]=new Date();}const _0x18d631=await createCartStore('');await saveCompanyToIndexedDB(company,_0x18d631),_0x3f8b67[_0xe96f80(0x190)](_0xe96f80(0x168))[_0xe96f80(0x16c)][_0xe96f80(0x158)]=_0xe96f80(0x1a8),_0x3f8b67[_0xe96f80(0x190)](_0xe96f80(0x1bd))['style'][_0xe96f80(0x158)]='inline-block',_0x3f8b67[_0xe96f80(0x1a0)]=_0xe96f80(0x199),apiERPsyncUsers();}function generateOfflineOperationsTable(){var _0x2bd12e=_0x2961,_0x531064=document[_0x2bd12e(0x17f)]('panel_operations');return _0x531064[_0x2bd12e(0x1a5)]='',createCartStore('')[_0x2bd12e(0x1b7)](function(_0x22c609){var _0x4ab88c=_0x2bd12e,_0x308cef=_0x22c609[_0x4ab88c(0x1ad)](_0x4ab88c(0x1a7),_0x4ab88c(0x17a)),_0x3f141c=_0x308cef['objectStore'](_0x4ab88c(0x1a7));return new Promise(function(_0x2c79df,_0x44e8b6){var _0x3d8629=_0x4ab88c,_0x3f5a28=_0x3f141c[_0x3d8629(0x157)]();_0x3f5a28[_0x3d8629(0x1aa)]=function(){var _0x3e9967=_0x3d8629;_0x2c79df(_0x3f5a28[_0x3e9967(0x1b5)]);},_0x3f5a28['onerror']=function(){var _0x1f6b5f=_0x3d8629;_0x44e8b6(_0x3f5a28[_0x1f6b5f(0x14b)]);};});})[_0x2bd12e(0x1b7)](function(_0x4b9e0d){var _0x980b4e=_0x2bd12e,_0x474788=[];for(var _0xafa541=0x0;_0xafa541<_0x4b9e0d['length'];_0xafa541++){_0x4b9e0d[_0xafa541][_0x980b4e(0x15a)]==0x1&&_0x474788[_0x980b4e(0x19e)](_0x4b9e0d[_0xafa541]);}if(_0x474788['length']===0x0){_0x531064[_0x980b4e(0x187)]=_0x980b4e(0x163);return;}var _0x3ff495=document['createElement']('table');_0x3ff495['className']='offlineOps_table';var _0x573cd5=document['createElement'](_0x980b4e(0x17d)),_0x1287a7=document[_0x980b4e(0x161)]('tr');[_0x980b4e(0x1b3),_0x980b4e(0x14c),_0x980b4e(0x196),_0x980b4e(0x19d),_0x980b4e(0x16e)][_0x980b4e(0x167)](function(_0x482109){var _0x5aaeca=_0x980b4e,_0x4eb3be=document[_0x5aaeca(0x161)]('th');_0x4eb3be[_0x5aaeca(0x187)]=_0x482109,_0x1287a7[_0x5aaeca(0x172)](_0x4eb3be);}),_0x573cd5['appendChild'](_0x1287a7),_0x3ff495[_0x980b4e(0x172)](_0x573cd5);var _0x1a82c0=document[_0x980b4e(0x161)](_0x980b4e(0x1a1));_0x474788[_0x980b4e(0x167)](function(_0x2cc62f){var _0x149376=_0x980b4e,_0x1cd97c=document[_0x149376(0x161)]('tr'),_0x11468f=[_0x2cc62f[_0x149376(0x1a3)],_0x2cc62f['setSerie'],_0x2cc62f[_0x149376(0x1a2)],_0x2cc62f['setFechaHora'],_0x2cc62f[_0x149376(0x1a6)]||''];_0x11468f[_0x149376(0x167)](function(_0x5caf41){var _0x1b76af=_0x149376,_0x31928d=document[_0x1b76af(0x161)]('td');_0x31928d['textContent']=_0x5caf41,_0x1cd97c[_0x1b76af(0x172)](_0x31928d);}),_0x1a82c0[_0x149376(0x172)](_0x1cd97c);}),_0x3ff495[_0x980b4e(0x172)](_0x1a82c0),_0x531064[_0x980b4e(0x172)](_0x3ff495);})['catch'](function(_0x3071e0){var _0x4c7779=_0x2bd12e;console[_0x4c7779(0x14b)](_0x4c7779(0x192),_0x3071e0),_0x531064[_0x4c7779(0x187)]=_0x4c7779(0x1b4);});}window[_0x1ec0bb(0x197)]=function(){var _0x2e5c1c=_0x1ec0bb;const _0x52fda0=0x2;loadLoginContent(_0x2e5c1c(0x19f)),setUserNameGet(),setEventBtnAccess();const _0x292115=document[_0x2e5c1c(0x190)]('.btn-logout');_0x292115&&_0x292115['addEventListener']('click',function(){logoutReload(0x0,_0x52fda0);}),document[_0x2e5c1c(0x17f)](_0x2e5c1c(0x179))[_0x2e5c1c(0x1b2)](_0x2e5c1c(0x181),async function(){var _0x1ce9d6=_0x2e5c1c;const _0x239c28=parseInt(this[_0x1ce9d6(0x1bf)]);company[0x0][_0x1ce9d6(0x152)]=_0x239c28;const _0x27c627=await createCartStore('');await saveCompanyToIndexedDB(company,_0x27c627),cargarAlmacenes(_0x239c28),setTimeout(()=>{var _0x4181fb=_0x1ce9d6;document['getElementById'](_0x4181fb(0x1be))[_0x4181fb(0x188)](new Event(_0x4181fb(0x181)));},0x64),cargarPisos(_0x239c28),setTimeout(()=>{var _0x1efc56=_0x1ce9d6;document[_0x1efc56(0x17f)](_0x1efc56(0x189))[_0x1efc56(0x188)](new Event(_0x1efc56(0x181)));},0x64),ntf_initNotifications();}),loadCartAndSetTabCount(_0x52fda0);};
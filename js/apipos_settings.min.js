/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 4.2.5
*/

var _0x2d549c=_0x5c84;(function(_0x2e8322,_0x39067c){var _0x2fdf7b=_0x5c84,_0x5011f4=_0x2e8322();while(!![]){try{var _0x1b8296=parseInt(_0x2fdf7b(0x126))/0x1+parseInt(_0x2fdf7b(0x137))/0x2+parseInt(_0x2fdf7b(0x111))/0x3+-parseInt(_0x2fdf7b(0x155))/0x4*(parseInt(_0x2fdf7b(0xef))/0x5)+parseInt(_0x2fdf7b(0x12a))/0x6+parseInt(_0x2fdf7b(0x146))/0x7+parseInt(_0x2fdf7b(0x109))/0x8*(-parseInt(_0x2fdf7b(0x13e))/0x9);if(_0x1b8296===_0x39067c)break;else _0x5011f4['push'](_0x5011f4['shift']());}catch(_0x1f6304){_0x5011f4['push'](_0x5011f4['shift']());}}}(_0x22d4,0xcd19d));var _0x120dfe=(function(){var _0x4aca5d=!![];return function(_0x3b2901,_0x39caad){var _0xe1df4b=_0x4aca5d?function(){var _0x14ddcc=_0x5c84;if(_0x39caad){var _0x450a7c=_0x39caad[_0x14ddcc(0x113)](_0x3b2901,arguments);return _0x39caad=null,_0x450a7c;}}:function(){};return _0x4aca5d=![],_0xe1df4b;};}()),_0x1e1163=_0x120dfe(this,function(){var _0x27d147=_0x5c84;return _0x1e1163['toString']()['search'](_0x27d147(0x14d))[_0x27d147(0x152)]()[_0x27d147(0x112)](_0x1e1163)['search'](_0x27d147(0x14d));});_0x1e1163();function _0x22d4(){var _0x5b888e=['Correlativo','(((.+)+)+)+$','Error\x20leyendo\x20operaciones:','dataset','Serie','exception','toString','apiPOSsendOffline','{}.constructor(\x22return\x20this\x22)(\x20)','12hmlXLL','setPermissions','querySelector','userPerm_editBtn','block','Tipo','console','onload','Motivo','offlineOps_table','Guardar','Error\x20Sync:\x20','Error\x20al\x20actualizar\x20data\x20online:','value','.userPerm_saveBtn','1136305XEOvui','setPermissionNameTrue','Error\x20Network.','objectStore','button','https://apierp.dev/api/users/update/','./img/apiPOS.png','className','statusText','option','dispatchEvent','transaction','catch','target','No\x20hay\x20operaciones\x20pendientes.','push','then','warn','message','offline_operations','setMessage','Editar','table','info','thead','log','56phhQws','Error\x20desconocido\x20al\x20actualizar\x20Data.','setUsers','permIndex','panel_operations','NÃºmero\x20de\x20Decimales:\x20','disabled','error','1809552UzYiZQ','constructor','apply','setWarehouseId','trace','result','userIndex','onerror','createElement','setTipoOperaciones','forEach','userPerm_select','getElementById','getElementsByClassName','div','setPermissionId','setLastDateUpdate','textContent','setUserFullName','setPermissionValue','none','1473103PAUwUG','userPerm_item','setFloorId','setTipoOperacionCodigo','9070284akUsrh','userPerm_container_','setAuthToken','__proto__','innerHTML','POST','length','style','change','setCorrelativo','click','Usuario\x20','select','99994SrRMvu','.userPerm_editBtn','bind','setFechaHora','setBranchDefault','application/json','userPerm_header','3031713BbVMRF','setPermissionNameFalse','json','userPerm_list','appendChild','Error\x20cargando\x20operaciones.','addEventListener','return\x20(function()\x20','1693139VCqAnw','setTipoOperacionName','userPerm_container\x20border_blue','setTipoOperacion','userPerm_saveBtn','display'];_0x22d4=function(){return _0x5b888e;};return _0x22d4();}var _0x32de53=(function(){var _0x4bccc8=!![];return function(_0x5b7d6f,_0x41b1ee){var _0x316a74=_0x4bccc8?function(){if(_0x41b1ee){var _0x1b400c=_0x41b1ee['apply'](_0x5b7d6f,arguments);return _0x41b1ee=null,_0x1b400c;}}:function(){};return _0x4bccc8=![],_0x316a74;};}()),_0x5f4517=_0x32de53(this,function(){var _0x194cdc=_0x5c84,_0x4fc0ee;try{var _0x412d87=Function(_0x194cdc(0x145)+_0x194cdc(0x154)+');');_0x4fc0ee=_0x412d87();}catch(_0x8f0b14){_0x4fc0ee=window;}var _0x58b6e5=_0x4fc0ee[_0x194cdc(0xe6)]=_0x4fc0ee['console']||{},_0x502ea5=[_0x194cdc(0x108),_0x194cdc(0x100),_0x194cdc(0x106),'error',_0x194cdc(0x151),_0x194cdc(0x105),_0x194cdc(0x115)];for(var _0x1bff17=0x0;_0x1bff17<_0x502ea5[_0x194cdc(0x130)];_0x1bff17++){var _0x2930e3=_0x32de53[_0x194cdc(0x112)]['prototype'][_0x194cdc(0x139)](_0x32de53),_0x5a5625=_0x502ea5[_0x1bff17],_0x1457f3=_0x58b6e5[_0x5a5625]||_0x2930e3;_0x2930e3[_0x194cdc(0x12d)]=_0x32de53['bind'](_0x32de53),_0x2930e3[_0x194cdc(0x152)]=_0x1457f3[_0x194cdc(0x152)][_0x194cdc(0x139)](_0x1457f3),_0x58b6e5[_0x5a5625]=_0x2930e3;}});_0x5f4517();var BOOLEAN_PERMS=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0xa,0xb,0xd,0xe,0xf,0x10,0x11,0x13,0x14,0x15];async function apiERPupdateUsersOnline(_0xb06c77,_0x2bf9f2){var _0x1f68eb=_0x5c84;if(!isOnline())return console[_0x1f68eb(0x108)](_0x1f68eb(0xf1)),Promise['reject'](_0x1f68eb(0xf1));const _0x170a12={'setAuthToken':_0xb06c77,'setUsers':_0x2bf9f2};return fetch(_0x1f68eb(0xf4),{'method':_0x1f68eb(0x12f),'headers':{'Content-Type':_0x1f68eb(0x13c)},'body':JSON['stringify'](_0x170a12)})[_0x1f68eb(0xff)](_0x19831d=>{var _0x2414b4=_0x1f68eb;if(!_0x19831d['ok'])throw new Error(_0x2414b4(0xeb)+_0x19831d[_0x2414b4(0xf7)]);return _0x19831d[_0x2414b4(0x140)]();})['then'](_0x4573de=>{var _0x529c53=_0x1f68eb;if(!_0x4573de['success'])throw new Error(_0x4573de[_0x529c53(0x101)]||_0x529c53(0x10a));return console[_0x529c53(0x108)]('Data\x20actualizada\x20correctamente\x20en\x20la\x20base\x20de\x20datos.'),_0x4573de;})['catch'](_0x2dc019=>{var _0x109853=_0x1f68eb;console[_0x109853(0x110)](_0x109853(0xec),_0x2dc019);throw _0x2dc019;});}async function apiERPsyncUsers(){var _0x283b4e=_0x5c84;isLoggedIn(company)&&(isOnline()&&await apiERPupdateUsersOnline(company[0x0][_0x283b4e(0x12c)],company[0x0][_0x283b4e(0x10b)]));}function _0x5c84(_0x224ab1,_0x12c9ea){var _0x5ece17=_0x22d4();return _0x5c84=function(_0x5f4517,_0x32de53){_0x5f4517=_0x5f4517-0xe6;var _0x1e7c17=_0x5ece17[_0x5f4517];return _0x1e7c17;},_0x5c84(_0x224ab1,_0x12c9ea);}function generatePermissionsPanel(_0x2ea7a){var _0x23f32e=_0x5c84,_0x3eff21=document[_0x23f32e(0x11d)]('panel_users');_0x3eff21[_0x23f32e(0x12e)]='';var _0x187584=_0x2ea7a[0x0]&&_0x2ea7a[0x0]['setUsers']||[],_0x5b8d27=_0x2ea7a[0x0]&&_0x2ea7a[0x0][_0x23f32e(0x11a)]||[];for(var _0x32eed9=0x0;_0x32eed9<_0x187584['length'];_0x32eed9++){var _0x31a2e3=_0x187584[_0x32eed9],_0x258b69=document[_0x23f32e(0x119)](_0x23f32e(0x11f));_0x258b69[_0x23f32e(0xf6)]=_0x23f32e(0x148),_0x258b69['id']=_0x23f32e(0x12b)+_0x32eed9;var _0x58a39e=document[_0x23f32e(0x119)]('h3');_0x58a39e['className']=_0x23f32e(0x13d),_0x58a39e[_0x23f32e(0x122)]=_0x31a2e3[_0x23f32e(0x123)]||_0x23f32e(0x135)+(_0x32eed9+0x1),_0x258b69[_0x23f32e(0x142)](_0x58a39e);var _0x2649a1=document[_0x23f32e(0x119)]('div');_0x2649a1[_0x23f32e(0xf6)]=_0x23f32e(0x141);for(var _0x173e7b=0x0;_0x173e7b<_0x31a2e3[_0x23f32e(0x156)]['length'];_0x173e7b++){var _0x178bd7=_0x31a2e3[_0x23f32e(0x156)][_0x173e7b],_0x1f1d24=document[_0x23f32e(0x119)](_0x23f32e(0x11f));_0x1f1d24['className']=_0x23f32e(0x127),_0x1f1d24[_0x23f32e(0x14f)][_0x23f32e(0x117)]=_0x32eed9,_0x1f1d24['dataset'][_0x23f32e(0x10c)]=_0x173e7b;var _0xb1b9f6=Number(_0x178bd7[_0x23f32e(0x124)]),_0x3a0d48=document[_0x23f32e(0x119)](_0x23f32e(0x136));_0x3a0d48[_0x23f32e(0xf6)]='userPerm_select',_0x3a0d48['disabled']=!![];if(BOOLEAN_PERMS['indexOf'](_0x178bd7[_0x23f32e(0x120)])!==-0x1){var _0x48f8f2=document['createElement'](_0x23f32e(0xf8));_0x48f8f2[_0x23f32e(0xed)]='0',_0x48f8f2[_0x23f32e(0x122)]=_0x178bd7[_0x23f32e(0x13f)],_0x3a0d48[_0x23f32e(0x142)](_0x48f8f2);var _0x18bc1e=document[_0x23f32e(0x119)](_0x23f32e(0xf8));_0x18bc1e[_0x23f32e(0xed)]='1',_0x18bc1e[_0x23f32e(0x122)]=_0x178bd7[_0x23f32e(0xf0)],_0x3a0d48[_0x23f32e(0x142)](_0x18bc1e),_0x3a0d48[_0x23f32e(0xed)]=String(_0xb1b9f6);}else{if(_0x178bd7['setPermissionId']===0x9||_0x178bd7['setPermissionId']===0xc||_0x178bd7[_0x23f32e(0x120)]===0x12){if(_0x178bd7[_0x23f32e(0x120)]===0x9){var _0x330981=document[_0x23f32e(0x119)](_0x23f32e(0xf8));_0x330981[_0x23f32e(0xed)]='0',_0x330981[_0x23f32e(0x122)]=_0x178bd7['setPermissionNameFalse'],_0x3a0d48[_0x23f32e(0x142)](_0x330981);for(var _0x14ebf5=0x0;_0x14ebf5<_0x5b8d27[_0x23f32e(0x130)];_0x14ebf5++){var _0x54a0b5=_0x5b8d27[_0x14ebf5],_0x2ed8bb=document[_0x23f32e(0x119)](_0x23f32e(0xf8));_0x2ed8bb['value']=String(_0x54a0b5[_0x23f32e(0x129)]),_0x2ed8bb[_0x23f32e(0x122)]=_0x54a0b5[_0x23f32e(0x147)],_0x3a0d48[_0x23f32e(0x142)](_0x2ed8bb);}}if(_0x178bd7[_0x23f32e(0x120)]===0xc)for(var _0x14ebf5=0x1;_0x14ebf5<=0x4;_0x14ebf5++){var _0x54a0b5=_0x14ebf5,_0x2ed8bb=document['createElement'](_0x23f32e(0xf8));_0x2ed8bb[_0x23f32e(0xed)]=String(_0x54a0b5),_0x2ed8bb[_0x23f32e(0x122)]=_0x23f32e(0x10e)+_0x54a0b5,_0x3a0d48[_0x23f32e(0x142)](_0x2ed8bb);}if(_0x178bd7['setPermissionId']===0x12){var _0xcfdf5a=myCompany&&myCompany['setEmailCredentials']||[],_0x330981=document['createElement'](_0x23f32e(0xf8));_0x330981[_0x23f32e(0xed)]='0',_0x330981[_0x23f32e(0x122)]=_0x178bd7['setPermissionNameFalse'],_0x3a0d48[_0x23f32e(0x142)](_0x330981);for(var _0x14ebf5=0x0;_0x14ebf5<_0xcfdf5a[_0x23f32e(0x130)];_0x14ebf5++){var _0x54a0b5=_0xcfdf5a[_0x14ebf5],_0x2ed8bb=document['createElement'](_0x23f32e(0xf8));_0x2ed8bb[_0x23f32e(0xed)]=String(_0x54a0b5['setEmailCredentialsId']),_0x2ed8bb[_0x23f32e(0x122)]=_0x54a0b5['setEmailCredentialsSenderEmail'],_0x3a0d48[_0x23f32e(0x142)](_0x2ed8bb);}}_0x3a0d48[_0x23f32e(0xed)]=String(_0xb1b9f6);}}_0x1f1d24[_0x23f32e(0x142)](_0x3a0d48),_0x2649a1[_0x23f32e(0x142)](_0x1f1d24);}_0x258b69['appendChild'](_0x2649a1);var _0xe89535=document['createElement'](_0x23f32e(0xf3));_0xe89535[_0x23f32e(0xf6)]=_0x23f32e(0x158),_0xe89535[_0x23f32e(0x122)]=_0x23f32e(0x104),_0xe89535['dataset'][_0x23f32e(0x117)]=_0x32eed9;var _0x39647e=document[_0x23f32e(0x119)](_0x23f32e(0xf3));_0x39647e[_0x23f32e(0xf6)]=_0x23f32e(0x14a),_0x39647e[_0x23f32e(0x122)]=_0x23f32e(0xea),_0x39647e[_0x23f32e(0x14f)]['userIndex']=_0x32eed9,_0x39647e[_0x23f32e(0x131)][_0x23f32e(0x14b)]=_0x23f32e(0x125),_0x258b69[_0x23f32e(0x142)](_0xe89535),_0x258b69['appendChild'](_0x39647e),_0x3eff21[_0x23f32e(0x142)](_0x258b69),_0xe89535[_0x23f32e(0x144)](_0x23f32e(0x134),onEditClick),_0x39647e[_0x23f32e(0x144)]('click',onSaveClick);}}function onEditClick(_0x1368ee){var _0x50255c=_0x5c84,_0xcc4142=_0x1368ee[_0x50255c(0xfc)][_0x50255c(0x14f)][_0x50255c(0x117)],_0x4a87ef=document[_0x50255c(0x11d)](_0x50255c(0x12b)+_0xcc4142),_0x57ccf6=_0x4a87ef[_0x50255c(0x11e)](_0x50255c(0x11c));for(var _0x32a9a3=0x0;_0x32a9a3<_0x57ccf6[_0x50255c(0x130)];_0x32a9a3++){_0x57ccf6[_0x32a9a3][_0x50255c(0x10f)]=![];}_0x4a87ef[_0x50255c(0x157)](_0x50255c(0x138))[_0x50255c(0x131)][_0x50255c(0x14b)]='none',_0x4a87ef['querySelector'](_0x50255c(0xee))[_0x50255c(0x131)]['display']=_0x50255c(0x159),_0x4a87ef['className']='userPerm_container\x20border_orange';}async function onSaveClick(_0x5c2096){var _0xdcb2b2=_0x5c84,_0x4664b4=_0x5c2096[_0xdcb2b2(0xfc)][_0xdcb2b2(0x14f)][_0xdcb2b2(0x117)],_0x105c70=document[_0xdcb2b2(0x11d)](_0xdcb2b2(0x12b)+_0x4664b4),_0x1849d3=_0x105c70[_0xdcb2b2(0x11e)](_0xdcb2b2(0x127));for(var _0x327045=0x0;_0x327045<_0x1849d3['length'];_0x327045++){var _0x3e5dcf=_0x1849d3[_0x327045],_0x9e52a5=parseInt(_0x3e5dcf['dataset'][_0xdcb2b2(0x117)],0xa),_0x46800b=parseInt(_0x3e5dcf[_0xdcb2b2(0x14f)][_0xdcb2b2(0x10c)],0xa),_0x4d6ea8=company[0x0][_0xdcb2b2(0x10b)][_0x9e52a5]['setPermissions'][_0x46800b],_0xc4f6cf=_0x3e5dcf[_0xdcb2b2(0x11e)](_0xdcb2b2(0x11c))[0x0],_0x589a69=_0xc4f6cf[_0xdcb2b2(0xed)];_0x4d6ea8['setPermissionValue']=_0x589a69,_0xc4f6cf['disabled']=!![],company[0x0][_0xdcb2b2(0x10b)][_0x9e52a5][_0xdcb2b2(0x121)]=new Date();}const _0x3f154a=await createCartStore('');await saveCompanyToIndexedDB(company,_0x3f154a),_0x105c70[_0xdcb2b2(0x157)](_0xdcb2b2(0xee))['style'][_0xdcb2b2(0x14b)]=_0xdcb2b2(0x125),_0x105c70[_0xdcb2b2(0x157)](_0xdcb2b2(0x138))[_0xdcb2b2(0x131)][_0xdcb2b2(0x14b)]='inline-block',_0x105c70['className']=_0xdcb2b2(0x148),apiERPsyncUsers();}function generateOfflineOperationsTable(){var _0x30c266=_0x5c84,_0x3c4396=document[_0x30c266(0x11d)](_0x30c266(0x10d));return _0x3c4396[_0x30c266(0x12e)]='',createCartStore('')['then'](function(_0x41092d){var _0x467c2e=_0x30c266,_0x4d4aed=_0x41092d[_0x467c2e(0xfa)](_0x467c2e(0x102),'readonly'),_0x24f3e4=_0x4d4aed[_0x467c2e(0xf2)](_0x467c2e(0x102));return new Promise(function(_0x400a0a,_0x4811f5){var _0xb6384b=_0x467c2e,_0x4ccb75=_0x24f3e4['getAll']();_0x4ccb75['onsuccess']=function(){var _0x5527a3=_0x5c84;_0x400a0a(_0x4ccb75[_0x5527a3(0x116)]);},_0x4ccb75[_0xb6384b(0x118)]=function(){var _0x5fec03=_0xb6384b;_0x4811f5(_0x4ccb75[_0x5fec03(0x110)]);};});})[_0x30c266(0xff)](function(_0x32d896){var _0x2b1263=_0x30c266,_0x15e3cc=[];for(var _0x304046=0x0;_0x304046<_0x32d896[_0x2b1263(0x130)];_0x304046++){_0x32d896[_0x304046][_0x2b1263(0x153)]==0x1&&_0x15e3cc[_0x2b1263(0xfe)](_0x32d896[_0x304046]);}if(_0x15e3cc[_0x2b1263(0x130)]===0x0){_0x3c4396[_0x2b1263(0x122)]=_0x2b1263(0xfd);return;}var _0x1d007e=document[_0x2b1263(0x119)](_0x2b1263(0x105));_0x1d007e[_0x2b1263(0xf6)]=_0x2b1263(0xe9);var _0x5be90e=document[_0x2b1263(0x119)](_0x2b1263(0x107)),_0x1f1da9=document[_0x2b1263(0x119)]('tr');[_0x2b1263(0x15a),_0x2b1263(0x150),_0x2b1263(0x14c),'Fecha',_0x2b1263(0xe8)][_0x2b1263(0x11b)](function(_0x10fd6e){var _0x696ad6=_0x2b1263,_0x2f14c0=document[_0x696ad6(0x119)]('th');_0x2f14c0[_0x696ad6(0x122)]=_0x10fd6e,_0x1f1da9['appendChild'](_0x2f14c0);}),_0x5be90e[_0x2b1263(0x142)](_0x1f1da9),_0x1d007e['appendChild'](_0x5be90e);var _0xa8ec27=document[_0x2b1263(0x119)]('tbody');_0x15e3cc[_0x2b1263(0x11b)](function(_0x4c4e8d){var _0x165d28=_0x2b1263,_0x128473=document[_0x165d28(0x119)]('tr'),_0x474210=[_0x4c4e8d[_0x165d28(0x149)],_0x4c4e8d['setSerie'],_0x4c4e8d[_0x165d28(0x133)],_0x4c4e8d[_0x165d28(0x13a)],_0x4c4e8d[_0x165d28(0x103)]||''];_0x474210[_0x165d28(0x11b)](function(_0x5dbd56){var _0x16b128=_0x165d28,_0x54b64a=document[_0x16b128(0x119)]('td');_0x54b64a[_0x16b128(0x122)]=_0x5dbd56,_0x128473['appendChild'](_0x54b64a);}),_0xa8ec27['appendChild'](_0x128473);}),_0x1d007e['appendChild'](_0xa8ec27),_0x3c4396[_0x2b1263(0x142)](_0x1d007e);})[_0x30c266(0xfb)](function(_0x30fde0){var _0x5e9924=_0x30c266;console[_0x5e9924(0x110)](_0x5e9924(0x14e),_0x30fde0),_0x3c4396[_0x5e9924(0x122)]=_0x5e9924(0x143);});}window[_0x2d549c(0xe7)]=function(){var _0x1a8008=_0x2d549c;const _0x4f82fb=0x2;loadLoginContent(_0x1a8008(0xf5)),setUserNameGet(),setEventBtnAccess();const _0x5df549=document[_0x1a8008(0x157)]('.btn-logout');_0x5df549&&_0x5df549[_0x1a8008(0x144)](_0x1a8008(0x134),function(){logoutReload(0x0,_0x4f82fb);}),document[_0x1a8008(0x11d)]('setBranchId')['addEventListener'](_0x1a8008(0x132),async function(){var _0x268c39=_0x1a8008;const _0x23ba8b=parseInt(this['value']);company[0x0][_0x268c39(0x13b)]=_0x23ba8b;const _0x4d49df=await createCartStore('');await saveCompanyToIndexedDB(company,_0x4d49df),cargarAlmacenes(_0x23ba8b),setTimeout(()=>{var _0x173c82=_0x268c39;document[_0x173c82(0x11d)](_0x173c82(0x114))['dispatchEvent'](new Event(_0x173c82(0x132)));},0x64),cargarPisos(_0x23ba8b),setTimeout(()=>{var _0x5f427b=_0x268c39;document[_0x5f427b(0x11d)](_0x5f427b(0x128))[_0x5f427b(0xf9)](new Event(_0x5f427b(0x132)));},0x64),ntf_initNotifications();}),loadCartAndSetTabCount(_0x4f82fb);};
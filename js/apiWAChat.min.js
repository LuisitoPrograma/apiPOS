/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 5.2.3
*/

const _0x216e3b=_0x49c0;(function(_0x31c884,_0x3d2d00){const _0x450861=_0x49c0,_0x560ba9=_0x31c884();while(!![]){try{const _0x3bd74b=parseInt(_0x450861(0x1c7))/0x1*(parseInt(_0x450861(0x1e3))/0x2)+-parseInt(_0x450861(0x1d7))/0x3*(-parseInt(_0x450861(0x1f6))/0x4)+-parseInt(_0x450861(0x1f9))/0x5+parseInt(_0x450861(0x1d4))/0x6+-parseInt(_0x450861(0x1f3))/0x7+parseInt(_0x450861(0x1ff))/0x8*(parseInt(_0x450861(0x1ec))/0x9)+-parseInt(_0x450861(0x1e0))/0xa*(parseInt(_0x450861(0x1d5))/0xb);if(_0x3bd74b===_0x3d2d00)break;else _0x560ba9['push'](_0x560ba9['shift']());}catch(_0x378450){_0x560ba9['push'](_0x560ba9['shift']());}}}(_0x21fa,0xb28f4));const selectCredentialsApiWAChat=document['getElementById']('setCredentialsApiWAChat'),loginPanel=document[_0x216e3b(0x1df)](_0x216e3b(0x1db)),chatPanel=document[_0x216e3b(0x1df)](_0x216e3b(0x1d2)),qrImg=document[_0x216e3b(0x1df)](_0x216e3b(0x1ca)),overlay=document[_0x216e3b(0x1df)](_0x216e3b(0x1fe));let qrTimeout;function _0x21fa(){const _0x373fb0=['__proto__','length','display','36enmuNe','log','setAuthToken','exception','(((.+)+)+)+$','BranchChangeComplete','json','4002803mMzsJl','visibility','EnvironmentChangeComplete','4904HXjrmD','includes','/wa/','4387985ywJtqW','setCredentialsApiWAChatSubdomain','prototype','init','console','qr-overlay','609632BRoNyt','querySelector','constructor','setCredentialsApiWAChatStatus','{}.constructor(\x22return\x20this\x22)(\x20)','error','dispatchEvent','addEventListener','https://','none','Credenciales\x20no\x20encontradas','hidden','169311jFZqHx','/qr','ya\x20conectado','qr-img','click','WarehouseChangeComplete','reload','setFloorId','flex','status','value','chatPanel','style','110988JJjCHU','99iVhqvD','table','2979XjwAGF','apply','.btn-logout','setCredentialsApiWAChat','loginPanel','bind','warn','Error\x20al\x20validar\x20estado\x20despu√©s\x20de\x20expirar\x20QR:','getElementById','605670OVSoec','search','onload','14PpDBMS','change','info','toLowerCase','toString','setWarehouseId'];_0x21fa=function(){return _0x373fb0;};return _0x21fa();}const validSeconds=0xa;function _0x49c0(_0x282988,_0x2a2096){const _0xa2223=_0x21fa();return _0x49c0=function(_0x4045be,_0xa5d52d){_0x4045be=_0x4045be-0x1c4;let _0x3b7cbe=_0xa2223[_0x4045be];return _0x3b7cbe;},_0x49c0(_0x282988,_0x2a2096);}function showLogin(){const _0x3c26ba=_0x216e3b;loginPanel[_0x3c26ba(0x1d3)][_0x3c26ba(0x1eb)]='flex',chatPanel[_0x3c26ba(0x1d3)][_0x3c26ba(0x1f4)]=_0x3c26ba(0x1c6);}function showChat(){const _0x19c978=_0x216e3b;loginPanel[_0x19c978(0x1d3)][_0x19c978(0x1eb)]=_0x19c978(0x1c4),chatPanel[_0x19c978(0x1d3)][_0x19c978(0x1f4)]='visible';}async function initQRApiWAChat(_0x4a7f4f,_0x5b63eb){const _0x262aa5=_0x216e3b,_0x4208ed=(function(){let _0x36d8d9=!![];return function(_0x58c432,_0x4bba5e){const _0x52d396=_0x36d8d9?function(){const _0x3f8d96=_0x49c0;if(_0x4bba5e){const _0x1d65d7=_0x4bba5e[_0x3f8d96(0x1d8)](_0x58c432,arguments);return _0x4bba5e=null,_0x1d65d7;}}:function(){};return _0x36d8d9=![],_0x52d396;};}()),_0x7c3d17=_0x4208ed(this,function(){const _0x2d5aae=_0x49c0;return _0x7c3d17[_0x2d5aae(0x1e7)]()[_0x2d5aae(0x1e1)]('(((.+)+)+)+$')['toString']()[_0x2d5aae(0x201)](_0x7c3d17)[_0x2d5aae(0x1e1)](_0x2d5aae(0x1f0));});_0x7c3d17();const _0x156e2f=(function(){let _0x1b9077=!![];return function(_0x2823c2,_0x5b0959){const _0x390d3f=_0x1b9077?function(){const _0x2f587d=_0x49c0;if(_0x5b0959){const _0x1d4424=_0x5b0959[_0x2f587d(0x1d8)](_0x2823c2,arguments);return _0x5b0959=null,_0x1d4424;}}:function(){};return _0x1b9077=![],_0x390d3f;};}()),_0x5765f3=_0x156e2f(this,function(){const _0x2f45f6=_0x49c0,_0x18fdc4=function(){const _0x37a30e=_0x49c0;let _0x469583;try{_0x469583=Function('return\x20(function()\x20'+_0x37a30e(0x203)+');')();}catch(_0x6eb214){_0x469583=window;}return _0x469583;},_0x4f3a5f=_0x18fdc4(),_0x4280b4=_0x4f3a5f[_0x2f45f6(0x1fd)]=_0x4f3a5f[_0x2f45f6(0x1fd)]||{},_0x431eb1=[_0x2f45f6(0x1ed),_0x2f45f6(0x1dd),_0x2f45f6(0x1e5),_0x2f45f6(0x204),_0x2f45f6(0x1ef),_0x2f45f6(0x1d6),'trace'];for(let _0x20909d=0x0;_0x20909d<_0x431eb1[_0x2f45f6(0x1ea)];_0x20909d++){const _0x2286d4=_0x156e2f[_0x2f45f6(0x201)][_0x2f45f6(0x1fb)][_0x2f45f6(0x1dc)](_0x156e2f),_0x4455b8=_0x431eb1[_0x20909d],_0x3d93d8=_0x4280b4[_0x4455b8]||_0x2286d4;_0x2286d4[_0x2f45f6(0x1e9)]=_0x156e2f[_0x2f45f6(0x1dc)](_0x156e2f),_0x2286d4['toString']=_0x3d93d8[_0x2f45f6(0x1e7)][_0x2f45f6(0x1dc)](_0x3d93d8),_0x4280b4[_0x4455b8]=_0x2286d4;}});_0x5765f3();const _0x5a8add=selectCredentialsApiWAChat[_0x262aa5(0x1d1)],_0x10c38e=getCredentialsApiWAChat(_0x5a8add);if(!_0x10c38e){ntfShow(_0x262aa5(0x1c5));return;}const _0x1ceb55=_0x10c38e[_0x262aa5(0x1fa)],_0x269354=_0x10c38e['setCredentialsApiWAChatPort'];if(_0x4a7f4f==='display')clearTimeout(qrTimeout),overlay['style']['display']=_0x262aa5(0x1c4),qrImg['src']=_0x5b63eb,qrTimeout=setTimeout(async()=>{const _0x3f7b6b=_0x262aa5;try{const _0x3489cf=await fetch(_0x3f7b6b(0x207)+_0x1ceb55+'/wa/'+_0x269354+_0x3f7b6b(0x1c8),{'headers':{'x-auth-token':myCompany[_0x3f7b6b(0x1ee)]}}),_0x2ad131=await _0x3489cf[_0x3f7b6b(0x1f2)]();_0x2ad131[_0x3f7b6b(0x1d0)]&&_0x2ad131[_0x3f7b6b(0x1d0)][_0x3f7b6b(0x1e6)]()[_0x3f7b6b(0x1f7)]('ya\x20conectado')?(showChat(),_0x10c38e[_0x3f7b6b(0x202)]=0x1):(overlay[_0x3f7b6b(0x1d3)][_0x3f7b6b(0x1eb)]=_0x3f7b6b(0x1cf),_0x10c38e[_0x3f7b6b(0x202)]=0x0);const _0x2ec6ce=await createCartStore('');await saveCompanyToIndexedDB(company,_0x2ec6ce);}catch(_0x573c31){console['error'](_0x3f7b6b(0x1de),_0x573c31),overlay[_0x3f7b6b(0x1d3)]['display']=_0x3f7b6b(0x1cf);}},validSeconds*0x3e8);else{if(_0x4a7f4f===_0x262aa5(0x1fc))try{const _0x48e7aa=await fetch(_0x262aa5(0x207)+_0x1ceb55+_0x262aa5(0x1f8)+_0x269354+'/qr',{'headers':{'x-auth-token':myCompany[_0x262aa5(0x1ee)]}}),_0x1c465e=await _0x48e7aa['json']();if(_0x1c465e[_0x262aa5(0x1d0)]&&_0x1c465e['status']['toLowerCase']()[_0x262aa5(0x1f7)](_0x262aa5(0x1c9)))showChat(),_0x10c38e[_0x262aa5(0x202)]=0x1;else _0x1c465e['qr']&&(showLogin(),await initQRApiWAChat(_0x262aa5(0x1eb),_0x1c465e['qr']),_0x10c38e[_0x262aa5(0x202)]=0x0);const _0x4b0b75=await createCartStore('');await saveCompanyToIndexedDB(company,_0x4b0b75);}catch(_0x26e810){console['error'](_0x26e810);}}}overlay[_0x216e3b(0x206)]('click',()=>initQRApiWAChat(_0x216e3b(0x1fc))),window[_0x216e3b(0x1e2)]=function(){const _0x27f5c6=_0x216e3b,_0x58b247=0x4;loadLoginContent(),setUserNameGet(),setEventBtnAccess();const _0x11076f=document[_0x27f5c6(0x200)](_0x27f5c6(0x1d9));_0x11076f&&_0x11076f[_0x27f5c6(0x206)](_0x27f5c6(0x1cb),function(){logoutReload(0x0,_0x58b247);}),document[_0x27f5c6(0x1df)](_0x27f5c6(0x1da))[_0x27f5c6(0x206)](_0x27f5c6(0x1e4),async function(){const _0x2a4385=_0x27f5c6;saveCredentialsApiWAChatInCompany();const _0x3d4a59=await createCartStore('');await saveCompanyToIndexedDB(company,_0x3d4a59),location[_0x2a4385(0x1cd)]();}),document['getElementById']('setBranchId')['addEventListener'](_0x27f5c6(0x1e4),async function(){const _0x5e2e76=_0x27f5c6,_0x2692e0=parseInt(this['value']);myCompany['setBranchDefault']=_0x2692e0,saveCredentialsApiWAChatInCompany();const _0x43eaf5=await createCartStore('');await saveCompanyToIndexedDB(company,_0x43eaf5),await cargarPisos(_0x2692e0),await waitForEvent(_0x5e2e76(0x1ce),'EnvironmentChangeComplete'),await cargarAlmacenes(_0x2692e0),await waitForEvent('setWarehouseId',_0x5e2e76(0x1cc)),document[_0x5e2e76(0x205)](new Event(_0x5e2e76(0x1f1))),ntf_initNotifications();}),document[_0x27f5c6(0x1df)](_0x27f5c6(0x1e8))['addEventListener']('change',async function(){const _0x1b4e0b=_0x27f5c6;document[_0x1b4e0b(0x205)](new Event(_0x1b4e0b(0x1cc)));}),document[_0x27f5c6(0x1df)](_0x27f5c6(0x1ce))[_0x27f5c6(0x206)](_0x27f5c6(0x1e4),async function(_0x3d2f21){const _0xb486c2=_0x27f5c6;document[_0xb486c2(0x205)](new Event(_0xb486c2(0x1f5)));}),loadCartAndSetTabCount(_0x58b247);};
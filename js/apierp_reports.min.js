/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 5.0.6
*/

const _0x3b6aa0=_0x58a8;function _0x3f26(){const _0xee3213=['EnvironmentChangeComplete','input','1.5','filter-end','200px','./img/apiPOS.png','Comprobante','filter','setEmailCredentialsSenderName','\x2000:00:00','No\x20se\x20recibió\x20URL\x20del\x20archivo\x20subido.','setCredentialsApiWAChatStatus','isArray','createObjectURL','file','Notas','setBranchId','Op.\x20Inafectas','toLowerCase','entries','.fill_ms-selected-tags','console','warn','exportReport','add','No\x20hay\x20datos\x20para\x20exportar.','email','setDate','catch','tbody','tagName','.fill_ms-suggestions','none','setEmailCredentialsSenderEmail','1900924hNsJtP','500px','innerHTML','getFullYear','No\x20tiene\x20configuradas\x20sus\x20credenciales\x20Email.','8OxrRQA','block','toString','Mensaje(s)\x20enviado(s)\x20correctamente.','\x20-\x20','target','year','col','setWarehouseId','.fill_multi-filter[data-filter=\x22BranchesId\x22]','setCredentialsApiWAChatPort','appendChild','value','Error\x20WhatsApp\x20(export):','Error\x20convirtiendo\x20blob\x20a\x20base64:','prototype','getDay','splice','document','https://','/wa/','whatsapp','.fill_ms-input','preventDefault','display','indexOf','Despacho','day','exception','btnExportEmail','Subtotal','IGV','572171IrlTBS','json','length','split','width','date-range-options','setEmailCredentials','Op.\x20Gratuitas','Detracción','blur','(((.+)+)+)+$','createElement','getHours','lob_tbody','Usuario','contains','detalleModalOptions','getAttribute','Op.\x20Gravadas','150px','\x2023:59:59','btnExport','download','Percepción','./js/apierp_export_wk.min.js','Cliente','RVIE\x20','style','readAsDataURL','120px','1088264difiZa','filter-start','Window','964347iazpeK','Op.\x20Exoneradas','\x20<span\x20class=\x22fill_remove-tag\x22\x20data-id=\x22','querySelector','slice','text','Modo\x20de\x20exportación\x20desconocido:','getMonth','attrs','Moneda','de\x20la\x20semana\x20<i\x20class=\x22bi\x20bi-caret-down-fill\x20date-range-label-icon\x22\x20style=\x22color:\x20#FF5900;\x22></i>','Estado\x20Anexión','active','week','remove','Serie','BranchChangeComplete','Error\x20al\x20procesar\x20el\x20archivo\x20adjunto.','Total\x20Impuestos','Error\x20enviando\x20por\x20WhatsApp.','Zona','apply','bind','info','log','.btn-logout','Tipo\x20Cambio','Acciones','Unhandled\x20error\x20in\x20whatsapp\x20case:','postMessage','onerror','find','1466425PtBxkv','WarehouseChangeComplete','Condición','Estado\x20Despacho','Desc.\x20Items','No\x20tiene\x20números\x20configurados\x20para\x20las\x20notificaciones\x20de\x20WhatsApp.','BranchesId:','classList','Total','Fecha','date-range-label','Export\x20WK\x20Error:','onload','100%','then','closeModalOptions','dataset','setFloorId','Error\x20subiendo\x20archivo\x20a\x20S3','getMinutes','SUNAT','forEach','setEmailCredentialsPortSMTP','btn-filter-modal','change','addEventListener','span','message','100px','setAttribute','className','push','object','data-value','padStart','2922864RVAziX','Estado','href','constructor','report_table','setEmailCredentialsHostSMTP','No\x20tiene\x20correos\x20configurados\x20para\x20las\x20notificaciones.','setAuthToken','Vehículo','application/vnd.openxmlformats-officedocument.spreadsheetml.sheet','Desc.\x20Global','setBranches','scope','thead','17356199Gejmdo','textContent','Vendedor','stopPropagation','getElementById','setTipoOperaciones','currentTarget','\x22>&times;</span>','parentElement','modalOverlayOptions','setCredentialsApiWAChat','OperationsType:','error','click','exportDone','dispatchEvent','getDate','search'];_0x3f26=function(){return _0xee3213;};return _0x3f26();}(function(_0x40b348,_0xd0503f){const _0x4caade=_0x58a8,_0x360480=_0x40b348();while(!![]){try{const _0x769a21=-parseInt(_0x4caade(0x1c5))/0x1+-parseInt(_0x4caade(0x1e3))/0x2+-parseInt(_0x4caade(0x1e6))/0x3+-parseInt(_0x4caade(0x1a0))/0x4+parseInt(_0x4caade(0x206))/0x5+-parseInt(_0x4caade(0x229))/0x6+parseInt(_0x4caade(0x237))/0x7*(parseInt(_0x4caade(0x1a5))/0x8);if(_0x769a21===_0xd0503f)break;else _0x360480['push'](_0x360480['shift']());}catch(_0x3bc3fe){_0x360480['push'](_0x360480['shift']());}}}(_0x3f26,0x5af87));const _0x33e452=(function(){let _0x462962=!![];return function(_0x46e8b3,_0x273429){const _0x72678e=_0x462962?function(){const _0x143de6=_0x58a8;if(_0x273429){const _0x564299=_0x273429[_0x143de6(0x1fb)](_0x46e8b3,arguments);return _0x273429=null,_0x564299;}}:function(){};return _0x462962=![],_0x72678e;};}()),_0x155908=_0x33e452(this,function(){const _0x31e070=_0x58a8;return _0x155908[_0x31e070(0x1a7)]()[_0x31e070(0x248)](_0x31e070(0x1cf))[_0x31e070(0x1a7)]()['constructor'](_0x155908)[_0x31e070(0x248)](_0x31e070(0x1cf));});_0x155908();const _0x353c04=(function(){let _0x38a9f1=!![];return function(_0x4f3a98,_0x43a6fc){const _0x2129d2=_0x38a9f1?function(){const _0x5b1442=_0x58a8;if(_0x43a6fc){const _0x12cfb1=_0x43a6fc[_0x5b1442(0x1fb)](_0x4f3a98,arguments);return _0x43a6fc=null,_0x12cfb1;}}:function(){};return _0x38a9f1=![],_0x2129d2;};}()),_0x32bace=_0x353c04(this,function(){const _0x34a297=_0x58a8,_0x291f98=function(){let _0x1d2fed;try{_0x1d2fed=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x166825){_0x1d2fed=window;}return _0x1d2fed;},_0x473764=_0x291f98(),_0x1b0965=_0x473764[_0x34a297(0x193)]=_0x473764['console']||{},_0x27d3fe=[_0x34a297(0x1fe),_0x34a297(0x194),_0x34a297(0x1fd),_0x34a297(0x243),_0x34a297(0x1c1),'table','trace'];for(let _0x48da08=0x0;_0x48da08<_0x27d3fe[_0x34a297(0x1c7)];_0x48da08++){const _0x5a00b4=_0x353c04[_0x34a297(0x22c)][_0x34a297(0x1b4)][_0x34a297(0x1fc)](_0x353c04),_0x1eb5dd=_0x27d3fe[_0x48da08],_0x12d9cd=_0x1b0965[_0x1eb5dd]||_0x5a00b4;_0x5a00b4['__proto__']=_0x353c04['bind'](_0x353c04),_0x5a00b4[_0x34a297(0x1a7)]=_0x12d9cd['toString'][_0x34a297(0x1fc)](_0x12d9cd),_0x1b0965[_0x1eb5dd]=_0x5a00b4;}});_0x32bace();const fil_init_dates=document[_0x3b6aa0(0x23b)]('date-range-label-icon'),label=document[_0x3b6aa0(0x23b)](_0x3b6aa0(0x210)),options=document[_0x3b6aa0(0x23b)](_0x3b6aa0(0x1ca));function _0x58a8(_0x51cc62,_0x27ac24){const _0x3393bb=_0x3f26();return _0x58a8=function(_0x32bace,_0x353c04){_0x32bace=_0x32bace-0x185;let _0x4a2ba8=_0x3393bb[_0x32bace];return _0x4a2ba8;},_0x58a8(_0x51cc62,_0x27ac24);}document[_0x3b6aa0(0x23b)](_0x3b6aa0(0x21d))['addEventListener'](_0x3b6aa0(0x244),_0xe78d43=>{showModalOptions();});function showModalOptions(){const _0x5d26d3=_0x3b6aa0,_0x409204=document[_0x5d26d3(0x23b)](_0x5d26d3(0x1d5)),_0x290694=document[_0x5d26d3(0x23b)](_0x5d26d3(0x240));_0x409204[_0x5d26d3(0x20d)][_0x5d26d3(0x196)](_0x5d26d3(0x1f2)),_0x290694[_0x5d26d3(0x1e0)][_0x5d26d3(0x1bd)]=_0x5d26d3(0x1a6);}function hideModalOptions(){const _0x4860a3=_0x3b6aa0,_0x28353d=document['getElementById'](_0x4860a3(0x1d5)),_0x48b525=document[_0x4860a3(0x23b)]('modalOverlayOptions');_0x28353d['classList'][_0x4860a3(0x1f4)]('active'),_0x48b525['style'][_0x4860a3(0x1bd)]=_0x4860a3(0x19e);}document[_0x3b6aa0(0x23b)](_0x3b6aa0(0x215))[_0x3b6aa0(0x21f)](_0x3b6aa0(0x244),hideModalOptions),document[_0x3b6aa0(0x23b)]('modalOverlayOptions')[_0x3b6aa0(0x21f)](_0x3b6aa0(0x244),_0x291e2a=>{const _0x5410db=_0x3b6aa0;_0x291e2a[_0x5410db(0x1aa)]==_0x291e2a[_0x5410db(0x23d)]&&_0x291e2a[_0x5410db(0x23a)]();});function fill_initMultiSelect({containerSelector:_0x273c8d,dataSource:_0x3a6f00,mapItem:_0x51e557,filterArray:_0x1850b9}){const _0x2f2d98=_0x3b6aa0,_0x3a55da=document[_0x2f2d98(0x1e9)](_0x273c8d),_0x42e9eb=_0x3a55da['querySelector'](_0x2f2d98(0x1bb)),_0x42c0bc=_0x3a55da['querySelector'](_0x2f2d98(0x19d)),_0x231a58=_0x3a55da[_0x2f2d98(0x1e9)](_0x2f2d98(0x192));function _0x1c7477(){const _0x3c9b78=_0x2f2d98,_0x383d5e=_0x42e9eb[_0x3c9b78(0x1b1)]['trim']()[_0x3c9b78(0x190)]();_0x42c0bc[_0x3c9b78(0x1a2)]='';if(!_0x383d5e)return;const _0x51cd85=_0x3a6f00[_0x3c9b78(0x185)](_0xc66637=>{const _0x1682a4=_0x3c9b78,{id:_0x2b7bd0,text:_0x1b3b87}=_0x51e557(_0xc66637);return _0x1b3b87[_0x1682a4(0x190)]()['includes'](_0x383d5e)&&!_0x1850b9['includes'](_0x2b7bd0);})['slice'](0x0,0xa);_0x51cd85['forEach'](_0x62b57b=>{const _0x4fde3f=_0x3c9b78,{id:_0x50f938,text:_0x3e80bc}=_0x51e557(_0x62b57b),_0x1191b=document[_0x4fde3f(0x1d0)]('li');_0x1191b[_0x4fde3f(0x238)]=_0x3e80bc,_0x1191b[_0x4fde3f(0x216)]['id']=_0x50f938,_0x42c0bc[_0x4fde3f(0x1b0)](_0x1191b);});}function _0x2061d9(_0x4f6a26,_0x1f42d6){const _0x55d6d6=_0x2f2d98;_0x1850b9[_0x55d6d6(0x225)](_0x4f6a26);const _0x1237a0=document[_0x55d6d6(0x1d0)](_0x55d6d6(0x220));_0x1237a0[_0x55d6d6(0x224)]='fill_ms-tag',_0x1237a0[_0x55d6d6(0x1a2)]=_0x1f42d6+_0x55d6d6(0x1e8)+_0x4f6a26+_0x55d6d6(0x23e),_0x231a58['appendChild'](_0x1237a0);}_0x42c0bc[_0x2f2d98(0x21f)]('mousedown',_0x5d2048=>{const _0x1ec8b0=_0x2f2d98;if(_0x5d2048[_0x1ec8b0(0x1aa)][_0x1ec8b0(0x19c)]!=='LI')return;const _0xddbe9a=Number(_0x5d2048['target'][_0x1ec8b0(0x216)]['id']),_0x3d1d83=_0x5d2048[_0x1ec8b0(0x1aa)][_0x1ec8b0(0x238)];_0x2061d9(_0xddbe9a,_0x3d1d83),_0x42e9eb['value']='',_0x42c0bc[_0x1ec8b0(0x1a2)]='',_0x5d2048['preventDefault']();}),_0x231a58['addEventListener'](_0x2f2d98(0x244),_0x4a497d=>{const _0x4c1e65=_0x2f2d98;if(!_0x4a497d['target']['classList'][_0x4c1e65(0x1d4)]('fill_remove-tag'))return;const _0x124cf4=parseInt(_0x4a497d[_0x4c1e65(0x1aa)]['dataset']['id'],0xa),_0x4340f6=_0x1850b9[_0x4c1e65(0x1be)](_0x124cf4);if(_0x4340f6>-0x1)_0x1850b9[_0x4c1e65(0x1b6)](_0x4340f6,0x1);_0x4a497d[_0x4c1e65(0x1aa)][_0x4c1e65(0x23f)]['remove']();}),_0x42e9eb[_0x2f2d98(0x21f)](_0x2f2d98(0x24a),_0x1c7477),_0x42e9eb[_0x2f2d98(0x21f)](_0x2f2d98(0x1ce),()=>{setTimeout(()=>{const _0xda8eae=_0x58a8;!_0x3a55da[_0xda8eae(0x1d4)](document['activeElement'])&&(_0x42c0bc[_0xda8eae(0x1a2)]='');},0x64);});}document['getElementById']('fill-apply-filter')[_0x3b6aa0(0x21f)]('click',async()=>{const _0x1cf9a7=_0x3b6aa0,_0x224800=document[_0x1cf9a7(0x23b)](_0x1cf9a7(0x1e4))['value'],_0x2d935b=document['getElementById'](_0x1cf9a7(0x24c))[_0x1cf9a7(0x1b1)];if(!_0x224800||!_0x2d935b)return alert('Selecciona\x20ambas\x20fechas');hideModalOptions(),fil_date_start=_0x224800+_0x1cf9a7(0x187),fil_date_end=_0x2d935b+_0x1cf9a7(0x1d9),console['log']('CustomersId:',fil_CustomersId),console[_0x1cf9a7(0x1fe)](_0x1cf9a7(0x242),fil_OperationsType),console['log'](_0x1cf9a7(0x20c),fil_BranchesId),consultReport(report_type,_0x1cf9a7(0x213),'500px','100%','500px',_0x1cf9a7(0x213),_0x1cf9a7(0x1a1));}),label[_0x3b6aa0(0x21f)](_0x3b6aa0(0x244),()=>{const _0x284602=_0x3b6aa0;options['style'][_0x284602(0x1bd)]=options[_0x284602(0x1e0)][_0x284602(0x1bd)]===_0x284602(0x19e)?_0x284602(0x1a6):_0x284602(0x19e);}),options[_0x3b6aa0(0x21f)](_0x3b6aa0(0x244),_0x38eb94=>{const _0x4c5aa0=_0x3b6aa0;if(_0x38eb94['target']&&_0x38eb94[_0x4c5aa0(0x1aa)][_0x4c5aa0(0x19c)]==='LI'){const _0x5d0ac5=_0x38eb94[_0x4c5aa0(0x1aa)][_0x4c5aa0(0x1d6)](_0x4c5aa0(0x227));updateDateRange(_0x5d0ac5),options[_0x4c5aa0(0x1e0)][_0x4c5aa0(0x1bd)]=_0x4c5aa0(0x19e);}}),document[_0x3b6aa0(0x21f)](_0x3b6aa0(0x244),_0x1bd4a6=>{const _0x5a98c7=_0x3b6aa0;!label[_0x5a98c7(0x1d4)](_0x1bd4a6['target'])&&!options[_0x5a98c7(0x1d4)](_0x1bd4a6['target'])&&(options[_0x5a98c7(0x1e0)][_0x5a98c7(0x1bd)]=_0x5a98c7(0x19e));});function formatDateToYmdHis(_0x4146cb){const _0x45e150=_0x3b6aa0,_0x386cf3=_0x4146cb[_0x45e150(0x1a3)](),_0x17b0cf=String(_0x4146cb[_0x45e150(0x1ed)]()+0x1)[_0x45e150(0x228)](0x2,'0'),_0x318557=String(_0x4146cb[_0x45e150(0x247)]())[_0x45e150(0x228)](0x2,'0'),_0x486c6b=String(_0x4146cb[_0x45e150(0x1d1)]())[_0x45e150(0x228)](0x2,'0'),_0x4da01c=String(_0x4146cb[_0x45e150(0x219)]())['padStart'](0x2,'0'),_0x48d068=String(_0x4146cb['getSeconds']())[_0x45e150(0x228)](0x2,'0');return _0x386cf3+'-'+_0x17b0cf+'-'+_0x318557+'\x20'+_0x486c6b+':'+_0x4da01c+':'+_0x48d068;}function getDateRange(_0x10c360){const _0x2277bf=_0x3b6aa0,_0x3bb451=new Date();let _0x1a939d,_0x2684af;switch(_0x10c360){case _0x2277bf(0x1c0):_0x1a939d=new Date(_0x3bb451['getFullYear'](),_0x3bb451[_0x2277bf(0x1ed)](),_0x3bb451[_0x2277bf(0x247)](),0x0,0x0,0x0),_0x2684af=new Date(_0x3bb451[_0x2277bf(0x1a3)](),_0x3bb451[_0x2277bf(0x1ed)](),_0x3bb451[_0x2277bf(0x247)](),0x17,0x3b,0x3b),label[_0x2277bf(0x1a2)]='del\x20día\x20<i\x20class=\x22bi\x20bi-caret-down-fill\x20date-range-label-icon\x22\x20style=\x22color:\x20#FF5900;\x22></i>';break;case _0x2277bf(0x1f3):const _0x2e3044=_0x3bb451[_0x2277bf(0x1b5)](),_0x7906b0=new Date(_0x3bb451);_0x7906b0[_0x2277bf(0x199)](_0x3bb451[_0x2277bf(0x247)]()-_0x2e3044+(_0x2e3044===0x0?-0x6:0x1));const _0x1a54de=new Date(_0x7906b0);_0x1a54de['setDate'](_0x7906b0['getDate']()+0x6),_0x1a939d=new Date(_0x7906b0[_0x2277bf(0x1a3)](),_0x7906b0[_0x2277bf(0x1ed)](),_0x7906b0['getDate'](),0x0,0x0,0x0),_0x2684af=new Date(_0x1a54de['getFullYear'](),_0x1a54de['getMonth'](),_0x1a54de[_0x2277bf(0x247)](),0x17,0x3b,0x3b),label['innerHTML']=_0x2277bf(0x1f0);break;case'month':_0x1a939d=new Date(_0x3bb451[_0x2277bf(0x1a3)](),_0x3bb451['getMonth'](),0x1,0x0,0x0,0x0),_0x2684af=new Date(_0x3bb451[_0x2277bf(0x1a3)](),_0x3bb451['getMonth']()+0x1,0x0,0x17,0x3b,0x3b),label[_0x2277bf(0x1a2)]='del\x20mes\x20<i\x20class=\x22bi\x20bi-caret-down-fill\x20date-range-label-icon\x22\x20style=\x22color:\x20#FF5900;\x22></i>';break;case _0x2277bf(0x1ab):_0x1a939d=new Date(_0x3bb451[_0x2277bf(0x1a3)](),0x0,0x1,0x0,0x0,0x0),_0x2684af=new Date(_0x3bb451['getFullYear'](),0xb,0x1f,0x17,0x3b,0x3b),label[_0x2277bf(0x1a2)]='del\x20año\x20<i\x20class=\x22bi\x20bi-caret-down-fill\x20date-range-label-icon\x22\x20style=\x22color:\x20#FF5900;\x22></i>';break;default:label[_0x2277bf(0x1a2)]='';throw new Error('Invalid\x20range\x20type');}return{'startDateFormatted':formatDateToYmdHis(_0x1a939d),'endDateFormatted':formatDateToYmdHis(_0x2684af)};}function updateDateRange(_0x287bb2=_0x3b6aa0(0x1c0)){const _0x1eba55=_0x3b6aa0;if(_0x287bb2=='filtrar'){}else{const {startDateFormatted:_0x1c41f3,endDateFormatted:_0xb24622}=getDateRange(_0x287bb2);fil_date_start=_0x1c41f3,fil_date_end=_0xb24622,consultReport(report_type,_0x1eba55(0x213),'500px',_0x1eba55(0x213),_0x1eba55(0x1a1),_0x1eba55(0x213),'500px');}}function buildIncomePayloads(_0x5dfe92){return _0x5dfe92;}async function setOptionsReport(_0x48b198){const _0x1765ac=_0x3b6aa0,_0x47bf18=arrayOperations['find'](_0x27d425=>_0x27d425['setOperationId']==_0x48b198);if(!_0x47bf18){console['error']('Operación\x20no\x20encontrada.');return;}const [_0x4765d6]=buildIncomePayloads([_0x47bf18]);console[_0x1765ac(0x1fe)](_0x4765d6);try{const {pdfBlob:_0x52352f,pdfName:_0x41f771}=await generatePdf(_0x4765d6,'tk','pdfCanvas',_0x1765ac(0x24b)),_0x94573d=0x1;setLastOperationGlobalData(_0x94573d,{'pdfGlobalPayload':_0x4765d6,'pdfGlobalBlob':_0x52352f,'pdfGlobalName':_0x41f771}),showModal();}catch(_0x2704c4){console[_0x1765ac(0x243)]('Error\x20generando\x20PDF:',_0x2704c4);}}let currentExportMode=_0x3b6aa0(0x1db);const reportWorker=new Worker(_0x3b6aa0(0x1dd));reportWorker['onmessage']=({data:_0x5d3d4a})=>{const _0x29e73b=_0x3b6aa0,{type:_0x2ec718,payload:_0x2e47a5,reportType:_0x5349cb}=_0x5d3d4a;if(_0x2ec718===_0x29e73b(0x245)){const _0xe917a2=new Blob([_0x2e47a5],{'type':'application/octet-stream'}),_0x1a270=new Date()['toISOString']()[_0x29e73b(0x1ea)](0x0,0xa),_0x1e89ec=_0x5349cb+'_'+_0x1a270+'.xlsx',_0x49647a=_0x3dcfcb=>new Promise((_0x13da1e,_0x36ab16)=>{const _0x21765a=_0x29e73b,_0x587841=new FileReader();_0x587841[_0x21765a(0x204)]=()=>_0x36ab16(_0x587841['error']),_0x587841['onload']=()=>_0x13da1e(_0x587841['result'][_0x21765a(0x1c8)](',')[0x1]),_0x587841[_0x21765a(0x1e1)](_0x3dcfcb);});switch(currentExportMode){case _0x29e73b(0x1db):{const _0x5abb9f=URL[_0x29e73b(0x18b)](_0xe917a2),_0x4d13ed=document['createElement']('a');_0x4d13ed[_0x29e73b(0x22b)]=_0x5abb9f,_0x4d13ed[_0x29e73b(0x1db)]=_0x1e89ec,_0x4d13ed[_0x29e73b(0x244)](),URL['revokeObjectURL'](_0x5abb9f);}break;case _0x29e73b(0x1ba):{(async()=>{const _0x12289b=_0x29e73b,_0x2d7fd3=getWhatsappsFromCompanyNotifications();if(_0x2d7fd3['length']===0x0){ntfShow(_0x12289b(0x20b),0x2,0x1);return;}try{showLoadingModal();const _0x42b9ec=parseInt(getUserPermissionApiERP(0x19)),_0xe29498=_0x42b9ec!=0x0?_0x42b9ec:document[_0x12289b(0x23b)]('setCredentialsApiWAChat')?parseInt(document[_0x12289b(0x23b)](_0x12289b(0x241))['value'],0xa):_0x42b9ec,_0x11b6d2=getCredentialsApiWAChat(_0xe29498),_0x21ac0a=_0x11b6d2?.[_0x12289b(0x189)]??0x0;if(!(_0x21ac0a==0x1&&_0x11b6d2)){ntfShow('No\x20tiene\x20una\x20integración\x20activa\x20con\x20Whatsapp.',0x1,0x2),hideLoadingModal();return;}const _0x3fed73=_0x11b6d2['setCredentialsApiWAChatSubdomain'],_0x2d29c6=_0x11b6d2[_0x12289b(0x1af)],_0x396432=_0x12289b(0x1b8)+_0x3fed73+_0x12289b(0x1b9)+_0x2d29c6,_0x41d499=new FormData(),_0x1a74da=new File([_0xe917a2],_0x1e89ec,{'type':_0x12289b(0x232)});_0x41d499['append'](_0x12289b(0x18c),_0x1a74da);const _0x54b446=await fetch(_0x396432+'/upload',{'method':'POST','headers':{'x-auth-token':myCompany[_0x12289b(0x230)]},'body':_0x41d499});if(!_0x54b446['ok']){const _0x5151d6=await _0x54b446[_0x12289b(0x1c6)]()['catch'](()=>({}));throw new Error(_0x5151d6['error']||_0x12289b(0x218));}const {url:_0x3992e5}=await _0x54b446['json']();if(!_0x3992e5)throw new Error(_0x12289b(0x188));for(const _0x2233f9 of _0x2d7fd3){const _0x46b4e3=_0x2233f9+'@s.whatsapp.net';await sendMessageApiWAChat(_0xe29498,_0x46b4e3,_0x12289b(0x1b7),_0x3992e5,'',_0x1e89ec,_0x12289b(0x232));}ntfShow(_0x12289b(0x1a8),0x1,0x2);}catch(_0x305608){console[_0x12289b(0x243)](_0x12289b(0x1b2),_0x305608),ntfShow(_0x305608[_0x12289b(0x221)]||_0x12289b(0x1f9),0x2,0x1);}finally{hideLoadingModal();}})()[_0x29e73b(0x19a)](_0x269acc=>{const _0x3fa5bf=_0x29e73b;console[_0x3fa5bf(0x243)](_0x3fa5bf(0x202),_0x269acc),ntfShow('Error\x20interno\x20al\x20enviar\x20por\x20WhatsApp.',0x2,0x1),hideLoadingModal();});}break;case _0x29e73b(0x198):{_0x49647a(_0xe917a2)[_0x29e73b(0x214)](async _0x56fd60=>{const _0x1bb17d=_0x29e73b,_0x559555=getEmailsFromCompanyNotifications();if(_0x559555[_0x1bb17d(0x1c7)]===0x0){ntfShow(_0x1bb17d(0x22f),0x2,0x1);return;}const _0x2704e6=parseInt(getUserPermissionApiERP(0x12)),_0x47ec23=Array[_0x1bb17d(0x18a)](myCompany[_0x1bb17d(0x1cb)])?myCompany['setEmailCredentials'][_0x1bb17d(0x205)](_0x42401f=>_0x42401f['setEmailCredentialsId']==_0x2704e6):null;if(!_0x47ec23){ntfShow(_0x1bb17d(0x1a4),0x2,0x1);return;}const _0x189f7b=_0x47ec23[_0x1bb17d(0x186)],_0x5b5f63=_0x47ec23[_0x1bb17d(0x19f)],_0x2b3d76=_0x47ec23['setEmailCredentialsSenderPassword'],_0x3d2fc0=_0x47ec23[_0x1bb17d(0x22e)],_0x581809=_0x47ec23[_0x1bb17d(0x21c)],_0x3d67b1='Reporte\x20'+_0x5349cb+_0x1bb17d(0x1a9)+_0x1a270,_0x5f454f='Adjunto\x20encontrarás\x20el\x20reporte\x20solicitado.',_0xbc09f8=[{'fileName':_0x1e89ec,'fileBase64':_0x56fd60}];try{showLoadingModal(),await sendEmail(myCompany[_0x1bb17d(0x230)],_0x189f7b,_0x5b5f63,_0x2b3d76,_0x3d2fc0,_0x581809,_0x559555,_0x3d67b1,_0x5f454f,_0xbc09f8),hideLoadingModal(),ntfShow('Email(s)\x20enviado(s)\x20correctamente.',0x1,0x2);}catch(_0x108af4){console['error']('Error\x20enviando\x20email\x20con\x20excel:',_0x108af4),hideLoadingModal(),ntfShow('Error\x20interno\x20al\x20preparar\x20o\x20enviar\x20el\x20email.',0x2,0x1);}})[_0x29e73b(0x19a)](_0x267c35=>{const _0x2f489b=_0x29e73b;console['error'](_0x2f489b(0x1b3),_0x267c35),ntfShow(_0x2f489b(0x1f7),0x2,0x1);});}break;default:console[_0x29e73b(0x243)](_0x29e73b(0x1ec),currentExportMode);}}_0x2ec718===_0x29e73b(0x243)&&(console[_0x29e73b(0x243)](_0x29e73b(0x211),_0x2e47a5),ntfShow('Error\x20al\x20exportar.'));},document['getElementById'](_0x3b6aa0(0x1da))[_0x3b6aa0(0x21f)](_0x3b6aa0(0x244),_0x4c0913=>{const _0x3e5b2f=_0x3b6aa0;_0x4c0913[_0x3e5b2f(0x1bc)](),onClickExport(_0x3e5b2f(0x1db));}),document[_0x3b6aa0(0x23b)](_0x3b6aa0(0x1c2))[_0x3b6aa0(0x21f)](_0x3b6aa0(0x244),_0x3df5d6=>{const _0x249680=_0x3b6aa0;_0x3df5d6['preventDefault'](),onClickExport(_0x249680(0x198));}),document[_0x3b6aa0(0x23b)]('btnExportWhatsapp')[_0x3b6aa0(0x21f)](_0x3b6aa0(0x244),_0x5ddb53=>{const _0x5dbb0b=_0x3b6aa0;_0x5ddb53['preventDefault'](),onClickExport(_0x5dbb0b(0x1ba));});function onClickExport(_0x26005a='download'){const _0x43428e=_0x3b6aa0;if(!Array[_0x43428e(0x18a)](arrayOperations)||!arrayOperations['length'])return ntfShow(_0x43428e(0x197),0x2,0x1);currentExportMode=_0x26005a,reportWorker[_0x43428e(0x203)]({'action':_0x43428e(0x195),'reportType':report_type,'report':arrayOperations});}function loadReportDinamic(_0x3f7393){const _0x47c2b2=_0x3b6aa0,_0xc53d41=document['getElementById']('report_title'),_0xc3bfa4=document[_0x47c2b2(0x23b)](_0x47c2b2(0x22d));if(_0x3f7393==0x64||_0x3f7393==0x67){_0x3f7393==0x64&&(_0xc53d41[_0x47c2b2(0x1a2)]='Ventas\x20');_0x3f7393==0x67&&(_0xc53d41[_0x47c2b2(0x1a2)]='Cotizaciones\x20');fill_initMultiSelect({'containerSelector':'.fill_multi-filter[data-filter=\x22CustomersId\x22]','dataSource':myCompany['setCustomers'],'mapItem':({setCustomerId:_0x267949,setCustomerName:_0x1844a0})=>({'id':_0x267949,'text':_0x1844a0}),'filterArray':fil_CustomersId}),fill_initMultiSelect({'containerSelector':'.fill_multi-filter[data-filter=\x22OperationsType\x22]','dataSource':myCompany[_0x47c2b2(0x23c)],'mapItem':({setTipoOperacionCodigo:_0x53fcb9,setTipoOperacionName:_0x91eb82})=>({'id':_0x53fcb9,'text':_0x91eb82}),'filterArray':fil_OperationsType}),fill_initMultiSelect({'containerSelector':_0x47c2b2(0x1ae),'dataSource':myCompany[_0x47c2b2(0x234)],'mapItem':({setBranchId:_0x30be7b,setBranchName:_0x18b5f3})=>({'id':_0x30be7b,'text':_0x18b5f3}),'filterArray':fil_BranchesId});let _0x11193a;_0x3f7393==0x64&&(_0x11193a=[{'text':'Comprobante','width':_0x47c2b2(0x222)},{'text':_0x47c2b2(0x1f5),'width':_0x47c2b2(0x222)},{'text':'Fecha','width':'150px'},{'text':_0x47c2b2(0x1de),'width':'200px'},{'text':_0x47c2b2(0x208),'width':_0x47c2b2(0x222)},{'text':_0x47c2b2(0x22a),'width':_0x47c2b2(0x222)},{'text':_0x47c2b2(0x21a),'width':_0x47c2b2(0x222)},{'text':_0x47c2b2(0x231),'width':'100px'},{'text':'Vendedor','width':_0x47c2b2(0x222)},{'text':_0x47c2b2(0x1d3),'width':_0x47c2b2(0x222)},{'text':_0x47c2b2(0x1e5),'width':_0x47c2b2(0x222)},{'text':_0x47c2b2(0x1bf),'width':_0x47c2b2(0x1e2)},{'text':_0x47c2b2(0x209),'width':_0x47c2b2(0x1e2)},{'text':'Almacén','width':'120px'},{'text':_0x47c2b2(0x1fa),'width':'120px'},{'text':_0x47c2b2(0x18d),'width':'100px'},{'text':_0x47c2b2(0x1ef),'width':_0x47c2b2(0x1e2)},{'text':_0x47c2b2(0x200),'width':'120px'},{'text':_0x47c2b2(0x233),'width':_0x47c2b2(0x222)},{'text':_0x47c2b2(0x20a),'width':'100px'},{'text':_0x47c2b2(0x1cd),'width':_0x47c2b2(0x222)},{'text':'Retención','width':'100px'},{'text':_0x47c2b2(0x1dc),'width':_0x47c2b2(0x222)},{'text':_0x47c2b2(0x1d7),'width':_0x47c2b2(0x222)},{'text':'Op.\x20Exoneradas','width':_0x47c2b2(0x222)},{'text':_0x47c2b2(0x18f),'width':_0x47c2b2(0x222)},{'text':_0x47c2b2(0x1cc),'width':_0x47c2b2(0x222)},{'text':'IGV','width':_0x47c2b2(0x222)},{'text':'IGV\x20Gratuitas','width':_0x47c2b2(0x222)},{'text':_0x47c2b2(0x1f8),'width':_0x47c2b2(0x222)},{'text':_0x47c2b2(0x1c3),'width':_0x47c2b2(0x222)},{'text':_0x47c2b2(0x20e),'width':_0x47c2b2(0x1e2)},{'text':_0x47c2b2(0x201),'width':'120px'}]);_0x3f7393==0x67&&(_0x11193a=[{'text':_0x47c2b2(0x24f),'width':'100px'},{'text':_0x47c2b2(0x1f5),'width':_0x47c2b2(0x222)},{'text':_0x47c2b2(0x20f),'width':_0x47c2b2(0x1d8)},{'text':'Fecha\x20Vencimiento','width':_0x47c2b2(0x1d8)},{'text':_0x47c2b2(0x1de),'width':'200px'},{'text':'Condición','width':_0x47c2b2(0x222)},{'text':_0x47c2b2(0x1f1),'width':_0x47c2b2(0x222)},{'text':_0x47c2b2(0x231),'width':_0x47c2b2(0x222)},{'text':_0x47c2b2(0x239),'width':_0x47c2b2(0x222)},{'text':'Usuario','width':_0x47c2b2(0x222)},{'text':'Window','width':_0x47c2b2(0x222)},{'text':_0x47c2b2(0x1fa),'width':_0x47c2b2(0x1e2)},{'text':'Notas','width':_0x47c2b2(0x222)},{'text':'Moneda','width':_0x47c2b2(0x1e2)},{'text':'Desc.\x20Global','width':_0x47c2b2(0x222)},{'text':'Desc.\x20Items','width':_0x47c2b2(0x222)},{'text':_0x47c2b2(0x1d7),'width':'100px'},{'text':_0x47c2b2(0x1e7),'width':'100px'},{'text':_0x47c2b2(0x18f),'width':'100px'},{'text':'Op.\x20Gratuitas','width':'100px'},{'text':_0x47c2b2(0x1c4),'width':_0x47c2b2(0x222)},{'text':'IGV\x20Gratuitas','width':_0x47c2b2(0x222)},{'text':_0x47c2b2(0x1f8),'width':_0x47c2b2(0x222)},{'text':'Subtotal','width':_0x47c2b2(0x222)},{'text':_0x47c2b2(0x20e),'width':_0x47c2b2(0x1e2)},{'text':_0x47c2b2(0x201),'width':_0x47c2b2(0x1e2)}]);const _0x108267=document[_0x47c2b2(0x1d0)](_0x47c2b2(0x236)),_0xf6d574=document['createElement']('tr'),_0x5c6cdf=document['createDocumentFragment']();_0x11193a[_0x47c2b2(0x21b)](_0x303e31=>{const _0x48ebf7=_0x47c2b2,_0x4f98cd=document[_0x48ebf7(0x1d0)]('th');if(typeof _0x303e31==='string')_0x4f98cd[_0x48ebf7(0x238)]=_0x303e31;else{_0x4f98cd['textContent']=_0x303e31[_0x48ebf7(0x1eb)]||'';if(_0x303e31[_0x48ebf7(0x1c9)])_0x4f98cd[_0x48ebf7(0x1e0)][_0x48ebf7(0x1c9)]=_0x303e31[_0x48ebf7(0x1c9)];_0x303e31['attrs']&&typeof _0x303e31[_0x48ebf7(0x1ee)]===_0x48ebf7(0x226)&&Object[_0x48ebf7(0x191)](_0x303e31[_0x48ebf7(0x1ee)])[_0x48ebf7(0x21b)](([_0x2f815c,_0x110ce7])=>_0x4f98cd[_0x48ebf7(0x223)](_0x2f815c,_0x110ce7));}_0x4f98cd[_0x48ebf7(0x223)]('scope',_0x48ebf7(0x1ac)),_0x5c6cdf['appendChild'](_0x4f98cd);}),_0xf6d574[_0x47c2b2(0x1b0)](_0x5c6cdf),_0x108267[_0x47c2b2(0x1b0)](_0xf6d574),_0xc3bfa4[_0x47c2b2(0x1b0)](_0x108267);const _0x2f646e=document[_0x47c2b2(0x1d0)]('tbody');_0x2f646e['id']=_0x47c2b2(0x1d2),_0xc3bfa4[_0x47c2b2(0x1b0)](_0x2f646e);}if(_0x3f7393==0x65||_0x3f7393==0x66){_0x3f7393==0x65&&(_0xc53d41[_0x47c2b2(0x1a2)]=_0x47c2b2(0x1df));_0x3f7393==0x66&&(_0xc53d41[_0x47c2b2(0x1a2)]='RCE\x20');const _0x50637d=[{'text':_0x47c2b2(0x24f),'width':_0x47c2b2(0x222)},{'text':_0x47c2b2(0x1f5),'width':_0x47c2b2(0x222)},{'text':'Cliente','width':_0x47c2b2(0x24d)},{'text':_0x47c2b2(0x20f),'width':_0x47c2b2(0x1d8)},{'text':_0x47c2b2(0x22a),'width':_0x47c2b2(0x222)},{'text':_0x47c2b2(0x1ef),'width':_0x47c2b2(0x1e2)},{'text':'Total','width':_0x47c2b2(0x1e2)},{'text':_0x47c2b2(0x201),'width':'120px'}],_0x4d0472=document[_0x47c2b2(0x1d0)](_0x47c2b2(0x236)),_0x273b3d=document[_0x47c2b2(0x1d0)]('tr'),_0x13a28f=document['createDocumentFragment']();_0x50637d[_0x47c2b2(0x21b)](_0x4ef7c6=>{const _0x502372=_0x47c2b2,_0x1ca1f1=document['createElement']('th');if(typeof _0x4ef7c6==='string')_0x1ca1f1[_0x502372(0x238)]=_0x4ef7c6;else{_0x1ca1f1[_0x502372(0x238)]=_0x4ef7c6[_0x502372(0x1eb)]||'';if(_0x4ef7c6[_0x502372(0x1c9)])_0x1ca1f1[_0x502372(0x1e0)][_0x502372(0x1c9)]=_0x4ef7c6['width'];_0x4ef7c6[_0x502372(0x1ee)]&&typeof _0x4ef7c6['attrs']==='object'&&Object['entries'](_0x4ef7c6[_0x502372(0x1ee)])[_0x502372(0x21b)](([_0x486ffe,_0x1f9d2f])=>_0x1ca1f1['setAttribute'](_0x486ffe,_0x1f9d2f));}_0x1ca1f1[_0x502372(0x223)](_0x502372(0x235),_0x502372(0x1ac)),_0x13a28f[_0x502372(0x1b0)](_0x1ca1f1);}),_0x273b3d[_0x47c2b2(0x1b0)](_0x13a28f),_0x4d0472[_0x47c2b2(0x1b0)](_0x273b3d),_0xc3bfa4['appendChild'](_0x4d0472);const _0x41763a=document[_0x47c2b2(0x1d0)](_0x47c2b2(0x19b));_0x41763a['id']=_0x47c2b2(0x1d2),_0xc3bfa4[_0x47c2b2(0x1b0)](_0x41763a);}}window[_0x3b6aa0(0x212)]=function(){const _0x584510=_0x3b6aa0,_0xfb404c=0x3;loadLoginContent(_0x584510(0x24e)),setUserNameGet(),setEventBtnAccess();const _0x2e3c71=document['querySelector'](_0x584510(0x1ff));_0x2e3c71&&_0x2e3c71[_0x584510(0x21f)](_0x584510(0x244),function(){logoutReload(0x0,_0xfb404c);}),document[_0x584510(0x23b)](_0x584510(0x18e))[_0x584510(0x21f)](_0x584510(0x21e),async function(){const _0x2e9b5e=_0x584510,_0x5a1ab7=parseInt(this[_0x2e9b5e(0x1b1)]);myCompany['setBranchDefault']=_0x5a1ab7;const _0x1a70e0=await createCartStore('');await saveCompanyToIndexedDB(company,_0x1a70e0),await cargarPisos(_0x5a1ab7),await waitForEvent(_0x2e9b5e(0x217),_0x2e9b5e(0x249)),await cargarAlmacenes(_0x5a1ab7),await waitForEvent('setWarehouseId',_0x2e9b5e(0x207)),document[_0x2e9b5e(0x246)](new Event(_0x2e9b5e(0x1f6))),ntf_initNotifications(),fil_BranchesId=[],fil_BranchesId['push'](_0x5a1ab7),consultReport(report_type,_0x2e9b5e(0x213),_0x2e9b5e(0x1a1),'100%',_0x2e9b5e(0x1a1),_0x2e9b5e(0x213),_0x2e9b5e(0x1a1));}),document[_0x584510(0x23b)](_0x584510(0x1ad))[_0x584510(0x21f)]('change',async function(){const _0x205c9e=_0x584510;document[_0x205c9e(0x246)](new Event(_0x205c9e(0x207)));}),document[_0x584510(0x23b)]('setFloorId')[_0x584510(0x21f)](_0x584510(0x21e),async function(_0xec0270){const _0x2d384d=_0x584510;document[_0x2d384d(0x246)](new Event(_0x2d384d(0x249)));}),loadCartAndSetTabCount(_0xfb404c);};
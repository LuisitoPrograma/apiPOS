/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 4.0.4
*/

function _0x2eb2(){const _0x52b228=['&laquo;\x20Anterior','profit','#reporte-income-products','dispatchEvent','getDate','getFullYear','closeModalViewDetails','setApiEndPoint','constructor','setOperationType','setOperationDetailUnitPresentationId','application/json','setOperationStatusColor','setTipoOperacionCodigo','95117HBaXLo',';\x20color:','filterModal','value','axis','innerHTML','href','middle','exception','setOperationSeries','error','setBranchId','Error\x20al\x20solicitar\x20reporte','productName','900px','</td>\x0a</tr>','json','mouseleave','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22text-align:\x20right;\x22>','valueDesc','setOperationItems','log','\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22text-align:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<!--\x20espacio\x20para\x20acciones\x20adicionales\x20-->\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20','series','setAuthToken','init','incomes','appendChild','setSeries','\x22\x20no\x20existe.','classList','status','getMonth','push','&tipo=','setCustomerId','catch','btn\x20btn-sm\x20','#reporte-income','detalleModal','\x20tbody','1032FgjWIf','getSeconds','sales','fechaISO','isArray','Sin\x20descripción','mouseup','filter-end','change','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22text-align:\x20right;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','setOption','dataset_raw','setOperationNumber','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','apply','No\x20se\x20encontró\x20información\x20de\x20ingresos','shiftY','setOperationCustomerId','Error\x20','pie','</td>\x0a<td>','success','target','application/json;\x20charset=utf-8','setOperationDetailTotal','getDay','onclick','7590368SKlhJq','El\x20contenedor\x20con\x20id\x20\x22','toString','setOperationTotal','cost','setOperationDateTime','producto','stringify','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22text-align:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22span-table-custom\x22\x20style=\x22border:1.5px\x20solid\x20','values','setWarehouseId','search','valor_unitario','pdf_url','scrollLeft','arrayIncomes\x20transformado:','bind','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22text-align:\x20center;\x22>','console','\x2000:00:00','\x0a<tr>\x0a<td>','del\x20mes\x20<i\x20class=\x22bi\x20bi-caret-down-fill\x20date-range-label-icon\x22\x20style=\x22color:\x20#FF5900;\x22></i>','ceil','return\x20(function()\x20','time','trace','filter-start','#FF5900','252sPywiS','center','4131953nfYlYU','{}.constructor(\x22return\x20this\x22)(\x20)','del\x20día\x20<i\x20class=\x22bi\x20bi-caret-down-fill\x20date-range-label-icon\x22\x20style=\x22color:\x20#FF5900;\x22></i>','cantidad','getAttribute','getElementById','Error\x20al\x20cargar\x20el\x20detalle.','dynamicContent','{b}:\x20{d}%',';\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','contains','date-range-options','</td>\x0a\x20\x20\x20\x20\x20\x20','slice','75470QOgXsG','width','setFloorId','Contenedor\x20','setDate','detalleTablaBody','btn\x20btn-sm\x20btn-outline\x20ms-2','.modal-content','data-value','assign','9XpQeYz','mousemove','setSerie','getHours','btn-outline','round','Invalid\x20range\x20type','length','setDescripcion','setBranchDefault','setOperationDateExpiration','Selecciona\x20ambas\x20fechas','setTipoComprobante','#pagination-income','setOperationCustomerName','active','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22text-align:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22span-table-custom\x20span-table-setTipoComprobante-','toFixed','__proto__','prototype','Incomes\x20raw:','forEach','addEventListener','2XfzqIH','Modal','info','Siguiente\x20&raquo;','className','height','Evolución\x20de\x20Ventas','.btn-logout','reduce','#pagination-products','display','click','style','4367710KIaMtx','213JxXDAf','97396anUAXq','year','preventDefault','mousedown','then','table','none','flatMap','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22text-align:\x20center;\x22>','https://fasyb.com/api/venta/view/?id=','products','ID_SERIE','data','\x22\x20style=\x22width:\x20100%;\x20height:\x20500px;\x20border:\x20none;\x22></iframe>\x0a','(((.+)+)+)+$','onload','Total','\x2023:59:59','Ventas\x20por\x20Item','Error\x20al\x20aplicar\x20filtro','setOperationCurrency','https://fasyb.com/api/pdf/proxy/?file=','padStart','modalOverlayViewDetails','add','find','1724293sUnxzo','map','setTipoOperacionName','btn-outline-primary','pdf','querySelector','name','Pendiente','setTipoOperaciones','filter','block','POST','apply-filter','del\x20año\x20<i\x20class=\x22bi\x20bi-caret-down-fill\x20date-range-label-icon\x22\x20style=\x22color:\x20#FF5900;\x22></i>','createElement'];_0x2eb2=function(){return _0x52b228;};return _0x2eb2();}const _0x3b0520=_0x1d38;(function(_0x33d584,_0x5bc37d){const _0x3f3aa4=_0x1d38,_0x5d9e58=_0x33d584();while(!![]){try{const _0x3a3463=parseInt(_0x3f3aa4(0x146))/0x1*(parseInt(_0x3f3aa4(0x11d))/0x2)+parseInt(_0x3f3aa4(0x12b))/0x3*(-parseInt(_0x3f3aa4(0x12c))/0x4)+parseInt(_0x3f3aa4(0xfc))/0x5*(parseInt(_0x3f3aa4(0xec))/0x6)+parseInt(_0x3f3aa4(0xee))/0x7+parseInt(_0x3f3aa4(0xd0))/0x8+parseInt(_0x3f3aa4(0x106))/0x9*(-parseInt(_0x3f3aa4(0x12a))/0xa)+-parseInt(_0x3f3aa4(0x163))/0xb*(parseInt(_0x3f3aa4(0x18c))/0xc);if(_0x3a3463===_0x5bc37d)break;else _0x5d9e58['push'](_0x5d9e58['shift']());}catch(_0x129393){_0x5d9e58['push'](_0x5d9e58['shift']());}}}(_0x2eb2,0xf13dc));const _0x1309a0=(function(){let _0xf75a6f=!![];return function(_0x337fd1,_0x1053cf){const _0x4d43e5=_0xf75a6f?function(){if(_0x1053cf){const _0x3f7bfd=_0x1053cf['apply'](_0x337fd1,arguments);return _0x1053cf=null,_0x3f7bfd;}}:function(){};return _0xf75a6f=![],_0x4d43e5;};}()),_0x4ff1b4=_0x1309a0(this,function(){const _0x121db5=_0x1d38;return _0x4ff1b4[_0x121db5(0xd2)]()[_0x121db5(0xdb)](_0x121db5(0x13a))['toString']()[_0x121db5(0x15d)](_0x4ff1b4)[_0x121db5(0xdb)](_0x121db5(0x13a));});_0x4ff1b4();const _0x7c0a1d=(function(){let _0x27041e=!![];return function(_0x48a190,_0x591fe2){const _0x2a767d=_0x27041e?function(){const _0x226661=_0x1d38;if(_0x591fe2){const _0xf307cc=_0x591fe2[_0x226661(0xc3)](_0x48a190,arguments);return _0x591fe2=null,_0xf307cc;}}:function(){};return _0x27041e=![],_0x2a767d;};}()),_0x1afdb1=_0x7c0a1d(this,function(){const _0x1e999b=_0x1d38,_0x38c023=function(){const _0x237229=_0x1d38;let _0x305e43;try{_0x305e43=Function(_0x237229(0xe7)+_0x237229(0xef)+');')();}catch(_0x401fe0){_0x305e43=window;}return _0x305e43;},_0x347ccb=_0x38c023(),_0x580d32=_0x347ccb['console']=_0x347ccb[_0x1e999b(0xe2)]||{},_0x1f902e=[_0x1e999b(0x178),'warn',_0x1e999b(0x11f),'error',_0x1e999b(0x16b),_0x1e999b(0x131),_0x1e999b(0xe9)];for(let _0x1ac389=0x0;_0x1ac389<_0x1f902e['length'];_0x1ac389++){const _0x10935c=_0x7c0a1d[_0x1e999b(0x15d)][_0x1e999b(0x119)][_0x1e999b(0xe0)](_0x7c0a1d),_0x180802=_0x1f902e[_0x1ac389],_0x2410da=_0x580d32[_0x180802]||_0x10935c;_0x10935c[_0x1e999b(0x118)]=_0x7c0a1d[_0x1e999b(0xe0)](_0x7c0a1d),_0x10935c[_0x1e999b(0xd2)]=_0x2410da[_0x1e999b(0xd2)][_0x1e999b(0xe0)](_0x2410da),_0x580d32[_0x180802]=_0x10935c;}});_0x1afdb1();let arrayIncomes;const PER_PAGE=0x14;let currentPage=0x1,currentPageProducts=0x1;const fil_init_dates=document[_0x3b0520(0xf3)]('date-range-label-icon'),label=document[_0x3b0520(0xf3)]('date-range-label'),options=document[_0x3b0520(0xf3)](_0x3b0520(0xf9)),salesChartContainer=document['getElementById']('salesChartContainer'),productPieChart=document['getElementById']('productPieChart');let fil_date_start='',fil_date_end='',fil_CustomersId=[],fil_OperationsType=[],fil_BranchesId=[];function generateFilterTransformChart(_0x353b7b){const _0x42f7f9=_0x3b0520,{containerId:_0x42bd03,rawData:_0x5b6eba,groupField:_0x45c547,groupValues:_0x45ce0b,additionalFilters:additionalFilters=[],seriesType:seriesType='line',encode:_0x2697bb,title:title='',colors:_0x4be7b1,animationDuration:animationDuration=0x2710,tooltipOrder:tooltipOrder=_0x42f7f9(0x176),xAxisConfig:xAxisConfig={},yAxisConfig:yAxisConfig={},gridConfig:gridConfig={'right':0x8c},width:_0x3d98aa,height:_0x86e496}=_0x353b7b,_0x4a36cb=document['getElementById'](_0x42bd03);if(!_0x4a36cb){console['error'](_0x42f7f9(0xd1)+_0x42bd03+_0x42f7f9(0x180));return;}if(_0x3d98aa)_0x4a36cb[_0x42f7f9(0x129)][_0x42f7f9(0xfd)]=_0x3d98aa;if(_0x86e496)_0x4a36cb[_0x42f7f9(0x129)][_0x42f7f9(0x122)]=_0x86e496;const _0x709712=echarts[_0x42f7f9(0x17c)](_0x4a36cb),_0x4ec867=[],_0x41ee1b=[];_0x45ce0b[_0x42f7f9(0x11b)]((_0xb9d441,_0xae2d83)=>{const _0x140b53=_0x42f7f9,_0x46fecf='dataset_'+_0xb9d441,_0x78ab0f=additionalFilters['concat']([{'dimension':_0x45c547,'=':_0xb9d441}]);_0x4ec867['push']({'id':_0x46fecf,'fromDatasetId':_0x140b53(0xc0),'transform':{'type':_0x140b53(0x14f),'config':{'and':_0x78ab0f}}}),_0x41ee1b[_0x140b53(0x184)]({'type':seriesType,'datasetId':_0x46fecf,'showSymbol':![],'name':_0xb9d441,'endLabel':{'show':!![],'formatter':function(_0x3b1c3a){const _0x42f333=_0x140b53,_0x2a7dd8=_0x3b1c3a['value']&&_0x3b1c3a[_0x42f333(0x166)][_0x2697bb['x']];return _0xb9d441+(_0x2a7dd8!==undefined&&_0x2a7dd8!==null&&_0x2a7dd8!==''?':\x20'+_0x2a7dd8:'');}},'labelLayout':{'moveOverlap':_0x140b53(0xc5)},'emphasis':{'focus':_0x140b53(0x17a)},'encode':_0x2697bb,'lineStyle':{'color':_0x4be7b1&&_0x4be7b1[_0xae2d83]?_0x4be7b1[_0xae2d83]:undefined}});});const _0x21b070={'animationDuration':animationDuration,'dataset':[{'id':_0x42f7f9(0xc0),'source':_0x5b6eba},..._0x4ec867],'title':{'text':title},'tooltip':{'order':tooltipOrder,'trigger':_0x42f7f9(0x167)},'xAxis':Object[_0x42f7f9(0x105)]({'type':'category','nameLocation':_0x42f7f9(0x16a)},xAxisConfig),'yAxis':Object[_0x42f7f9(0x105)]({'name':_0x2697bb['y']||''},yAxisConfig),'grid':gridConfig,'series':_0x41ee1b};_0x709712['setOption'](_0x21b070);}function generatePieChart({containerId:_0x5d1bd3,data:_0x4ecda9,nameField:_0x56f8db,valueField:_0x366c54,title:title=''}){const _0x4a0815=_0x3b0520,_0x3d1681=document[_0x4a0815(0xf3)](_0x5d1bd3);if(!_0x3d1681)return console['error'](_0x4a0815(0xff)+_0x5d1bd3+'\x20no\x20existe');const _0x3479ba=echarts['init'](_0x3d1681),_0x476931=_0x4ecda9['reduce']((_0x43cc5d,_0x1129ae)=>{const _0x5bb2ef=_0x4a0815,_0xb766ac=_0x1129ae[_0x56f8db],_0x252f91=_0x1129ae[_0x366c54];let _0x56f045=_0x43cc5d[_0x5bb2ef(0x145)](_0x3cc500=>_0x3cc500[_0x5bb2ef(0x14c)]===_0xb766ac);return!_0x56f045&&(_0x56f045={'name':_0xb766ac,'value':0x0},_0x43cc5d['push'](_0x56f045)),_0x56f045['value']+=_0x252f91,_0x43cc5d;},[]),_0x3cf19c={'title':{'text':title,'left':_0x4a0815(0xed)},'tooltip':{'trigger':'item'},'series':[{'type':_0x4a0815(0xc8),'radius':'50%','data':_0x476931,'emphasis':{'itemStyle':{'shadowBlur':0xa,'shadowOffsetX':0x0}},'label':{'formatter':_0x4a0815(0xf6)}}]};_0x3479ba[_0x4a0815(0xbf)](_0x3cf19c);}function showModalViewDetails(){const _0x2b1cfe=_0x3b0520,_0x464c0b=document[_0x2b1cfe(0xf3)](_0x2b1cfe(0x18a)),_0xeedfe0=document[_0x2b1cfe(0xf3)](_0x2b1cfe(0x143));_0x464c0b[_0x2b1cfe(0x181)][_0x2b1cfe(0x144)]('active'),_0xeedfe0[_0x2b1cfe(0x129)]['display']=_0x2b1cfe(0x150);}function hideModalViewDetails(){const _0x2fb2d7=_0x3b0520,_0x3f8731=document['getElementById']('detalleModal'),_0x14e6f7=document[_0x2fb2d7(0xf3)](_0x2fb2d7(0x143));_0x3f8731['classList']['remove'](_0x2fb2d7(0x115)),_0x14e6f7[_0x2fb2d7(0x129)][_0x2fb2d7(0x127)]='none';const _0x52aa15=document['getElementById'](_0x2fb2d7(0xf5));_0x52aa15['innerHTML']='\x0a<table>\x0a<thead>\x0a<tr>\x0a<th>Producto</th>\x0a<th>Cantidad</th>\x0a<th>Valor\x20Unitario</th>\x0a<th>Total</th>\x0a</tr>\x0a</thead>\x0a<tbody\x20id=\x22detalleTablaBody\x22></tbody>\x0a</table>';}document['getElementById'](_0x3b0520(0x15b))['addEventListener'](_0x3b0520(0x128),hideModalViewDetails),document[_0x3b0520(0xf3)](_0x3b0520(0x143))[_0x3b0520(0x11c)](_0x3b0520(0x128),hideModalViewDetails);function verDetalle(_0x2f9c99,_0x4d0fff){const _0x2e3d69=_0x3b0520;fetch(_0x2e3d69(0x135)+_0x2f9c99+_0x2e3d69(0x185)+_0x4d0fff)[_0x2e3d69(0x130)](_0x385781=>{const _0x1d4f9c=_0x2e3d69;if(!_0x385781['ok'])throw new Error(_0x1d4f9c(0xc7)+_0x385781[_0x1d4f9c(0x182)]+':\x20'+_0x385781['statusText']);return _0x385781['json']();})[_0x2e3d69(0x130)](_0x564b91=>{const _0x30058e=_0x2e3d69;if(_0x564b91[_0x30058e(0xca)]){const _0x564c0f=document[_0x30058e(0xf3)]('dynamicContent');if(_0x4d0fff==='detalle'){let _0x3e39d0='';_0x564b91[_0x30058e(0x138)][_0x30058e(0x11b)](_0x117859=>{const _0x19e909=_0x30058e;_0x3e39d0+=_0x19e909(0xe4)+_0x117859[_0x19e909(0xd6)]+_0x19e909(0xc9)+_0x117859[_0x19e909(0xf1)]+_0x19e909(0xc9)+_0x117859[_0x19e909(0xdc)]+_0x19e909(0xc9)+_0x117859['total']+_0x19e909(0x172);}),document[_0x30058e(0xf3)](_0x30058e(0x101))[_0x30058e(0x168)]=_0x3e39d0;}else{if(_0x4d0fff===_0x30058e(0x14a)){const _0x55d51a=_0x30058e(0x141)+encodeURIComponent(_0x564b91[_0x30058e(0xdd)]),_0x492695=document['querySelector'](_0x30058e(0x103));_0x564c0f[_0x30058e(0x168)]='\x0a<iframe\x20src=\x22'+_0x55d51a+_0x30058e(0x139),document['getElementById'](_0x30058e(0x15b))['addEventListener'](_0x30058e(0x128),hideModalViewDetails);}}showModalViewDetails();}else alert(_0x564b91[_0x30058e(0x16d)]||'No\x20se\x20pudieron\x20obtener\x20los\x20detalles\x20del\x20pedido.');})[_0x2e3d69(0x187)](_0x539216=>{const _0xd889b7=_0x2e3d69;console[_0xd889b7(0x16d)]('Error\x20al\x20cargar\x20el\x20detalle:',_0x539216),alert(_0xd889b7(0xf4));});}label[_0x3b0520(0x11c)](_0x3b0520(0x128),()=>{const _0x376686=_0x3b0520;options[_0x376686(0x129)][_0x376686(0x127)]=options['style'][_0x376686(0x127)]===_0x376686(0x132)?_0x376686(0x150):_0x376686(0x132);}),options[_0x3b0520(0x11c)](_0x3b0520(0x128),_0x50ab87=>{const _0x23af3e=_0x3b0520;if(_0x50ab87[_0x23af3e(0xcb)]&&_0x50ab87[_0x23af3e(0xcb)]['tagName']==='LI'){const _0x3b6044=_0x50ab87[_0x23af3e(0xcb)][_0x23af3e(0xf2)](_0x23af3e(0x104));updateDateRange(_0x3b6044),options[_0x23af3e(0x129)]['display']=_0x23af3e(0x132);}}),document[_0x3b0520(0x11c)]('click',_0x55ae1d=>{const _0x2437f7=_0x3b0520;!label[_0x2437f7(0xf8)](_0x55ae1d[_0x2437f7(0xcb)])&&!options['contains'](_0x55ae1d[_0x2437f7(0xcb)])&&(options[_0x2437f7(0x129)][_0x2437f7(0x127)]='none');});function formatDateToYmdHis(_0xa5f990){const _0xcf9b3c=_0x3b0520,_0x3f33a5=_0xa5f990[_0xcf9b3c(0x15a)](),_0x965893=String(_0xa5f990[_0xcf9b3c(0x183)]()+0x1)[_0xcf9b3c(0x142)](0x2,'0'),_0x499044=String(_0xa5f990['getDate']())[_0xcf9b3c(0x142)](0x2,'0'),_0x278c6f=String(_0xa5f990[_0xcf9b3c(0x109)]())[_0xcf9b3c(0x142)](0x2,'0'),_0x4aa0b5=String(_0xa5f990['getMinutes']())['padStart'](0x2,'0'),_0x242a73=String(_0xa5f990[_0xcf9b3c(0x18d)]())[_0xcf9b3c(0x142)](0x2,'0');return _0x3f33a5+'-'+_0x965893+'-'+_0x499044+'\x20'+_0x278c6f+':'+_0x4aa0b5+':'+_0x242a73;}function getDateRange(_0x2ed1b1){const _0x5c8354=_0x3b0520,_0x16faf5=new Date();let _0x4f3669,_0x5e15a1;switch(_0x2ed1b1){case'day':_0x4f3669=new Date(_0x16faf5[_0x5c8354(0x15a)](),_0x16faf5[_0x5c8354(0x183)](),_0x16faf5['getDate'](),0x0,0x0,0x0),_0x5e15a1=new Date(_0x16faf5[_0x5c8354(0x15a)](),_0x16faf5[_0x5c8354(0x183)](),_0x16faf5[_0x5c8354(0x159)](),0x17,0x3b,0x3b),label['innerHTML']=_0x5c8354(0xf0);break;case'week':const _0x1ef409=_0x16faf5[_0x5c8354(0xce)](),_0x42c477=new Date(_0x16faf5);_0x42c477[_0x5c8354(0x100)](_0x16faf5[_0x5c8354(0x159)]()-_0x1ef409+(_0x1ef409===0x0?-0x6:0x1));const _0x4a9952=new Date(_0x42c477);_0x4a9952[_0x5c8354(0x100)](_0x42c477[_0x5c8354(0x159)]()+0x6),_0x4f3669=new Date(_0x42c477['getFullYear'](),_0x42c477[_0x5c8354(0x183)](),_0x42c477[_0x5c8354(0x159)](),0x0,0x0,0x0),_0x5e15a1=new Date(_0x4a9952[_0x5c8354(0x15a)](),_0x4a9952[_0x5c8354(0x183)](),_0x4a9952[_0x5c8354(0x159)](),0x17,0x3b,0x3b),label[_0x5c8354(0x168)]='de\x20la\x20semana\x20<i\x20class=\x22bi\x20bi-caret-down-fill\x20date-range-label-icon\x22\x20style=\x22color:\x20#FF5900;\x22></i>';break;case'month':_0x4f3669=new Date(_0x16faf5[_0x5c8354(0x15a)](),_0x16faf5[_0x5c8354(0x183)](),0x1,0x0,0x0,0x0),_0x5e15a1=new Date(_0x16faf5[_0x5c8354(0x15a)](),_0x16faf5[_0x5c8354(0x183)]()+0x1,0x0,0x17,0x3b,0x3b),label[_0x5c8354(0x168)]=_0x5c8354(0xe5);break;case _0x5c8354(0x12d):_0x4f3669=new Date(_0x16faf5[_0x5c8354(0x15a)](),0x0,0x1,0x0,0x0,0x0),_0x5e15a1=new Date(_0x16faf5['getFullYear'](),0xb,0x1f,0x17,0x3b,0x3b),label[_0x5c8354(0x168)]=_0x5c8354(0x153);break;default:label[_0x5c8354(0x168)]='';throw new Error(_0x5c8354(0x10c));}return{'startDateFormatted':formatDateToYmdHis(_0x4f3669),'endDateFormatted':formatDateToYmdHis(_0x5e15a1)};}function updateDateRange(_0x34ac47){if(_0x34ac47=='filtrar'){}else{const {startDateFormatted:_0x392a19,endDateFormatted:_0x284644}=getDateRange(_0x34ac47);fil_date_start=_0x392a19,fil_date_end=_0x284644,consultIncomeReport();}}const tableWrapper=document[_0x3b0520(0x14b)]('.table-wrapper');let isDragging=![],startX,scrollLeft;tableWrapper[_0x3b0520(0x11c)](_0x3b0520(0x12f),_0xe5b0e8=>{const _0x5c6737=_0x3b0520;isDragging=!![],startX=_0xe5b0e8['pageX']-tableWrapper['offsetLeft'],scrollLeft=tableWrapper[_0x5c6737(0xde)];}),tableWrapper[_0x3b0520(0x11c)](_0x3b0520(0x174),()=>{isDragging=![];}),tableWrapper[_0x3b0520(0x11c)](_0x3b0520(0x192),()=>{isDragging=![];}),tableWrapper[_0x3b0520(0x11c)](_0x3b0520(0x107),_0x2d184f=>{const _0x55d909=_0x3b0520;if(!isDragging)return;_0x2d184f[_0x55d909(0x12e)]();const _0xdf4b96=_0x2d184f['pageX']-tableWrapper['offsetLeft'],_0x1bda1a=(_0xdf4b96-startX)*0x2;tableWrapper['scrollLeft']=scrollLeft-_0x1bda1a;});async function consultIncomeReport(){const _0x2660cc=_0x3b0520;showLoadingModal();const _0x386c2f={'apiPOS_getIncome':0x1,'setToken':myCompany[_0x2660cc(0x17b)],'fil_date_start':fil_date_start,'fil_date_end':fil_date_end,'fil_CustomersId':fil_CustomersId,'fil_OperationsType':fil_OperationsType,'fil_BranchesId':fil_BranchesId};try{const _0xd60262=await fetch(myCompany[_0x2660cc(0x15c)],{'method':_0x2660cc(0x151),'headers':{'Content-Type':_0x2660cc(0xcc)},'body':JSON[_0x2660cc(0xd7)](_0x386c2f)}),{success:_0x4cd907,message:_0x3474cd}=await _0xd60262[_0x2660cc(0x173)]();if(!_0x4cd907||!Array[_0x2660cc(0x190)](_0x3474cd[_0x2660cc(0x17d)])){ntfShow(_0x2660cc(0xc4)),console[_0x2660cc(0x178)](_0x3474cd);return;}const _0x696289=_0x3474cd[_0x2660cc(0x17d)];console[_0x2660cc(0x178)](_0x2660cc(0x11a),_0x696289);const _0x82880b=myCompany['setCustomers'][_0x2660cc(0x125)]((_0x245ef7,_0x2d79c2)=>{const _0x29d422=_0x2660cc;return _0x245ef7[_0x2d79c2[_0x29d422(0x186)]]=_0x2d79c2['setCustomerName'],_0x245ef7;},{}),_0x4bc73e=myCompany[_0x2660cc(0x14e)][_0x2660cc(0x125)]((_0x2f2b22,_0x1c0dba)=>{const _0x4c1c8d=_0x2660cc;return _0x2f2b22[_0x1c0dba[_0x4c1c8d(0x162)]]=_0x1c0dba[_0x4c1c8d(0x148)],_0x2f2b22;},{}),_0x2d2564=myCompany[_0x2660cc(0x17f)][_0x2660cc(0x125)]((_0x10bc01,_0x41c577)=>{const _0x424a72=_0x2660cc;return _0x10bc01[_0x41c577[_0x424a72(0x137)]]=_0x41c577[_0x424a72(0x108)],_0x10bc01;},{}),_0x3d1973=_0x696289[_0x2660cc(0x147)](_0x2d19e2=>{const _0x177906=_0x2660cc,_0x1bb03f=_0x2d19e2['setOperationItems'][_0x177906(0x125)]((_0x2b3908,_0x15de18)=>{const _0xd52a6b=_0x177906;return _0x2b3908+Number(_0x15de18[_0xd52a6b(0xcd)]);},0x0),_0x1d6a61=_0x4bc73e[_0x2d19e2['setOperationType']]||_0x2d19e2[_0x177906(0x15e)],_0x472085=_0x2d2564[_0x2d19e2[_0x177906(0x16c)]]||_0x2d19e2[_0x177906(0x16c)],_0x597032=_0x82880b[_0x2d19e2[_0x177906(0xc6)]]||_0x2d19e2[_0x177906(0xc6)];return{'setOperationType':_0x1d6a61,'setOperationSeries':_0x472085+'-'+_0x2d19e2[_0x177906(0xc1)],'setOperationCustomerName':_0x597032,'setOperationDateTime':_0x2d19e2[_0x177906(0xd5)],'setOperationDateExpiration':_0x2d19e2[_0x177906(0x110)]||'','setOperationStatus':_0x2d19e2['setOperationStatus']||_0x177906(0x14d),'setOperationStatusColor':_0x2d19e2['setOperationStatusColor']||_0x177906(0xeb),'setOperationCurrency':_0x2d19e2[_0x177906(0x140)],'setOperationTotal':_0x1bb03f};});console['log'](_0x2660cc(0xdf),_0x3d1973);const _0x55a60d=_0x696289[_0x2660cc(0x133)](_0x8a4647=>_0x8a4647[_0x2660cc(0x177)])[_0x2660cc(0x125)]((_0x6ca986,_0x41140b)=>{const _0x5c0857=_0x2660cc,_0x32b5ea=products[_0x5c0857(0x145)](_0x4c7c4b=>_0x4c7c4b['id']==_0x41140b[_0x5c0857(0x15f)]),_0x34d958=_0x32b5ea?_0x32b5ea['setDescripcion']:_0x5c0857(0x191),_0x4689bd=Number(_0x41140b[_0x5c0857(0xcd)]),_0x2ec5f4=Number(_0x41140b['setOperationDetailQuantity']),_0x2f37fe=Number(_0x41140b['setOperationDetailUnitCost']),_0x195c9d=_0x2f37fe*_0x2ec5f4;return!_0x6ca986[_0x34d958]&&(_0x6ca986[_0x34d958]={'productName':_0x34d958,'sales':0x0,'cost':0x0}),_0x6ca986[_0x34d958][_0x5c0857(0x18e)]+=_0x4689bd,_0x6ca986[_0x34d958]['cost']+=_0x195c9d,_0x6ca986;},{}),_0x50a750=Object[_0x2660cc(0xd9)](_0x55a60d)[_0x2660cc(0x147)](_0x1d2d24=>({'productName':_0x1d2d24[_0x2660cc(0x170)],'sales':Math[_0x2660cc(0x10b)](_0x1d2d24[_0x2660cc(0x18e)]*0x64)/0x64,'cost':Math[_0x2660cc(0x10b)](_0x1d2d24[_0x2660cc(0xd4)]*0x64)/0x64,'profit':Math[_0x2660cc(0x10b)]((_0x1d2d24[_0x2660cc(0x18e)]-_0x1d2d24['cost'])*0x64)/0x64}));renderTable(_0x3d1973,currentPage,'incomes'),renderTable(_0x50a750,currentPageProducts,'products');const _0x3c1f97=_0x3d1973['map'](_0x180719=>({'fechaISO':_0x180719[_0x2660cc(0xd5)],'setTipoComprobante':_0x180719[_0x2660cc(0x15e)],'setOperationCurrency':_0x180719[_0x2660cc(0x140)],'Total':Math[_0x2660cc(0x10b)](_0x180719[_0x2660cc(0xd3)]*0x64)/0x64})),_0x4b9fc9=_0x3c1f97['reduce']((_0x420137,_0x55a02d)=>{const _0x5a62b2=_0x2660cc,_0x5086d8=_0x55a02d[_0x5a62b2(0x18f)]+'|'+_0x55a02d[_0x5a62b2(0x112)]+'|'+_0x55a02d[_0x5a62b2(0x140)];return!_0x420137[_0x5086d8]&&(_0x420137[_0x5086d8]={'fechaISO':_0x55a02d[_0x5a62b2(0x18f)],'setTipoComprobante':_0x55a02d['setTipoComprobante'],'setOperationCurrency':_0x55a02d[_0x5a62b2(0x140)],'Total':0x0}),_0x420137[_0x5086d8][_0x5a62b2(0x13c)]+=_0x55a02d[_0x5a62b2(0x13c)],_0x420137;},{}),_0x3091fc=Object[_0x2660cc(0xd9)](_0x4b9fc9)[_0x2660cc(0x147)](_0x107a8c=>({'fechaISO':_0x107a8c[_0x2660cc(0x18f)],'setTipoComprobante':_0x107a8c[_0x2660cc(0x112)]+'\x20('+_0x107a8c['setOperationCurrency']+')','Total':Math[_0x2660cc(0x10b)](_0x107a8c[_0x2660cc(0x13c)]*0x64)/0x64})),_0xc96854=[...new Set(_0x3091fc[_0x2660cc(0x147)](_0x4f9c1e=>_0x4f9c1e['setTipoComprobante']))];_0x3091fc['reverse']();_0x3091fc[_0x2660cc(0x10d)]>0x0?generateFilterTransformChart({'containerId':'salesChartContainer','rawData':_0x3091fc,'groupField':_0x2660cc(0x112),'groupValues':_0xc96854,'seriesType':'line','encode':{'x':'fechaISO','y':_0x2660cc(0x13c),'label':[_0x2660cc(0x112),_0x2660cc(0x13c)],'itemName':_0x2660cc(0x18f),'tooltip':['Total']},'xAxisConfig':{'type':_0x2660cc(0xe8),'axisLabel':{'formatter':_0x5094c0=>{const _0x43d507=_0x2660cc,_0x342547=new Date(_0x5094c0),_0x7d4ad4=String(_0x342547[_0x43d507(0x159)]())[_0x43d507(0x142)](0x2,'0'),_0x28f8a7=String(_0x342547['getMonth']()+0x1)['padStart'](0x2,'0'),_0x4e9f2d=_0x342547[_0x43d507(0x15a)]();return _0x7d4ad4+'/'+_0x28f8a7+'/'+_0x4e9f2d;}}},'title':_0x2660cc(0x123),'width':_0x2660cc(0x171),'height':'500px'}):salesChartContainer[_0x2660cc(0x168)]='';const _0x5e675b=_0x696289[_0x2660cc(0x133)](_0x3c107a=>_0x3c107a['setOperationItems']['map'](_0x10841e=>{const _0x356fd5=_0x2660cc,_0x5f32d9=products[_0x356fd5(0x145)](_0x5a094e=>_0x5a094e['id']==_0x10841e[_0x356fd5(0x15f)]);return{'productName':_0x5f32d9?_0x5f32d9[_0x356fd5(0x10e)]:_0x356fd5(0x191),'setOperationDetailTotal':_0x10841e['setOperationDetailTotal']};})),_0x432010=_0x5e675b[_0x2660cc(0x125)]((_0x15e65e,_0x388a35)=>{const _0x3cc224=_0x2660cc;return!_0x15e65e[_0x388a35[_0x3cc224(0x170)]]&&(_0x15e65e[_0x388a35[_0x3cc224(0x170)]]=0x0),_0x15e65e[_0x388a35[_0x3cc224(0x170)]]+=_0x388a35[_0x3cc224(0xcd)],_0x15e65e;},{}),_0x6777b2=Object['entries'](_0x432010)[_0x2660cc(0x147)](([_0x4e9ce4,_0x1ac05c])=>({'productName':_0x4e9ce4,'setOperationDetailTotal':Math[_0x2660cc(0x10b)](_0x1ac05c*0x64)/0x64}));_0x6777b2['length']>0x0?generatePieChart({'containerId':'productPieChart','data':_0x6777b2,'nameField':'productName','valueField':_0x2660cc(0xcd),'title':_0x2660cc(0x13e)}):productPieChart[_0x2660cc(0x168)]='';}catch(_0x5ea7af){ntfShow(_0x2660cc(0x16f)),console[_0x2660cc(0x16d)](_0x5ea7af);}finally{hideLoadingModal();}}function renderTable(_0x3399c5,_0x55223d=0x1,_0x417e93=_0x3b0520(0x17d)){const _0x245b3f=_0x3b0520;currentPage=_0x55223d;const _0x154b12=_0x417e93===_0x245b3f(0x17d)?_0x245b3f(0x189):_0x245b3f(0x157),_0x1672f9=document[_0x245b3f(0x14b)](_0x154b12+_0x245b3f(0x18b));_0x1672f9[_0x245b3f(0x168)]='';const _0x1b8769=(_0x55223d-0x1)*PER_PAGE,_0x53bf12=_0x3399c5[_0x245b3f(0xfb)](_0x1b8769,_0x1b8769+PER_PAGE);_0x53bf12[_0x245b3f(0x11b)](_0x4109ae=>{const _0x1f4d20=_0x245b3f,_0x5b1626=document[_0x1f4d20(0x154)]('tr');if(_0x417e93===_0x1f4d20(0x17d))_0x5b1626['innerHTML']=_0x1f4d20(0x116)+_0x4109ae[_0x1f4d20(0x15e)]+_0x1f4d20(0xc2)+_0x4109ae[_0x1f4d20(0x15e)]+_0x1f4d20(0x134)+(_0x4109ae[_0x1f4d20(0x16c)]||'')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+(_0x4109ae[_0x1f4d20(0x114)]||'')+_0x1f4d20(0xe1)+_0x4109ae[_0x1f4d20(0xd5)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22text-align:\x20center;\x22>'+(_0x4109ae[_0x1f4d20(0x110)]||'')+_0x1f4d20(0xd8)+_0x4109ae[_0x1f4d20(0x161)]+_0x1f4d20(0x164)+_0x4109ae[_0x1f4d20(0x161)]+_0x1f4d20(0xf7)+_0x4109ae['setOperationStatus']+_0x1f4d20(0xbe)+_0x4109ae[_0x1f4d20(0x140)]+'\x20'+_0x4109ae[_0x1f4d20(0xd3)][_0x1f4d20(0x117)](0x2)+_0x1f4d20(0x179);else _0x417e93===_0x1f4d20(0x136)&&(_0x5b1626[_0x1f4d20(0x168)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x4109ae[_0x1f4d20(0x170)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22text-align:\x20right;\x22>'+_0x4109ae['sales'][_0x1f4d20(0x117)](0x2)+_0x1f4d20(0x175)+_0x4109ae[_0x1f4d20(0xd4)][_0x1f4d20(0x117)](0x2)+_0x1f4d20(0x175)+_0x4109ae[_0x1f4d20(0x156)][_0x1f4d20(0x117)](0x2)+_0x1f4d20(0xfa));_0x1672f9[_0x1f4d20(0x17e)](_0x5b1626);}),renderPagination(_0x3399c5,_0x55223d,_0x417e93);}function _0x1d38(_0x8c716b,_0x585654){const _0xef0027=_0x2eb2();return _0x1d38=function(_0x1afdb1,_0x7c0a1d){_0x1afdb1=_0x1afdb1-0xbe;let _0x464462=_0xef0027[_0x1afdb1];return _0x464462;},_0x1d38(_0x8c716b,_0x585654);}function renderPagination(_0x2c7caf,_0x414ff6,_0x3da317='incomes'){const _0x597efb=_0x3b0520,_0x557c87=_0x3da317===_0x597efb(0x17d)?document['querySelector'](_0x597efb(0x113)):document[_0x597efb(0x14b)](_0x597efb(0x126));_0x557c87[_0x597efb(0x168)]='';const _0x5eb6e4=Math[_0x597efb(0xe6)](_0x2c7caf[_0x597efb(0x10d)]/PER_PAGE),_0x53d6f2=document[_0x597efb(0x154)]('a');_0x53d6f2[_0x597efb(0x169)]='#',_0x53d6f2[_0x597efb(0x121)]='btn\x20btn-sm\x20btn-outline\x20me-2',_0x53d6f2[_0x597efb(0x168)]=_0x597efb(0x155),_0x53d6f2[_0x597efb(0xcf)]=_0x555396=>{_0x555396['preventDefault'](),_0x414ff6>0x1&&renderTable(_0x2c7caf,_0x414ff6-0x1,_0x3da317);},_0x557c87[_0x597efb(0x17e)](_0x53d6f2);for(let _0x3d202e=0x1;_0x3d202e<=_0x5eb6e4;_0x3d202e++){const _0x5e5bdb=document[_0x597efb(0x154)]('a');_0x5e5bdb[_0x597efb(0x169)]='#',_0x5e5bdb[_0x597efb(0x121)]=_0x597efb(0x188)+(_0x3d202e===_0x414ff6?_0x597efb(0x149):_0x597efb(0x10a)),_0x5e5bdb['textContent']=_0x3d202e,_0x5e5bdb[_0x597efb(0xcf)]=_0x1cda8d=>{const _0x3115df=_0x597efb;_0x1cda8d[_0x3115df(0x12e)](),renderTable(_0x2c7caf,_0x3d202e,_0x3da317);},_0x557c87['appendChild'](_0x5e5bdb);}const _0x341919=document[_0x597efb(0x154)]('a');_0x341919[_0x597efb(0x169)]='#',_0x341919[_0x597efb(0x121)]=_0x597efb(0x102),_0x341919[_0x597efb(0x168)]=_0x597efb(0x120),_0x341919[_0x597efb(0xcf)]=_0x27e774=>{const _0x17312a=_0x597efb;_0x27e774[_0x17312a(0x12e)](),_0x414ff6<_0x5eb6e4&&renderTable(_0x2c7caf,_0x414ff6+0x1,_0x3da317);},_0x557c87[_0x597efb(0x17e)](_0x341919);}document[_0x3b0520(0xf3)](_0x3b0520(0x152))[_0x3b0520(0x11c)]('click',async()=>{const _0x42ceca=_0x3b0520,_0x5a322a=document[_0x42ceca(0xf3)](_0x42ceca(0xea))['value'],_0x5ea63f=document[_0x42ceca(0xf3)](_0x42ceca(0x193))[_0x42ceca(0x166)];if(!_0x5a322a||!_0x5ea63f)return alert(_0x42ceca(0x111));const _0x31ecd1=document[_0x42ceca(0xf3)](_0x42ceca(0x165)),_0x140a0e=bootstrap[_0x42ceca(0x11e)]['getInstance'](_0x31ecd1);_0x140a0e['hide'](),showLoadingModal();try{const _0x213014={'apiPOS_getIncome':0x1,'setToken':myCompany['setAuthToken'],'dateFrom':_0x5a322a+_0x42ceca(0xe3),'dateTo':_0x5ea63f+_0x42ceca(0x13d),'clientIds':[],'operationTypes':[]},_0x328ff5=await fetch(myCompany[_0x42ceca(0x15c)],{'method':_0x42ceca(0x151),'headers':{'Content-Type':_0x42ceca(0x160)},'body':JSON[_0x42ceca(0xd7)](_0x213014)}),{success:_0x356b51,message:_0x574c0c}=await _0x328ff5[_0x42ceca(0x173)]();if(!_0x356b51)throw new Error(_0x574c0c);_0x574c0c['incomes'],await consultIncomeReport();}catch(_0x4817cd){ntfShow(_0x42ceca(0x13f)),console[_0x42ceca(0x16d)](_0x4817cd);}finally{hideLoadingModal();}}),window[_0x3b0520(0x13b)]=function(){const _0x4af2a4=_0x3b0520,_0x4cd0ef=0x3;loadLoginContent('./img/apiPOS.png'),setUserNameGet(),setEventBtnAccess();const _0x141ede=document[_0x4af2a4(0x14b)](_0x4af2a4(0x124));_0x141ede&&_0x141ede[_0x4af2a4(0x11c)]('click',function(){logoutReload(0x0,_0x4cd0ef);}),document[_0x4af2a4(0xf3)](_0x4af2a4(0x16e))[_0x4af2a4(0x11c)](_0x4af2a4(0x194),async function(){const _0x431fad=_0x4af2a4,_0x146045=parseInt(this[_0x431fad(0x166)]);myCompany[_0x431fad(0x10f)]=_0x146045;const _0x4878e4=await createCartStore('');await saveCompanyToIndexedDB(company,_0x4878e4),cargarAlmacenes(_0x146045),setTimeout(()=>{const _0x41373e=_0x431fad;document[_0x41373e(0xf3)](_0x41373e(0xda))[_0x41373e(0x158)](new Event('change'));},0x64),cargarPisos(_0x146045),setTimeout(()=>{const _0x1e2841=_0x431fad;document['getElementById'](_0x1e2841(0xfe))[_0x1e2841(0x158)](new Event(_0x1e2841(0x194)));},0x64),ntf_initNotifications(),fil_BranchesId=[],fil_BranchesId[_0x431fad(0x184)](_0x146045),consultIncomeReport();}),loadCartAndSetTabCount(_0x4cd0ef);};
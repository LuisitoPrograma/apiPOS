/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 5.1.4
*/

const _0x3592b0=_0x5aaf;(function(_0x1ea75e,_0x5b3302){const _0x308b62=_0x5aaf,_0x685a71=_0x1ea75e();while(!![]){try{const _0x58b2c1=-parseInt(_0x308b62(0x1bd))/0x1+parseInt(_0x308b62(0x1f0))/0x2+parseInt(_0x308b62(0x1db))/0x3*(parseInt(_0x308b62(0x1e2))/0x4)+-parseInt(_0x308b62(0x1d7))/0x5+-parseInt(_0x308b62(0x1ce))/0x6*(-parseInt(_0x308b62(0x1e1))/0x7)+-parseInt(_0x308b62(0x1ea))/0x8+parseInt(_0x308b62(0x1bf))/0x9;if(_0x58b2c1===_0x5b3302)break;else _0x685a71['push'](_0x685a71['shift']());}catch(_0x2b72d9){_0x685a71['push'](_0x685a71['shift']());}}}(_0x1462,0xf250c));const selectCredentialsApiWAChat=document[_0x3592b0(0x1bb)](_0x3592b0(0x1bc)),loginPanel=document[_0x3592b0(0x1bb)](_0x3592b0(0x1b4)),chatPanel=document['getElementById'](_0x3592b0(0x1e8)),qrImg=document['getElementById']('qr-img'),overlay=document[_0x3592b0(0x1bb)](_0x3592b0(0x1d9));function _0x5aaf(_0x36095d,_0x2efe3a){const _0x455696=_0x1462();return _0x5aaf=function(_0x1c739a,_0x3658e7){_0x1c739a=_0x1c739a-0x1b2;let _0x157154=_0x455696[_0x1c739a];return _0x157154;},_0x5aaf(_0x36095d,_0x2efe3a);}let qrTimeout;function _0x1462(){const _0x1b389b=['json','WarehouseChangeComplete','1077195QAwzKt','152TOKhIs','includes','setAuthToken','https://','change','search','chatPanel','toString','3159768tSOOGs','(((.+)+)+)+$','value','setBranchId','style','BranchChangeComplete','2207990OHpMvh','prototype','querySelector','loginPanel','apply','status','info','onload','log','setFloorId','getElementById','setCredentialsApiWAChat','1200983lntEam','reload','25362927jJkzEA','hidden','EnvironmentChangeComplete','setWarehouseId','visibility','setCredentialsApiWAChatStatus','none','flex','exception','toLowerCase','display','init','error','setBranchDefault','table','6MZGMvZ','dispatchEvent','__proto__','return\x20(function()\x20','src','warn','.btn-logout','bind','console','7467545ymsTIH','/wa/','qr-overlay','/qr','474mRQiVC','click','addEventListener','setCredentialsApiWAChatSubdomain'];_0x1462=function(){return _0x1b389b;};return _0x1462();}const validSeconds=0xa;function showLogin(){const _0x28ec4c=_0x3592b0;loginPanel['style']['display']=_0x28ec4c(0x1c6),chatPanel[_0x28ec4c(0x1ee)]['visibility']=_0x28ec4c(0x1c0);}function showChat(){const _0x3a7ce6=_0x3592b0;loginPanel[_0x3a7ce6(0x1ee)]['display']=_0x3a7ce6(0x1c5),chatPanel[_0x3a7ce6(0x1ee)][_0x3a7ce6(0x1c3)]='visible';}async function initQRApiWAChat(_0x6a893e,_0x1056a0){const _0xd0c804=_0x3592b0,_0x1b1b30=(function(){let _0x447a24=!![];return function(_0x55e8ac,_0x580542){const _0xeae089=_0x447a24?function(){const _0x3d4519=_0x5aaf;if(_0x580542){const _0x5185d3=_0x580542[_0x3d4519(0x1b5)](_0x55e8ac,arguments);return _0x580542=null,_0x5185d3;}}:function(){};return _0x447a24=![],_0xeae089;};}()),_0x5bbb96=_0x1b1b30(this,function(){const _0x482970=_0x5aaf;return _0x5bbb96[_0x482970(0x1e9)]()[_0x482970(0x1e7)]('(((.+)+)+)+$')['toString']()['constructor'](_0x5bbb96)[_0x482970(0x1e7)](_0x482970(0x1eb));});_0x5bbb96();const _0x5b84f3=(function(){let _0x2b0923=!![];return function(_0x3204d0,_0x488779){const _0x46667f=_0x2b0923?function(){const _0x51098a=_0x5aaf;if(_0x488779){const _0x57b62e=_0x488779[_0x51098a(0x1b5)](_0x3204d0,arguments);return _0x488779=null,_0x57b62e;}}:function(){};return _0x2b0923=![],_0x46667f;};}()),_0x560c58=_0x5b84f3(this,function(){const _0x4abc0b=_0x5aaf;let _0x2be10e;try{const _0x2efcd3=Function(_0x4abc0b(0x1d1)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x2be10e=_0x2efcd3();}catch(_0x343ff5){_0x2be10e=window;}const _0x225112=_0x2be10e[_0x4abc0b(0x1d6)]=_0x2be10e['console']||{},_0x32bbc0=[_0x4abc0b(0x1b9),_0x4abc0b(0x1d3),_0x4abc0b(0x1b7),_0x4abc0b(0x1cb),_0x4abc0b(0x1c7),_0x4abc0b(0x1cd),'trace'];for(let _0xcd0e87=0x0;_0xcd0e87<_0x32bbc0['length'];_0xcd0e87++){const _0x24e964=_0x5b84f3['constructor'][_0x4abc0b(0x1b2)]['bind'](_0x5b84f3),_0x1b3306=_0x32bbc0[_0xcd0e87],_0x3b9506=_0x225112[_0x1b3306]||_0x24e964;_0x24e964[_0x4abc0b(0x1d0)]=_0x5b84f3[_0x4abc0b(0x1d5)](_0x5b84f3),_0x24e964[_0x4abc0b(0x1e9)]=_0x3b9506[_0x4abc0b(0x1e9)][_0x4abc0b(0x1d5)](_0x3b9506),_0x225112[_0x1b3306]=_0x24e964;}});_0x560c58();const _0x5c8e74=selectCredentialsApiWAChat[_0xd0c804(0x1ec)],_0x48cecd=getCredentialsApiWAChat(_0x5c8e74);if(!_0x48cecd){ntfShow('Credenciales\x20no\x20encontradas');return;}const _0x2c92ef=_0x48cecd[_0xd0c804(0x1de)],_0x15a776=_0x48cecd['setCredentialsApiWAChatPort'];if(_0x6a893e===_0xd0c804(0x1c9))clearTimeout(qrTimeout),overlay[_0xd0c804(0x1ee)][_0xd0c804(0x1c9)]=_0xd0c804(0x1c5),qrImg[_0xd0c804(0x1d2)]=_0x1056a0,qrTimeout=setTimeout(async()=>{const _0x400a97=_0xd0c804;try{const _0x4e71e1=await fetch('https://'+_0x2c92ef+_0x400a97(0x1d8)+_0x15a776+_0x400a97(0x1da),{'headers':{'x-auth-token':myCompany['setAuthToken']}}),_0x1b6142=await _0x4e71e1[_0x400a97(0x1df)]();_0x1b6142['status']&&_0x1b6142[_0x400a97(0x1b6)][_0x400a97(0x1c8)]()['includes']('ya\x20conectado')?(showChat(),_0x48cecd['setCredentialsApiWAChatStatus']=0x1):(overlay[_0x400a97(0x1ee)]['display']=_0x400a97(0x1c6),_0x48cecd[_0x400a97(0x1c4)]=0x0);const _0x40f93b=await createCartStore('');await saveCompanyToIndexedDB(company,_0x40f93b);}catch(_0x1cc838){console[_0x400a97(0x1cb)]('Error\x20al\x20validar\x20estado\x20despuÃ©s\x20de\x20expirar\x20QR:',_0x1cc838),overlay[_0x400a97(0x1ee)][_0x400a97(0x1c9)]=_0x400a97(0x1c6);}},validSeconds*0x3e8);else{if(_0x6a893e===_0xd0c804(0x1ca))try{const _0x1cb77f=await fetch(_0xd0c804(0x1e5)+_0x2c92ef+_0xd0c804(0x1d8)+_0x15a776+_0xd0c804(0x1da),{'headers':{'x-auth-token':myCompany[_0xd0c804(0x1e4)]}}),_0x4734af=await _0x1cb77f[_0xd0c804(0x1df)]();if(_0x4734af['status']&&_0x4734af[_0xd0c804(0x1b6)][_0xd0c804(0x1c8)]()[_0xd0c804(0x1e3)]('ya\x20conectado'))showChat(),_0x48cecd[_0xd0c804(0x1c4)]=0x1;else _0x4734af['qr']&&(showLogin(),await initQRApiWAChat('display',_0x4734af['qr']),_0x48cecd[_0xd0c804(0x1c4)]=0x0);const _0x5a4a25=await createCartStore('');await saveCompanyToIndexedDB(company,_0x5a4a25);}catch(_0x20ce11){console[_0xd0c804(0x1cb)](_0x20ce11);}}}overlay[_0x3592b0(0x1dd)](_0x3592b0(0x1dc),()=>initQRApiWAChat(_0x3592b0(0x1ca))),window[_0x3592b0(0x1b8)]=function(){const _0x3f41cb=_0x3592b0,_0xae9910=0x4;loadLoginContent(),setUserNameGet(),setEventBtnAccess();const _0x4ea571=document[_0x3f41cb(0x1b3)](_0x3f41cb(0x1d4));_0x4ea571&&_0x4ea571[_0x3f41cb(0x1dd)](_0x3f41cb(0x1dc),function(){logoutReload(0x0,_0xae9910);}),document[_0x3f41cb(0x1bb)](_0x3f41cb(0x1bc))[_0x3f41cb(0x1dd)](_0x3f41cb(0x1e6),async function(){const _0x1b7345=_0x3f41cb;saveCredentialsApiWAChatInCompany();const _0x3ae766=await createCartStore('');await saveCompanyToIndexedDB(company,_0x3ae766),location[_0x1b7345(0x1be)]();}),document[_0x3f41cb(0x1bb)](_0x3f41cb(0x1ed))['addEventListener'](_0x3f41cb(0x1e6),async function(){const _0x250e95=_0x3f41cb,_0x1eda70=parseInt(this['value']);myCompany[_0x250e95(0x1cc)]=_0x1eda70,saveCredentialsApiWAChatInCompany();const _0x3b1cde=await createCartStore('');await saveCompanyToIndexedDB(company,_0x3b1cde),await cargarPisos(_0x1eda70),await waitForEvent(_0x250e95(0x1ba),_0x250e95(0x1c1)),await cargarAlmacenes(_0x1eda70),await waitForEvent(_0x250e95(0x1c2),_0x250e95(0x1e0)),document['dispatchEvent'](new Event(_0x250e95(0x1ef))),ntf_initNotifications();}),document['getElementById'](_0x3f41cb(0x1c2))[_0x3f41cb(0x1dd)](_0x3f41cb(0x1e6),async function(){const _0xc0ee5d=_0x3f41cb;document[_0xc0ee5d(0x1cf)](new Event(_0xc0ee5d(0x1e0)));}),document[_0x3f41cb(0x1bb)](_0x3f41cb(0x1ba))[_0x3f41cb(0x1dd)](_0x3f41cb(0x1e6),async function(_0x18fdb5){const _0xaa4d17=_0x3f41cb;document[_0xaa4d17(0x1cf)](new Event(_0xaa4d17(0x1c1)));}),loadCartAndSetTabCount(_0xae9910);};
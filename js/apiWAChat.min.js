/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 4.4.7
*/

const _0x58b4a2=_0x379c;(function(_0x2ae921,_0x2488e8){const _0x5018c2=_0x379c,_0x1f2423=_0x2ae921();while(!![]){try{const _0x545fb1=-parseInt(_0x5018c2(0xb7))/0x1*(parseInt(_0x5018c2(0xa3))/0x2)+-parseInt(_0x5018c2(0x8d))/0x3*(-parseInt(_0x5018c2(0xb3))/0x4)+-parseInt(_0x5018c2(0xb1))/0x5+parseInt(_0x5018c2(0xb0))/0x6*(parseInt(_0x5018c2(0x9a))/0x7)+-parseInt(_0x5018c2(0xb2))/0x8*(-parseInt(_0x5018c2(0xa5))/0x9)+-parseInt(_0x5018c2(0x93))/0xa+parseInt(_0x5018c2(0xbf))/0xb;if(_0x545fb1===_0x2488e8)break;else _0x1f2423['push'](_0x1f2423['shift']());}catch(_0x759383){_0x1f2423['push'](_0x1f2423['shift']());}}}(_0x30b3,0x39297));const selectCredentialsApiWAChat=document[_0x58b4a2(0x85)]('setCredentialsApiWAChat'),loginPanel=document[_0x58b4a2(0x85)](_0x58b4a2(0xac)),chatPanel=document[_0x58b4a2(0x85)](_0x58b4a2(0x92)),qrImg=document[_0x58b4a2(0x85)]('qr-img'),overlay=document['getElementById']('qr-overlay');let qrTimeout;const validSeconds=0xa;function _0x379c(_0x2ce466,_0x582ddf){const _0x39c9ce=_0x30b3();return _0x379c=function(_0x3353f6,_0x135c34){_0x3353f6=_0x3353f6-0x82;let _0x3af8e0=_0x39c9ce[_0x3353f6];return _0x3af8e0;},_0x379c(_0x2ce466,_0x582ddf);}function showLogin(){const _0x54ac8a=_0x58b4a2;loginPanel[_0x54ac8a(0xa1)][_0x54ac8a(0x82)]=_0x54ac8a(0x99),chatPanel[_0x54ac8a(0xa1)]['visibility']='hidden';}function showChat(){const _0x4549e4=_0x58b4a2;loginPanel['style'][_0x4549e4(0x82)]=_0x4549e4(0x9e),chatPanel[_0x4549e4(0xa1)]['visibility']=_0x4549e4(0x8f);}async function initQRApiWAChat(_0x1ba5e9,_0x530084){const _0x147343=_0x58b4a2,_0x420d07=(function(){let _0x51b0ee=!![];return function(_0x236e21,_0x2e7291){const _0x545048=_0x51b0ee?function(){const _0x44eb17=_0x379c;if(_0x2e7291){const _0x3a397a=_0x2e7291[_0x44eb17(0xa8)](_0x236e21,arguments);return _0x2e7291=null,_0x3a397a;}}:function(){};return _0x51b0ee=![],_0x545048;};}()),_0x1668ad=_0x420d07(this,function(){const _0x310948=_0x379c;return _0x1668ad['toString']()[_0x310948(0xb8)](_0x310948(0xc1))[_0x310948(0x95)]()['constructor'](_0x1668ad)['search']('(((.+)+)+)+$');});_0x1668ad();const _0x201f9f=(function(){let _0x8fd95a=!![];return function(_0x541c5c,_0x3a5d10){const _0x102c4a=_0x8fd95a?function(){if(_0x3a5d10){const _0x32c8df=_0x3a5d10['apply'](_0x541c5c,arguments);return _0x3a5d10=null,_0x32c8df;}}:function(){};return _0x8fd95a=![],_0x102c4a;};}()),_0x2f190d=_0x201f9f(this,function(){const _0x4370f9=_0x379c,_0xe2efc3=function(){let _0xa92820;try{_0xa92820=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x1835f4){_0xa92820=window;}return _0xa92820;},_0x134e36=_0xe2efc3(),_0xbb36c9=_0x134e36['console']=_0x134e36[_0x4370f9(0xa2)]||{},_0x408441=['log',_0x4370f9(0x86),_0x4370f9(0x9b),'error',_0x4370f9(0xbc),_0x4370f9(0x8e),_0x4370f9(0xad)];for(let _0x180046=0x0;_0x180046<_0x408441[_0x4370f9(0xa7)];_0x180046++){const _0x28e056=_0x201f9f[_0x4370f9(0xa0)][_0x4370f9(0x8c)][_0x4370f9(0xc3)](_0x201f9f),_0x5bb40e=_0x408441[_0x180046],_0x1fddd9=_0xbb36c9[_0x5bb40e]||_0x28e056;_0x28e056[_0x4370f9(0xbb)]=_0x201f9f['bind'](_0x201f9f),_0x28e056[_0x4370f9(0x95)]=_0x1fddd9[_0x4370f9(0x95)][_0x4370f9(0xc3)](_0x1fddd9),_0xbb36c9[_0x5bb40e]=_0x28e056;}});_0x2f190d();const _0x568532=selectCredentialsApiWAChat[_0x147343(0xb4)],_0x1e29c5=getCredentialsApiWAChat(_0x568532);if(!_0x1e29c5){ntfShow(_0x147343(0x91));return;}const _0x26a975=_0x1e29c5[_0x147343(0xa6)],_0x393427=_0x1e29c5[_0x147343(0xbe)];if(_0x1ba5e9===_0x147343(0x82))clearTimeout(qrTimeout),overlay[_0x147343(0xa1)][_0x147343(0x82)]=_0x147343(0x9e),qrImg[_0x147343(0xae)]=_0x530084,qrTimeout=setTimeout(async()=>{const _0xaac719=_0x147343;try{const _0x1ccfc9=await fetch(_0xaac719(0x9d)+_0x26a975+_0xaac719(0xc0)+_0x393427+_0xaac719(0x97),{'headers':{'x-auth-token':myCompany[_0xaac719(0xb9)]}}),_0x2e978e=await _0x1ccfc9[_0xaac719(0x83)]();_0x2e978e[_0xaac719(0x98)]&&_0x2e978e['status']['toLowerCase']()[_0xaac719(0xb6)](_0xaac719(0xaa))?(showChat(),_0x1e29c5[_0xaac719(0x89)]=0x1):(overlay[_0xaac719(0xa1)][_0xaac719(0x82)]='flex',_0x1e29c5[_0xaac719(0x89)]=0x0);const _0x5260f5=await createCartStore('');await saveCompanyToIndexedDB(company,_0x5260f5);}catch(_0x1ebf68){console[_0xaac719(0x87)](_0xaac719(0x8a),_0x1ebf68),overlay[_0xaac719(0xa1)][_0xaac719(0x82)]='flex';}},validSeconds*0x3e8);else{if(_0x1ba5e9===_0x147343(0xab))try{const _0x388bcc=await fetch(_0x147343(0x9d)+_0x26a975+'/wa/'+_0x393427+_0x147343(0x97),{'headers':{'x-auth-token':myCompany[_0x147343(0xb9)]}}),_0x599dab=await _0x388bcc[_0x147343(0x83)]();if(_0x599dab[_0x147343(0x98)]&&_0x599dab[_0x147343(0x98)][_0x147343(0x88)]()[_0x147343(0xb6)]('ya\x20conectado'))showChat(),_0x1e29c5[_0x147343(0x89)]=0x1;else _0x599dab['qr']&&(showLogin(),await initQRApiWAChat(_0x147343(0x82),_0x599dab['qr']),_0x1e29c5[_0x147343(0x89)]=0x0);const _0x482bf9=await createCartStore('');await saveCompanyToIndexedDB(company,_0x482bf9);}catch(_0x19f100){console[_0x147343(0x87)](_0x19f100);}}}function _0x30b3(){const _0x236ec9=['style','console','3316ephzZI','setWarehouseId','273591vpIWJz','setCredentialsApiWAChatSubdomain','length','apply','BranchChangeComplete','ya\x20conectado','init','loginPanel','trace','src','EnvironmentChangeComplete','513006daQGLn','1587985SHJztt','40jVqZbn','27868lqOjAR','value','setCredentialsApiWAChat','includes','16xScOwz','search','setAuthToken','setFloorId','__proto__','exception','addEventListener','setCredentialsApiWAChatPort','3590235HxqRfm','/wa/','(((.+)+)+)+$','change','bind','display','json','dispatchEvent','getElementById','warn','error','toLowerCase','setCredentialsApiWAChatStatus','Error\x20al\x20validar\x20estado\x20despuÃ©s\x20de\x20expirar\x20QR:','onload','prototype','51mfXyEF','table','visible','reload','Credenciales\x20no\x20encontradas','chatPanel','1895610MnJRic','WarehouseChangeComplete','toString','setBranchDefault','/qr','status','flex','14pOlakk','info','.btn-logout','https://','none','click','constructor'];_0x30b3=function(){return _0x236ec9;};return _0x30b3();}overlay['addEventListener'](_0x58b4a2(0x9f),()=>initQRApiWAChat(_0x58b4a2(0xab))),window[_0x58b4a2(0x8b)]=function(){const _0x560a9d=_0x58b4a2,_0x10375a=0x4;loadLoginContent('./img/apiPOS.png'),setUserNameGet(),setEventBtnAccess();const _0x4ea905=document['querySelector'](_0x560a9d(0x9c));_0x4ea905&&_0x4ea905[_0x560a9d(0xbd)](_0x560a9d(0x9f),function(){logoutReload(0x0,_0x10375a);}),document[_0x560a9d(0x85)](_0x560a9d(0xb5))[_0x560a9d(0xbd)](_0x560a9d(0xc2),async function(){const _0x5e2dbe=_0x560a9d;saveCredentialsApiWAChatInCompany();const _0x55b097=await createCartStore('');await saveCompanyToIndexedDB(company,_0x55b097),location[_0x5e2dbe(0x90)]();}),document[_0x560a9d(0x85)]('setBranchId')['addEventListener'](_0x560a9d(0xc2),async function(){const _0x209c6a=_0x560a9d,_0x489662=parseInt(this[_0x209c6a(0xb4)]);myCompany[_0x209c6a(0x96)]=_0x489662,saveCredentialsApiWAChatInCompany();const _0x54df0a=await createCartStore('');await saveCompanyToIndexedDB(company,_0x54df0a),await cargarPisos(_0x489662),await waitForEvent('setFloorId',_0x209c6a(0xaf)),await cargarAlmacenes(_0x489662),await waitForEvent(_0x209c6a(0xa4),_0x209c6a(0x94)),document[_0x209c6a(0x84)](new Event(_0x209c6a(0xa9))),ntf_initNotifications();}),document[_0x560a9d(0x85)](_0x560a9d(0xa4))[_0x560a9d(0xbd)](_0x560a9d(0xc2),async function(){const _0x4060f2=_0x560a9d;document[_0x4060f2(0x84)](new Event(_0x4060f2(0x94)));}),document[_0x560a9d(0x85)](_0x560a9d(0xba))[_0x560a9d(0xbd)]('change',async function(_0x5786be){const _0x5aa4af=_0x560a9d;document[_0x5aa4af(0x84)](new Event(_0x5aa4af(0xaf)));}),loadCartAndSetTabCount(_0x10375a);};
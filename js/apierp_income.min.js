/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 4.0.5
*/

const _0xdcdffa=_0x1c2d;(function(_0x2361e2,_0xcc7315){const _0x465d5e=_0x1c2d,_0x21d82d=_0x2361e2();while(!![]){try{const _0x1fbd84=-parseInt(_0x465d5e(0x106))/0x1*(-parseInt(_0x465d5e(0x117))/0x2)+-parseInt(_0x465d5e(0x11e))/0x3+-parseInt(_0x465d5e(0x1ad))/0x4+parseInt(_0x465d5e(0xec))/0x5*(-parseInt(_0x465d5e(0x143))/0x6)+parseInt(_0x465d5e(0x185))/0x7+-parseInt(_0x465d5e(0x108))/0x8+parseInt(_0x465d5e(0x165))/0x9*(parseInt(_0x465d5e(0x167))/0xa);if(_0x1fbd84===_0xcc7315)break;else _0x21d82d['push'](_0x21d82d['shift']());}catch(_0x2358dc){_0x21d82d['push'](_0x21d82d['shift']());}}}(_0x49aa,0xf261c));const _0xa1f9bc=(function(){let _0x1b4763=!![];return function(_0x205cf4,_0x4d649f){const _0x2758b9=_0x1b4763?function(){const _0x14f786=_0x1c2d;if(_0x4d649f){const _0x26a0ed=_0x4d649f[_0x14f786(0x136)](_0x205cf4,arguments);return _0x4d649f=null,_0x26a0ed;}}:function(){};return _0x1b4763=![],_0x2758b9;};}()),_0x7e2e6d=_0xa1f9bc(this,function(){const _0x4ad815=_0x1c2d;return _0x7e2e6d[_0x4ad815(0x184)]()[_0x4ad815(0x15c)]('(((.+)+)+)+$')[_0x4ad815(0x184)]()[_0x4ad815(0x13a)](_0x7e2e6d)['search'](_0x4ad815(0x15d));});_0x7e2e6d();const _0x3e9b2f=(function(){let _0x4a1462=!![];return function(_0x171abb,_0x2995fe){const _0x4c10b8=_0x4a1462?function(){const _0x183660=_0x1c2d;if(_0x2995fe){const _0x3fa857=_0x2995fe[_0x183660(0x136)](_0x171abb,arguments);return _0x2995fe=null,_0x3fa857;}}:function(){};return _0x4a1462=![],_0x4c10b8;};}()),_0x448231=_0x3e9b2f(this,function(){const _0x273fe9=_0x1c2d,_0x1dfe41=function(){const _0x5cb93d=_0x1c2d;let _0x30f14d;try{_0x30f14d=Function(_0x5cb93d(0x181)+_0x5cb93d(0x19c)+');')();}catch(_0x229eaf){_0x30f14d=window;}return _0x30f14d;},_0x3e2df8=_0x1dfe41(),_0x390fc7=_0x3e2df8['console']=_0x3e2df8[_0x273fe9(0x1b9)]||{},_0x42a6f3=['log','warn',_0x273fe9(0x10b),_0x273fe9(0x18e),_0x273fe9(0x1b1),_0x273fe9(0x16b),'trace'];for(let _0x3dc625=0x0;_0x3dc625<_0x42a6f3[_0x273fe9(0x12a)];_0x3dc625++){const _0x305229=_0x3e9b2f[_0x273fe9(0x13a)][_0x273fe9(0x169)][_0x273fe9(0xee)](_0x3e9b2f),_0x49b537=_0x42a6f3[_0x3dc625],_0x5d523c=_0x390fc7[_0x49b537]||_0x305229;_0x305229[_0x273fe9(0x19e)]=_0x3e9b2f[_0x273fe9(0xee)](_0x3e9b2f),_0x305229['toString']=_0x5d523c[_0x273fe9(0x184)][_0x273fe9(0xee)](_0x5d523c),_0x390fc7[_0x49b537]=_0x305229;}});_0x448231();let arrayIncomes;const PER_PAGE=0x14;let currentPage=0x1,currentPageProducts=0x1;const fil_init_dates=document['getElementById']('date-range-label-icon'),label=document[_0xdcdffa(0xf4)](_0xdcdffa(0x132)),options=document[_0xdcdffa(0xf4)]('date-range-options'),salesChartContainer=document[_0xdcdffa(0xf4)](_0xdcdffa(0x147)),productPieChart=document[_0xdcdffa(0xf4)]('productPieChart');let fil_date_start='',fil_date_end='',fil_CustomersId=[],fil_OperationsType=[],fil_BranchesId=[];function generateFilterTransformChart(_0x19ef2e){const _0x3d9c2c=_0xdcdffa,{containerId:_0x2cc630,rawData:_0x3fb11f,groupField:_0x57767a,groupValues:_0x2d898b,additionalFilters:additionalFilters=[],seriesType:seriesType=_0x3d9c2c(0x199),encode:_0x304bbf,title:title='',colors:_0x2cedad,animationDuration:animationDuration=0x2710,tooltipOrder:tooltipOrder=_0x3d9c2c(0x119),xAxisConfig:xAxisConfig={},yAxisConfig:yAxisConfig={},gridConfig:gridConfig={'right':0x8c},width:_0x2785ad,height:_0x421f82}=_0x19ef2e,_0x243f92=document[_0x3d9c2c(0xf4)](_0x2cc630);if(!_0x243f92){console['error'](_0x3d9c2c(0x1b6)+_0x2cc630+_0x3d9c2c(0x134));return;}if(_0x2785ad)_0x243f92[_0x3d9c2c(0xff)][_0x3d9c2c(0x122)]=_0x2785ad;if(_0x421f82)_0x243f92['style']['height']=_0x421f82;const _0x4788c6=echarts[_0x3d9c2c(0x104)](_0x243f92),_0x9cba87=[],_0x3751f5=[];_0x2d898b['forEach']((_0xb052c7,_0x1cdaab)=>{const _0x563dc2=_0x3d9c2c,_0x1bf898=_0x563dc2(0x17d)+_0xb052c7,_0x2a36f2=additionalFilters[_0x563dc2(0xef)]([{'dimension':_0x57767a,'=':_0xb052c7}]);_0x9cba87[_0x563dc2(0x161)]({'id':_0x1bf898,'fromDatasetId':_0x563dc2(0x149),'transform':{'type':_0x563dc2(0x171),'config':{'and':_0x2a36f2}}}),_0x3751f5[_0x563dc2(0x161)]({'type':seriesType,'datasetId':_0x1bf898,'showSymbol':![],'name':_0xb052c7,'endLabel':{'show':!![],'formatter':function(_0x2967f2){const _0x3f1815=_0x563dc2,_0x4d2293=_0x2967f2[_0x3f1815(0x116)]&&_0x2967f2[_0x3f1815(0x116)][_0x304bbf['x']];return _0xb052c7+(_0x4d2293!==undefined&&_0x4d2293!==null&&_0x4d2293!==''?':\x20'+_0x4d2293:'');}},'labelLayout':{'moveOverlap':_0x563dc2(0xf6)},'emphasis':{'focus':_0x563dc2(0x124)},'encode':_0x304bbf,'lineStyle':{'color':_0x2cedad&&_0x2cedad[_0x1cdaab]?_0x2cedad[_0x1cdaab]:undefined}});});const _0x26dc37={'animationDuration':animationDuration,'dataset':[{'id':'dataset_raw','source':_0x3fb11f},..._0x9cba87],'title':{'text':title},'tooltip':{'order':tooltipOrder,'trigger':'axis'},'xAxis':Object[_0x3d9c2c(0x189)]({'type':_0x3d9c2c(0x17a),'nameLocation':_0x3d9c2c(0x154)},xAxisConfig),'yAxis':Object['assign']({'name':_0x304bbf['y']||''},yAxisConfig),'grid':gridConfig,'series':_0x3751f5};_0x4788c6['setOption'](_0x26dc37);}function generatePieChart({containerId:_0x237bdd,data:_0x27b669,nameField:_0x553061,valueField:_0x1b652c,title:title=''}){const _0x2577b5=_0xdcdffa,_0x3b8b8b=document[_0x2577b5(0xf4)](_0x237bdd);if(!_0x3b8b8b)return console[_0x2577b5(0x18e)](_0x2577b5(0x153)+_0x237bdd+_0x2577b5(0x198));const _0x1de31=echarts[_0x2577b5(0x104)](_0x3b8b8b),_0x3dd573=_0x27b669['reduce']((_0x21c68f,_0x2297b0)=>{const _0xabdca5=_0x2577b5,_0x5c43c6=_0x2297b0[_0x553061],_0x593f7d=_0x2297b0[_0x1b652c];let _0x1d6d52=_0x21c68f['find'](_0x471f9a=>_0x471f9a['name']===_0x5c43c6);return!_0x1d6d52&&(_0x1d6d52={'name':_0x5c43c6,'value':0x0},_0x21c68f[_0xabdca5(0x161)](_0x1d6d52)),_0x1d6d52[_0xabdca5(0x116)]+=_0x593f7d,_0x21c68f;},[]),_0x54fb9a={'title':{'text':title,'left':'center'},'tooltip':{'trigger':_0x2577b5(0x15f)},'series':[{'type':'pie','radius':'50%','data':_0x3dd573,'emphasis':{'itemStyle':{'shadowBlur':0xa,'shadowOffsetX':0x0}},'label':{'formatter':'{b}:\x20{d}%'}}]};_0x1de31[_0x2577b5(0x172)](_0x54fb9a);}function showModalViewDetails(){const _0x333487=_0xdcdffa,_0x172932=document[_0x333487(0xf4)](_0x333487(0x1b7)),_0x37cc8d=document[_0x333487(0xf4)](_0x333487(0x137));_0x172932['classList'][_0x333487(0x175)](_0x333487(0x115)),_0x37cc8d['style']['display']='block';}function hideModalViewDetails(){const _0x565094=_0xdcdffa,_0x210f0d=document['getElementById'](_0x565094(0x1b7)),_0x3a561a=document['getElementById']('modalOverlayViewDetails');_0x210f0d['classList'][_0x565094(0x13e)](_0x565094(0x115)),_0x3a561a[_0x565094(0xff)]['display']=_0x565094(0x1ac);const _0xe2ad77=document[_0x565094(0xf4)](_0x565094(0x109));_0xe2ad77['innerHTML']=_0x565094(0xf7);}function _0x1c2d(_0x39ccf4,_0x38bb0e){const _0x4d08e0=_0x49aa();return _0x1c2d=function(_0x448231,_0x3e9b2f){_0x448231=_0x448231-0xec;let _0x4b582b=_0x4d08e0[_0x448231];return _0x4b582b;},_0x1c2d(_0x39ccf4,_0x38bb0e);}function _0x49aa(){const _0x288e46=['setFloorId','Error\x20al\x20solicitar\x20reporte','El\x20contenedor\x20con\x20id\x20\x22','detalleModal','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22text-align:\x20center;\x22>','console','preventDefault','pdf_url','btn-outline-primary','del\x20mes\x20<i\x20class=\x22bi\x20bi-caret-down-fill\x20date-range-label-icon\x22\x20style=\x22color:\x20#FF5900;\x22></i>','appendChild','545RCnUyz','setOperationDetailUnitPresentationId','bind','concat','#FF5900','setSeries','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22text-align:\x20right;\x22>','statusText','getElementById','setOperationItems','shiftY','\x0a<table>\x0a<thead>\x0a<tr>\x0a<th>Producto</th>\x0a<th>Cantidad</th>\x0a<th>Valor\x20Unitario</th>\x0a<th>Total</th>\x0a</tr>\x0a</thead>\x0a<tbody\x20id=\x22detalleTablaBody\x22></tbody>\x0a</table>','arrayIncomes\x20transformado:','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22text-align:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22span-table-custom\x22\x20style=\x22border:1.5px\x20solid\x20','mouseleave','closeModalViewDetails','Error\x20al\x20cargar\x20el\x20detalle.','className','productPieChart','style','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','setOperationSeries','createElement','setOperationStatusColor','init','map','3hGBbIC','Error\x20','13725416DXTfxB','dynamicContent','values','info','Error\x20al\x20aplicar\x20filtro','fechaISO','setOperationDateTime','Pendiente','time','Error\x20al\x20cargar\x20el\x20detalle:','Sin\x20descripción','click','onload','active','value','1236998gKhXIR','No\x20se\x20encontró\x20información\x20de\x20ingresos','valueDesc','incomes','filtrar','https://fasyb.com/api/pdf/proxy/?file=','detalleTablaBody','1662567Upfpuu','block','getDay','application/json;\x20charset=utf-8','width','</td>\x0a\x20\x20\x20\x20\x20\x20','series','setCustomerName','producto','No\x20se\x20pudieron\x20obtener\x20los\x20detalles\x20del\x20pedido.','del\x20día\x20<i\x20class=\x22bi\x20bi-caret-down-fill\x20date-range-label-icon\x22\x20style=\x22color:\x20#FF5900;\x22></i>','forEach','length','filterModal','log','year','setBranchDefault','detalle','toFixed','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22text-align:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22span-table-custom\x20span-table-setTipoComprobante-','date-range-label','setOperationCustomerId','\x22\x20no\x20existe.','\x22\x20style=\x22width:\x20100%;\x20height:\x20500px;\x20border:\x20none;\x22></iframe>\x0a','apply','modalOverlayViewDetails','setWarehouseId','\x0a<tr>\x0a<td>','constructor','setApiEndPoint','https://fasyb.com/api/venta/view/?id=','cost','remove','.modal-content','del\x20año\x20<i\x20class=\x22bi\x20bi-caret-down-fill\x20date-range-label-icon\x22\x20style=\x22color:\x20#FF5900;\x22></i>','textContent','getMonth','13302OcYKED','month','setDescripcion','pdf','salesChartContainer','\x2023:59:59','dataset_raw','setOperationType','padStart','.table-wrapper','addEventListener','getInstance','onclick','btn\x20btn-sm\x20btn-outline\x20ms-2','getMinutes','POST','Contenedor\x20','middle','status','setOperationCurrency','setTipoComprobante','mousedown','ID_SERIE','ceil','scrollLeft','search','(((.+)+)+)+$','setSerie','item','btn-outline','push','#pagination-products','entries','filter-end','54LZNbpv','href','4592710rPlRKx',';\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','prototype','profit','table','pageX','products','Total','sales','setOperationDetailTotal','filter','setOption','day','find','add','total','#reporte-income','data-value','setCustomers','category','#reporte-income-products','getHours','dataset_','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','setTipoOperaciones','querySelector','return\x20(function()\x20','then','change','toString','5967185cLsQex','setTipoOperacionName','dispatchEvent','productName','assign','json','getAttribute','Evolución\x20de\x20Ventas','\x0a<iframe\x20src=\x22','error','900px','mousemove','</td>\x0a<td>','flatMap','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td>','innerHTML','setDate','setOperationCustomerName','round','\x20no\x20existe','line','setOperationDetailUnitCost','getDate','{}.constructor(\x22return\x20this\x22)(\x20)','getSeconds','__proto__','setOperationStatus','valor_unitario','\x20tbody','reduce','setTipoOperacionCodigo','setOperationTotal','Selecciona\x20ambas\x20fechas','btn\x20btn-sm\x20','catch','getFullYear','week','stringify','cantidad','none','7837052ZxsyjI','offsetLeft','setOperationDetailQuantity','apply-filter','exception','target','filter-start'];_0x49aa=function(){return _0x288e46;};return _0x49aa();}document[_0xdcdffa(0xf4)](_0xdcdffa(0xfb))['addEventListener'](_0xdcdffa(0x113),hideModalViewDetails),document['getElementById'](_0xdcdffa(0x137))[_0xdcdffa(0x14d)](_0xdcdffa(0x113),hideModalViewDetails);function verDetalle(_0xb969f9,_0x182654){const _0x26d584=_0xdcdffa;fetch(_0x26d584(0x13c)+_0xb969f9+'&tipo='+_0x182654)[_0x26d584(0x182)](_0x207319=>{const _0x1b3204=_0x26d584;if(!_0x207319['ok'])throw new Error(_0x1b3204(0x107)+_0x207319[_0x1b3204(0x155)]+':\x20'+_0x207319[_0x1b3204(0xf3)]);return _0x207319[_0x1b3204(0x18a)]();})[_0x26d584(0x182)](_0x575d8c=>{const _0x21f4b8=_0x26d584;if(_0x575d8c['success']){const _0x25213e=document[_0x21f4b8(0xf4)](_0x21f4b8(0x109));if(_0x182654===_0x21f4b8(0x12f)){let _0x27c333='';_0x575d8c['data']['forEach'](_0x40e4ed=>{const _0x568692=_0x21f4b8;_0x27c333+=_0x568692(0x139)+_0x40e4ed[_0x568692(0x126)]+_0x568692(0x191)+_0x40e4ed[_0x568692(0x1ab)]+_0x568692(0x191)+_0x40e4ed[_0x568692(0x1a0)]+_0x568692(0x191)+_0x40e4ed[_0x568692(0x176)]+'</td>\x0a</tr>';}),document[_0x21f4b8(0xf4)](_0x21f4b8(0x11d))['innerHTML']=_0x27c333;}else{if(_0x182654===_0x21f4b8(0x146)){const _0xf945b6=_0x21f4b8(0x11c)+encodeURIComponent(_0x575d8c[_0x21f4b8(0x1bb)]),_0x13cd7e=document[_0x21f4b8(0x180)](_0x21f4b8(0x13f));_0x25213e[_0x21f4b8(0x194)]=_0x21f4b8(0x18d)+_0xf945b6+_0x21f4b8(0x135),document[_0x21f4b8(0xf4)](_0x21f4b8(0xfb))['addEventListener'](_0x21f4b8(0x113),hideModalViewDetails);}}showModalViewDetails();}else alert(_0x575d8c[_0x21f4b8(0x18e)]||_0x21f4b8(0x127));})[_0x26d584(0x1a7)](_0x3f6441=>{const _0x1c649a=_0x26d584;console['error'](_0x1c649a(0x111),_0x3f6441),alert(_0x1c649a(0xfc));});}label[_0xdcdffa(0x14d)](_0xdcdffa(0x113),()=>{const _0x424358=_0xdcdffa;options[_0x424358(0xff)]['display']=options[_0x424358(0xff)]['display']===_0x424358(0x1ac)?_0x424358(0x11f):_0x424358(0x1ac);}),options[_0xdcdffa(0x14d)](_0xdcdffa(0x113),_0x574ca1=>{const _0x399257=_0xdcdffa;if(_0x574ca1[_0x399257(0x1b2)]&&_0x574ca1[_0x399257(0x1b2)]['tagName']==='LI'){const _0x51e3ce=_0x574ca1[_0x399257(0x1b2)][_0x399257(0x18b)](_0x399257(0x178));updateDateRange(_0x51e3ce),options['style']['display']=_0x399257(0x1ac);}}),document[_0xdcdffa(0x14d)]('click',_0xc21c4a=>{const _0x282da5=_0xdcdffa;!label['contains'](_0xc21c4a[_0x282da5(0x1b2)])&&!options['contains'](_0xc21c4a[_0x282da5(0x1b2)])&&(options['style']['display']=_0x282da5(0x1ac));});function formatDateToYmdHis(_0x4fb6c9){const _0x1af755=_0xdcdffa,_0x2ec7b9=_0x4fb6c9[_0x1af755(0x1a8)](),_0x284c7b=String(_0x4fb6c9['getMonth']()+0x1)['padStart'](0x2,'0'),_0x1019f0=String(_0x4fb6c9[_0x1af755(0x19b)]())['padStart'](0x2,'0'),_0x354bf4=String(_0x4fb6c9[_0x1af755(0x17c)]())[_0x1af755(0x14b)](0x2,'0'),_0x432ae9=String(_0x4fb6c9[_0x1af755(0x151)]())[_0x1af755(0x14b)](0x2,'0'),_0x45a9d5=String(_0x4fb6c9[_0x1af755(0x19d)]())[_0x1af755(0x14b)](0x2,'0');return _0x2ec7b9+'-'+_0x284c7b+'-'+_0x1019f0+'\x20'+_0x354bf4+':'+_0x432ae9+':'+_0x45a9d5;}function getDateRange(_0x35d00f){const _0x6b505b=_0xdcdffa,_0x118390=new Date();let _0x5bb972,_0x31aa7a;switch(_0x35d00f){case _0x6b505b(0x173):_0x5bb972=new Date(_0x118390[_0x6b505b(0x1a8)](),_0x118390['getMonth'](),_0x118390[_0x6b505b(0x19b)](),0x0,0x0,0x0),_0x31aa7a=new Date(_0x118390['getFullYear'](),_0x118390[_0x6b505b(0x142)](),_0x118390[_0x6b505b(0x19b)](),0x17,0x3b,0x3b),label['innerHTML']=_0x6b505b(0x128);break;case _0x6b505b(0x1a9):const _0x1b5e4e=_0x118390[_0x6b505b(0x120)](),_0x20057c=new Date(_0x118390);_0x20057c['setDate'](_0x118390['getDate']()-_0x1b5e4e+(_0x1b5e4e===0x0?-0x6:0x1));const _0x367dcc=new Date(_0x20057c);_0x367dcc[_0x6b505b(0x195)](_0x20057c[_0x6b505b(0x19b)]()+0x6),_0x5bb972=new Date(_0x20057c[_0x6b505b(0x1a8)](),_0x20057c[_0x6b505b(0x142)](),_0x20057c['getDate'](),0x0,0x0,0x0),_0x31aa7a=new Date(_0x367dcc[_0x6b505b(0x1a8)](),_0x367dcc[_0x6b505b(0x142)](),_0x367dcc[_0x6b505b(0x19b)](),0x17,0x3b,0x3b),label[_0x6b505b(0x194)]='de\x20la\x20semana\x20<i\x20class=\x22bi\x20bi-caret-down-fill\x20date-range-label-icon\x22\x20style=\x22color:\x20#FF5900;\x22></i>';break;case _0x6b505b(0x144):_0x5bb972=new Date(_0x118390[_0x6b505b(0x1a8)](),_0x118390[_0x6b505b(0x142)](),0x1,0x0,0x0,0x0),_0x31aa7a=new Date(_0x118390[_0x6b505b(0x1a8)](),_0x118390[_0x6b505b(0x142)]()+0x1,0x0,0x17,0x3b,0x3b),label[_0x6b505b(0x194)]=_0x6b505b(0x1bd);break;case _0x6b505b(0x12d):_0x5bb972=new Date(_0x118390[_0x6b505b(0x1a8)](),0x0,0x1,0x0,0x0,0x0),_0x31aa7a=new Date(_0x118390[_0x6b505b(0x1a8)](),0xb,0x1f,0x17,0x3b,0x3b),label[_0x6b505b(0x194)]=_0x6b505b(0x140);break;default:label[_0x6b505b(0x194)]='';throw new Error('Invalid\x20range\x20type');}return{'startDateFormatted':formatDateToYmdHis(_0x5bb972),'endDateFormatted':formatDateToYmdHis(_0x31aa7a)};}function updateDateRange(_0x1889b1){const _0x112e4f=_0xdcdffa;if(_0x1889b1==_0x112e4f(0x11b)){}else{const {startDateFormatted:_0x3276d0,endDateFormatted:_0x12354f}=getDateRange(_0x1889b1);fil_date_start=_0x3276d0,fil_date_end=_0x12354f,consultIncomeReport();}}const tableWrapper=document[_0xdcdffa(0x180)](_0xdcdffa(0x14c));let isDragging=![],startX,scrollLeft;tableWrapper[_0xdcdffa(0x14d)](_0xdcdffa(0x158),_0x4654be=>{const _0x5ba388=_0xdcdffa;isDragging=!![],startX=_0x4654be[_0x5ba388(0x16c)]-tableWrapper[_0x5ba388(0x1ae)],scrollLeft=tableWrapper[_0x5ba388(0x15b)];}),tableWrapper[_0xdcdffa(0x14d)](_0xdcdffa(0xfa),()=>{isDragging=![];}),tableWrapper[_0xdcdffa(0x14d)]('mouseup',()=>{isDragging=![];}),tableWrapper[_0xdcdffa(0x14d)](_0xdcdffa(0x190),_0x4a34b3=>{const _0x26edd1=_0xdcdffa;if(!isDragging)return;_0x4a34b3[_0x26edd1(0x1ba)]();const _0x3c63c1=_0x4a34b3[_0x26edd1(0x16c)]-tableWrapper[_0x26edd1(0x1ae)],_0x5d663c=(_0x3c63c1-startX)*0x2;tableWrapper['scrollLeft']=scrollLeft-_0x5d663c;});async function consultIncomeReport(){const _0x2354aa=_0xdcdffa;showLoadingModal();const _0x4e9de5={'apiPOS_getIncome':0x1,'setToken':myCompany['setAuthToken'],'fil_date_start':fil_date_start,'fil_date_end':fil_date_end,'fil_CustomersId':fil_CustomersId,'fil_OperationsType':fil_OperationsType,'fil_BranchesId':fil_BranchesId};try{const _0xb15b=await fetch(myCompany[_0x2354aa(0x13b)],{'method':_0x2354aa(0x152),'headers':{'Content-Type':_0x2354aa(0x121)},'body':JSON['stringify'](_0x4e9de5)}),{success:_0x48a251,message:_0x44ce48}=await _0xb15b[_0x2354aa(0x18a)]();if(!_0x48a251||!Array['isArray'](_0x44ce48[_0x2354aa(0x11a)])){ntfShow(_0x2354aa(0x118)),console[_0x2354aa(0x12c)](_0x44ce48);return;}const _0x4fdc68=_0x44ce48[_0x2354aa(0x11a)];console[_0x2354aa(0x12c)]('Incomes\x20raw:',_0x4fdc68);const _0x503504=myCompany[_0x2354aa(0x179)][_0x2354aa(0x1a2)]((_0x9996c,_0x5da609)=>{const _0x3a1c58=_0x2354aa;return _0x9996c[_0x5da609['setCustomerId']]=_0x5da609[_0x3a1c58(0x125)],_0x9996c;},{}),_0x1a5fa6=myCompany[_0x2354aa(0x17f)]['reduce']((_0x48d8ff,_0x3a8e1e)=>{const _0x285391=_0x2354aa;return _0x48d8ff[_0x3a8e1e[_0x285391(0x1a3)]]=_0x3a8e1e[_0x285391(0x186)],_0x48d8ff;},{}),_0x1bece3=myCompany[_0x2354aa(0xf1)][_0x2354aa(0x1a2)]((_0x589dee,_0x4f8fdf)=>{const _0x2e8c8e=_0x2354aa;return _0x589dee[_0x4f8fdf[_0x2e8c8e(0x159)]]=_0x4f8fdf[_0x2e8c8e(0x15e)],_0x589dee;},{}),_0x825f5b=_0x4fdc68['map'](_0x2ffc3d=>{const _0x281183=_0x2354aa,_0x47d368=_0x2ffc3d[_0x281183(0xf5)][_0x281183(0x1a2)]((_0x151246,_0x380e56)=>{const _0x58ae5d=_0x281183;return _0x151246+Number(_0x380e56[_0x58ae5d(0x170)]);},0x0),_0x233906=_0x1a5fa6[_0x2ffc3d[_0x281183(0x14a)]]||_0x2ffc3d[_0x281183(0x14a)],_0x2fdd71=_0x1bece3[_0x2ffc3d[_0x281183(0x101)]]||_0x2ffc3d[_0x281183(0x101)],_0x44e288=_0x503504[_0x2ffc3d[_0x281183(0x133)]]||_0x2ffc3d[_0x281183(0x133)];return{'setOperationType':_0x233906,'setOperationSeries':_0x2fdd71+'-'+_0x2ffc3d['setOperationNumber'],'setOperationCustomerName':_0x44e288,'setOperationDateTime':_0x2ffc3d[_0x281183(0x10e)],'setOperationDateExpiration':_0x2ffc3d['setOperationDateExpiration']||'','setOperationStatus':_0x2ffc3d[_0x281183(0x19f)]||_0x281183(0x10f),'setOperationStatusColor':_0x2ffc3d[_0x281183(0x103)]||_0x281183(0xf0),'setOperationCurrency':_0x2ffc3d[_0x281183(0x156)],'setOperationTotal':_0x47d368};});console['log'](_0x2354aa(0xf8),_0x825f5b);const _0x5edc80=_0x4fdc68['flatMap'](_0x4b42aa=>_0x4b42aa[_0x2354aa(0xf5)])['reduce']((_0x42af9c,_0x339a36)=>{const _0x35b8c2=_0x2354aa,_0x3d5d8c=products[_0x35b8c2(0x174)](_0x530355=>_0x530355['id']==_0x339a36[_0x35b8c2(0xed)]),_0xffaf61=_0x3d5d8c?_0x3d5d8c['setDescripcion']:_0x35b8c2(0x112),_0x12f48a=Number(_0x339a36[_0x35b8c2(0x170)]),_0x35fcaf=Number(_0x339a36[_0x35b8c2(0x1af)]),_0x585fdd=Number(_0x339a36[_0x35b8c2(0x19a)]),_0x551d28=_0x585fdd*_0x35fcaf;return!_0x42af9c[_0xffaf61]&&(_0x42af9c[_0xffaf61]={'productName':_0xffaf61,'sales':0x0,'cost':0x0}),_0x42af9c[_0xffaf61][_0x35b8c2(0x16f)]+=_0x12f48a,_0x42af9c[_0xffaf61]['cost']+=_0x551d28,_0x42af9c;},{}),_0x5dd3e7=Object[_0x2354aa(0x10a)](_0x5edc80)[_0x2354aa(0x105)](_0x2ac114=>({'productName':_0x2ac114[_0x2354aa(0x188)],'sales':Math[_0x2354aa(0x197)](_0x2ac114[_0x2354aa(0x16f)]*0x64)/0x64,'cost':Math[_0x2354aa(0x197)](_0x2ac114[_0x2354aa(0x13d)]*0x64)/0x64,'profit':Math[_0x2354aa(0x197)]((_0x2ac114['sales']-_0x2ac114[_0x2354aa(0x13d)])*0x64)/0x64}));renderTable(_0x825f5b,currentPage,_0x2354aa(0x11a)),renderTable(_0x5dd3e7,currentPageProducts,'products');const _0x18e4ed=_0x825f5b['map'](_0x1d6232=>({'fechaISO':_0x1d6232[_0x2354aa(0x10e)],'setTipoComprobante':_0x1d6232[_0x2354aa(0x14a)],'setOperationCurrency':_0x1d6232['setOperationCurrency'],'Total':Math[_0x2354aa(0x197)](_0x1d6232[_0x2354aa(0x1a4)]*0x64)/0x64})),_0x6c1fb7=_0x18e4ed['reduce']((_0xdd287,_0x5ac923)=>{const _0x19b8ca=_0x2354aa,_0x4914db=_0x5ac923[_0x19b8ca(0x10d)]+'|'+_0x5ac923[_0x19b8ca(0x157)]+'|'+_0x5ac923[_0x19b8ca(0x156)];return!_0xdd287[_0x4914db]&&(_0xdd287[_0x4914db]={'fechaISO':_0x5ac923['fechaISO'],'setTipoComprobante':_0x5ac923[_0x19b8ca(0x157)],'setOperationCurrency':_0x5ac923[_0x19b8ca(0x156)],'Total':0x0}),_0xdd287[_0x4914db][_0x19b8ca(0x16e)]+=_0x5ac923['Total'],_0xdd287;},{}),_0x7a0fd2=Object['values'](_0x6c1fb7)[_0x2354aa(0x105)](_0x15bc87=>({'fechaISO':_0x15bc87[_0x2354aa(0x10d)],'setTipoComprobante':_0x15bc87['setTipoComprobante']+'\x20('+_0x15bc87[_0x2354aa(0x156)]+')','Total':Math[_0x2354aa(0x197)](_0x15bc87[_0x2354aa(0x16e)]*0x64)/0x64})),_0x1598e0=[...new Set(_0x7a0fd2[_0x2354aa(0x105)](_0x4634b6=>_0x4634b6[_0x2354aa(0x157)]))];_0x7a0fd2['reverse']();_0x7a0fd2[_0x2354aa(0x12a)]>0x0?generateFilterTransformChart({'containerId':_0x2354aa(0x147),'rawData':_0x7a0fd2,'groupField':_0x2354aa(0x157),'groupValues':_0x1598e0,'seriesType':_0x2354aa(0x199),'encode':{'x':_0x2354aa(0x10d),'y':_0x2354aa(0x16e),'label':['setTipoComprobante',_0x2354aa(0x16e)],'itemName':'fechaISO','tooltip':[_0x2354aa(0x16e)]},'xAxisConfig':{'type':_0x2354aa(0x110),'axisLabel':{'formatter':_0x588e35=>{const _0x541757=_0x2354aa,_0x1ea833=new Date(_0x588e35),_0x1df3f5=String(_0x1ea833[_0x541757(0x19b)]())[_0x541757(0x14b)](0x2,'0'),_0x19060a=String(_0x1ea833['getMonth']()+0x1)[_0x541757(0x14b)](0x2,'0'),_0x55cabc=_0x1ea833[_0x541757(0x1a8)]();return _0x1df3f5+'/'+_0x19060a+'/'+_0x55cabc;}}},'title':_0x2354aa(0x18c),'width':_0x2354aa(0x18f),'height':'500px'}):salesChartContainer[_0x2354aa(0x194)]='';const _0x186f17=_0x4fdc68[_0x2354aa(0x192)](_0x390085=>_0x390085[_0x2354aa(0xf5)]['map'](_0x3da5c0=>{const _0x426b5b=_0x2354aa,_0xd754df=products[_0x426b5b(0x174)](_0x101bc4=>_0x101bc4['id']==_0x3da5c0[_0x426b5b(0xed)]);return{'productName':_0xd754df?_0xd754df[_0x426b5b(0x145)]:_0x426b5b(0x112),'setOperationDetailTotal':_0x3da5c0[_0x426b5b(0x170)]};})),_0x4d9e99=_0x186f17[_0x2354aa(0x1a2)]((_0x18aaca,_0x159113)=>{const _0x324eeb=_0x2354aa;return!_0x18aaca[_0x159113[_0x324eeb(0x188)]]&&(_0x18aaca[_0x159113[_0x324eeb(0x188)]]=0x0),_0x18aaca[_0x159113[_0x324eeb(0x188)]]+=_0x159113['setOperationDetailTotal'],_0x18aaca;},{}),_0x4902f0=Object[_0x2354aa(0x163)](_0x4d9e99)[_0x2354aa(0x105)](([_0x25d8f9,_0x1b8afe])=>({'productName':_0x25d8f9,'setOperationDetailTotal':Math['round'](_0x1b8afe*0x64)/0x64}));_0x4902f0[_0x2354aa(0x12a)]>0x0?generatePieChart({'containerId':_0x2354aa(0xfe),'data':_0x4902f0,'nameField':_0x2354aa(0x188),'valueField':_0x2354aa(0x170),'title':'Ventas\x20por\x20Item'}):productPieChart['innerHTML']='';}catch(_0xbd4822){ntfShow(_0x2354aa(0x1b5)),console[_0x2354aa(0x18e)](_0xbd4822);}finally{hideLoadingModal();}}function renderTable(_0x72d5c2,_0x5c42e3=0x1,_0x1ae01d='incomes'){const _0x5ba15c=_0xdcdffa;currentPage=_0x5c42e3;const _0x34df44=_0x1ae01d===_0x5ba15c(0x11a)?_0x5ba15c(0x177):_0x5ba15c(0x17b),_0x5743e7=document['querySelector'](_0x34df44+_0x5ba15c(0x1a1));_0x5743e7['innerHTML']='';const _0x239aeb=(_0x5c42e3-0x1)*PER_PAGE,_0x13c530=_0x72d5c2['slice'](_0x239aeb,_0x239aeb+PER_PAGE);_0x13c530[_0x5ba15c(0x129)](_0x5cf918=>{const _0x3ead51=_0x5ba15c,_0x1748d4=document[_0x3ead51(0x102)]('tr');if(_0x1ae01d===_0x3ead51(0x11a))_0x1748d4[_0x3ead51(0x194)]=_0x3ead51(0x131)+_0x5cf918[_0x3ead51(0x14a)]+_0x3ead51(0x100)+_0x5cf918[_0x3ead51(0x14a)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22text-align:\x20center;\x22>'+(_0x5cf918[_0x3ead51(0x101)]||'')+_0x3ead51(0x17e)+(_0x5cf918[_0x3ead51(0x196)]||'')+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22text-align:\x20center;\x22>'+_0x5cf918[_0x3ead51(0x10e)]+_0x3ead51(0x1b8)+(_0x5cf918['setOperationDateExpiration']||'')+_0x3ead51(0xf9)+_0x5cf918[_0x3ead51(0x103)]+';\x20color:'+_0x5cf918['setOperationStatusColor']+_0x3ead51(0x168)+_0x5cf918[_0x3ead51(0x19f)]+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22text-align:\x20right;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x5cf918[_0x3ead51(0x156)]+'\x20'+_0x5cf918[_0x3ead51(0x1a4)][_0x3ead51(0x130)](0x2)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22text-align:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<!--\x20espacio\x20para\x20acciones\x20adicionales\x20-->\x0a\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20';else _0x1ae01d===_0x3ead51(0x16d)&&(_0x1748d4[_0x3ead51(0x194)]=_0x3ead51(0x193)+_0x5cf918[_0x3ead51(0x188)]+_0x3ead51(0xf2)+_0x5cf918[_0x3ead51(0x16f)][_0x3ead51(0x130)](0x2)+_0x3ead51(0xf2)+_0x5cf918['cost'][_0x3ead51(0x130)](0x2)+_0x3ead51(0xf2)+_0x5cf918[_0x3ead51(0x16a)][_0x3ead51(0x130)](0x2)+_0x3ead51(0x123));_0x5743e7[_0x3ead51(0x1be)](_0x1748d4);}),renderPagination(_0x72d5c2,_0x5c42e3,_0x1ae01d);}function renderPagination(_0x18b9fb,_0xf343dd,_0xee651e=_0xdcdffa(0x11a)){const _0x38c7a9=_0xdcdffa,_0x233a3b=_0xee651e===_0x38c7a9(0x11a)?document[_0x38c7a9(0x180)]('#pagination-income'):document[_0x38c7a9(0x180)](_0x38c7a9(0x162));_0x233a3b[_0x38c7a9(0x194)]='';const _0x1fddc8=Math[_0x38c7a9(0x15a)](_0x18b9fb[_0x38c7a9(0x12a)]/PER_PAGE),_0x254e54=document['createElement']('a');_0x254e54['href']='#',_0x254e54[_0x38c7a9(0xfd)]='btn\x20btn-sm\x20btn-outline\x20me-2',_0x254e54[_0x38c7a9(0x194)]='&laquo;\x20Anterior',_0x254e54[_0x38c7a9(0x14f)]=_0x441e7e=>{const _0x28327b=_0x38c7a9;_0x441e7e[_0x28327b(0x1ba)](),_0xf343dd>0x1&&renderTable(_0x18b9fb,_0xf343dd-0x1,_0xee651e);},_0x233a3b[_0x38c7a9(0x1be)](_0x254e54);for(let _0x55743c=0x1;_0x55743c<=_0x1fddc8;_0x55743c++){const _0x4fb9dc=document['createElement']('a');_0x4fb9dc[_0x38c7a9(0x166)]='#',_0x4fb9dc[_0x38c7a9(0xfd)]=_0x38c7a9(0x1a6)+(_0x55743c===_0xf343dd?_0x38c7a9(0x1bc):_0x38c7a9(0x160)),_0x4fb9dc[_0x38c7a9(0x141)]=_0x55743c,_0x4fb9dc[_0x38c7a9(0x14f)]=_0x4b12f0=>{const _0xa3e9a7=_0x38c7a9;_0x4b12f0[_0xa3e9a7(0x1ba)](),renderTable(_0x18b9fb,_0x55743c,_0xee651e);},_0x233a3b['appendChild'](_0x4fb9dc);}const _0xa6bac4=document[_0x38c7a9(0x102)]('a');_0xa6bac4[_0x38c7a9(0x166)]='#',_0xa6bac4[_0x38c7a9(0xfd)]=_0x38c7a9(0x150),_0xa6bac4['innerHTML']='Siguiente\x20&raquo;',_0xa6bac4[_0x38c7a9(0x14f)]=_0x554714=>{const _0x29ef84=_0x38c7a9;_0x554714[_0x29ef84(0x1ba)](),_0xf343dd<_0x1fddc8&&renderTable(_0x18b9fb,_0xf343dd+0x1,_0xee651e);},_0x233a3b['appendChild'](_0xa6bac4);}document[_0xdcdffa(0xf4)](_0xdcdffa(0x1b0))[_0xdcdffa(0x14d)](_0xdcdffa(0x113),async()=>{const _0x43cde3=_0xdcdffa,_0x5a5b8f=document[_0x43cde3(0xf4)](_0x43cde3(0x1b3))[_0x43cde3(0x116)],_0xea5bf3=document[_0x43cde3(0xf4)](_0x43cde3(0x164))[_0x43cde3(0x116)];if(!_0x5a5b8f||!_0xea5bf3)return alert(_0x43cde3(0x1a5));const _0x25f507=document[_0x43cde3(0xf4)](_0x43cde3(0x12b)),_0x4a3583=bootstrap['Modal'][_0x43cde3(0x14e)](_0x25f507);_0x4a3583['hide'](),showLoadingModal();try{const _0xf53439={'apiPOS_getIncome':0x1,'setToken':myCompany['setAuthToken'],'dateFrom':_0x5a5b8f+'\x2000:00:00','dateTo':_0xea5bf3+_0x43cde3(0x148),'clientIds':[],'operationTypes':[]},_0x47f06a=await fetch(myCompany[_0x43cde3(0x13b)],{'method':_0x43cde3(0x152),'headers':{'Content-Type':'application/json'},'body':JSON[_0x43cde3(0x1aa)](_0xf53439)}),{success:_0x1873da,message:_0x1c5dc1}=await _0x47f06a['json']();if(!_0x1873da)throw new Error(_0x1c5dc1);_0x1c5dc1[_0x43cde3(0x11a)],await consultIncomeReport();}catch(_0x55c501){ntfShow(_0x43cde3(0x10c)),console['error'](_0x55c501);}finally{hideLoadingModal();}}),window[_0xdcdffa(0x114)]=function(){const _0x28c471=_0xdcdffa,_0x7d0db6=0x3;loadLoginContent('./img/apiPOS.png'),setUserNameGet(),setEventBtnAccess();const _0x55c958=document[_0x28c471(0x180)]('.btn-logout');_0x55c958&&_0x55c958[_0x28c471(0x14d)](_0x28c471(0x113),function(){logoutReload(0x0,_0x7d0db6);}),document['getElementById']('setBranchId')[_0x28c471(0x14d)](_0x28c471(0x183),async function(){const _0x511755=_0x28c471,_0x3f1695=parseInt(this['value']);myCompany[_0x511755(0x12e)]=_0x3f1695;const _0xbcd3e6=await createCartStore('');await saveCompanyToIndexedDB(company,_0xbcd3e6),cargarAlmacenes(_0x3f1695),setTimeout(()=>{const _0x8f1054=_0x511755;document[_0x8f1054(0xf4)](_0x8f1054(0x138))[_0x8f1054(0x187)](new Event('change'));},0x64),cargarPisos(_0x3f1695),setTimeout(()=>{const _0x21a7ff=_0x511755;document[_0x21a7ff(0xf4)](_0x21a7ff(0x1b4))[_0x21a7ff(0x187)](new Event(_0x21a7ff(0x183)));},0x64),ntf_initNotifications(),fil_BranchesId=[],fil_BranchesId['push'](_0x3f1695),consultIncomeReport();}),loadCartAndSetTabCount(_0x7d0db6);};
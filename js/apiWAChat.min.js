/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 4.3.3
*/

const _0x1ada6a=_0x44ec;(function(_0x357156,_0x47271a){const _0x26788a=_0x44ec,_0x557001=_0x357156();while(!![]){try{const _0x4f0f67=-parseInt(_0x26788a(0x1ed))/0x1+-parseInt(_0x26788a(0x203))/0x2*(-parseInt(_0x26788a(0x1f5))/0x3)+-parseInt(_0x26788a(0x1f0))/0x4*(-parseInt(_0x26788a(0x202))/0x5)+parseInt(_0x26788a(0x1d2))/0x6+parseInt(_0x26788a(0x1f8))/0x7+-parseInt(_0x26788a(0x1d5))/0x8*(-parseInt(_0x26788a(0x1da))/0x9)+-parseInt(_0x26788a(0x1e3))/0xa;if(_0x4f0f67===_0x47271a)break;else _0x557001['push'](_0x557001['shift']());}catch(_0x412b72){_0x557001['push'](_0x557001['shift']());}}}(_0x254b,0x2374a));function _0x44ec(_0x3ca69b,_0x3715ef){const _0x323edc=_0x254b();return _0x44ec=function(_0x5619b7,_0x261fae){_0x5619b7=_0x5619b7-0x1cc;let _0x4a0f4f=_0x323edc[_0x5619b7];return _0x4a0f4f;},_0x44ec(_0x3ca69b,_0x3715ef);}const _0x25e820=(function(){let _0x4e2cfd=!![];return function(_0x1df7cb,_0x1199b1){const _0xe58536=_0x4e2cfd?function(){const _0x4a4c61=_0x44ec;if(_0x1199b1){const _0x363ef1=_0x1199b1[_0x4a4c61(0x1ce)](_0x1df7cb,arguments);return _0x1199b1=null,_0x363ef1;}}:function(){};return _0x4e2cfd=![],_0xe58536;};}()),_0x17fbe0=_0x25e820(this,function(){const _0x1d20dd=_0x44ec;return _0x17fbe0[_0x1d20dd(0x1df)]()[_0x1d20dd(0x1fb)](_0x1d20dd(0x1fc))[_0x1d20dd(0x1df)]()[_0x1d20dd(0x1d1)](_0x17fbe0)['search'](_0x1d20dd(0x1fc));});_0x17fbe0();function _0x254b(){const _0x419e25=['info','toLowerCase','toString','ya\x20conectado','chatPanel','visible','3133050EwyROz','/wa/','click','change','log','display','hidden','setCredentialsApiWAChat','https://','then','62478wzTHHj','setBranchId','bind','4kyZGHP','json','warn','flex','length','8361IAssEF','/qr','visibility','1183224ruSLgR','setCredentialsApiWAChatStatus','error','search','(((.+)+)+)+$','status','catch','value','includes','.btn-logout','50855qxnmvM','40lHDzmD','src','exception','setCredentialsApiWAChatSubdomain','setAuthToken','table','./img/apiPOS.png','setCredentialsApiWAChatPort','apply','setFloorId','trace','constructor','1716144btySpo','addEventListener','dispatchEvent','56aXgnwn','Credenciales\x20no\x20encontradas','setWarehouseId','style','getElementById','54qUWZtz','qr-img','qr-overlay'];_0x254b=function(){return _0x419e25;};return _0x254b();}const _0x261fae=(function(){let _0x4a0648=!![];return function(_0x6fbd8d,_0x19834b){const _0x515d27=_0x4a0648?function(){const _0xb2d2fa=_0x44ec;if(_0x19834b){const _0x21895a=_0x19834b[_0xb2d2fa(0x1ce)](_0x6fbd8d,arguments);return _0x19834b=null,_0x21895a;}}:function(){};return _0x4a0648=![],_0x515d27;};}()),_0x5619b7=_0x261fae(this,function(){const _0x1236aa=_0x44ec,_0x2f8d7b=function(){let _0x4e5e5c;try{_0x4e5e5c=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x4e8cc4){_0x4e5e5c=window;}return _0x4e5e5c;},_0x2eb0a5=_0x2f8d7b(),_0x2990ff=_0x2eb0a5['console']=_0x2eb0a5['console']||{},_0x5919f2=[_0x1236aa(0x1e7),_0x1236aa(0x1f2),_0x1236aa(0x1dd),_0x1236aa(0x1fa),_0x1236aa(0x205),_0x1236aa(0x208),_0x1236aa(0x1d0)];for(let _0x1e6143=0x0;_0x1e6143<_0x5919f2[_0x1236aa(0x1f4)];_0x1e6143++){const _0x21ff92=_0x261fae[_0x1236aa(0x1d1)]['prototype'][_0x1236aa(0x1ef)](_0x261fae),_0x55ae15=_0x5919f2[_0x1e6143],_0x16c4d9=_0x2990ff[_0x55ae15]||_0x21ff92;_0x21ff92['__proto__']=_0x261fae['bind'](_0x261fae),_0x21ff92[_0x1236aa(0x1df)]=_0x16c4d9[_0x1236aa(0x1df)][_0x1236aa(0x1ef)](_0x16c4d9),_0x2990ff[_0x55ae15]=_0x21ff92;}});_0x5619b7();const selectCredentialsApiWAChat=document[_0x1ada6a(0x1d9)](_0x1ada6a(0x1ea)),loginPanel=document[_0x1ada6a(0x1d9)]('loginPanel'),chatPanel=document[_0x1ada6a(0x1d9)](_0x1ada6a(0x1e1)),qrImg=document[_0x1ada6a(0x1d9)](_0x1ada6a(0x1db)),overlay=document[_0x1ada6a(0x1d9)](_0x1ada6a(0x1dc));let qrTimeout;const validSeconds=0xa;function showLogin(){const _0x9a04a=_0x1ada6a;loginPanel[_0x9a04a(0x1d8)][_0x9a04a(0x1e8)]='flex',chatPanel[_0x9a04a(0x1d8)][_0x9a04a(0x1f7)]=_0x9a04a(0x1e9);}function showChat(){const _0x45b63b=_0x1ada6a;loginPanel[_0x45b63b(0x1d8)]['display']='none',chatPanel[_0x45b63b(0x1d8)]['visibility']=_0x45b63b(0x1e2);}async function displayQR(_0x46a24a){const _0xf61ee1=_0x1ada6a,_0x5bc574=selectCredentialsApiWAChat[_0xf61ee1(0x1ff)],_0x440a5e=getCredentialsApiWAChat(_0x5bc574);if(_0x440a5e){const _0x54b1a7=_0x440a5e[_0xf61ee1(0x206)],_0x46702b=_0x440a5e['setCredentialsApiWAChatPort'];clearTimeout(qrTimeout),overlay[_0xf61ee1(0x1d8)][_0xf61ee1(0x1e8)]='none',qrImg[_0xf61ee1(0x204)]=_0x46a24a,qrTimeout=setTimeout(()=>{const _0x18ac15=_0xf61ee1;fetch(_0x18ac15(0x1eb)+_0x54b1a7+'/wa/'+_0x46702b+_0x18ac15(0x1f6),{'headers':{'x-auth-token':myCompany[_0x18ac15(0x207)]}})[_0x18ac15(0x1ec)](async _0x3fb7ca=>_0x3fb7ca[_0x18ac15(0x1f1)]())['then'](async _0x40dceb=>{const _0x5cdb5f=_0x18ac15;_0x40dceb[_0x5cdb5f(0x1fd)]&&_0x40dceb['status'][_0x5cdb5f(0x1de)]()[_0x5cdb5f(0x200)](_0x5cdb5f(0x1e0))?(showChat(),_0x440a5e[_0x5cdb5f(0x1f9)]=0x1):(overlay[_0x5cdb5f(0x1d8)][_0x5cdb5f(0x1e8)]=_0x5cdb5f(0x1f3),_0x440a5e[_0x5cdb5f(0x1f9)]=0x0);const _0x2fb0ec=await createCartStore('');await saveCompanyToIndexedDB(company,_0x2fb0ec);})['catch'](_0x41fd21=>{const _0x29ccf1=_0x18ac15;console[_0x29ccf1(0x1fa)]('Error\x20al\x20validar\x20estado\x20despuÃ©s\x20de\x20expirar\x20QR:',_0x41fd21),overlay[_0x29ccf1(0x1d8)][_0x29ccf1(0x1e8)]='flex';});},validSeconds*0x3e8);}else ntfShow(_0xf61ee1(0x1d6));}async function init(){const _0x1d18d9=_0x1ada6a,_0x78d515=selectCredentialsApiWAChat[_0x1d18d9(0x1ff)],_0x18b519=getCredentialsApiWAChat(_0x78d515);if(_0x18b519){const _0x424c45=_0x18b519[_0x1d18d9(0x206)],_0x12a124=_0x18b519[_0x1d18d9(0x1cd)];fetch('https://'+_0x424c45+_0x1d18d9(0x1e4)+_0x12a124+_0x1d18d9(0x1f6),{'headers':{'x-auth-token':myCompany[_0x1d18d9(0x207)]}})[_0x1d18d9(0x1ec)](async _0x16976b=>_0x16976b[_0x1d18d9(0x1f1)]())['then'](async _0x47df7e=>{const _0x29f8bf=_0x1d18d9;if(_0x47df7e[_0x29f8bf(0x1fd)]&&_0x47df7e[_0x29f8bf(0x1fd)][_0x29f8bf(0x1de)]()[_0x29f8bf(0x200)]('ya\x20conectado'))showChat(),_0x18b519[_0x29f8bf(0x1f9)]=0x1;else _0x47df7e['qr']&&(showLogin(),displayQR(_0x47df7e['qr']),_0x18b519[_0x29f8bf(0x1f9)]=0x0);const _0x4e8126=await createCartStore('');await saveCompanyToIndexedDB(company,_0x4e8126);})[_0x1d18d9(0x1fe)](console[_0x1d18d9(0x1fa)]);}else ntfShow(_0x1d18d9(0x1d6));}overlay[_0x1ada6a(0x1d3)](_0x1ada6a(0x1e5),init),window['onload']=function(){const _0x5a8211=_0x1ada6a,_0x1d5e64=0x4;loadLoginContent(_0x5a8211(0x1cc)),setUserNameGet(),setEventBtnAccess();const _0x33e662=document['querySelector'](_0x5a8211(0x201));_0x33e662&&_0x33e662['addEventListener'](_0x5a8211(0x1e5),function(){logoutReload(0x0,_0x1d5e64);}),document[_0x5a8211(0x1d9)](_0x5a8211(0x1ee))[_0x5a8211(0x1d3)](_0x5a8211(0x1e6),async function(){const _0x19748a=_0x5a8211,_0x9b5b76=parseInt(this[_0x19748a(0x1ff)]);myCompany['setBranchDefault']=_0x9b5b76,saveCredentialsApiWAChatInCompany();const _0x4ad2ec=await createCartStore('');await saveCompanyToIndexedDB(company,_0x4ad2ec),cargarAlmacenes(_0x9b5b76),setTimeout(()=>{const _0x292cdc=_0x19748a;document[_0x292cdc(0x1d9)](_0x292cdc(0x1d7))['dispatchEvent'](new Event('change'));},0x64),cargarPisos(_0x9b5b76),setTimeout(()=>{const _0x1548cc=_0x19748a;document[_0x1548cc(0x1d9)](_0x1548cc(0x1cf))[_0x1548cc(0x1d4)](new Event(_0x1548cc(0x1e6)));},0x64),ntf_initNotifications();}),loadCartAndSetTabCount(_0x1d5e64);};
/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 4.1.6
*/

function _0x1139(){const _0x10b8a9=['console','ya\x20conectado','length','apply','src','style','qr-img','value','9rgLSNW','dispatchEvent','visible','143zLAAkZ','chatPanel','2819FqhIst','click','9376iWBCUc','/wa/','json','exception','log','then','Credenciales\x20no\x20encontradas','error','toLowerCase','visibility','12GwoIyi','./img/apiPOS.png','warn','catch','https://','setBranchId','setCredentialsApiWAChatStatus','flex','getElementById','status','setWarehouseId','132348cXytcn','change','return\x20(function()\x20','1153812ubjnZU','3640580mzkKRD','addEventListener','bind','.btn-logout','setCredentialsApiWAChatPort','(((.+)+)+)+$','39555dJTJzk','234zWHfBC','setCredentialsApiWAChatSubdomain','toString','display','setFloorId','table','none','querySelector','2261IbVMxA','__proto__','constructor','1365090elOzGr','hidden','qr-overlay','setBranchDefault','search','includes'];_0x1139=function(){return _0x10b8a9;};return _0x1139();}const _0x3f60d9=_0x3f25;(function(_0xa59160,_0x2754de){const _0xdef0ec=_0x3f25,_0x382763=_0xa59160();while(!![]){try{const _0x47d620=-parseInt(_0xdef0ec(0x1fa))/0x1*(-parseInt(_0xdef0ec(0x21c))/0x2)+parseInt(_0xdef0ec(0x227))/0x3+-parseInt(_0xdef0ec(0x211))/0x4+parseInt(_0xdef0ec(0x21b))/0x5*(-parseInt(_0xdef0ec(0x206))/0x6)+parseInt(_0xdef0ec(0x224))/0x7*(parseInt(_0xdef0ec(0x1fc))/0x8)+parseInt(_0xdef0ec(0x1f5))/0x9*(parseInt(_0xdef0ec(0x215))/0xa)+parseInt(_0xdef0ec(0x1f8))/0xb*(-parseInt(_0xdef0ec(0x214))/0xc);if(_0x47d620===_0x2754de)break;else _0x382763['push'](_0x382763['shift']());}catch(_0x21ee86){_0x382763['push'](_0x382763['shift']());}}}(_0x1139,0x37cf3));const _0xaa8aaf=(function(){let _0x20eea8=!![];return function(_0x2fda8b,_0x4586ba){const _0x25bfe6=_0x20eea8?function(){if(_0x4586ba){const _0x27c1e6=_0x4586ba['apply'](_0x2fda8b,arguments);return _0x4586ba=null,_0x27c1e6;}}:function(){};return _0x20eea8=![],_0x25bfe6;};}()),_0x234c17=_0xaa8aaf(this,function(){const _0x3bd628=_0x3f25;return _0x234c17[_0x3bd628(0x21e)]()[_0x3bd628(0x22b)](_0x3bd628(0x21a))['toString']()[_0x3bd628(0x226)](_0x234c17)[_0x3bd628(0x22b)](_0x3bd628(0x21a));});_0x234c17();const _0x4e4af8=(function(){let _0x117c11=!![];return function(_0x2e3d53,_0x3321bb){const _0x5ddfc1=_0x117c11?function(){const _0x30aaa6=_0x3f25;if(_0x3321bb){const _0x5e4cd4=_0x3321bb[_0x30aaa6(0x1f0)](_0x2e3d53,arguments);return _0x3321bb=null,_0x5e4cd4;}}:function(){};return _0x117c11=![],_0x5ddfc1;};}()),_0x296973=_0x4e4af8(this,function(){const _0x32f2c1=_0x3f25;let _0x31ade8;try{const _0x21a55f=Function(_0x32f2c1(0x213)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x31ade8=_0x21a55f();}catch(_0x116732){_0x31ade8=window;}const _0x362d2e=_0x31ade8[_0x32f2c1(0x22d)]=_0x31ade8[_0x32f2c1(0x22d)]||{},_0x15ffc1=[_0x32f2c1(0x200),_0x32f2c1(0x208),'info','error',_0x32f2c1(0x1ff),_0x32f2c1(0x221),'trace'];for(let _0xd9ce8c=0x0;_0xd9ce8c<_0x15ffc1[_0x32f2c1(0x1ef)];_0xd9ce8c++){const _0x36a4ec=_0x4e4af8[_0x32f2c1(0x226)]['prototype']['bind'](_0x4e4af8),_0x2ff94c=_0x15ffc1[_0xd9ce8c],_0x23ec06=_0x362d2e[_0x2ff94c]||_0x36a4ec;_0x36a4ec[_0x32f2c1(0x225)]=_0x4e4af8[_0x32f2c1(0x217)](_0x4e4af8),_0x36a4ec[_0x32f2c1(0x21e)]=_0x23ec06['toString']['bind'](_0x23ec06),_0x362d2e[_0x2ff94c]=_0x36a4ec;}});_0x296973();const selectCredentialsApiWAChat=document[_0x3f60d9(0x20e)]('setCredentialsApiWAChat'),loginPanel=document['getElementById']('loginPanel'),chatPanel=document['getElementById'](_0x3f60d9(0x1f9)),qrImg=document[_0x3f60d9(0x20e)](_0x3f60d9(0x1f3)),overlay=document['getElementById'](_0x3f60d9(0x229));let qrTimeout;const validSeconds=0xa;function showLogin(){const _0x40c405=_0x3f60d9;loginPanel['style']['display']=_0x40c405(0x20d),chatPanel[_0x40c405(0x1f2)]['visibility']=_0x40c405(0x228);}function _0x3f25(_0x5ebb5c,_0x531a2f){const _0x2a123a=_0x1139();return _0x3f25=function(_0x296973,_0x4e4af8){_0x296973=_0x296973-0x1ef;let _0x286231=_0x2a123a[_0x296973];return _0x286231;},_0x3f25(_0x5ebb5c,_0x531a2f);}function showChat(){const _0xf219d1=_0x3f60d9;loginPanel[_0xf219d1(0x1f2)][_0xf219d1(0x21f)]=_0xf219d1(0x222),chatPanel['style'][_0xf219d1(0x205)]=_0xf219d1(0x1f7);}async function displayQR(_0x5e3477){const _0x223c19=_0x3f60d9,_0x54ade7=selectCredentialsApiWAChat[_0x223c19(0x1f4)],_0x5533ac=getCredentialsApiWAChat(_0x54ade7);if(_0x5533ac){const _0x23e02c=_0x5533ac[_0x223c19(0x21d)],_0x282387=_0x5533ac[_0x223c19(0x219)];clearTimeout(qrTimeout),overlay[_0x223c19(0x1f2)][_0x223c19(0x21f)]='none',qrImg[_0x223c19(0x1f1)]=_0x5e3477,qrTimeout=setTimeout(()=>{const _0x1c714e=_0x223c19;fetch(_0x1c714e(0x20a)+_0x23e02c+'/wa/'+_0x282387+'/qr',{'headers':{'x-auth-token':myCompany['setAuthToken']}})['then'](async _0x5119a6=>_0x5119a6[_0x1c714e(0x1fe)]())[_0x1c714e(0x201)](async _0x488c6e=>{const _0x4ac065=_0x1c714e;_0x488c6e[_0x4ac065(0x20f)]&&_0x488c6e['status'][_0x4ac065(0x204)]()[_0x4ac065(0x22c)](_0x4ac065(0x22e))?(showChat(),_0x5533ac[_0x4ac065(0x20c)]=0x1):(overlay[_0x4ac065(0x1f2)][_0x4ac065(0x21f)]='flex',_0x5533ac['setCredentialsApiWAChatStatus']=0x0);const _0x4634d8=await createCartStore('');await saveCompanyToIndexedDB(company,_0x4634d8);})[_0x1c714e(0x209)](_0x19e219=>{const _0x5430e5=_0x1c714e;console[_0x5430e5(0x203)]('Error\x20al\x20validar\x20estado\x20despuÃ©s\x20de\x20expirar\x20QR:',_0x19e219),overlay[_0x5430e5(0x1f2)][_0x5430e5(0x21f)]=_0x5430e5(0x20d);});},validSeconds*0x3e8);}else ntfShow(_0x223c19(0x202));}async function init(){const _0xb030ca=_0x3f60d9,_0x210999=selectCredentialsApiWAChat['value'],_0xecc2d4=getCredentialsApiWAChat(_0x210999);if(_0xecc2d4){const _0x5f11ec=_0xecc2d4['setCredentialsApiWAChatSubdomain'],_0x33131e=_0xecc2d4[_0xb030ca(0x219)];fetch('https://'+_0x5f11ec+_0xb030ca(0x1fd)+_0x33131e+'/qr',{'headers':{'x-auth-token':myCompany['setAuthToken']}})['then'](async _0x1a30b0=>_0x1a30b0[_0xb030ca(0x1fe)]())[_0xb030ca(0x201)](async _0x40df8b=>{const _0xa7aa27=_0xb030ca;if(_0x40df8b[_0xa7aa27(0x20f)]&&_0x40df8b[_0xa7aa27(0x20f)][_0xa7aa27(0x204)]()[_0xa7aa27(0x22c)](_0xa7aa27(0x22e)))showChat(),_0xecc2d4[_0xa7aa27(0x20c)]=0x1;else _0x40df8b['qr']&&(showLogin(),displayQR(_0x40df8b['qr']),_0xecc2d4[_0xa7aa27(0x20c)]=0x0);const _0x324cc5=await createCartStore('');await saveCompanyToIndexedDB(company,_0x324cc5);})[_0xb030ca(0x209)](console[_0xb030ca(0x203)]);}else ntfShow(_0xb030ca(0x202));}overlay[_0x3f60d9(0x216)](_0x3f60d9(0x1fb),init),window['onload']=function(){const _0x3574eb=_0x3f60d9,_0x146617=0x4;loadLoginContent(_0x3574eb(0x207)),setUserNameGet(),setEventBtnAccess();const _0x1cc5c2=document[_0x3574eb(0x223)](_0x3574eb(0x218));_0x1cc5c2&&_0x1cc5c2[_0x3574eb(0x216)](_0x3574eb(0x1fb),function(){logoutReload(0x0,_0x146617);}),document[_0x3574eb(0x20e)](_0x3574eb(0x20b))[_0x3574eb(0x216)](_0x3574eb(0x212),async function(){const _0x73eb9a=_0x3574eb,_0x157776=parseInt(this['value']);myCompany[_0x73eb9a(0x22a)]=_0x157776,saveCredentialsApiWAChatInCompany();const _0x3964aa=await createCartStore('');await saveCompanyToIndexedDB(company,_0x3964aa),cargarAlmacenes(_0x157776),setTimeout(()=>{const _0x3fc8b9=_0x73eb9a;document['getElementById'](_0x3fc8b9(0x210))[_0x3fc8b9(0x1f6)](new Event(_0x3fc8b9(0x212)));},0x64),cargarPisos(_0x157776),setTimeout(()=>{const _0x2d6603=_0x73eb9a;document[_0x2d6603(0x20e)](_0x2d6603(0x220))[_0x2d6603(0x1f6)](new Event(_0x2d6603(0x212)));},0x64),ntf_initNotifications();}),loadCartAndSetTabCount(_0x146617);};
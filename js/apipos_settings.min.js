/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 4.0.8
*/

var _0x4df7ec=_0x5a89;(function(_0x130f21,_0x548ebc){var _0x5e2765=_0x5a89,_0x2b5dc0=_0x130f21();while(!![]){try{var _0x1a52d5=-parseInt(_0x5e2765(0x218))/0x1+parseInt(_0x5e2765(0x229))/0x2*(parseInt(_0x5e2765(0x24c))/0x3)+-parseInt(_0x5e2765(0x24e))/0x4+-parseInt(_0x5e2765(0x247))/0x5+-parseInt(_0x5e2765(0x213))/0x6+parseInt(_0x5e2765(0x1e8))/0x7*(-parseInt(_0x5e2765(0x1e4))/0x8)+parseInt(_0x5e2765(0x230))/0x9;if(_0x1a52d5===_0x548ebc)break;else _0x2b5dc0['push'](_0x2b5dc0['shift']());}catch(_0x85c204){_0x2b5dc0['push'](_0x2b5dc0['shift']());}}}(_0xac50,0x45004));var _0x1694ac=(function(){var _0x558fca=!![];return function(_0x320d0e,_0x51b3ad){var _0x49413f=_0x558fca?function(){var _0x1fa915=_0x5a89;if(_0x51b3ad){var _0xb65511=_0x51b3ad[_0x1fa915(0x24d)](_0x320d0e,arguments);return _0x51b3ad=null,_0xb65511;}}:function(){};return _0x558fca=![],_0x49413f;};}()),_0x52be41=_0x1694ac(this,function(){var _0x18afcd=_0x5a89;return _0x52be41['toString']()[_0x18afcd(0x256)](_0x18afcd(0x1e6))[_0x18afcd(0x1ee)]()['constructor'](_0x52be41)[_0x18afcd(0x256)]('(((.+)+)+)+$');});_0x52be41();var _0x500e2c=(function(){var _0x2ba307=!![];return function(_0x59ffbe,_0x4fbfd5){var _0x1c3790=_0x2ba307?function(){if(_0x4fbfd5){var _0x34ad91=_0x4fbfd5['apply'](_0x59ffbe,arguments);return _0x4fbfd5=null,_0x34ad91;}}:function(){};return _0x2ba307=![],_0x1c3790;};}()),_0x225f6d=_0x500e2c(this,function(){var _0x5e657f=_0x5a89,_0x1da512;try{var _0xf3b55b=Function(_0x5e657f(0x1f4)+_0x5e657f(0x22a)+');');_0x1da512=_0xf3b55b();}catch(_0x37ce04){_0x1da512=window;}var _0x165072=_0x1da512[_0x5e657f(0x201)]=_0x1da512[_0x5e657f(0x201)]||{},_0x232d5a=[_0x5e657f(0x241),'warn','info',_0x5e657f(0x235),_0x5e657f(0x258),_0x5e657f(0x20d),_0x5e657f(0x22d)];for(var _0x2851f8=0x0;_0x2851f8<_0x232d5a[_0x5e657f(0x225)];_0x2851f8++){var _0x13fa4a=_0x500e2c[_0x5e657f(0x216)][_0x5e657f(0x228)][_0x5e657f(0x1fe)](_0x500e2c),_0x11db51=_0x232d5a[_0x2851f8],_0x4e2db4=_0x165072[_0x11db51]||_0x13fa4a;_0x13fa4a[_0x5e657f(0x208)]=_0x500e2c[_0x5e657f(0x1fe)](_0x500e2c),_0x13fa4a[_0x5e657f(0x1ee)]=_0x4e2db4[_0x5e657f(0x1ee)][_0x5e657f(0x1fe)](_0x4e2db4),_0x165072[_0x11db51]=_0x13fa4a;}});_0x225f6d();var BOOLEAN_PERMS=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0xa,0xb,0xd,0xe,0xf,0x10,0x11];async function apiERPupdateUsersOnline(_0x1a8917,_0xa0d9d0){var _0x2da368=_0x5a89;if(!isOnline())return console[_0x2da368(0x241)](_0x2da368(0x251)),Promise[_0x2da368(0x214)](_0x2da368(0x251));const _0x3fe4cb={'setAuthToken':_0x1a8917,'setUsers':_0xa0d9d0};return fetch(_0x2da368(0x209),{'method':_0x2da368(0x1ed),'headers':{'Content-Type':'application/json'},'body':JSON[_0x2da368(0x205)](_0x3fe4cb)})[_0x2da368(0x1f5)](_0xacb49d=>{var _0x394967=_0x2da368;if(!_0xacb49d['ok'])throw new Error('Error\x20Sync:\x20'+_0xacb49d['statusText']);return _0xacb49d[_0x394967(0x1f3)]();})[_0x2da368(0x1f5)](_0x24403f=>{var _0x42c708=_0x2da368;if(!_0x24403f['success'])throw new Error(_0x24403f['message']||_0x42c708(0x217));return console['log'](_0x42c708(0x246)),_0x24403f;})['catch'](_0x24ff56=>{console['error']('Error\x20al\x20actualizar\x20data\x20online:',_0x24ff56);throw _0x24ff56;});}async function apiERPsyncUsers(){var _0x1107b5=_0x5a89;isLoggedIn(company)&&(isOnline()&&await apiERPupdateUsersOnline(company[0x0][_0x1107b5(0x22c)],company[0x0][_0x1107b5(0x240)]));}function generatePermissionsPanel(_0x5c458c){var _0x4172de=_0x5a89,_0x4b297a=document['getElementById']('panel_users');_0x4b297a[_0x4172de(0x24f)]='';var _0xcac35f=_0x5c458c[0x0]&&_0x5c458c[0x0][_0x4172de(0x240)]||[],_0xabc00f=_0x5c458c[0x0]&&_0x5c458c[0x0][_0x4172de(0x23f)]||[];for(var _0x2516f4=0x0;_0x2516f4<_0xcac35f[_0x4172de(0x225)];_0x2516f4++){var _0x2e761d=_0xcac35f[_0x2516f4],_0x4e162c=document['createElement'](_0x4172de(0x22b));_0x4e162c[_0x4172de(0x23b)]=_0x4172de(0x23a),_0x4e162c['id']=_0x4172de(0x252)+_0x2516f4;var _0x51d413=document[_0x4172de(0x210)]('h3');_0x51d413[_0x4172de(0x23b)]='userPerm_header',_0x51d413['textContent']=_0x2e761d[_0x4172de(0x1fd)]||_0x4172de(0x242)+(_0x2516f4+0x1),_0x4e162c['appendChild'](_0x51d413);var _0x245f27=document[_0x4172de(0x210)](_0x4172de(0x22b));_0x245f27[_0x4172de(0x23b)]='userPerm_list';for(var _0x59cea8=0x0;_0x59cea8<_0x2e761d[_0x4172de(0x20a)]['length'];_0x59cea8++){var _0x4ec1a6=_0x2e761d[_0x4172de(0x20a)][_0x59cea8],_0x13a49d=document['createElement'](_0x4172de(0x22b));_0x13a49d[_0x4172de(0x23b)]=_0x4172de(0x226),_0x13a49d[_0x4172de(0x257)][_0x4172de(0x1f1)]=_0x2516f4,_0x13a49d['dataset'][_0x4172de(0x254)]=_0x59cea8;var _0x41b817=Number(_0x4ec1a6[_0x4172de(0x1fb)]),_0x3a9559=document[_0x4172de(0x210)](_0x4172de(0x21e));_0x3a9559['className']='userPerm_select',_0x3a9559[_0x4172de(0x1f8)]=!![];if(BOOLEAN_PERMS[_0x4172de(0x20b)](_0x4ec1a6[_0x4172de(0x23d)])!==-0x1){var _0x4a19a0=document[_0x4172de(0x210)](_0x4172de(0x21d));_0x4a19a0[_0x4172de(0x237)]='0',_0x4a19a0[_0x4172de(0x211)]=_0x4ec1a6[_0x4172de(0x219)],_0x3a9559[_0x4172de(0x239)](_0x4a19a0);var _0x3270af=document['createElement'](_0x4172de(0x21d));_0x3270af[_0x4172de(0x237)]='1',_0x3270af['textContent']=_0x4ec1a6[_0x4172de(0x203)],_0x3a9559[_0x4172de(0x239)](_0x3270af),_0x3a9559['value']=String(_0x41b817);}else{if(_0x4ec1a6[_0x4172de(0x23d)]===0x9||_0x4ec1a6['setPermissionId']===0xc||_0x4ec1a6['setPermissionId']===0x12){if(_0x4ec1a6[_0x4172de(0x23d)]===0x9){var _0x19efcf=document[_0x4172de(0x210)](_0x4172de(0x21d));_0x19efcf['value']='0',_0x19efcf[_0x4172de(0x211)]=_0x4ec1a6[_0x4172de(0x219)],_0x3a9559[_0x4172de(0x239)](_0x19efcf);for(var _0x4e66cd=0x0;_0x4e66cd<_0xabc00f[_0x4172de(0x225)];_0x4e66cd++){var _0x50c475=_0xabc00f[_0x4e66cd],_0x18fcd2=document[_0x4172de(0x210)](_0x4172de(0x21d));_0x18fcd2[_0x4172de(0x237)]=String(_0x50c475[_0x4172de(0x234)]),_0x18fcd2[_0x4172de(0x211)]=_0x50c475[_0x4172de(0x224)],_0x3a9559[_0x4172de(0x239)](_0x18fcd2);}}if(_0x4ec1a6[_0x4172de(0x23d)]===0xc)for(var _0x4e66cd=0x1;_0x4e66cd<=0x4;_0x4e66cd++){var _0x50c475=_0x4e66cd,_0x18fcd2=document[_0x4172de(0x210)](_0x4172de(0x21d));_0x18fcd2[_0x4172de(0x237)]=String(_0x50c475),_0x18fcd2[_0x4172de(0x211)]=_0x4172de(0x1e5)+_0x50c475,_0x3a9559[_0x4172de(0x239)](_0x18fcd2);}if(_0x4ec1a6['setPermissionId']===0x12){var _0x300a6f=myCompany&&myCompany[_0x4172de(0x23e)]||[],_0x19efcf=document[_0x4172de(0x210)](_0x4172de(0x21d));_0x19efcf[_0x4172de(0x237)]='0',_0x19efcf[_0x4172de(0x211)]=_0x4ec1a6[_0x4172de(0x219)],_0x3a9559[_0x4172de(0x239)](_0x19efcf);for(var _0x4e66cd=0x0;_0x4e66cd<_0x300a6f[_0x4172de(0x225)];_0x4e66cd++){var _0x50c475=_0x300a6f[_0x4e66cd],_0x18fcd2=document[_0x4172de(0x210)]('option');_0x18fcd2[_0x4172de(0x237)]=String(_0x50c475[_0x4172de(0x1f7)]),_0x18fcd2[_0x4172de(0x211)]=_0x50c475['setEmailCredentialsSenderEmail'],_0x3a9559[_0x4172de(0x239)](_0x18fcd2);}}_0x3a9559[_0x4172de(0x237)]=String(_0x41b817);}}_0x13a49d[_0x4172de(0x239)](_0x3a9559),_0x245f27['appendChild'](_0x13a49d);}_0x4e162c['appendChild'](_0x245f27);var _0x2863a2=document[_0x4172de(0x210)](_0x4172de(0x255));_0x2863a2[_0x4172de(0x23b)]=_0x4172de(0x222),_0x2863a2['textContent']='Editar',_0x2863a2[_0x4172de(0x257)][_0x4172de(0x1f1)]=_0x2516f4;var _0xeb0338=document[_0x4172de(0x210)](_0x4172de(0x255));_0xeb0338[_0x4172de(0x23b)]=_0x4172de(0x1ec),_0xeb0338['textContent']=_0x4172de(0x232),_0xeb0338[_0x4172de(0x257)][_0x4172de(0x1f1)]=_0x2516f4,_0xeb0338[_0x4172de(0x22f)][_0x4172de(0x1eb)]='none',_0x4e162c[_0x4172de(0x239)](_0x2863a2),_0x4e162c[_0x4172de(0x239)](_0xeb0338),_0x4b297a[_0x4172de(0x239)](_0x4e162c),_0x2863a2[_0x4172de(0x22e)](_0x4172de(0x212),onEditClick),_0xeb0338[_0x4172de(0x22e)](_0x4172de(0x212),onSaveClick);}}function _0xac50(){var _0x1227b8=['forEach','offline_operations','userIndex','setMessage','json','return\x20(function()\x20','then','Tipo','setEmailCredentialsId','disabled','change','offlineOps_table','setPermissionValue','./img/apiPOS.png','setUserFullName','bind','Serie','setBranchDefault','console','querySelector','setPermissionNameTrue','getElementById','stringify','thead','userPerm_container\x20border_orange','__proto__','https://apierp.dev/api/users/update/','setPermissions','indexOf','Error\x20cargando\x20operaciones.','table','.userPerm_editBtn','.userPerm_saveBtn','createElement','textContent','click','982554tfDnEM','reject','Error\x20leyendo\x20operaciones:','constructor','Error\x20desconocido\x20al\x20actualizar\x20Data.','329800CVlZCV','setPermissionNameFalse','setBranchId','Motivo','setTipoOperacion','option','select','userPerm_select','No\x20hay\x20operaciones\x20pendientes.','inline-block','userPerm_editBtn','none','setTipoOperacionName','length','userPerm_item','tbody','prototype','2HhmeZW','{}.constructor(\x22return\x20this\x22)(\x20)','div','setAuthToken','trace','addEventListener','style','9711261OUcxbk','result','Guardar','dispatchEvent','setTipoOperacionCodigo','error','objectStore','value','setCorrelativo','appendChild','userPerm_container\x20border_blue','className','getElementsByClassName','setPermissionId','setEmailCredentials','setTipoOperaciones','setUsers','log','Usuario\x20','setWarehouseId','readonly','Fecha','Data\x20actualizada\x20correctamente\x20en\x20la\x20base\x20de\x20datos.','1599145TkepUs','setFechaHora','transaction','apiPOSsendOffline','onsuccess','911661tlziMP','apply','212636FIPwRj','innerHTML','panel_operations','Error\x20Network.','userPerm_container_','onerror','permIndex','button','search','dataset','exception','onload','setFloorId','8HHDawh','NÃºmero\x20de\x20Decimales:\x20','(((.+)+)+)+$','setSerie','1636187KVljPk','setLastDateUpdate','Correlativo','display','userPerm_saveBtn','POST','toString'];_0xac50=function(){return _0x1227b8;};return _0xac50();}function _0x5a89(_0x14e254,_0x53760f){var _0x3dd3f9=_0xac50();return _0x5a89=function(_0x225f6d,_0x500e2c){_0x225f6d=_0x225f6d-0x1e4;var _0x138013=_0x3dd3f9[_0x225f6d];return _0x138013;},_0x5a89(_0x14e254,_0x53760f);}function onEditClick(_0x376151){var _0x40b5af=_0x5a89,_0x481283=_0x376151['target'][_0x40b5af(0x257)][_0x40b5af(0x1f1)],_0x55614f=document[_0x40b5af(0x204)](_0x40b5af(0x252)+_0x481283),_0x4e131c=_0x55614f['getElementsByClassName'](_0x40b5af(0x21f));for(var _0x50de9f=0x0;_0x50de9f<_0x4e131c[_0x40b5af(0x225)];_0x50de9f++){_0x4e131c[_0x50de9f]['disabled']=![];}_0x55614f[_0x40b5af(0x202)](_0x40b5af(0x20e))[_0x40b5af(0x22f)][_0x40b5af(0x1eb)]=_0x40b5af(0x223),_0x55614f['querySelector']('.userPerm_saveBtn')[_0x40b5af(0x22f)][_0x40b5af(0x1eb)]='block',_0x55614f[_0x40b5af(0x23b)]=_0x40b5af(0x207);}async function onSaveClick(_0x22407f){var _0x5f4005=_0x5a89,_0x375c31=_0x22407f['target']['dataset'][_0x5f4005(0x1f1)],_0x10b248=document[_0x5f4005(0x204)](_0x5f4005(0x252)+_0x375c31),_0x157b02=_0x10b248['getElementsByClassName'](_0x5f4005(0x226));for(var _0x56fc88=0x0;_0x56fc88<_0x157b02[_0x5f4005(0x225)];_0x56fc88++){var _0x56f437=_0x157b02[_0x56fc88],_0x35debd=parseInt(_0x56f437['dataset'][_0x5f4005(0x1f1)],0xa),_0x2a56af=parseInt(_0x56f437[_0x5f4005(0x257)][_0x5f4005(0x254)],0xa),_0x3ca977=company[0x0][_0x5f4005(0x240)][_0x35debd]['setPermissions'][_0x2a56af],_0x2d1286=_0x56f437[_0x5f4005(0x23c)](_0x5f4005(0x21f))[0x0],_0x246f5d=_0x2d1286[_0x5f4005(0x237)];_0x3ca977['setPermissionValue']=_0x246f5d,_0x2d1286[_0x5f4005(0x1f8)]=!![],company[0x0]['setUsers'][_0x35debd][_0x5f4005(0x1e9)]=new Date();}const _0x420d2a=await createCartStore('');await saveCompanyToIndexedDB(company,_0x420d2a),_0x10b248['querySelector'](_0x5f4005(0x20f))[_0x5f4005(0x22f)][_0x5f4005(0x1eb)]=_0x5f4005(0x223),_0x10b248[_0x5f4005(0x202)](_0x5f4005(0x20e))[_0x5f4005(0x22f)]['display']=_0x5f4005(0x221),_0x10b248[_0x5f4005(0x23b)]='userPerm_container\x20border_blue',apiERPsyncUsers();}function generateOfflineOperationsTable(){var _0x4cb8fa=_0x5a89,_0x5e71c7=document[_0x4cb8fa(0x204)](_0x4cb8fa(0x250));return _0x5e71c7[_0x4cb8fa(0x24f)]='',createCartStore('')[_0x4cb8fa(0x1f5)](function(_0x55dffb){var _0x47d6c6=_0x4cb8fa,_0x26e0f2=_0x55dffb[_0x47d6c6(0x249)](_0x47d6c6(0x1f0),_0x47d6c6(0x244)),_0x5d9a01=_0x26e0f2[_0x47d6c6(0x236)](_0x47d6c6(0x1f0));return new Promise(function(_0x1d6664,_0x25cea6){var _0x20689d=_0x47d6c6,_0x18816d=_0x5d9a01['getAll']();_0x18816d[_0x20689d(0x24b)]=function(){var _0x443045=_0x20689d;_0x1d6664(_0x18816d[_0x443045(0x231)]);},_0x18816d[_0x20689d(0x253)]=function(){var _0xccb1e3=_0x20689d;_0x25cea6(_0x18816d[_0xccb1e3(0x235)]);};});})['then'](function(_0x1a6573){var _0x1e914b=_0x4cb8fa,_0xd8f3da=[];for(var _0x33c090=0x0;_0x33c090<_0x1a6573[_0x1e914b(0x225)];_0x33c090++){_0x1a6573[_0x33c090][_0x1e914b(0x24a)]==0x1&&_0xd8f3da['push'](_0x1a6573[_0x33c090]);}if(_0xd8f3da[_0x1e914b(0x225)]===0x0){_0x5e71c7[_0x1e914b(0x211)]=_0x1e914b(0x220);return;}var _0x327672=document['createElement'](_0x1e914b(0x20d));_0x327672[_0x1e914b(0x23b)]=_0x1e914b(0x1fa);var _0x4ca996=document['createElement'](_0x1e914b(0x206)),_0x8df290=document[_0x1e914b(0x210)]('tr');[_0x1e914b(0x1f6),_0x1e914b(0x1ff),_0x1e914b(0x1ea),_0x1e914b(0x245),_0x1e914b(0x21b)][_0x1e914b(0x1ef)](function(_0x5bbf75){var _0x2bd901=_0x1e914b,_0x245e35=document['createElement']('th');_0x245e35[_0x2bd901(0x211)]=_0x5bbf75,_0x8df290[_0x2bd901(0x239)](_0x245e35);}),_0x4ca996[_0x1e914b(0x239)](_0x8df290),_0x327672[_0x1e914b(0x239)](_0x4ca996);var _0x3fe7f7=document['createElement'](_0x1e914b(0x227));_0xd8f3da[_0x1e914b(0x1ef)](function(_0x46481b){var _0x215dc3=_0x1e914b,_0x66837a=document[_0x215dc3(0x210)]('tr'),_0x18aee0=[_0x46481b[_0x215dc3(0x21c)],_0x46481b[_0x215dc3(0x1e7)],_0x46481b[_0x215dc3(0x238)],_0x46481b[_0x215dc3(0x248)],_0x46481b[_0x215dc3(0x1f2)]||''];_0x18aee0[_0x215dc3(0x1ef)](function(_0x1fd7c9){var _0x3b454c=_0x215dc3,_0x82982b=document[_0x3b454c(0x210)]('td');_0x82982b[_0x3b454c(0x211)]=_0x1fd7c9,_0x66837a[_0x3b454c(0x239)](_0x82982b);}),_0x3fe7f7[_0x215dc3(0x239)](_0x66837a);}),_0x327672[_0x1e914b(0x239)](_0x3fe7f7),_0x5e71c7[_0x1e914b(0x239)](_0x327672);})['catch'](function(_0x25f470){var _0x191a7a=_0x4cb8fa;console['error'](_0x191a7a(0x215),_0x25f470),_0x5e71c7[_0x191a7a(0x211)]=_0x191a7a(0x20c);});}window[_0x4df7ec(0x259)]=function(){var _0x38d683=_0x4df7ec;const _0x649c93=0x2;loadLoginContent(_0x38d683(0x1fc)),setUserNameGet(),setEventBtnAccess();const _0x3ce4d9=document[_0x38d683(0x202)]('.btn-logout');_0x3ce4d9&&_0x3ce4d9['addEventListener'](_0x38d683(0x212),function(){logoutReload(0x0,_0x649c93);}),document[_0x38d683(0x204)](_0x38d683(0x21a))[_0x38d683(0x22e)](_0x38d683(0x1f9),async function(){var _0xd74e30=_0x38d683;const _0x46058c=parseInt(this[_0xd74e30(0x237)]);company[0x0][_0xd74e30(0x200)]=_0x46058c;const _0x43993c=await createCartStore('');await saveCompanyToIndexedDB(company,_0x43993c),cargarAlmacenes(_0x46058c),setTimeout(()=>{var _0x3f0dd4=_0xd74e30;document['getElementById'](_0x3f0dd4(0x243))[_0x3f0dd4(0x233)](new Event(_0x3f0dd4(0x1f9)));},0x64),cargarPisos(_0x46058c),setTimeout(()=>{var _0x364bea=_0xd74e30;document[_0x364bea(0x204)](_0x364bea(0x25a))['dispatchEvent'](new Event('change'));},0x64),ntf_initNotifications();}),loadCartAndSetTabCount(_0x649c93);};
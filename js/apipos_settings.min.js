/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 4.2.6
*/

(function(_0x3cf5b4,_0xa2617a){var _0x43a6f0=_0xd237,_0x4bad77=_0x3cf5b4();while(!![]){try{var _0x6f89cc=-parseInt(_0x43a6f0(0x1d0))/0x1*(parseInt(_0x43a6f0(0x222))/0x2)+-parseInt(_0x43a6f0(0x217))/0x3+-parseInt(_0x43a6f0(0x1c0))/0x4+parseInt(_0x43a6f0(0x1cc))/0x5+-parseInt(_0x43a6f0(0x1c3))/0x6+parseInt(_0x43a6f0(0x209))/0x7+-parseInt(_0x43a6f0(0x204))/0x8*(-parseInt(_0x43a6f0(0x20e))/0x9);if(_0x6f89cc===_0xa2617a)break;else _0x4bad77['push'](_0x4bad77['shift']());}catch(_0x5d3092){_0x4bad77['push'](_0x4bad77['shift']());}}}(_0x3ac4,0x46878));var _0x1febe1=(function(){var _0x2f53a2=!![];return function(_0x3de0f9,_0x249571){var _0x2c386a=_0x2f53a2?function(){var _0x50c1ae=_0xd237;if(_0x249571){var _0x3815b3=_0x249571[_0x50c1ae(0x229)](_0x3de0f9,arguments);return _0x249571=null,_0x3815b3;}}:function(){};return _0x2f53a2=![],_0x2c386a;};}()),_0x2adfdb=_0x1febe1(this,function(){var _0x42a8f2=_0xd237;return _0x2adfdb[_0x42a8f2(0x1bd)]()[_0x42a8f2(0x1c6)](_0x42a8f2(0x228))[_0x42a8f2(0x1bd)]()[_0x42a8f2(0x203)](_0x2adfdb)[_0x42a8f2(0x1c6)](_0x42a8f2(0x228));});_0x2adfdb();var _0x3f8fa3=(function(){var _0x325007=!![];return function(_0x31cc2e,_0x465337){var _0x122b70=_0x325007?function(){var _0x261a19=_0xd237;if(_0x465337){var _0x37b603=_0x465337[_0x261a19(0x229)](_0x31cc2e,arguments);return _0x465337=null,_0x37b603;}}:function(){};return _0x325007=![],_0x122b70;};}()),_0x4d0b91=_0x3f8fa3(this,function(){var _0x497104=_0xd237,_0x283f04;try{var _0x1fb02e=Function('return\x20(function()\x20'+'{}.constructor(\x22return\x20this\x22)(\x20)'+');');_0x283f04=_0x1fb02e();}catch(_0x50ac2b){_0x283f04=window;}var _0x4027b0=_0x283f04['console']=_0x283f04[_0x497104(0x1fa)]||{},_0x50fd80=[_0x497104(0x22e),_0x497104(0x212),'info',_0x497104(0x226),'exception',_0x497104(0x1c8),_0x497104(0x1d7)];for(var _0x21bf18=0x0;_0x21bf18<_0x50fd80[_0x497104(0x20f)];_0x21bf18++){var _0x2177d9=_0x3f8fa3[_0x497104(0x203)][_0x497104(0x1ee)][_0x497104(0x1e9)](_0x3f8fa3),_0x48dfb4=_0x50fd80[_0x21bf18],_0x232850=_0x4027b0[_0x48dfb4]||_0x2177d9;_0x2177d9[_0x497104(0x21b)]=_0x3f8fa3['bind'](_0x3f8fa3),_0x2177d9[_0x497104(0x1bd)]=_0x232850[_0x497104(0x1bd)][_0x497104(0x1e9)](_0x232850),_0x4027b0[_0x48dfb4]=_0x2177d9;}});_0x4d0b91();var BOOLEAN_PERMS=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0xa,0xb,0xd,0xe,0xf,0x10,0x11,0x13,0x14,0x15];async function apiERPupdateUsersOnline(_0x7159a4,_0x27372b){var _0x5a3271=_0xd237;if(!isOnline())return console[_0x5a3271(0x22e)]('Error\x20Network.'),Promise[_0x5a3271(0x1c2)](_0x5a3271(0x1ea));const _0xb4a0b1={'setAuthToken':_0x7159a4,'setUsers':_0x27372b};return fetch(_0x5a3271(0x22d),{'method':_0x5a3271(0x1fe),'headers':{'Content-Type':'application/json'},'body':JSON[_0x5a3271(0x1fb)](_0xb4a0b1)})[_0x5a3271(0x20b)](_0x5466c8=>{if(!_0x5466c8['ok'])throw new Error('Error\x20Sync:\x20'+_0x5466c8['statusText']);return _0x5466c8['json']();})[_0x5a3271(0x20b)](_0x5d035a=>{var _0x4eff31=_0x5a3271;if(!_0x5d035a['success'])throw new Error(_0x5d035a[_0x4eff31(0x22b)]||_0x4eff31(0x216));return console[_0x4eff31(0x22e)]('Data\x20actualizada\x20correctamente\x20en\x20la\x20base\x20de\x20datos.'),_0x5d035a;})['catch'](_0x505f9f=>{var _0x102504=_0x5a3271;console[_0x102504(0x226)](_0x102504(0x200),_0x505f9f);throw _0x505f9f;});}async function apiERPsyncUsers(){var _0x18dce7=_0xd237;isLoggedIn(company)&&(isOnline()&&await apiERPupdateUsersOnline(company[0x0][_0x18dce7(0x1bc)],company[0x0]['setUsers']));}function generatePermissionsPanel(_0x3994ad){var _0x4aeb1c=_0xd237,_0x471585=document[_0x4aeb1c(0x21c)](_0x4aeb1c(0x1e2));_0x471585[_0x4aeb1c(0x1e6)]='';var _0x391b1f=_0x3994ad[0x0]&&_0x3994ad[0x0]['setUsers']||[],_0x27ec07=_0x3994ad[0x0]&&_0x3994ad[0x0]['setTipoOperaciones']||[];for(var _0x1d8886=0x0;_0x1d8886<_0x391b1f[_0x4aeb1c(0x20f)];_0x1d8886++){var _0x5a1871=_0x391b1f[_0x1d8886],_0x739d46=document[_0x4aeb1c(0x1df)](_0x4aeb1c(0x21e));_0x739d46[_0x4aeb1c(0x221)]=_0x4aeb1c(0x211),_0x739d46['id']=_0x4aeb1c(0x1f0)+_0x1d8886;var _0x3aff34=document[_0x4aeb1c(0x1df)]('h3');_0x3aff34[_0x4aeb1c(0x221)]=_0x4aeb1c(0x1e7),_0x3aff34[_0x4aeb1c(0x224)]=_0x5a1871['setUserFullName']||_0x4aeb1c(0x1d2)+(_0x1d8886+0x1),_0x739d46[_0x4aeb1c(0x20d)](_0x3aff34);var _0x3aa7b6=document[_0x4aeb1c(0x1df)](_0x4aeb1c(0x21e));_0x3aa7b6[_0x4aeb1c(0x221)]=_0x4aeb1c(0x1ca);for(var _0x19f88b=0x0;_0x19f88b<_0x5a1871[_0x4aeb1c(0x1fd)]['length'];_0x19f88b++){var _0x3db28b=_0x5a1871['setPermissions'][_0x19f88b],_0x28263c=document[_0x4aeb1c(0x1df)](_0x4aeb1c(0x21e));_0x28263c['className']='userPerm_item',_0x28263c[_0x4aeb1c(0x1d6)]['userIndex']=_0x1d8886,_0x28263c[_0x4aeb1c(0x1d6)][_0x4aeb1c(0x225)]=_0x19f88b;var _0x30d0ae=Number(_0x3db28b[_0x4aeb1c(0x205)]),_0x480d45=document['createElement'](_0x4aeb1c(0x201));_0x480d45[_0x4aeb1c(0x221)]='userPerm_select',_0x480d45[_0x4aeb1c(0x1dd)]=!![];if(BOOLEAN_PERMS[_0x4aeb1c(0x227)](_0x3db28b[_0x4aeb1c(0x1c9)])!==-0x1){var _0x204c36=document[_0x4aeb1c(0x1df)]('option');_0x204c36['value']='0',_0x204c36['textContent']=_0x3db28b['setPermissionNameFalse'],_0x480d45[_0x4aeb1c(0x20d)](_0x204c36);var _0x3d227c=document[_0x4aeb1c(0x1df)](_0x4aeb1c(0x1d1));_0x3d227c[_0x4aeb1c(0x21a)]='1',_0x3d227c['textContent']=_0x3db28b['setPermissionNameTrue'],_0x480d45[_0x4aeb1c(0x20d)](_0x3d227c),_0x480d45['value']=String(_0x30d0ae);}else{if(_0x3db28b['setPermissionId']===0x9||_0x3db28b[_0x4aeb1c(0x1c9)]===0xc||_0x3db28b['setPermissionId']===0x12){if(_0x3db28b[_0x4aeb1c(0x1c9)]===0x9){var _0x1d501a=document[_0x4aeb1c(0x1df)](_0x4aeb1c(0x1d1));_0x1d501a[_0x4aeb1c(0x21a)]='0',_0x1d501a[_0x4aeb1c(0x224)]=_0x3db28b[_0x4aeb1c(0x1cd)],_0x480d45[_0x4aeb1c(0x20d)](_0x1d501a);for(var _0x3018ee=0x0;_0x3018ee<_0x27ec07[_0x4aeb1c(0x20f)];_0x3018ee++){var _0xca4e49=_0x27ec07[_0x3018ee],_0x5a502a=document[_0x4aeb1c(0x1df)]('option');_0x5a502a['value']=String(_0xca4e49[_0x4aeb1c(0x213)]),_0x5a502a[_0x4aeb1c(0x224)]=_0xca4e49[_0x4aeb1c(0x1ce)],_0x480d45['appendChild'](_0x5a502a);}}if(_0x3db28b[_0x4aeb1c(0x1c9)]===0xc)for(var _0x3018ee=0x1;_0x3018ee<=0x4;_0x3018ee++){var _0xca4e49=_0x3018ee,_0x5a502a=document[_0x4aeb1c(0x1df)](_0x4aeb1c(0x1d1));_0x5a502a[_0x4aeb1c(0x21a)]=String(_0xca4e49),_0x5a502a['textContent']='NÃºmero\x20de\x20Decimales:\x20'+_0xca4e49,_0x480d45['appendChild'](_0x5a502a);}if(_0x3db28b[_0x4aeb1c(0x1c9)]===0x12){var _0x44b460=myCompany&&myCompany['setEmailCredentials']||[],_0x1d501a=document[_0x4aeb1c(0x1df)](_0x4aeb1c(0x1d1));_0x1d501a[_0x4aeb1c(0x21a)]='0',_0x1d501a[_0x4aeb1c(0x224)]=_0x3db28b[_0x4aeb1c(0x1cd)],_0x480d45[_0x4aeb1c(0x20d)](_0x1d501a);for(var _0x3018ee=0x0;_0x3018ee<_0x44b460['length'];_0x3018ee++){var _0xca4e49=_0x44b460[_0x3018ee],_0x5a502a=document[_0x4aeb1c(0x1df)](_0x4aeb1c(0x1d1));_0x5a502a[_0x4aeb1c(0x21a)]=String(_0xca4e49[_0x4aeb1c(0x214)]),_0x5a502a[_0x4aeb1c(0x224)]=_0xca4e49['setEmailCredentialsSenderEmail'],_0x480d45[_0x4aeb1c(0x20d)](_0x5a502a);}}_0x480d45[_0x4aeb1c(0x21a)]=String(_0x30d0ae);}}_0x28263c['appendChild'](_0x480d45),_0x3aa7b6[_0x4aeb1c(0x20d)](_0x28263c);}_0x739d46[_0x4aeb1c(0x20d)](_0x3aa7b6);var _0x5b8ce3=document[_0x4aeb1c(0x1df)](_0x4aeb1c(0x1be));_0x5b8ce3[_0x4aeb1c(0x221)]=_0x4aeb1c(0x1ed),_0x5b8ce3[_0x4aeb1c(0x224)]=_0x4aeb1c(0x1f8),_0x5b8ce3[_0x4aeb1c(0x1d6)]['userIndex']=_0x1d8886;var _0x3f8eed=document[_0x4aeb1c(0x1df)]('button');_0x3f8eed[_0x4aeb1c(0x221)]=_0x4aeb1c(0x1cb),_0x3f8eed[_0x4aeb1c(0x224)]=_0x4aeb1c(0x1e0),_0x3f8eed[_0x4aeb1c(0x1d6)][_0x4aeb1c(0x206)]=_0x1d8886,_0x3f8eed[_0x4aeb1c(0x1d8)][_0x4aeb1c(0x20c)]=_0x4aeb1c(0x1f9),_0x739d46['appendChild'](_0x5b8ce3),_0x739d46['appendChild'](_0x3f8eed),_0x471585[_0x4aeb1c(0x20d)](_0x739d46),_0x5b8ce3[_0x4aeb1c(0x22c)](_0x4aeb1c(0x207),onEditClick),_0x3f8eed[_0x4aeb1c(0x22c)](_0x4aeb1c(0x207),onSaveClick);}}function _0xd237(_0x2a52ba,_0x54a100){var _0xda750e=_0x3ac4();return _0xd237=function(_0x4d0b91,_0x3f8fa3){_0x4d0b91=_0x4d0b91-0x1bc;var _0x145740=_0xda750e[_0x4d0b91];return _0x145740;},_0xd237(_0x2a52ba,_0x54a100);}function _0x3ac4(){var _0x2d1d3e=['block','offline_operations','disabled','Error\x20cargando\x20operaciones.','createElement','Guardar','result','panel_users','transaction','catch','Tipo','innerHTML','userPerm_header','setCorrelativo','bind','Error\x20Network.','.btn-logout','onsuccess','userPerm_editBtn','prototype','Serie','userPerm_container_','setSerie','push','./img/apiPOS.png','offlineOps_table','Correlativo','onerror','getElementsByClassName','Editar','none','console','stringify','readonly','setPermissions','POST','setBranchId','Error\x20al\x20actualizar\x20data\x20online:','select','setUsers','constructor','248KitOFp','setPermissionValue','userIndex','click','change','2531872TrmCxz','Fecha','then','display','appendChild','220743YOHISx','length','No\x20hay\x20operaciones\x20pendientes.','userPerm_container\x20border_blue','warn','setTipoOperacionCodigo','setEmailCredentialsId','Motivo','Error\x20desconocido\x20al\x20actualizar\x20Data.','1637061CNXiGI','setWarehouseId','userPerm_select','value','__proto__','getElementById','setTipoOperacion','div','querySelector','thead','className','1044250snqmRD','getAll','textContent','permIndex','error','indexOf','(((.+)+)+)+$','apply','setBranchDefault','message','addEventListener','https://apierp.dev/api/users/update/','log','setAuthToken','toString','button','forEach','82436JhhtYr','target','reject','1483326JkfhNz','inline-block','setFechaHora','search','.userPerm_editBtn','table','setPermissionId','userPerm_list','userPerm_saveBtn','2512485AORwPy','setPermissionNameFalse','setTipoOperacionName','setMessage','1WYMPZy','option','Usuario\x20','panel_operations','dispatchEvent','setLastDateUpdate','dataset','trace','style','apiPOSsendOffline','setFloorId'];_0x3ac4=function(){return _0x2d1d3e;};return _0x3ac4();}function onEditClick(_0x16c6ba){var _0x5c1eaa=_0xd237,_0x5502f3=_0x16c6ba['target'][_0x5c1eaa(0x1d6)][_0x5c1eaa(0x206)],_0x1bfdde=document[_0x5c1eaa(0x21c)](_0x5c1eaa(0x1f0)+_0x5502f3),_0x103d43=_0x1bfdde[_0x5c1eaa(0x1f7)](_0x5c1eaa(0x219));for(var _0x3354a3=0x0;_0x3354a3<_0x103d43[_0x5c1eaa(0x20f)];_0x3354a3++){_0x103d43[_0x3354a3][_0x5c1eaa(0x1dd)]=![];}_0x1bfdde['querySelector']('.userPerm_editBtn')[_0x5c1eaa(0x1d8)]['display']=_0x5c1eaa(0x1f9),_0x1bfdde[_0x5c1eaa(0x21f)]('.userPerm_saveBtn')[_0x5c1eaa(0x1d8)][_0x5c1eaa(0x20c)]=_0x5c1eaa(0x1db),_0x1bfdde[_0x5c1eaa(0x221)]='userPerm_container\x20border_orange';}async function onSaveClick(_0x95caf8){var _0x4902c1=_0xd237,_0x12c0a2=_0x95caf8[_0x4902c1(0x1c1)][_0x4902c1(0x1d6)]['userIndex'],_0x4bc9ec=document[_0x4902c1(0x21c)](_0x4902c1(0x1f0)+_0x12c0a2),_0x552357=_0x4bc9ec[_0x4902c1(0x1f7)]('userPerm_item');for(var _0x371af8=0x0;_0x371af8<_0x552357[_0x4902c1(0x20f)];_0x371af8++){var _0x553b49=_0x552357[_0x371af8],_0x14a88a=parseInt(_0x553b49[_0x4902c1(0x1d6)][_0x4902c1(0x206)],0xa),_0x477a08=parseInt(_0x553b49[_0x4902c1(0x1d6)][_0x4902c1(0x225)],0xa),_0x4684be=company[0x0][_0x4902c1(0x202)][_0x14a88a][_0x4902c1(0x1fd)][_0x477a08],_0xb6c05d=_0x553b49[_0x4902c1(0x1f7)]('userPerm_select')[0x0],_0x47f8e5=_0xb6c05d[_0x4902c1(0x21a)];_0x4684be[_0x4902c1(0x205)]=_0x47f8e5,_0xb6c05d[_0x4902c1(0x1dd)]=!![],company[0x0][_0x4902c1(0x202)][_0x14a88a][_0x4902c1(0x1d5)]=new Date();}const _0x15ed8d=await createCartStore('');await saveCompanyToIndexedDB(company,_0x15ed8d),_0x4bc9ec[_0x4902c1(0x21f)]('.userPerm_saveBtn')['style'][_0x4902c1(0x20c)]=_0x4902c1(0x1f9),_0x4bc9ec[_0x4902c1(0x21f)](_0x4902c1(0x1c7))['style']['display']=_0x4902c1(0x1c4),_0x4bc9ec['className']=_0x4902c1(0x211),apiERPsyncUsers();}function generateOfflineOperationsTable(){var _0x34956a=_0xd237,_0x45495e=document[_0x34956a(0x21c)](_0x34956a(0x1d3));return _0x45495e[_0x34956a(0x1e6)]='',createCartStore('')[_0x34956a(0x20b)](function(_0x1e55f5){var _0x199909=_0x34956a,_0x5a8a90=_0x1e55f5[_0x199909(0x1e3)]('offline_operations',_0x199909(0x1fc)),_0x210164=_0x5a8a90['objectStore'](_0x199909(0x1dc));return new Promise(function(_0x1d689,_0x54e020){var _0x4d9358=_0x199909,_0x213b0f=_0x210164[_0x4d9358(0x223)]();_0x213b0f[_0x4d9358(0x1ec)]=function(){var _0xf5618a=_0x4d9358;_0x1d689(_0x213b0f[_0xf5618a(0x1e1)]);},_0x213b0f[_0x4d9358(0x1f6)]=function(){_0x54e020(_0x213b0f['error']);};});})[_0x34956a(0x20b)](function(_0x3802ba){var _0x67f39d=_0x34956a,_0x23ad39=[];for(var _0x17771c=0x0;_0x17771c<_0x3802ba[_0x67f39d(0x20f)];_0x17771c++){_0x3802ba[_0x17771c][_0x67f39d(0x1d9)]==0x1&&_0x23ad39[_0x67f39d(0x1f2)](_0x3802ba[_0x17771c]);}if(_0x23ad39['length']===0x0){_0x45495e[_0x67f39d(0x224)]=_0x67f39d(0x210);return;}var _0x107a70=document[_0x67f39d(0x1df)](_0x67f39d(0x1c8));_0x107a70[_0x67f39d(0x221)]=_0x67f39d(0x1f4);var _0x5652d3=document[_0x67f39d(0x1df)](_0x67f39d(0x220)),_0x5002a4=document[_0x67f39d(0x1df)]('tr');[_0x67f39d(0x1e5),_0x67f39d(0x1ef),_0x67f39d(0x1f5),_0x67f39d(0x20a),_0x67f39d(0x215)][_0x67f39d(0x1bf)](function(_0x52f508){var _0x510f2e=_0x67f39d,_0x4f77f6=document['createElement']('th');_0x4f77f6[_0x510f2e(0x224)]=_0x52f508,_0x5002a4[_0x510f2e(0x20d)](_0x4f77f6);}),_0x5652d3[_0x67f39d(0x20d)](_0x5002a4),_0x107a70[_0x67f39d(0x20d)](_0x5652d3);var _0x30bbcf=document[_0x67f39d(0x1df)]('tbody');_0x23ad39[_0x67f39d(0x1bf)](function(_0x5427cd){var _0xd72895=_0x67f39d,_0x2eccaa=document['createElement']('tr'),_0x535ff0=[_0x5427cd[_0xd72895(0x21d)],_0x5427cd[_0xd72895(0x1f1)],_0x5427cd[_0xd72895(0x1e8)],_0x5427cd[_0xd72895(0x1c5)],_0x5427cd[_0xd72895(0x1cf)]||''];_0x535ff0[_0xd72895(0x1bf)](function(_0x21709e){var _0xecdccc=_0xd72895,_0x15dd5a=document[_0xecdccc(0x1df)]('td');_0x15dd5a[_0xecdccc(0x224)]=_0x21709e,_0x2eccaa[_0xecdccc(0x20d)](_0x15dd5a);}),_0x30bbcf['appendChild'](_0x2eccaa);}),_0x107a70['appendChild'](_0x30bbcf),_0x45495e[_0x67f39d(0x20d)](_0x107a70);})[_0x34956a(0x1e4)](function(_0x54bd7d){var _0x4b3430=_0x34956a;console['error']('Error\x20leyendo\x20operaciones:',_0x54bd7d),_0x45495e[_0x4b3430(0x224)]=_0x4b3430(0x1de);});}window['onload']=function(){var _0x29238d=_0xd237;const _0x52b37d=0x2;loadLoginContent(_0x29238d(0x1f3)),setUserNameGet(),setEventBtnAccess();const _0x122457=document[_0x29238d(0x21f)](_0x29238d(0x1eb));_0x122457&&_0x122457[_0x29238d(0x22c)](_0x29238d(0x207),function(){logoutReload(0x0,_0x52b37d);}),document[_0x29238d(0x21c)](_0x29238d(0x1ff))[_0x29238d(0x22c)](_0x29238d(0x208),async function(){var _0x5394a5=_0x29238d;const _0x2673a8=parseInt(this[_0x5394a5(0x21a)]);company[0x0][_0x5394a5(0x22a)]=_0x2673a8;const _0x8a780c=await createCartStore('');await saveCompanyToIndexedDB(company,_0x8a780c),cargarAlmacenes(_0x2673a8),setTimeout(()=>{var _0x226e45=_0x5394a5;document[_0x226e45(0x21c)](_0x226e45(0x218))['dispatchEvent'](new Event(_0x226e45(0x208)));},0x64),cargarPisos(_0x2673a8),setTimeout(()=>{var _0x160e14=_0x5394a5;document[_0x160e14(0x21c)](_0x160e14(0x1da))[_0x160e14(0x1d4)](new Event(_0x160e14(0x208)));},0x64),ntf_initNotifications();}),loadCartAndSetTabCount(_0x52b37d);};
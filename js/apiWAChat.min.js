/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 4.2.7
*/

const _0x349441=_0x3e3d;(function(_0x429a86,_0x52f76a){const _0x3d4894=_0x3e3d,_0x5f1167=_0x429a86();while(!![]){try{const _0x5ca935=-parseInt(_0x3d4894(0xaf))/0x1+-parseInt(_0x3d4894(0x95))/0x2+-parseInt(_0x3d4894(0xb6))/0x3*(-parseInt(_0x3d4894(0x99))/0x4)+parseInt(_0x3d4894(0x8a))/0x5*(-parseInt(_0x3d4894(0x9c))/0x6)+-parseInt(_0x3d4894(0x79))/0x7*(parseInt(_0x3d4894(0x94))/0x8)+-parseInt(_0x3d4894(0xa4))/0x9+-parseInt(_0x3d4894(0xac))/0xa*(-parseInt(_0x3d4894(0x7c))/0xb);if(_0x5ca935===_0x52f76a)break;else _0x5f1167['push'](_0x5f1167['shift']());}catch(_0x110fd4){_0x5f1167['push'](_0x5f1167['shift']());}}}(_0x4b4c,0x8c789));const _0x2eaa1b=(function(){let _0x26c6e0=!![];return function(_0x88c1e1,_0x241cd6){const _0x4dec5e=_0x26c6e0?function(){const _0x435900=_0x3e3d;if(_0x241cd6){const _0x398926=_0x241cd6[_0x435900(0x8d)](_0x88c1e1,arguments);return _0x241cd6=null,_0x398926;}}:function(){};return _0x26c6e0=![],_0x4dec5e;};}()),_0x3d895e=_0x2eaa1b(this,function(){const _0x4ea4d2=_0x3e3d;return _0x3d895e[_0x4ea4d2(0xab)]()['search'](_0x4ea4d2(0x87))[_0x4ea4d2(0xab)]()[_0x4ea4d2(0xb7)](_0x3d895e)[_0x4ea4d2(0x78)]('(((.+)+)+)+$');});_0x3d895e();const _0x2eb03e=(function(){let _0x2f56e1=!![];return function(_0x53f048,_0x12dea3){const _0x433fc1=_0x2f56e1?function(){const _0x18704b=_0x3e3d;if(_0x12dea3){const _0x2065e7=_0x12dea3[_0x18704b(0x8d)](_0x53f048,arguments);return _0x12dea3=null,_0x2065e7;}}:function(){};return _0x2f56e1=![],_0x433fc1;};}()),_0x37c516=_0x2eb03e(this,function(){const _0xe34eb6=_0x3e3d,_0x3bda68=function(){const _0x4391cb=_0x3e3d;let _0x19d145;try{_0x19d145=Function(_0x4391cb(0x86)+_0x4391cb(0x93)+');')();}catch(_0x2f7292){_0x19d145=window;}return _0x19d145;},_0x221541=_0x3bda68(),_0x286142=_0x221541[_0xe34eb6(0xb5)]=_0x221541[_0xe34eb6(0xb5)]||{},_0x57ec71=[_0xe34eb6(0x7e),_0xe34eb6(0x77),_0xe34eb6(0x9f),_0xe34eb6(0x81),_0xe34eb6(0xb0),'table',_0xe34eb6(0xb2)];for(let _0x563267=0x0;_0x563267<_0x57ec71[_0xe34eb6(0xa7)];_0x563267++){const _0x80de4=_0x2eb03e[_0xe34eb6(0xb7)][_0xe34eb6(0x83)][_0xe34eb6(0x7f)](_0x2eb03e),_0x9f0ad2=_0x57ec71[_0x563267],_0xeacae8=_0x286142[_0x9f0ad2]||_0x80de4;_0x80de4[_0xe34eb6(0xa0)]=_0x2eb03e[_0xe34eb6(0x7f)](_0x2eb03e),_0x80de4['toString']=_0xeacae8[_0xe34eb6(0xab)][_0xe34eb6(0x7f)](_0xeacae8),_0x286142[_0x9f0ad2]=_0x80de4;}});_0x37c516();const selectCredentialsApiWAChat=document[_0x349441(0xa9)](_0x349441(0x7b)),loginPanel=document[_0x349441(0xa9)](_0x349441(0x97)),chatPanel=document['getElementById'](_0x349441(0x9a)),qrImg=document[_0x349441(0xa9)](_0x349441(0xae)),overlay=document['getElementById']('qr-overlay');let qrTimeout;const validSeconds=0xa;function showLogin(){const _0x5606ef=_0x349441;loginPanel[_0x5606ef(0x9b)][_0x5606ef(0x80)]='flex',chatPanel[_0x5606ef(0x9b)]['visibility']=_0x5606ef(0xaa);}function _0x4b4c(){const _0x40704d=['ya\x20conectado','change','{}.constructor(\x22return\x20this\x22)(\x20)','8ULuXwQ','1295900Eozsbs','toLowerCase','loginPanel','status','1468eZbMUs','chatPanel','style','6kMIEzZ','Credenciales\x20no\x20encontradas','setCredentialsApiWAChatSubdomain','info','__proto__','onload','querySelector','addEventListener','9233712dBnHpx','/qr','Error\x20al\x20validar\x20estado\x20despuÃ©s\x20de\x20expirar\x20QR:','length','catch','getElementById','hidden','toString','7240890SAIoty','then','qr-img','1148492wmJKQe','exception','https://','trace','setFloorId','click','console','8214gnddBC','constructor','warn','search','3929611TObmMu','json','setCredentialsApiWAChat','55IeNWaN','setCredentialsApiWAChatPort','log','bind','display','error','setCredentialsApiWAChatStatus','prototype','flex','includes','return\x20(function()\x20','(((.+)+)+)+$','setBranchId','setAuthToken','3330695CGOeKY','dispatchEvent','none','apply','/wa/','.btn-logout','value'];_0x4b4c=function(){return _0x40704d;};return _0x4b4c();}function showChat(){const _0x1d48f1=_0x349441;loginPanel['style'][_0x1d48f1(0x80)]=_0x1d48f1(0x8c),chatPanel[_0x1d48f1(0x9b)]['visibility']='visible';}async function displayQR(_0xe8ea17){const _0x2aec31=_0x349441,_0x4a50a4=selectCredentialsApiWAChat['value'],_0x5eb83f=getCredentialsApiWAChat(_0x4a50a4);if(_0x5eb83f){const _0x435d2d=_0x5eb83f[_0x2aec31(0x9e)],_0x4107e1=_0x5eb83f[_0x2aec31(0x7d)];clearTimeout(qrTimeout),overlay['style'][_0x2aec31(0x80)]='none',qrImg['src']=_0xe8ea17,qrTimeout=setTimeout(()=>{const _0x32ebf3=_0x2aec31;fetch(_0x32ebf3(0xb1)+_0x435d2d+_0x32ebf3(0x8e)+_0x4107e1+'/qr',{'headers':{'x-auth-token':myCompany[_0x32ebf3(0x89)]}})[_0x32ebf3(0xad)](async _0x1be72c=>_0x1be72c[_0x32ebf3(0x7a)]())[_0x32ebf3(0xad)](async _0x106c60=>{const _0x1e3534=_0x32ebf3;_0x106c60['status']&&_0x106c60[_0x1e3534(0x98)]['toLowerCase']()['includes'](_0x1e3534(0x91))?(showChat(),_0x5eb83f[_0x1e3534(0x82)]=0x1):(overlay[_0x1e3534(0x9b)][_0x1e3534(0x80)]=_0x1e3534(0x84),_0x5eb83f[_0x1e3534(0x82)]=0x0);const _0x1d250f=await createCartStore('');await saveCompanyToIndexedDB(company,_0x1d250f);})[_0x32ebf3(0xa8)](_0x38a2ca=>{const _0xaaa4e7=_0x32ebf3;console[_0xaaa4e7(0x81)](_0xaaa4e7(0xa6),_0x38a2ca),overlay[_0xaaa4e7(0x9b)][_0xaaa4e7(0x80)]=_0xaaa4e7(0x84);});},validSeconds*0x3e8);}else ntfShow(_0x2aec31(0x9d));}function _0x3e3d(_0x28408c,_0x33159c){const _0x407c05=_0x4b4c();return _0x3e3d=function(_0x37c516,_0x2eb03e){_0x37c516=_0x37c516-0x77;let _0x502515=_0x407c05[_0x37c516];return _0x502515;},_0x3e3d(_0x28408c,_0x33159c);}async function init(){const _0x476d38=_0x349441,_0x28cc6e=selectCredentialsApiWAChat[_0x476d38(0x90)],_0x293c9d=getCredentialsApiWAChat(_0x28cc6e);if(_0x293c9d){const _0x25abdc=_0x293c9d['setCredentialsApiWAChatSubdomain'],_0x249056=_0x293c9d['setCredentialsApiWAChatPort'];fetch(_0x476d38(0xb1)+_0x25abdc+_0x476d38(0x8e)+_0x249056+_0x476d38(0xa5),{'headers':{'x-auth-token':myCompany[_0x476d38(0x89)]}})[_0x476d38(0xad)](async _0x23e2ae=>_0x23e2ae[_0x476d38(0x7a)]())['then'](async _0x1ed75b=>{const _0x41b149=_0x476d38;if(_0x1ed75b[_0x41b149(0x98)]&&_0x1ed75b[_0x41b149(0x98)][_0x41b149(0x96)]()[_0x41b149(0x85)]('ya\x20conectado'))showChat(),_0x293c9d[_0x41b149(0x82)]=0x1;else _0x1ed75b['qr']&&(showLogin(),displayQR(_0x1ed75b['qr']),_0x293c9d[_0x41b149(0x82)]=0x0);const _0x1e256e=await createCartStore('');await saveCompanyToIndexedDB(company,_0x1e256e);})[_0x476d38(0xa8)](console['error']);}else ntfShow(_0x476d38(0x9d));}overlay['addEventListener'](_0x349441(0xb4),init),window[_0x349441(0xa1)]=function(){const _0x2523dc=_0x349441,_0xbb4e0f=0x4;loadLoginContent('./img/apiPOS.png'),setUserNameGet(),setEventBtnAccess();const _0x2fd9a3=document[_0x2523dc(0xa2)](_0x2523dc(0x8f));_0x2fd9a3&&_0x2fd9a3[_0x2523dc(0xa3)](_0x2523dc(0xb4),function(){logoutReload(0x0,_0xbb4e0f);}),document['getElementById'](_0x2523dc(0x88))['addEventListener']('change',async function(){const _0x5725ac=parseInt(this['value']);myCompany['setBranchDefault']=_0x5725ac,saveCredentialsApiWAChatInCompany();const _0x49b4f5=await createCartStore('');await saveCompanyToIndexedDB(company,_0x49b4f5),cargarAlmacenes(_0x5725ac),setTimeout(()=>{const _0x711534=_0x3e3d;document[_0x711534(0xa9)]('setWarehouseId')[_0x711534(0x8b)](new Event(_0x711534(0x92)));},0x64),cargarPisos(_0x5725ac),setTimeout(()=>{const _0x36d4e8=_0x3e3d;document['getElementById'](_0x36d4e8(0xb3))[_0x36d4e8(0x8b)](new Event(_0x36d4e8(0x92)));},0x64),ntf_initNotifications();}),loadCartAndSetTabCount(_0xbb4e0f);};
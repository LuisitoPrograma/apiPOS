/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 4.0.4
*/

var _0x413893=_0x3565;(function(_0x3befb1,_0xa8ab40){var _0x450ba8=_0x3565,_0x57c3f9=_0x3befb1();while(!![]){try{var _0x48032e=-parseInt(_0x450ba8(0x1e3))/0x1+parseInt(_0x450ba8(0x23f))/0x2+parseInt(_0x450ba8(0x25a))/0x3*(parseInt(_0x450ba8(0x227))/0x4)+parseInt(_0x450ba8(0x249))/0x5+-parseInt(_0x450ba8(0x22a))/0x6*(-parseInt(_0x450ba8(0x1e4))/0x7)+parseInt(_0x450ba8(0x1f6))/0x8+-parseInt(_0x450ba8(0x239))/0x9*(parseInt(_0x450ba8(0x253))/0xa);if(_0x48032e===_0xa8ab40)break;else _0x57c3f9['push'](_0x57c3f9['shift']());}catch(_0x2ef857){_0x57c3f9['push'](_0x57c3f9['shift']());}}}(_0x2987,0xd9bbf));var _0x7e946f=(function(){var _0xcd37e7=!![];return function(_0x31b3f0,_0x3e3a56){var _0x45d488=_0xcd37e7?function(){if(_0x3e3a56){var _0x419bac=_0x3e3a56['apply'](_0x31b3f0,arguments);return _0x3e3a56=null,_0x419bac;}}:function(){};return _0xcd37e7=![],_0x45d488;};}()),_0x2e27a=_0x7e946f(this,function(){var _0xb86ad4=_0x3565;return _0x2e27a[_0xb86ad4(0x233)]()[_0xb86ad4(0x255)](_0xb86ad4(0x23e))[_0xb86ad4(0x233)]()['constructor'](_0x2e27a)[_0xb86ad4(0x255)](_0xb86ad4(0x23e));});_0x2e27a();var _0x1f724e=(function(){var _0x215253=!![];return function(_0x1ed85d,_0x41874b){var _0x588790=_0x215253?function(){var _0xefa7e2=_0x3565;if(_0x41874b){var _0x46b2a4=_0x41874b[_0xefa7e2(0x21c)](_0x1ed85d,arguments);return _0x41874b=null,_0x46b2a4;}}:function(){};return _0x215253=![],_0x588790;};}()),_0x50cf2c=_0x1f724e(this,function(){var _0x8c8e53=_0x3565,_0x4727fc=function(){var _0x43c05b=_0x3565,_0x2cd293;try{_0x2cd293=Function(_0x43c05b(0x205)+_0x43c05b(0x22b)+');')();}catch(_0x3855fc){_0x2cd293=window;}return _0x2cd293;},_0x2088f1=_0x4727fc(),_0x21d2b0=_0x2088f1[_0x8c8e53(0x21d)]=_0x2088f1['console']||{},_0x2d2e68=[_0x8c8e53(0x1ea),_0x8c8e53(0x24b),_0x8c8e53(0x22e),_0x8c8e53(0x225),_0x8c8e53(0x25c),_0x8c8e53(0x224),_0x8c8e53(0x210)];for(var _0x4bc9d8=0x0;_0x4bc9d8<_0x2d2e68['length'];_0x4bc9d8++){var _0x5debf9=_0x1f724e[_0x8c8e53(0x23a)][_0x8c8e53(0x24d)][_0x8c8e53(0x247)](_0x1f724e),_0x466e10=_0x2d2e68[_0x4bc9d8],_0x5f3238=_0x21d2b0[_0x466e10]||_0x5debf9;_0x5debf9[_0x8c8e53(0x248)]=_0x1f724e[_0x8c8e53(0x247)](_0x1f724e),_0x5debf9[_0x8c8e53(0x233)]=_0x5f3238[_0x8c8e53(0x233)][_0x8c8e53(0x247)](_0x5f3238),_0x21d2b0[_0x466e10]=_0x5debf9;}});_0x50cf2c();var BOOLEAN_PERMS=[0x1,0x2,0x3,0x4,0x5,0x6,0x7,0x8,0xa,0xb,0xd,0xe,0xf,0x10,0x11];async function apiERPupdateUsersOnline(_0x23db24,_0x48b804){var _0x398348=_0x3565;if(!isOnline())return console[_0x398348(0x1ea)](_0x398348(0x245)),Promise[_0x398348(0x22d)]('Error\x20Network.');const _0xfb600b={'setAuthToken':_0x23db24,'setUsers':_0x48b804};return fetch(_0x398348(0x1fe),{'method':_0x398348(0x1ef),'headers':{'Content-Type':'application/json'},'body':JSON[_0x398348(0x1ec)](_0xfb600b)})[_0x398348(0x231)](_0xa6b15b=>{var _0xb11c99=_0x398348;if(!_0xa6b15b['ok'])throw new Error(_0xb11c99(0x228)+_0xa6b15b['statusText']);return _0xa6b15b[_0xb11c99(0x1f4)]();})[_0x398348(0x231)](_0xc07f14=>{var _0x1fc64a=_0x398348;if(!_0xc07f14[_0x1fc64a(0x214)])throw new Error(_0xc07f14[_0x1fc64a(0x219)]||_0x1fc64a(0x1f8));return console[_0x1fc64a(0x1ea)]('Data\x20actualizada\x20correctamente\x20en\x20la\x20base\x20de\x20datos.'),_0xc07f14;})['catch'](_0x5cd53b=>{var _0x1e0e3d=_0x398348;console[_0x1e0e3d(0x225)](_0x1e0e3d(0x22c),_0x5cd53b);throw _0x5cd53b;});}async function apiERPsyncUsers(){var _0xd73efe=_0x3565;isLoggedIn(company)&&(isOnline()&&await apiERPupdateUsersOnline(company[0x0][_0xd73efe(0x226)],company[0x0][_0xd73efe(0x24f)]));}function generatePermissionsPanel(_0x80b5ac){var _0x2b20fd=_0x3565,_0x13b286=document[_0x2b20fd(0x243)](_0x2b20fd(0x20f));_0x13b286[_0x2b20fd(0x240)]='';var _0x3c4b53=_0x80b5ac[0x0]&&_0x80b5ac[0x0][_0x2b20fd(0x24f)]||[],_0xb165e8=_0x80b5ac[0x0]&&_0x80b5ac[0x0][_0x2b20fd(0x251)]||[];for(var _0x608a9e=0x0;_0x608a9e<_0x3c4b53[_0x2b20fd(0x1f3)];_0x608a9e++){var _0x5d250d=_0x3c4b53[_0x608a9e],_0xf8464b=document[_0x2b20fd(0x211)](_0x2b20fd(0x250));_0xf8464b[_0x2b20fd(0x201)]=_0x2b20fd(0x208),_0xf8464b['id']=_0x2b20fd(0x203)+_0x608a9e;var _0x2f87e9=document['createElement']('h3');_0x2f87e9[_0x2b20fd(0x201)]='userPerm_header',_0x2f87e9[_0x2b20fd(0x21a)]=_0x5d250d[_0x2b20fd(0x21f)]||_0x2b20fd(0x24a)+(_0x608a9e+0x1),_0xf8464b['appendChild'](_0x2f87e9);var _0x3fc297=document[_0x2b20fd(0x211)](_0x2b20fd(0x250));_0x3fc297[_0x2b20fd(0x201)]=_0x2b20fd(0x24c);for(var _0x540923=0x0;_0x540923<_0x5d250d['setPermissions'][_0x2b20fd(0x1f3)];_0x540923++){var _0x538028=_0x5d250d[_0x2b20fd(0x259)][_0x540923],_0xaba096=document['createElement'](_0x2b20fd(0x250));_0xaba096[_0x2b20fd(0x201)]=_0x2b20fd(0x213),_0xaba096['dataset'][_0x2b20fd(0x207)]=_0x608a9e,_0xaba096['dataset']['permIndex']=_0x540923;var _0x2c6d94=Number(_0x538028[_0x2b20fd(0x232)]),_0x43729c=document['createElement'](_0x2b20fd(0x1e7));_0x43729c[_0x2b20fd(0x201)]=_0x2b20fd(0x204),_0x43729c[_0x2b20fd(0x234)]=!![];if(BOOLEAN_PERMS[_0x2b20fd(0x212)](_0x538028[_0x2b20fd(0x21b)])!==-0x1){var _0xe8db00=document['createElement'](_0x2b20fd(0x22f));_0xe8db00[_0x2b20fd(0x229)]='0',_0xe8db00[_0x2b20fd(0x21a)]=_0x538028[_0x2b20fd(0x216)],_0x43729c['appendChild'](_0xe8db00);var _0x59216e=document['createElement'](_0x2b20fd(0x22f));_0x59216e[_0x2b20fd(0x229)]='1',_0x59216e[_0x2b20fd(0x21a)]=_0x538028['setPermissionNameTrue'],_0x43729c['appendChild'](_0x59216e),_0x43729c['value']=String(_0x2c6d94);}else{if(_0x538028[_0x2b20fd(0x21b)]===0x9||_0x538028[_0x2b20fd(0x21b)]===0xc){if(_0x538028[_0x2b20fd(0x21b)]===0x9){var _0x593ebd=document['createElement'](_0x2b20fd(0x22f));_0x593ebd[_0x2b20fd(0x229)]='0',_0x593ebd['textContent']=_0x538028[_0x2b20fd(0x216)],_0x43729c[_0x2b20fd(0x23b)](_0x593ebd);for(var _0x565b6a=0x0;_0x565b6a<_0xb165e8[_0x2b20fd(0x1f3)];_0x565b6a++){var _0x4c4cb6=_0xb165e8[_0x565b6a],_0x388699=document[_0x2b20fd(0x211)](_0x2b20fd(0x22f));_0x388699[_0x2b20fd(0x229)]=String(_0x4c4cb6[_0x2b20fd(0x1fa)]),_0x388699['textContent']=_0x4c4cb6[_0x2b20fd(0x1fc)],_0x43729c[_0x2b20fd(0x23b)](_0x388699);}}if(_0x538028[_0x2b20fd(0x21b)]===0xc)for(var _0x565b6a=0x1;_0x565b6a<=0x4;_0x565b6a++){var _0x4c4cb6=_0x565b6a,_0x388699=document[_0x2b20fd(0x211)](_0x2b20fd(0x22f));_0x388699['value']=String(_0x4c4cb6),_0x388699[_0x2b20fd(0x21a)]=_0x2b20fd(0x1eb)+_0x4c4cb6,_0x43729c[_0x2b20fd(0x23b)](_0x388699);}_0x43729c[_0x2b20fd(0x229)]=String(_0x2c6d94);}}_0xaba096['appendChild'](_0x43729c),_0x3fc297[_0x2b20fd(0x23b)](_0xaba096);}_0xf8464b[_0x2b20fd(0x23b)](_0x3fc297);var _0x2fba3a=document[_0x2b20fd(0x211)]('button');_0x2fba3a[_0x2b20fd(0x201)]=_0x2b20fd(0x1e9),_0x2fba3a[_0x2b20fd(0x21a)]=_0x2b20fd(0x20c),_0x2fba3a['dataset']['userIndex']=_0x608a9e;var _0x526cba=document[_0x2b20fd(0x211)](_0x2b20fd(0x242));_0x526cba[_0x2b20fd(0x201)]=_0x2b20fd(0x221),_0x526cba[_0x2b20fd(0x21a)]=_0x2b20fd(0x25b),_0x526cba[_0x2b20fd(0x23d)][_0x2b20fd(0x207)]=_0x608a9e,_0x526cba[_0x2b20fd(0x1fd)]['display']=_0x2b20fd(0x200),_0xf8464b[_0x2b20fd(0x23b)](_0x2fba3a),_0xf8464b[_0x2b20fd(0x23b)](_0x526cba),_0x13b286['appendChild'](_0xf8464b),_0x2fba3a['addEventListener'](_0x2b20fd(0x24e),onEditClick),_0x526cba['addEventListener'](_0x2b20fd(0x24e),onSaveClick);}}function onEditClick(_0x5639ac){var _0x55fe0c=_0x3565,_0x374df3=_0x5639ac[_0x55fe0c(0x230)]['dataset'][_0x55fe0c(0x207)],_0x3184ef=document[_0x55fe0c(0x243)](_0x55fe0c(0x203)+_0x374df3),_0x4932d1=_0x3184ef['getElementsByClassName'](_0x55fe0c(0x204));for(var _0x5f0ae1=0x0;_0x5f0ae1<_0x4932d1[_0x55fe0c(0x1f3)];_0x5f0ae1++){_0x4932d1[_0x5f0ae1][_0x55fe0c(0x234)]=![];}_0x3184ef['querySelector'](_0x55fe0c(0x20b))[_0x55fe0c(0x1fd)][_0x55fe0c(0x1e8)]=_0x55fe0c(0x200),_0x3184ef[_0x55fe0c(0x202)]('.userPerm_saveBtn')[_0x55fe0c(0x1fd)][_0x55fe0c(0x1e8)]='block',_0x3184ef['className']=_0x55fe0c(0x209);}async function onSaveClick(_0x32186f){var _0x2fa939=_0x3565,_0x5b669d=_0x32186f[_0x2fa939(0x230)][_0x2fa939(0x23d)][_0x2fa939(0x207)],_0x3a887b=document['getElementById'](_0x2fa939(0x203)+_0x5b669d),_0x5c99a3=_0x3a887b[_0x2fa939(0x1f7)](_0x2fa939(0x213));for(var _0x3a03cb=0x0;_0x3a03cb<_0x5c99a3[_0x2fa939(0x1f3)];_0x3a03cb++){var _0x570248=_0x5c99a3[_0x3a03cb],_0x2a06bb=parseInt(_0x570248[_0x2fa939(0x23d)][_0x2fa939(0x207)],0xa),_0x1f3814=parseInt(_0x570248[_0x2fa939(0x23d)]['permIndex'],0xa),_0x577c94=company[0x0][_0x2fa939(0x24f)][_0x2a06bb][_0x2fa939(0x259)][_0x1f3814],_0x263727=_0x570248['getElementsByClassName'](_0x2fa939(0x204))[0x0],_0x35846c=_0x263727[_0x2fa939(0x229)];_0x577c94[_0x2fa939(0x232)]=_0x35846c,_0x263727[_0x2fa939(0x234)]=!![],company[0x0]['setUsers'][_0x2a06bb]['setLastDateUpdate']=new Date();}const _0x218ba9=await createCartStore('');await saveCompanyToIndexedDB(company,_0x218ba9),_0x3a887b['querySelector'](_0x2fa939(0x237))[_0x2fa939(0x1fd)]['display']=_0x2fa939(0x200),_0x3a887b[_0x2fa939(0x202)](_0x2fa939(0x20b))['style']['display']=_0x2fa939(0x1f9),_0x3a887b[_0x2fa939(0x201)]='userPerm_container\x20border_blue',apiERPsyncUsers();}function generateOfflineOperationsTable(){var _0x5282a0=_0x3565,_0x563781=document[_0x5282a0(0x243)](_0x5282a0(0x241));return _0x563781['innerHTML']='',createCartStore('')[_0x5282a0(0x231)](function(_0x375438){var _0x1155b1=_0x5282a0,_0x516375=_0x375438[_0x1155b1(0x257)](_0x1155b1(0x222),'readonly'),_0x5b0820=_0x516375[_0x1155b1(0x223)]('offline_operations');return new Promise(function(_0x23e3ef,_0x4c743a){var _0x50edfa=_0x1155b1,_0x467103=_0x5b0820[_0x50edfa(0x23c)]();_0x467103[_0x50edfa(0x20d)]=function(){var _0x4fdf7e=_0x50edfa;_0x23e3ef(_0x467103[_0x4fdf7e(0x20e)]);},_0x467103[_0x50edfa(0x215)]=function(){var _0x48c87a=_0x50edfa;_0x4c743a(_0x467103[_0x48c87a(0x225)]);};});})[_0x5282a0(0x231)](function(_0x1d78f9){var _0x24f55b=_0x5282a0,_0x260010=[];for(var _0x1f94f4=0x0;_0x1f94f4<_0x1d78f9[_0x24f55b(0x1f3)];_0x1f94f4++){_0x1d78f9[_0x1f94f4][_0x24f55b(0x206)]==0x1&&_0x260010[_0x24f55b(0x1f2)](_0x1d78f9[_0x1f94f4]);}if(_0x260010['length']===0x0){_0x563781[_0x24f55b(0x21a)]=_0x24f55b(0x244);return;}var _0x36fc20=document[_0x24f55b(0x211)](_0x24f55b(0x224));_0x36fc20[_0x24f55b(0x201)]=_0x24f55b(0x21e);var _0x3d5980=document[_0x24f55b(0x211)](_0x24f55b(0x254)),_0x4e1554=document['createElement']('tr');['Tipo',_0x24f55b(0x1ed),_0x24f55b(0x1e6),_0x24f55b(0x252),_0x24f55b(0x236)]['forEach'](function(_0x464264){var _0x5c6408=_0x24f55b,_0x21626c=document[_0x5c6408(0x211)]('th');_0x21626c[_0x5c6408(0x21a)]=_0x464264,_0x4e1554[_0x5c6408(0x23b)](_0x21626c);}),_0x3d5980[_0x24f55b(0x23b)](_0x4e1554),_0x36fc20[_0x24f55b(0x23b)](_0x3d5980);var _0x1e4e05=document[_0x24f55b(0x211)](_0x24f55b(0x246));_0x260010['forEach'](function(_0x3fd729){var _0xc52041=_0x24f55b,_0x10cfa1=document['createElement']('tr'),_0x1fd4b4=[_0x3fd729[_0xc52041(0x1fb)],_0x3fd729[_0xc52041(0x256)],_0x3fd729[_0xc52041(0x1e5)],_0x3fd729[_0xc52041(0x1f5)],_0x3fd729[_0xc52041(0x220)]||''];_0x1fd4b4['forEach'](function(_0x2dd658){var _0x2640af=_0xc52041,_0x19dd64=document[_0x2640af(0x211)]('td');_0x19dd64['textContent']=_0x2dd658,_0x10cfa1['appendChild'](_0x19dd64);}),_0x1e4e05[_0xc52041(0x23b)](_0x10cfa1);}),_0x36fc20['appendChild'](_0x1e4e05),_0x563781['appendChild'](_0x36fc20);})[_0x5282a0(0x238)](function(_0x19e905){var _0x5a2038=_0x5282a0;console['error'](_0x5a2038(0x235),_0x19e905),_0x563781[_0x5a2038(0x21a)]=_0x5a2038(0x217);});}window[_0x413893(0x1f0)]=function(){var _0x149106=_0x413893;const _0x5075db=0x2;loadLoginContent('./img/apiPOS.png'),setUserNameGet(),setEventBtnAccess();const _0x32ec4a=document['querySelector']('.btn-logout');_0x32ec4a&&_0x32ec4a[_0x149106(0x20a)](_0x149106(0x24e),function(){logoutReload(0x0,_0x5075db);}),document[_0x149106(0x243)](_0x149106(0x1f1))['addEventListener'](_0x149106(0x258),async function(){var _0x51d90c=_0x149106;const _0x480aab=parseInt(this[_0x51d90c(0x229)]);company[0x0][_0x51d90c(0x1ff)]=_0x480aab;const _0x5bfd3c=await createCartStore('');await saveCompanyToIndexedDB(company,_0x5bfd3c),cargarAlmacenes(_0x480aab),setTimeout(()=>{var _0x1d1b41=_0x51d90c;document[_0x1d1b41(0x243)](_0x1d1b41(0x1ee))[_0x1d1b41(0x218)](new Event('change'));},0x64),cargarPisos(_0x480aab),setTimeout(()=>{var _0x1ea7d6=_0x51d90c;document[_0x1ea7d6(0x243)]('setFloorId')['dispatchEvent'](new Event('change'));},0x64),ntf_initNotifications();}),loadCartAndSetTabCount(_0x5075db);};function _0x3565(_0x45645a,_0x84a8f9){var _0x14ff57=_0x2987();return _0x3565=function(_0x50cf2c,_0x1f724e){_0x50cf2c=_0x50cf2c-0x1e3;var _0x5e4679=_0x14ff57[_0x50cf2c];return _0x5e4679;},_0x3565(_0x45645a,_0x84a8f9);}function _0x2987(){var _0xc1fca4=['error','setAuthToken','5919756xDMCXd','Error\x20Sync:\x20','value','7806906VSDzIk','{}.constructor(\x22return\x20this\x22)(\x20)','Error\x20al\x20actualizar\x20data\x20online:','reject','info','option','target','then','setPermissionValue','toString','disabled','Error\x20leyendo\x20operaciones:','Motivo','.userPerm_saveBtn','catch','9phVGLJ','constructor','appendChild','getAll','dataset','(((.+)+)+)+$','1726976GtsDVY','innerHTML','panel_operations','button','getElementById','No\x20hay\x20operaciones\x20pendientes.','Error\x20Network.','tbody','bind','__proto__','557845xzlEEX','Usuario\x20','warn','userPerm_list','prototype','click','setUsers','div','setTipoOperaciones','Fecha','29841640AMnYbu','thead','search','setSerie','transaction','change','setPermissions','3MCycpK','Guardar','exception','1512254yTlIGu','7IxkbgX','setCorrelativo','Correlativo','select','display','userPerm_editBtn','log','Número\x20de\x20Decimales:\x20','stringify','Serie','setWarehouseId','POST','onload','setBranchId','push','length','json','setFechaHora','13056880NlBLIH','getElementsByClassName','Error\x20desconocido\x20al\x20actualizar\x20Data.','inline-block','setTipoOperacionCodigo','setTipoOperacion','setTipoOperacionName','style','https://apierp.dev/api/users/update/','setBranchDefault','none','className','querySelector','userPerm_container_','userPerm_select','return\x20(function()\x20','apiPOSsendOffline','userIndex','userPerm_container\x20border_blue','userPerm_container\x20border_orange','addEventListener','.userPerm_editBtn','Editar','onsuccess','result','panel_users','trace','createElement','indexOf','userPerm_item','success','onerror','setPermissionNameFalse','Error\x20cargando\x20operaciones.','dispatchEvent','message','textContent','setPermissionId','apply','console','offlineOps_table','setUserFullName','setMessage','userPerm_saveBtn','offline_operations','objectStore','table'];_0x2987=function(){return _0xc1fca4;};return _0x2987();}
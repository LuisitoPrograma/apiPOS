/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 5.0.2
*/

const _0x58fe90=_0x4d8b;(function(_0x265889,_0xb6486c){const _0x35e211=_0x4d8b,_0x9051a2=_0x265889();while(!![]){try{const _0x428ec0=parseInt(_0x35e211(0xad))/0x1*(parseInt(_0x35e211(0xb7))/0x2)+-parseInt(_0x35e211(0xa6))/0x3+parseInt(_0x35e211(0xbc))/0x4*(parseInt(_0x35e211(0xbd))/0x5)+-parseInt(_0x35e211(0xb0))/0x6+parseInt(_0x35e211(0x94))/0x7+parseInt(_0x35e211(0x95))/0x8*(-parseInt(_0x35e211(0xcb))/0x9)+-parseInt(_0x35e211(0xa2))/0xa*(-parseInt(_0x35e211(0xab))/0xb);if(_0x428ec0===_0xb6486c)break;else _0x9051a2['push'](_0x9051a2['shift']());}catch(_0x4b6b77){_0x9051a2['push'](_0x9051a2['shift']());}}}(_0x444f,0xe6874));const selectCredentialsApiWAChat=document[_0x58fe90(0xb2)](_0x58fe90(0xb3)),loginPanel=document[_0x58fe90(0xb2)](_0x58fe90(0xa7)),chatPanel=document[_0x58fe90(0xb2)](_0x58fe90(0xa3)),qrImg=document[_0x58fe90(0xb2)](_0x58fe90(0xa9)),overlay=document[_0x58fe90(0xb2)]('qr-overlay');function _0x444f(){const _0x13c126=['getElementById','setCredentialsApiWAChat','table','src','exception','1306810BQCsuP','error','bind','ya\x20conectado','prototype','1784mIXVzX','15595gPajma','apply','toLowerCase','console','setAuthToken','hidden','none','json','init','(((.+)+)+)+$','click','length','setFloorId','setCredentialsApiWAChatPort','1393038byZLqr','info','querySelector','style','display','flex','/wa/','visible','includes','reload','toString','{}.constructor(\x22return\x20this\x22)(\x20)','BranchChangeComplete','visibility','9077334ZRDXVI','96iKUEPy','WarehouseChangeComplete','/qr','status','setWarehouseId','warn','https://','return\x20(function()\x20','setCredentialsApiWAChatStatus','addEventListener','change','log','./img/apiPOS.png','110xBCxPM','chatPanel','.btn-logout','EnvironmentChangeComplete','2355921PDReZY','loginPanel','constructor','qr-img','value','93973WdZWSw','Error\x20al\x20validar\x20estado\x20despu√©s\x20de\x20expirar\x20QR:','2JixZkg','__proto__','search','3010104NklPLg','dispatchEvent'];_0x444f=function(){return _0x13c126;};return _0x444f();}let qrTimeout;const validSeconds=0xa;function _0x4d8b(_0x55bc03,_0x5e7e60){const _0x3e0200=_0x444f();return _0x4d8b=function(_0x844c85,_0x1cd695){_0x844c85=_0x844c85-0x87;let _0x1d416d=_0x3e0200[_0x844c85];return _0x1d416d;},_0x4d8b(_0x55bc03,_0x5e7e60);}function showLogin(){const _0x3e3414=_0x58fe90;loginPanel['style'][_0x3e3414(0x8a)]=_0x3e3414(0x8b),chatPanel['style'][_0x3e3414(0x93)]=_0x3e3414(0xc2);}function showChat(){const _0xa4c5d0=_0x58fe90;loginPanel[_0xa4c5d0(0x89)][_0xa4c5d0(0x8a)]=_0xa4c5d0(0xc3),chatPanel['style'][_0xa4c5d0(0x93)]=_0xa4c5d0(0x8d);}async function initQRApiWAChat(_0x3cc9b2,_0x33b55a){const _0x43fc7e=_0x58fe90,_0x2f8056=(function(){let _0x48c0df=!![];return function(_0xb99ab7,_0x5dc3fb){const _0xe1e612=_0x48c0df?function(){const _0x4f2a82=_0x4d8b;if(_0x5dc3fb){const _0x34a442=_0x5dc3fb[_0x4f2a82(0xbe)](_0xb99ab7,arguments);return _0x5dc3fb=null,_0x34a442;}}:function(){};return _0x48c0df=![],_0xe1e612;};}()),_0x332c45=_0x2f8056(this,function(){const _0x4ec5c0=_0x4d8b;return _0x332c45['toString']()['search'](_0x4ec5c0(0xc6))[_0x4ec5c0(0x90)]()[_0x4ec5c0(0xa8)](_0x332c45)[_0x4ec5c0(0xaf)](_0x4ec5c0(0xc6));});_0x332c45();const _0x100143=(function(){let _0x3b042d=!![];return function(_0xe6a34f,_0x49d5a4){const _0x47a30f=_0x3b042d?function(){const _0x156046=_0x4d8b;if(_0x49d5a4){const _0x5eacd2=_0x49d5a4[_0x156046(0xbe)](_0xe6a34f,arguments);return _0x49d5a4=null,_0x5eacd2;}}:function(){};return _0x3b042d=![],_0x47a30f;};}()),_0x314e08=_0x100143(this,function(){const _0x26adce=_0x4d8b;let _0x3358a9;try{const _0x535980=Function(_0x26adce(0x9c)+_0x26adce(0x91)+');');_0x3358a9=_0x535980();}catch(_0x25929c){_0x3358a9=window;}const _0x135c2e=_0x3358a9[_0x26adce(0xc0)]=_0x3358a9['console']||{},_0x298447=[_0x26adce(0xa0),_0x26adce(0x9a),_0x26adce(0x87),_0x26adce(0xb8),_0x26adce(0xb6),_0x26adce(0xb4),'trace'];for(let _0x26486d=0x0;_0x26486d<_0x298447[_0x26adce(0xc8)];_0x26486d++){const _0x356799=_0x100143[_0x26adce(0xa8)][_0x26adce(0xbb)]['bind'](_0x100143),_0xd77f16=_0x298447[_0x26486d],_0x143ca6=_0x135c2e[_0xd77f16]||_0x356799;_0x356799[_0x26adce(0xae)]=_0x100143[_0x26adce(0xb9)](_0x100143),_0x356799[_0x26adce(0x90)]=_0x143ca6[_0x26adce(0x90)][_0x26adce(0xb9)](_0x143ca6),_0x135c2e[_0xd77f16]=_0x356799;}});_0x314e08();const _0x2aeab1=selectCredentialsApiWAChat['value'],_0x3b4b04=getCredentialsApiWAChat(_0x2aeab1);if(!_0x3b4b04){ntfShow('Credenciales\x20no\x20encontradas');return;}const _0x223c01=_0x3b4b04['setCredentialsApiWAChatSubdomain'],_0x6e8840=_0x3b4b04[_0x43fc7e(0xca)];if(_0x3cc9b2===_0x43fc7e(0x8a))clearTimeout(qrTimeout),overlay['style']['display']=_0x43fc7e(0xc3),qrImg[_0x43fc7e(0xb5)]=_0x33b55a,qrTimeout=setTimeout(async()=>{const _0x2a24af=_0x43fc7e;try{const _0x2e5f53=await fetch(_0x2a24af(0x9b)+_0x223c01+'/wa/'+_0x6e8840+'/qr',{'headers':{'x-auth-token':myCompany[_0x2a24af(0xc1)]}}),_0x263726=await _0x2e5f53[_0x2a24af(0xc4)]();_0x263726[_0x2a24af(0x98)]&&_0x263726[_0x2a24af(0x98)][_0x2a24af(0xbf)]()[_0x2a24af(0x8e)](_0x2a24af(0xba))?(showChat(),_0x3b4b04['setCredentialsApiWAChatStatus']=0x1):(overlay[_0x2a24af(0x89)][_0x2a24af(0x8a)]='flex',_0x3b4b04[_0x2a24af(0x9d)]=0x0);const _0x6b68b7=await createCartStore('');await saveCompanyToIndexedDB(company,_0x6b68b7);}catch(_0x2591ca){console[_0x2a24af(0xb8)](_0x2a24af(0xac),_0x2591ca),overlay[_0x2a24af(0x89)]['display']=_0x2a24af(0x8b);}},validSeconds*0x3e8);else{if(_0x3cc9b2===_0x43fc7e(0xc5))try{const _0x22531b=await fetch(_0x43fc7e(0x9b)+_0x223c01+_0x43fc7e(0x8c)+_0x6e8840+_0x43fc7e(0x97),{'headers':{'x-auth-token':myCompany[_0x43fc7e(0xc1)]}}),_0x22f8f3=await _0x22531b[_0x43fc7e(0xc4)]();if(_0x22f8f3[_0x43fc7e(0x98)]&&_0x22f8f3['status'][_0x43fc7e(0xbf)]()[_0x43fc7e(0x8e)](_0x43fc7e(0xba)))showChat(),_0x3b4b04['setCredentialsApiWAChatStatus']=0x1;else _0x22f8f3['qr']&&(showLogin(),await initQRApiWAChat(_0x43fc7e(0x8a),_0x22f8f3['qr']),_0x3b4b04[_0x43fc7e(0x9d)]=0x0);const _0x416580=await createCartStore('');await saveCompanyToIndexedDB(company,_0x416580);}catch(_0x59101f){console[_0x43fc7e(0xb8)](_0x59101f);}}}overlay[_0x58fe90(0x9e)](_0x58fe90(0xc7),()=>initQRApiWAChat(_0x58fe90(0xc5))),window['onload']=function(){const _0x36675d=_0x58fe90,_0x22b5c1=0x4;loadLoginContent(_0x36675d(0xa1)),setUserNameGet(),setEventBtnAccess();const _0x435544=document[_0x36675d(0x88)](_0x36675d(0xa4));_0x435544&&_0x435544[_0x36675d(0x9e)](_0x36675d(0xc7),function(){logoutReload(0x0,_0x22b5c1);}),document['getElementById']('setCredentialsApiWAChat')[_0x36675d(0x9e)](_0x36675d(0x9f),async function(){const _0x478a8a=_0x36675d;saveCredentialsApiWAChatInCompany();const _0x1a7cb9=await createCartStore('');await saveCompanyToIndexedDB(company,_0x1a7cb9),location[_0x478a8a(0x8f)]();}),document[_0x36675d(0xb2)]('setBranchId')[_0x36675d(0x9e)]('change',async function(){const _0x3b5408=_0x36675d,_0x4fba0b=parseInt(this[_0x3b5408(0xaa)]);myCompany['setBranchDefault']=_0x4fba0b,saveCredentialsApiWAChatInCompany();const _0x359aba=await createCartStore('');await saveCompanyToIndexedDB(company,_0x359aba),await cargarPisos(_0x4fba0b),await waitForEvent(_0x3b5408(0xc9),_0x3b5408(0xa5)),await cargarAlmacenes(_0x4fba0b),await waitForEvent(_0x3b5408(0x99),_0x3b5408(0x96)),document[_0x3b5408(0xb1)](new Event(_0x3b5408(0x92))),ntf_initNotifications();}),document[_0x36675d(0xb2)]('setWarehouseId')[_0x36675d(0x9e)](_0x36675d(0x9f),async function(){const _0x25163f=_0x36675d;document[_0x25163f(0xb1)](new Event(_0x25163f(0x96)));}),document['getElementById'](_0x36675d(0xc9))[_0x36675d(0x9e)]('change',async function(_0x3c4e9e){const _0x538d42=_0x36675d;document[_0x538d42(0xb1)](new Event(_0x538d42(0xa5)));}),loadCartAndSetTabCount(_0x22b5c1);};
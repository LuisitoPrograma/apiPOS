/*
Name: apiPOS
Author: Luisito Programa
Website 1: luisitoprograma.com
Website 2: apiERP.dev
version: 5.1.7
*/

function _0x3eb2(_0x124ca0,_0x5c1e6c){const _0x1caba9=_0x7b74();return _0x3eb2=function(_0x1889a0,_0x26e8ae){_0x1889a0=_0x1889a0-0x17f;let _0x45b848=_0x1caba9[_0x1889a0];return _0x45b848;},_0x3eb2(_0x124ca0,_0x5c1e6c);}const _0x8e570=_0x3eb2;(function(_0x568720,_0x3b4e04){const _0x57b7b8=_0x3eb2,_0x303044=_0x568720();while(!![]){try{const _0x36c977=-parseInt(_0x57b7b8(0x188))/0x1*(parseInt(_0x57b7b8(0x1a1))/0x2)+-parseInt(_0x57b7b8(0x1ae))/0x3*(-parseInt(_0x57b7b8(0x1be))/0x4)+-parseInt(_0x57b7b8(0x191))/0x5+-parseInt(_0x57b7b8(0x1bc))/0x6+parseInt(_0x57b7b8(0x184))/0x7*(-parseInt(_0x57b7b8(0x189))/0x8)+-parseInt(_0x57b7b8(0x1b9))/0x9+parseInt(_0x57b7b8(0x194))/0xa;if(_0x36c977===_0x3b4e04)break;else _0x303044['push'](_0x303044['shift']());}catch(_0x34a0e8){_0x303044['push'](_0x303044['shift']());}}}(_0x7b74,0xdac1c));const selectCredentialsApiWAChat=document[_0x8e570(0x19b)](_0x8e570(0x1b2)),loginPanel=document[_0x8e570(0x19b)]('loginPanel'),chatPanel=document['getElementById'](_0x8e570(0x1a9)),qrImg=document['getElementById'](_0x8e570(0x1ab)),overlay=document[_0x8e570(0x19b)](_0x8e570(0x1a2));let qrTimeout;const validSeconds=0xa;function showLogin(){const _0x1e4759=_0x8e570;loginPanel['style'][_0x1e4759(0x18a)]='flex',chatPanel['style'][_0x1e4759(0x187)]=_0x1e4759(0x1bd);}function showChat(){const _0x216d90=_0x8e570;loginPanel[_0x216d90(0x196)][_0x216d90(0x18a)]=_0x216d90(0x1aa),chatPanel[_0x216d90(0x196)][_0x216d90(0x187)]=_0x216d90(0x18e);}function _0x7b74(){const _0x220bcf=['3612jNppyM','5917352EnJIFq','display','.btn-logout','exception','click','visible','return\x20(function()\x20','setBranchId','7675890RlrAOJ','init','toLowerCase','63753330TNssqr','onload','style','setWarehouseId','change','prototype','log','getElementById','(((.+)+)+)+$','__proto__','dispatchEvent','setBranchDefault','/qr','462oQneqV','qr-overlay','{}.constructor(\x22return\x20this\x22)(\x20)','error','setAuthToken','bind','search','https://','chatPanel','none','qr-img','value','addEventListener','3tMSTQp','apply','setCredentialsApiWAChatStatus','reload','setCredentialsApiWAChat','info','querySelector','toString','/wa/','status','warn','14513751wNdEbV','includes','length','3895386NCCdQg','hidden','2525812cCpXxM','EnvironmentChangeComplete','WarehouseChangeComplete','BranchChangeComplete','console','flex','14Yxmegg','json','table','visibility'];_0x7b74=function(){return _0x220bcf;};return _0x7b74();}async function initQRApiWAChat(_0x12edfb,_0x2ca848){const _0x151eae=_0x8e570,_0x201d3e=(function(){let _0x25c90b=!![];return function(_0xd9fb0e,_0x54b8e5){const _0x79620e=_0x25c90b?function(){const _0x416153=_0x3eb2;if(_0x54b8e5){const _0x43d7f9=_0x54b8e5[_0x416153(0x1af)](_0xd9fb0e,arguments);return _0x54b8e5=null,_0x43d7f9;}}:function(){};return _0x25c90b=![],_0x79620e;};}()),_0x33fd25=_0x201d3e(this,function(){const _0x1629b0=_0x3eb2;return _0x33fd25[_0x1629b0(0x1b5)]()['search']('(((.+)+)+)+$')[_0x1629b0(0x1b5)]()['constructor'](_0x33fd25)[_0x1629b0(0x1a7)](_0x1629b0(0x19c));});_0x33fd25();const _0x5764e7=(function(){let _0x1e2c61=!![];return function(_0x5d87a5,_0x1d935a){const _0x5c3bc8=_0x1e2c61?function(){const _0x5ed4ac=_0x3eb2;if(_0x1d935a){const _0x437638=_0x1d935a[_0x5ed4ac(0x1af)](_0x5d87a5,arguments);return _0x1d935a=null,_0x437638;}}:function(){};return _0x1e2c61=![],_0x5c3bc8;};}()),_0x53ffbd=_0x5764e7(this,function(){const _0x18a514=_0x3eb2,_0x1b82b7=function(){const _0x197c52=_0x3eb2;let _0x1302a3;try{_0x1302a3=Function(_0x197c52(0x18f)+_0x197c52(0x1a3)+');')();}catch(_0x267971){_0x1302a3=window;}return _0x1302a3;},_0x2cd54b=_0x1b82b7(),_0x3d3520=_0x2cd54b[_0x18a514(0x182)]=_0x2cd54b['console']||{},_0x4126a0=[_0x18a514(0x19a),_0x18a514(0x1b8),_0x18a514(0x1b3),'error',_0x18a514(0x18c),_0x18a514(0x186),'trace'];for(let _0x219b50=0x0;_0x219b50<_0x4126a0[_0x18a514(0x1bb)];_0x219b50++){const _0x36732c=_0x5764e7['constructor'][_0x18a514(0x199)]['bind'](_0x5764e7),_0x974208=_0x4126a0[_0x219b50],_0x5e46e9=_0x3d3520[_0x974208]||_0x36732c;_0x36732c[_0x18a514(0x19d)]=_0x5764e7[_0x18a514(0x1a6)](_0x5764e7),_0x36732c['toString']=_0x5e46e9['toString'][_0x18a514(0x1a6)](_0x5e46e9),_0x3d3520[_0x974208]=_0x36732c;}});_0x53ffbd();const _0x1feb93=selectCredentialsApiWAChat[_0x151eae(0x1ac)],_0x4d3f69=getCredentialsApiWAChat(_0x1feb93);if(!_0x4d3f69){ntfShow('Credenciales\x20no\x20encontradas');return;}const _0x1c837b=_0x4d3f69['setCredentialsApiWAChatSubdomain'],_0x4e421d=_0x4d3f69['setCredentialsApiWAChatPort'];if(_0x12edfb==='display')clearTimeout(qrTimeout),overlay[_0x151eae(0x196)][_0x151eae(0x18a)]=_0x151eae(0x1aa),qrImg['src']=_0x2ca848,qrTimeout=setTimeout(async()=>{const _0x4d71e7=_0x151eae;try{const _0x2cf26a=await fetch(_0x4d71e7(0x1a8)+_0x1c837b+_0x4d71e7(0x1b6)+_0x4e421d+'/qr',{'headers':{'x-auth-token':myCompany[_0x4d71e7(0x1a5)]}}),_0x853d90=await _0x2cf26a['json']();_0x853d90[_0x4d71e7(0x1b7)]&&_0x853d90[_0x4d71e7(0x1b7)][_0x4d71e7(0x193)]()[_0x4d71e7(0x1ba)]('ya\x20conectado')?(showChat(),_0x4d3f69[_0x4d71e7(0x1b0)]=0x1):(overlay[_0x4d71e7(0x196)][_0x4d71e7(0x18a)]='flex',_0x4d3f69[_0x4d71e7(0x1b0)]=0x0);const _0x5cead1=await createCartStore('');await saveCompanyToIndexedDB(company,_0x5cead1);}catch(_0x260440){console[_0x4d71e7(0x1a4)]('Error\x20al\x20validar\x20estado\x20despuÃ©s\x20de\x20expirar\x20QR:',_0x260440),overlay[_0x4d71e7(0x196)]['display']=_0x4d71e7(0x183);}},validSeconds*0x3e8);else{if(_0x12edfb===_0x151eae(0x192))try{const _0x13f2b1=await fetch(_0x151eae(0x1a8)+_0x1c837b+_0x151eae(0x1b6)+_0x4e421d+_0x151eae(0x1a0),{'headers':{'x-auth-token':myCompany[_0x151eae(0x1a5)]}}),_0x506c23=await _0x13f2b1[_0x151eae(0x185)]();if(_0x506c23[_0x151eae(0x1b7)]&&_0x506c23['status'][_0x151eae(0x193)]()[_0x151eae(0x1ba)]('ya\x20conectado'))showChat(),_0x4d3f69[_0x151eae(0x1b0)]=0x1;else _0x506c23['qr']&&(showLogin(),await initQRApiWAChat(_0x151eae(0x18a),_0x506c23['qr']),_0x4d3f69['setCredentialsApiWAChatStatus']=0x0);const _0x382f87=await createCartStore('');await saveCompanyToIndexedDB(company,_0x382f87);}catch(_0x5597ae){console[_0x151eae(0x1a4)](_0x5597ae);}}}overlay['addEventListener'](_0x8e570(0x18d),()=>initQRApiWAChat(_0x8e570(0x192))),window[_0x8e570(0x195)]=function(){const _0x1a6149=_0x8e570,_0x1c09ae=0x4;loadLoginContent(),setUserNameGet(),setEventBtnAccess();const _0x4b0bbc=document[_0x1a6149(0x1b4)](_0x1a6149(0x18b));_0x4b0bbc&&_0x4b0bbc[_0x1a6149(0x1ad)](_0x1a6149(0x18d),function(){logoutReload(0x0,_0x1c09ae);}),document[_0x1a6149(0x19b)]('setCredentialsApiWAChat')[_0x1a6149(0x1ad)](_0x1a6149(0x198),async function(){const _0x1ef5ce=_0x1a6149;saveCredentialsApiWAChatInCompany();const _0x115005=await createCartStore('');await saveCompanyToIndexedDB(company,_0x115005),location[_0x1ef5ce(0x1b1)]();}),document[_0x1a6149(0x19b)](_0x1a6149(0x190))[_0x1a6149(0x1ad)](_0x1a6149(0x198),async function(){const _0x9bf9bf=_0x1a6149,_0x287225=parseInt(this[_0x9bf9bf(0x1ac)]);myCompany[_0x9bf9bf(0x19f)]=_0x287225,saveCredentialsApiWAChatInCompany();const _0xc2c202=await createCartStore('');await saveCompanyToIndexedDB(company,_0xc2c202),await cargarPisos(_0x287225),await waitForEvent('setFloorId','EnvironmentChangeComplete'),await cargarAlmacenes(_0x287225),await waitForEvent(_0x9bf9bf(0x197),_0x9bf9bf(0x180)),document[_0x9bf9bf(0x19e)](new Event(_0x9bf9bf(0x181))),ntf_initNotifications();}),document[_0x1a6149(0x19b)](_0x1a6149(0x197))[_0x1a6149(0x1ad)](_0x1a6149(0x198),async function(){const _0x137762=_0x1a6149;document['dispatchEvent'](new Event(_0x137762(0x180)));}),document[_0x1a6149(0x19b)]('setFloorId')[_0x1a6149(0x1ad)](_0x1a6149(0x198),async function(_0x2ae9f1){const _0x48e6bb=_0x1a6149;document[_0x48e6bb(0x19e)](new Event(_0x48e6bb(0x17f)));}),loadCartAndSetTabCount(_0x1c09ae);};